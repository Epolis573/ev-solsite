/*! For license information please see bundlesmb.js.LICENSE.txt */ (() => {
    var e,
    t,
    n,
    i,
    r = {
      761: (e) => {
        function t(e) {
          return Promise.resolve().then(() => {
            var t = new Error("Cannot find module '" + e + "'");
            throw ((t.code = "MODULE_NOT_FOUND"), t);
          });
        }
        (t.keys = () => []), (t.resolve = t), (t.id = 761), (e.exports = t);
      }
    },
    a = {};
  function o(e) {
    var t = a[e];
    if (void 0 !== t) return t.exports;
    var n = (a[e] = { exports: {} });
    return r[e](n, n.exports, o), n.exports;
  }
  (o.m = r),
    (t = Object.getPrototypeOf
      ? (e) => Object.getPrototypeOf(e)
      : (e) => e.__proto__),
    (o.t = function (n, i) {
      if ((1 & i && (n = this(n)), 8 & i)) return n;
      if ("object" == typeof n && n) {
        if (4 & i && n.__esModule) return n;
        if (16 & i && "function" == typeof n.then) return n;
      }
      var r = Object.create(null);
      o.r(r);
      var a = {};
      e = e || [null, t({}), t([]), t(t)];
      for (var s = 2 & i && n; "object" == typeof s && !~e.indexOf(s); s = t(s))
        Object.getOwnPropertyNames(s).forEach((e) => (a[e] = () => n[e]));
      return (a.default = () => n), o.d(r, a), r;
    }),
    (o.d = (e, t) => {
      for (var n in t)
        o.o(t, n) &&
          !o.o(e, n) &&
          Object.defineProperty(e, n, { enumerable: !0, get: t[n] });
    }),
    (o.f = {}),
    (o.e = (e) =>
      Promise.all(Object.keys(o.f).reduce((t, n) => (o.f[n](e, t), t), []))),
    (o.u = (e) => e + ".bundlesmb.js"),
    (o.g = (function () {
      if ("object" == typeof globalThis) return globalThis;
      try {
        return this || new Function("return this")();
      } catch (e) {
        if ("object" == typeof window) return window;
      }
    })()),
    (o.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t)),
    (n = {}),
    (i = "pj1:"),
    (o.l = (e, t, r, a) => {
      if (n[e]) n[e].push(t);
      else {
        var s, l;
        if (void 0 !== r)
          for (
            var u = document.getElementsByTagName("script"), c = 0;
            c < u.length;
            c++
          ) {
            var h = u[c];
            if (
              h.getAttribute("src") == e ||
              h.getAttribute("data-webpack") == i + r
            ) {
              s = h;
              break;
            }
          }
        s ||
          ((l = !0),
          ((s = document.createElement("script")).charset = "utf-8"),
          (s.timeout = 120),
          o.nc && s.setAttribute("nonce", o.nc),
          s.setAttribute("data-webpack", i + r),
          (s.src = e)),
          (n[e] = [t]);
        var d = (t, i) => {
            (s.onerror = s.onload = null), clearTimeout(p);
            var r = n[e];
            if (
              (delete n[e],
              s.parentNode && s.parentNode.removeChild(s),
              r && r.forEach((e) => e(i)),
              t)
            )
              return t(i);
          },
          p = setTimeout(
            d.bind(null, void 0, { type: "timeout", target: s }),
            12e4
          );
        (s.onerror = d.bind(null, s.onerror)),
          (s.onload = d.bind(null, s.onload)),
          l && document.head.appendChild(s);
      }
    }),
    (o.r = (e) => {
      "undefined" != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }),
        Object.defineProperty(e, "__esModule", { value: !0 });
    }),
    (() => {
      var e;
      o.g.importScripts && (e = o.g.location + "");
      var t = o.g.document;
      if (
        !e &&
        t &&
        (t.currentScript &&
          "SCRIPT" === t.currentScript.tagName.toUpperCase() &&
          (e = t.currentScript.src),
        !e)
      ) {
        var n = t.getElementsByTagName("script");
        if (n.length)
          for (var i = n.length - 1; i > -1 && (!e || !/^http(s?):/.test(e)); )
            e = n[i--].src;
      }
      if (!e)
        throw new Error(
          "Automatic publicPath is not supported in this browser"
        );
      (e = e
        .replace(/#.*$/, "")
        .replace(/\?.*$/, "")
        .replace(/\/[^\/]+$/, "/")),
        (o.p = e);
    })(),
    (() => {
      var e = { 792: 0 };
      o.f.j = (t, n) => {
        var i = o.o(e, t) ? e[t] : void 0;
        if (0 !== i)
          if (i) n.push(i[2]);
          else {
            var r = new Promise((n, r) => (i = e[t] = [n, r]));
            n.push((i[2] = r));
            var a = o.p + o.u(t),
              s = new Error();
            o.l(
              a,
              (n) => {
                if (o.o(e, t) && (0 !== (i = e[t]) && (e[t] = void 0), i)) {
                  var r = n && ("load" === n.type ? "missing" : n.type),
                    a = n && n.target && n.target.src;
                  (s.message =
                    "Loading chunk " + t + " failed.\n(" + r + ": " + a + ")"),
                    (s.name = "ChunkLoadError"),
                    (s.type = r),
                    (s.request = a),
                    i[1](s);
                }
              },
              "chunk-" + t,
              t
            );
          }
      };
      var t = (t, n) => {
          var i,
            r,
            [a, s, l] = n,
            u = 0;
          if (a.some((t) => 0 !== e[t])) {
            for (i in s) o.o(s, i) && (o.m[i] = s[i]);
            l && l(o);
          }
          for (t && t(n); u < a.length; u++)
            (r = a[u]), o.o(e, r) && e[r] && e[r][0](), (e[r] = 0);
        },
        n = (self.webpackChunkpj1 = self.webpackChunkpj1 || []);
      n.forEach(t.bind(null, 0)), (n.push = t.bind(null, n.push.bind(n)));
    })(),
    (() => {
      "use strict";
      function e() {
        e = function () {
          return n;
        };
        var t,
          n = {},
          i = Object.prototype,
          r = i.hasOwnProperty,
          a =
            Object.defineProperty ||
            function (e, t, n) {
              e[t] = n.value;
            },
          o = "function" == typeof Symbol ? Symbol : {},
          s = o.iterator || "@@iterator",
          l = o.asyncIterator || "@@asyncIterator",
          u = o.toStringTag || "@@toStringTag";
        function c(e, t, n) {
          return (
            Object.defineProperty(e, t, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0
            }),
            e[t]
          );
        }
        try {
          c({}, "");
        } catch (t) {
          c = function (e, t, n) {
            return (e[t] = n);
          };
        }
        function h(e, t, n, i) {
          var r = t && t.prototype instanceof _ ? t : _,
            o = Object.create(r.prototype),
            s = new L(i || []);
          return a(o, "_invoke", { value: C(e, n, s) }), o;
        }
        function d(e, t, n) {
          try {
            return { type: "normal", arg: e.call(t, n) };
          } catch (e) {
            return { type: "throw", arg: e };
          }
        }
        n.wrap = h;
        var p = "suspendedStart",
          f = "suspendedYield",
          v = "executing",
          m = "completed",
          g = {};
        function _() {}
        function y() {}
        function b() {}
        var x = {};
        c(x, s, function () {
          return this;
        });
        var w = Object.getPrototypeOf,
          S = w && w(w(R([])));
        S && S !== i && r.call(S, s) && (x = S);
        var T = (b.prototype = _.prototype = Object.create(x));
        function k(e) {
          ["next", "throw", "return"].forEach(function (t) {
            c(e, t, function (e) {
              return this._invoke(t, e);
            });
          });
        }
        function E(e, t) {
          function n(i, a, o, s) {
            var l = d(e[i], e, a);
            if ("throw" !== l.type) {
              var u = l.arg,
                c = u.value;
              return c && "object" == M(c) && r.call(c, "__await")
                ? t.resolve(c.__await).then(
                    function (e) {
                      n("next", e, o, s);
                    },
                    function (e) {
                      n("throw", e, o, s);
                    }
                  )
                : t.resolve(c).then(
                    function (e) {
                      (u.value = e), o(u);
                    },
                    function (e) {
                      return n("throw", e, o, s);
                    }
                  );
            }
            s(l.arg);
          }
          var i;
          a(this, "_invoke", {
            value: function (e, r) {
              function a() {
                return new t(function (t, i) {
                  n(e, r, t, i);
                });
              }
              return (i = i ? i.then(a, a) : a());
            }
          });
        }
        function C(e, n, i) {
          var r = p;
          return function (a, o) {
            if (r === v) throw Error("Generator is already running");
            if (r === m) {
              if ("throw" === a) throw o;
              return { value: t, done: !0 };
            }
            for (i.method = a, i.arg = o; ; ) {
              var s = i.delegate;
              if (s) {
                var l = D(s, i);
                if (l) {
                  if (l === g) continue;
                  return l;
                }
              }
              if ("next" === i.method) i.sent = i._sent = i.arg;
              else if ("throw" === i.method) {
                if (r === p) throw ((r = m), i.arg);
                i.dispatchException(i.arg);
              } else "return" === i.method && i.abrupt("return", i.arg);
              r = v;
              var u = d(e, n, i);
              if ("normal" === u.type) {
                if (((r = i.done ? m : f), u.arg === g)) continue;
                return { value: u.arg, done: i.done };
              }
              "throw" === u.type &&
                ((r = m), (i.method = "throw"), (i.arg = u.arg));
            }
          };
        }
        function D(e, n) {
          var i = n.method,
            r = e.iterator[i];
          if (r === t)
            return (
              (n.delegate = null),
              ("throw" === i &&
                e.iterator.return &&
                ((n.method = "return"),
                (n.arg = t),
                D(e, n),
                "throw" === n.method)) ||
                ("return" !== i &&
                  ((n.method = "throw"),
                  (n.arg = new TypeError(
                    "The iterator does not provide a '" + i + "' method"
                  )))),
              g
            );
          var a = d(r, e.iterator, n.arg);
          if ("throw" === a.type)
            return (
              (n.method = "throw"), (n.arg = a.arg), (n.delegate = null), g
            );
          var o = a.arg;
          return o
            ? o.done
              ? ((n[e.resultName] = o.value),
                (n.next = e.nextLoc),
                "return" !== n.method && ((n.method = "next"), (n.arg = t)),
                (n.delegate = null),
                g)
              : o
            : ((n.method = "throw"),
              (n.arg = new TypeError("iterator result is not an object")),
              (n.delegate = null),
              g);
        }
        function A(e) {
          var t = { tryLoc: e[0] };
          1 in e && (t.catchLoc = e[1]),
            2 in e && ((t.finallyLoc = e[2]), (t.afterLoc = e[3])),
            this.tryEntries.push(t);
        }
        function P(e) {
          var t = e.completion || {};
          (t.type = "normal"), delete t.arg, (e.completion = t);
        }
        function L(e) {
          (this.tryEntries = [{ tryLoc: "root" }]),
            e.forEach(A, this),
            this.reset(!0);
        }
        function R(e) {
          if (e || "" === e) {
            var n = e[s];
            if (n) return n.call(e);
            if ("function" == typeof e.next) return e;
            if (!isNaN(e.length)) {
              var i = -1,
                a = function n() {
                  for (; ++i < e.length; )
                    if (r.call(e, i)) return (n.value = e[i]), (n.done = !1), n;
                  return (n.value = t), (n.done = !0), n;
                };
              return (a.next = a);
            }
          }
          throw new TypeError(M(e) + " is not iterable");
        }
        return (
          (y.prototype = b),
          a(T, "constructor", { value: b, configurable: !0 }),
          a(b, "constructor", { value: y, configurable: !0 }),
          (y.displayName = c(b, u, "GeneratorFunction")),
          (n.isGeneratorFunction = function (e) {
            var t = "function" == typeof e && e.constructor;
            return (
              !!t &&
              (t === y || "GeneratorFunction" === (t.displayName || t.name))
            );
          }),
          (n.mark = function (e) {
            return (
              Object.setPrototypeOf
                ? Object.setPrototypeOf(e, b)
                : ((e.__proto__ = b), c(e, u, "GeneratorFunction")),
              (e.prototype = Object.create(T)),
              e
            );
          }),
          (n.awrap = function (e) {
            return { __await: e };
          }),
          k(E.prototype),
          c(E.prototype, l, function () {
            return this;
          }),
          (n.AsyncIterator = E),
          (n.async = function (e, t, i, r, a) {
            void 0 === a && (a = Promise);
            var o = new E(h(e, t, i, r), a);
            return n.isGeneratorFunction(t)
              ? o
              : o.next().then(function (e) {
                  return e.done ? e.value : o.next();
                });
          }),
          k(T),
          c(T, u, "Generator"),
          c(T, s, function () {
            return this;
          }),
          c(T, "toString", function () {
            return "[object Generator]";
          }),
          (n.keys = function (e) {
            var t = Object(e),
              n = [];
            for (var i in t) n.push(i);
            return (
              n.reverse(),
              function e() {
                for (; n.length; ) {
                  var i = n.pop();
                  if (i in t) return (e.value = i), (e.done = !1), e;
                }
                return (e.done = !0), e;
              }
            );
          }),
          (n.values = R),
          (L.prototype = {
            constructor: L,
            reset: function (e) {
              if (
                ((this.prev = 0),
                (this.next = 0),
                (this.sent = this._sent = t),
                (this.done = !1),
                (this.delegate = null),
                (this.method = "next"),
                (this.arg = t),
                this.tryEntries.forEach(P),
                !e)
              )
                for (var n in this)
                  "t" === n.charAt(0) &&
                    r.call(this, n) &&
                    !isNaN(+n.slice(1)) &&
                    (this[n] = t);
            },
            stop: function () {
              this.done = !0;
              var e = this.tryEntries[0].completion;
              if ("throw" === e.type) throw e.arg;
              return this.rval;
            },
            dispatchException: function (e) {
              if (this.done) throw e;
              var n = this;
              function i(i, r) {
                return (
                  (s.type = "throw"),
                  (s.arg = e),
                  (n.next = i),
                  r && ((n.method = "next"), (n.arg = t)),
                  !!r
                );
              }
              for (var a = this.tryEntries.length - 1; a >= 0; --a) {
                var o = this.tryEntries[a],
                  s = o.completion;
                if ("root" === o.tryLoc) return i("end");
                if (o.tryLoc <= this.prev) {
                  var l = r.call(o, "catchLoc"),
                    u = r.call(o, "finallyLoc");
                  if (l && u) {
                    if (this.prev < o.catchLoc) return i(o.catchLoc, !0);
                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                  } else if (l) {
                    if (this.prev < o.catchLoc) return i(o.catchLoc, !0);
                  } else {
                    if (!u)
                      throw Error("try statement without catch or finally");
                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                  }
                }
              }
            },
            abrupt: function (e, t) {
              for (var n = this.tryEntries.length - 1; n >= 0; --n) {
                var i = this.tryEntries[n];
                if (
                  i.tryLoc <= this.prev &&
                  r.call(i, "finallyLoc") &&
                  this.prev < i.finallyLoc
                ) {
                  var a = i;
                  break;
                }
              }
              a &&
                ("break" === e || "continue" === e) &&
                a.tryLoc <= t &&
                t <= a.finallyLoc &&
                (a = null);
              var o = a ? a.completion : {};
              return (
                (o.type = e),
                (o.arg = t),
                a
                  ? ((this.method = "next"), (this.next = a.finallyLoc), g)
                  : this.complete(o)
              );
            },
            complete: function (e, t) {
              if ("throw" === e.type) throw e.arg;
              return (
                "break" === e.type || "continue" === e.type
                  ? (this.next = e.arg)
                  : "return" === e.type
                  ? ((this.rval = this.arg = e.arg),
                    (this.method = "return"),
                    (this.next = "end"))
                  : "normal" === e.type && t && (this.next = t),
                g
              );
            },
            finish: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.finallyLoc === e)
                  return this.complete(n.completion, n.afterLoc), P(n), g;
              }
            },
            catch: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.tryLoc === e) {
                  var i = n.completion;
                  if ("throw" === i.type) {
                    var r = i.arg;
                    P(n);
                  }
                  return r;
                }
              }
              throw Error("illegal catch attempt");
            },
            delegateYield: function (e, n, i) {
              return (
                (this.delegate = { iterator: R(e), resultName: n, nextLoc: i }),
                "next" === this.method && (this.arg = t),
                g
              );
            }
          }),
          n
        );
      }
      function t(e, t, n, i, r, a, o) {
        try {
          var s = e[a](o),
            l = s.value;
        } catch (e) {
          return void n(e);
        }
        s.done ? t(l) : Promise.resolve(l).then(i, r);
      }
      function n(e) {
        return function () {
          var n = this,
            i = arguments;
          return new Promise(function (r, a) {
            var o = e.apply(n, i);
            function s(e) {
              t(o, r, a, s, l, "next", e);
            }
            function l(e) {
              t(o, r, a, s, l, "throw", e);
            }
            s(void 0);
          });
        };
      }
      function i(e, t) {
        var n = Object.keys(e);
        if (Object.getOwnPropertySymbols) {
          var i = Object.getOwnPropertySymbols(e);
          t &&
            (i = i.filter(function (t) {
              return Object.getOwnPropertyDescriptor(e, t).enumerable;
            })),
            n.push.apply(n, i);
        }
        return n;
      }
      function r(e) {
        for (var t = 1; t < arguments.length; t++) {
          var n = null != arguments[t] ? arguments[t] : {};
          t % 2
            ? i(Object(n), !0).forEach(function (t) {
                c(e, t, n[t]);
              })
            : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n))
            : i(Object(n)).forEach(function (t) {
                Object.defineProperty(
                  e,
                  t,
                  Object.getOwnPropertyDescriptor(n, t)
                );
              });
        }
        return e;
      }
      function a() {
        return (
          (a =
            "undefined" != typeof Reflect && Reflect.get
              ? Reflect.get.bind()
              : function (e, t, n) {
                  var i = (function (e, t) {
                    for (
                      ;
                      !{}.hasOwnProperty.call(e, t) && null !== (e = f(e));

                    );
                    return e;
                  })(e, t);
                  if (i) {
                    var r = Object.getOwnPropertyDescriptor(i, t);
                    return r.get
                      ? r.get.call(arguments.length < 3 ? e : n)
                      : r.value;
                  }
                }),
          a.apply(null, arguments)
        );
      }
      function s(e, t, n) {
        if (p()) return Reflect.construct.apply(null, arguments);
        var i = [null];
        i.push.apply(i, t);
        var r = new (e.bind.apply(e, i))();
        return n && m(r, n.prototype), r;
      }
      function l(e, t) {
        var n =
          ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
          e["@@iterator"];
        if (!n) {
          if (
            Array.isArray(e) ||
            (n = _(e)) ||
            (t && e && "number" == typeof e.length)
          ) {
            n && (e = n);
            var i = 0,
              r = function () {};
            return {
              s: r,
              n: function () {
                return i >= e.length
                  ? { done: !0 }
                  : { done: !1, value: e[i++] };
              },
              e: function (e) {
                throw e;
              },
              f: r
            };
          }
          throw new TypeError(
            "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        }
        var a,
          o = !0,
          s = !1;
        return {
          s: function () {
            n = n.call(e);
          },
          n: function () {
            var e = n.next();
            return (o = e.done), e;
          },
          e: function (e) {
            (s = !0), (a = e);
          },
          f: function () {
            try {
              o || null == n.return || n.return();
            } finally {
              if (s) throw a;
            }
          }
        };
      }
      function u(e) {
        return (
          (function (e) {
            if (Array.isArray(e)) return y(e);
          })(e) ||
          (function (e) {
            if (
              ("undefined" != typeof Symbol && null != e[Symbol.iterator]) ||
              null != e["@@iterator"]
            )
              return Array.from(e);
          })(e) ||
          _(e) ||
          (function () {
            throw new TypeError(
              "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
            );
          })()
        );
      }
      function c(e, t, n) {
        return (
          (t = S(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      function h(e, t, n) {
        return (
          (t = f(t)),
          (function (e, t) {
            if (t && ("object" == M(t) || "function" == typeof t)) return t;
            if (void 0 !== t)
              throw new TypeError(
                "Derived constructors may only return object or undefined"
              );
            return d(e);
          })(
            e,
            p()
              ? Reflect.construct(t, n || [], f(e).constructor)
              : t.apply(e, n)
          )
        );
      }
      function d(e) {
        if (void 0 === e)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called"
          );
        return e;
      }
      function p() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (p = function () {
          return !!e;
        })();
      }
      function f(e) {
        return (
          (f = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          f(e)
        );
      }
      function v(e, t) {
        if ("function" != typeof t && null !== t)
          throw new TypeError(
            "Super expression must either be null or a function"
          );
        (e.prototype = Object.create(t && t.prototype, {
          constructor: { value: e, writable: !0, configurable: !0 }
        })),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          t && m(e, t);
      }
      function m(e, t) {
        return (
          (m = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          m(e, t)
        );
      }
      function g(e, t) {
        return (
          (function (e) {
            if (Array.isArray(e)) return e;
          })(e) ||
          (function (e, t) {
            var n =
              null == e
                ? null
                : ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                  e["@@iterator"];
            if (null != n) {
              var i,
                r,
                a,
                o,
                s = [],
                l = !0,
                u = !1;
              try {
                if (((a = (n = n.call(e)).next), 0 === t)) {
                  if (Object(n) !== n) return;
                  l = !1;
                } else
                  for (
                    ;
                    !(l = (i = a.call(n)).done) &&
                    (s.push(i.value), s.length !== t);
                    l = !0
                  );
              } catch (e) {
                (u = !0), (r = e);
              } finally {
                try {
                  if (
                    !l &&
                    null != n.return &&
                    ((o = n.return()), Object(o) !== o)
                  )
                    return;
                } finally {
                  if (u) throw r;
                }
              }
              return s;
            }
          })(e, t) ||
          _(e, t) ||
          (function () {
            throw new TypeError(
              "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
            );
          })()
        );
      }
      function _(e, t) {
        if (e) {
          if ("string" == typeof e) return y(e, t);
          var n = {}.toString.call(e).slice(8, -1);
          return (
            "Object" === n && e.constructor && (n = e.constructor.name),
            "Map" === n || "Set" === n
              ? Array.from(e)
              : "Arguments" === n ||
                /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
              ? y(e, t)
              : void 0
          );
        }
      }
      function y(e, t) {
        (null == t || t > e.length) && (t = e.length);
        for (var n = 0, i = Array(t); n < t; n++) i[n] = e[n];
        return i;
      }
      function b(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function x(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          (i.enumerable = i.enumerable || !1),
            (i.configurable = !0),
            "value" in i && (i.writable = !0),
            Object.defineProperty(e, S(i.key), i);
        }
      }
      function w(e, t, n) {
        return (
          t && x(e.prototype, t),
          n && x(e, n),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          e
        );
      }
      function S(e) {
        var t = (function (e) {
          if ("object" != M(e) || !e) return e;
          var t = e[Symbol.toPrimitive];
          if (void 0 !== t) {
            var n = t.call(e, "string");
            if ("object" != M(n)) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e);
        return "symbol" == M(t) ? t : t + "";
      }
      function M(e) {
        return (
          (M =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          M(e)
        );
      }
      var T, k, E, C, D, A, P, L, R, I, O, N, F, U, B, z;
      function V(e, t, n) {
        return (
          (t = (function (e) {
            var t = (function (e) {
              if ("object" != M(e) || !e) return e;
              var t = e[Symbol.toPrimitive];
              if (void 0 !== t) {
                var n = t.call(e, "string");
                if ("object" != M(n)) return n;
                throw new TypeError(
                  "@@toPrimitive must return a primitive value."
                );
              }
              return String(e);
            })(e);
            return "symbol" == M(t) ? t : t + "";
          })(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      function H(e) {
        return e &&
          e.__esModule &&
          Object.prototype.hasOwnProperty.call(e, "default")
          ? e.default
          : e;
      }
      ("undefined" == typeof globalThis ? "undefined" : M(globalThis)) < "u"
        ? globalThis
        : ("undefined" == typeof window ? "undefined" : M(window)) < "u"
        ? window
        : (void 0 === o.g ? "undefined" : M(o.g)) < "u"
        ? o.g
        : ("undefined" == typeof self ? "undefined" : M(self)) < "u" && self;
      var G = { exports: {} };
      !(function (e) {
        e.exports = (function (e) {
          var t = {};
          function n(i) {
            if (t[i]) return t[i].exports;
            var r = (t[i] = { exports: {}, id: i, loaded: !1 });
            return (
              e[i].call(r.exports, r, r.exports, n), (r.loaded = !0), r.exports
            );
          }
          return (n.m = e), (n.c = t), (n.p = ""), n(0);
        })([
          function (e, t) {
            e.exports = (function () {
              if (
                ("undefined" == typeof document ? "undefined" : M(document)) >
                  "u" ||
                ("undefined" == typeof window ? "undefined" : M(window)) > "u"
              )
                return {
                  ask: function () {
                    return "initial";
                  },
                  element: function () {
                    return null;
                  },
                  ignoreKeys: function () {},
                  specificKeys: function () {},
                  registerOnChange: function () {},
                  unRegisterOnChange: function () {}
                };
              var e = document.documentElement,
                t = null,
                n = "initial",
                i = n,
                r = Date.now(),
                a = !1,
                o = ["button", "input", "select", "textarea"],
                s = [],
                l = [16, 17, 18, 91, 93],
                u = [],
                c = {
                  keydown: "keyboard",
                  keyup: "keyboard",
                  mousedown: "mouse",
                  mousemove: "mouse",
                  MSPointerDown: "pointer",
                  MSPointerMove: "pointer",
                  pointerdown: "pointer",
                  pointermove: "pointer",
                  touchstart: "touch",
                  touchend: "touch"
                },
                h = !1,
                d = { x: null, y: null },
                p = { 2: "touch", 3: "touch", 4: "mouse" },
                f = !1;
              try {
                var v = Object.defineProperty({}, "passive", {
                  get: function () {
                    f = !0;
                  }
                });
                window.addEventListener("test", null, v);
              } catch (e) {}
              var m = function () {
                  var e = !f || { passive: !0, capture: !0 };
                  document.addEventListener("DOMContentLoaded", g, !0),
                    window.PointerEvent
                      ? (window.addEventListener("pointerdown", _, !0),
                        window.addEventListener("pointermove", b, !0))
                      : window.MSPointerEvent
                      ? (window.addEventListener("MSPointerDown", _, !0),
                        window.addEventListener("MSPointerMove", b, !0))
                      : (window.addEventListener("mousedown", _, !0),
                        window.addEventListener("mousemove", b, !0),
                        "ontouchstart" in window &&
                          (window.addEventListener("touchstart", _, e),
                          window.addEventListener("touchend", _, !0))),
                    window.addEventListener(E(), b, e),
                    window.addEventListener("keydown", _, !0),
                    window.addEventListener("keyup", _, !0),
                    window.addEventListener("focusin", x, !0),
                    window.addEventListener("focusout", w, !0);
                },
                g = function () {
                  if (
                    (a = !(
                      "false" === e.getAttribute("data-whatpersist") ||
                      "false" === document.body.getAttribute("data-whatpersist")
                    ))
                  )
                    try {
                      window.sessionStorage.getItem("what-input") &&
                        (n = window.sessionStorage.getItem("what-input")),
                        window.sessionStorage.getItem("what-intent") &&
                          (i = window.sessionStorage.getItem("what-intent"));
                    } catch (e) {}
                  y("input"), y("intent");
                },
                _ = function (e) {
                  var t = e.which,
                    r = c[e.type];
                  "pointer" === r && (r = T(e));
                  var a = !u.length && -1 === l.indexOf(t),
                    s = u.length && -1 !== u.indexOf(t),
                    h =
                      ("keyboard" === r && t && (a || s)) ||
                      "mouse" === r ||
                      "touch" === r;
                  if (
                    (k(r) && (h = !1),
                    h && n !== r && (S("input", (n = r)), y("input")),
                    h && i !== r)
                  ) {
                    var d = document.activeElement;
                    d &&
                      d.nodeName &&
                      (-1 === o.indexOf(d.nodeName.toLowerCase()) ||
                        ("button" === d.nodeName.toLowerCase() &&
                          !A(d, "form"))) &&
                      (S("intent", (i = r)), y("intent"));
                  }
                },
                y = function (t) {
                  e.setAttribute("data-what" + t, "input" === t ? n : i), C(t);
                },
                b = function (e) {
                  var t = c[e.type];
                  "pointer" === t && (t = T(e)),
                    D(e),
                    ((!h && !k(t)) ||
                      (h && "wheel" === e.type) ||
                      "mousewheel" === e.type ||
                      "DOMMouseScroll" === e.type) &&
                      i !== t &&
                      (S("intent", (i = t)), y("intent"));
                },
                x = function (n) {
                  n.target.nodeName
                    ? ((t = n.target.nodeName.toLowerCase()),
                      e.setAttribute("data-whatelement", t),
                      n.target.classList &&
                        n.target.classList.length &&
                        e.setAttribute(
                          "data-whatclasses",
                          n.target.classList.toString().replace(" ", ",")
                        ))
                    : w();
                },
                w = function () {
                  (t = null),
                    e.removeAttribute("data-whatelement"),
                    e.removeAttribute("data-whatclasses");
                },
                S = function (e, t) {
                  if (a)
                    try {
                      window.sessionStorage.setItem("what-" + e, t);
                    } catch (e) {}
                },
                T = function (e) {
                  return "number" == typeof e.pointerType
                    ? p[e.pointerType]
                    : "pen" === e.pointerType
                    ? "touch"
                    : e.pointerType;
                },
                k = function (e) {
                  var t = Date.now(),
                    i = "mouse" === e && "touch" === n && t - r < 200;
                  return (r = t), i;
                },
                E = function () {
                  return "onwheel" in document.createElement("div")
                    ? "wheel"
                    : void 0 !== document.onmousewheel
                    ? "mousewheel"
                    : "DOMMouseScroll";
                },
                C = function (e) {
                  for (var t = 0, r = s.length; t < r; t++)
                    s[t].type === e &&
                      s[t].fn.call(void 0, "input" === e ? n : i);
                },
                D = function (e) {
                  d.x !== e.screenX || d.y !== e.screenY
                    ? ((h = !1), (d.x = e.screenX), (d.y = e.screenY))
                    : (h = !0);
                },
                A = function (e, t) {
                  var n = window.Element.prototype;
                  if (
                    (n.matches ||
                      (n.matches =
                        n.msMatchesSelector || n.webkitMatchesSelector),
                    n.closest)
                  )
                    return e.closest(t);
                  do {
                    if (e.matches(t)) return e;
                    e = e.parentElement || e.parentNode;
                  } while (null !== e && 1 === e.nodeType);
                  return null;
                };
              return (
                "addEventListener" in window &&
                  Array.prototype.indexOf &&
                  ((c[E()] = "mouse"), m()),
                {
                  ask: function (e) {
                    return "intent" === e ? i : n;
                  },
                  element: function () {
                    return t;
                  },
                  ignoreKeys: function (e) {
                    l = e;
                  },
                  specificKeys: function (e) {
                    u = e;
                  },
                  registerOnChange: function (e, t) {
                    s.push({ fn: e, type: t || "input" });
                  },
                  unRegisterOnChange: function (e) {
                    var t = (function (e) {
                      for (var t = 0, n = s.length; t < n; t++)
                        if (s[t].fn === e) return t;
                    })(e);
                    (t || 0 === t) && s.splice(t, 1);
                  },
                  clearStorage: function () {
                    window.sessionStorage.clear();
                  }
                }
              );
            })();
          }
        ]);
      })(G);
      var W = H(G.exports);
      window._GLOBAL_ = window._GLOBAL_ || {};
      var j = {},
        q = function (e, t, n) {
          if (!t || 0 === t.length) return e();
          var i = document.getElementsByTagName("link");
          return Promise.all(
            t.map(function (e) {
              if (
                ((e = (function (e) {
                  return "/" + e;
                })(e)),
                !(e in j))
              ) {
                j[e] = !0;
                var t = e.endsWith(".css"),
                  r = t ? '[rel="stylesheet"]' : "";
                if (n)
                  for (var a = i.length - 1; a >= 0; a--) {
                    var o = i[a];
                    if (o.href === e && (!t || "stylesheet" === o.rel)) return;
                  }
                else if (
                  document.querySelector(
                    'link[href="'.concat(e, '"]').concat(r)
                  )
                )
                  return;
                var s = document.createElement("link");
                return (
                  (s.rel = t ? "stylesheet" : "modulepreload"),
                  t || ((s.as = "script"), (s.crossOrigin = "")),
                  (s.href = e),
                  document.head.appendChild(s),
                  t
                    ? new Promise(function (t, n) {
                        s.addEventListener("load", t),
                          s.addEventListener("error", function () {
                            return n(
                              new Error("Unable to preload CSS for ".concat(e))
                            );
                          });
                      })
                    : void 0
                );
              }
            })
          )
            .then(function () {
              return e();
            })
            .catch(function (e) {
              var t = new Event("vite:preloadError", { cancelable: !0 });
              if (
                ((t.payload = e), window.dispatchEvent(t), !t.defaultPrevented)
              )
                throw e;
            });
        };
      function K(e) {
        if (void 0 === e)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called"
          );
        return e;
      }
      function X(e, t) {
        (e.prototype = Object.create(t.prototype)),
          (e.prototype.constructor = e),
          (e.__proto__ = t);
      }
      var Y,
        Z,
        J,
        Q,
        $,
        ee,
        te,
        ne,
        ie,
        re,
        ae,
        oe = {
          autoSleep: 120,
          force3D: "auto",
          nullTargetWarn: 1,
          units: { lineHeight: "" }
        },
        se = { duration: 0.5, overwrite: !1, delay: 0 },
        le = 1e8,
        ue = 1e-8,
        ce = 2 * Math.PI,
        he = ce / 4,
        de = 0,
        pe = Math.sqrt,
        fe = Math.cos,
        ve = Math.sin,
        me = function (e) {
          return "string" == typeof e;
        },
        ge = function (e) {
          return "function" == typeof e;
        },
        _e = function (e) {
          return "number" == typeof e;
        },
        ye = function (e) {
          return M(e) > "u";
        },
        be = function (e) {
          return "object" == M(e);
        },
        xe = function (e) {
          return !1 !== e;
        },
        we = function () {
          return ("undefined" == typeof window ? "undefined" : M(window)) < "u";
        },
        Se = function (e) {
          return ge(e) || me(e);
        },
        Me =
          ("function" == typeof ArrayBuffer && ArrayBuffer.isView) ||
          function () {},
        Te = Array.isArray,
        ke = /(?:-?\.?\d|\.)+/gi,
        Ee = /[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,
        Ce = /[-+=.]*\d+[.e-]*\d*[a-z%]*/g,
        De = /[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,
        Ae = /[+-]=-?[.\d]+/,
        Pe = /[^,'"\[\]\s]+/gi,
        Le = /^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,
        Re = {},
        Ie = {},
        Oe = function (e) {
          return (Ie = ct(e, Re)) && li;
        },
        Ne = function (e, t) {
          return console.warn(
            "Invalid property",
            e,
            "set to",
            t,
            "Missing plugin? gsap.registerPlugin()"
          );
        },
        Fe = function (e, t) {
          return !t && console.warn(e);
        },
        Ue = function (e, t) {
          return (e && (Re[e] = t) && Ie && (Ie[e] = t)) || Re;
        },
        Be = function () {
          return 0;
        },
        ze = { suppressEvents: !0, isStart: !0, kill: !1 },
        Ve = { suppressEvents: !0, kill: !1 },
        He = { suppressEvents: !0 },
        Ge = {},
        We = [],
        je = {},
        qe = {},
        Ke = {},
        Xe = 30,
        Ye = [],
        Ze = "",
        Je = function (e) {
          var t,
            n,
            i = e[0];
          if ((be(i) || ge(i) || (e = [e]), !(t = (i._gsap || {}).harness))) {
            for (n = Ye.length; n-- && !Ye[n].targetTest(i); );
            t = Ye[n];
          }
          for (n = e.length; n--; )
            (e[n] && (e[n]._gsap || (e[n]._gsap = new Sn(e[n], t)))) ||
              e.splice(n, 1);
          return e;
        },
        Qe = function (e) {
          return e._gsap || Je(Vt(e))[0]._gsap;
        },
        $e = function (e, t, n) {
          return (n = e[t]) && ge(n)
            ? e[t]()
            : (ye(n) && e.getAttribute && e.getAttribute(t)) || n;
        },
        et = function (e, t) {
          return (e = e.split(",")).forEach(t) || e;
        },
        tt = function (e) {
          return Math.round(1e5 * e) / 1e5 || 0;
        },
        nt = function (e) {
          return Math.round(1e7 * e) / 1e7 || 0;
        },
        it = function (e, t) {
          var n = t.charAt(0),
            i = parseFloat(t.substr(2));
          return (
            (e = parseFloat(e)),
            "+" === n ? e + i : "-" === n ? e - i : "*" === n ? e * i : e / i
          );
        },
        rt = function (e, t) {
          for (var n = t.length, i = 0; e.indexOf(t[i]) < 0 && ++i < n; );
          return i < n;
        },
        at = function () {
          var e,
            t,
            n = We.length,
            i = We.slice(0);
          for (je = {}, We.length = 0, e = 0; e < n; e++)
            (t = i[e]) &&
              t._lazy &&
              (t.render(t._lazy[0], t._lazy[1], !0)._lazy = 0);
        },
        ot = function (e, t, n, i) {
          We.length && !Z && at(),
            e.render(t, n, i || (Z && t < 0 && (e._initted || e._startAt))),
            We.length && !Z && at();
        },
        st = function (e) {
          var t = parseFloat(e);
          return (t || 0 === t) && (e + "").match(Pe).length < 2
            ? t
            : me(e)
            ? e.trim()
            : e;
        },
        lt = function (e) {
          return e;
        },
        ut = function (e, t) {
          for (var n in t) n in e || (e[n] = t[n]);
          return e;
        },
        ct = function (e, t) {
          for (var n in t) e[n] = t[n];
          return e;
        },
        ht = function e(t, n) {
          for (var i in n)
            "__proto__" !== i &&
              "constructor" !== i &&
              "prototype" !== i &&
              (t[i] = be(n[i]) ? e(t[i] || (t[i] = {}), n[i]) : n[i]);
          return t;
        },
        dt = function (e, t) {
          var n,
            i = {};
          for (n in e) n in t || (i[n] = e[n]);
          return i;
        },
        pt = function (e) {
          var t = e.parent || Q,
            n = e.keyframes
              ? (function (e) {
                  return function (t, n) {
                    for (var i in n)
                      i in t ||
                        ("duration" === i && e) ||
                        "ease" === i ||
                        (t[i] = n[i]);
                  };
                })(Te(e.keyframes))
              : ut;
          if (xe(e.inherit))
            for (; t; ) n(e, t.vars.defaults), (t = t.parent || t._dp);
          return e;
        },
        ft = function (e, t, n, i, r) {
          void 0 === n && (n = "_first"), void 0 === i && (i = "_last");
          var a,
            o = e[i];
          if (r) for (a = t[r]; o && o[r] > a; ) o = o._prev;
          return (
            o
              ? ((t._next = o._next), (o._next = t))
              : ((t._next = e[n]), (e[n] = t)),
            t._next ? (t._next._prev = t) : (e[i] = t),
            (t._prev = o),
            (t.parent = t._dp = e),
            t
          );
        },
        vt = function (e, t, n, i) {
          void 0 === n && (n = "_first"), void 0 === i && (i = "_last");
          var r = t._prev,
            a = t._next;
          r ? (r._next = a) : e[n] === t && (e[n] = a),
            a ? (a._prev = r) : e[i] === t && (e[i] = r),
            (t._next = t._prev = t.parent = null);
        },
        mt = function (e, t) {
          e.parent && (!t || e.parent.autoRemoveChildren) && e.parent.remove(e),
            (e._act = 0);
        },
        gt = function (e, t) {
          if (e && (!t || t._end > e._dur || t._start < 0))
            for (var n = e; n; ) (n._dirty = 1), (n = n.parent);
          return e;
        },
        _t = function (e, t, n, i) {
          return (
            e._startAt &&
            (Z
              ? e._startAt.revert(Ve)
              : (e.vars.immediateRender && !e.vars.autoRevert) ||
                e._startAt.render(t, !0, i))
          );
        },
        yt = function e(t) {
          return !t || (t._ts && e(t.parent));
        },
        bt = function (e) {
          return e._repeat
            ? xt(e._tTime, (e = e.duration() + e._rDelay)) * e
            : 0;
        },
        xt = function (e, t) {
          var n = Math.floor((e /= t));
          return e && n === e ? n - 1 : n;
        },
        wt = function (e, t) {
          return (
            (e - t._start) * t._ts +
            (t._ts >= 0 ? 0 : t._dirty ? t.totalDuration() : t._tDur)
          );
        },
        St = function (e) {
          return (e._end = nt(
            e._start + (e._tDur / Math.abs(e._ts || e._rts || ue) || 0)
          ));
        },
        Mt = function (e, t) {
          var n = e._dp;
          return (
            n &&
              n.smoothChildTiming &&
              e._ts &&
              ((e._start = nt(
                n._time -
                  (e._ts > 0
                    ? t / e._ts
                    : ((e._dirty ? e.totalDuration() : e._tDur) - t) / -e._ts)
              )),
              St(e),
              n._dirty || gt(n, e)),
            e
          );
        },
        Tt = function (e, t) {
          var n;
          if (
            ((t._time || (t._initted && !t._dur)) &&
              ((n = wt(e.rawTime(), t)),
              (!t._dur || Ft(0, t.totalDuration(), n) - t._tTime > ue) &&
                t.render(n, !0)),
            gt(e, t)._dp && e._initted && e._time >= e._dur && e._ts)
          ) {
            if (e._dur < e.duration())
              for (n = e; n._dp; )
                n.rawTime() >= 0 && n.totalTime(n._tTime), (n = n._dp);
            e._zTime = -ue;
          }
        },
        kt = function (e, t, n, i) {
          return (
            t.parent && mt(t),
            (t._start = nt(
              (_e(n) ? n : n || e !== Q ? It(e, n, t) : e._time) + t._delay
            )),
            (t._end = nt(
              t._start + (t.totalDuration() / Math.abs(t.timeScale()) || 0)
            )),
            ft(e, t, "_first", "_last", e._sort ? "_start" : 0),
            At(t) || (e._recent = t),
            i || Tt(e, t),
            e._ts < 0 && Mt(e, e._tTime),
            e
          );
        },
        Et = function (e, t) {
          return (
            (Re.ScrollTrigger || Ne("scrollTrigger", t)) &&
            Re.ScrollTrigger.create(t, e)
          );
        },
        Ct = function (e, t, n, i, r) {
          return (
            Pn(e, t, r),
            e._initted
              ? !n &&
                e._pt &&
                !Z &&
                ((e._dur && !1 !== e.vars.lazy) || (!e._dur && e.vars.lazy)) &&
                ie !== cn.frame
                ? (We.push(e), (e._lazy = [r, i]), 1)
                : void 0
              : 1
          );
        },
        Dt = function e(t) {
          var n = t.parent;
          return (
            n && n._ts && n._initted && !n._lock && (n.rawTime() < 0 || e(n))
          );
        },
        At = function (e) {
          var t = e.data;
          return "isFromStart" === t || "isStart" === t;
        },
        Pt = function (e, t, n, i) {
          var r = e._repeat,
            a = nt(t) || 0,
            o = e._tTime / e._tDur;
          return (
            o && !i && (e._time *= a / e._dur),
            (e._dur = a),
            (e._tDur = r
              ? r < 0
                ? 1e10
                : nt(a * (r + 1) + e._rDelay * r)
              : a),
            o > 0 && !i && Mt(e, (e._tTime = e._tDur * o)),
            e.parent && St(e),
            n || gt(e.parent, e),
            e
          );
        },
        Lt = function (e) {
          return e instanceof Tn ? gt(e) : Pt(e, e._dur);
        },
        Rt = { _start: 0, endTime: Be, totalDuration: Be },
        It = function e(t, n, i) {
          var r,
            a,
            o,
            s = t.labels,
            l = t._recent || Rt,
            u = t.duration() >= le ? l.endTime(!1) : t._dur;
          return me(n) && (isNaN(n) || n in s)
            ? ((a = n.charAt(0)),
              (o = "%" === n.substr(-1)),
              (r = n.indexOf("=")),
              "<" === a || ">" === a
                ? (r >= 0 && (n = n.replace(/=/, "")),
                  ("<" === a ? l._start : l.endTime(l._repeat >= 0)) +
                    (parseFloat(n.substr(1)) || 0) *
                      (o ? (r < 0 ? l : i).totalDuration() / 100 : 1))
                : r < 0
                ? (n in s || (s[n] = u), s[n])
                : ((a = parseFloat(n.charAt(r - 1) + n.substr(r + 1))),
                  o &&
                    i &&
                    (a = (a / 100) * (Te(i) ? i[0] : i).totalDuration()),
                  r > 1 ? e(t, n.substr(0, r - 1), i) + a : u + a))
            : null == n
            ? u
            : +n;
        },
        Ot = function (e, t, n) {
          var i,
            r,
            a = _e(t[1]),
            o = (a ? 2 : 1) + (e < 2 ? 0 : 1),
            s = t[o];
          if ((a && (s.duration = t[1]), (s.parent = n), e)) {
            for (i = s, r = n; r && !("immediateRender" in i); )
              (i = r.vars.defaults || {}), (r = xe(r.vars.inherit) && r.parent);
            (s.immediateRender = xe(i.immediateRender)),
              e < 2 ? (s.runBackwards = 1) : (s.startAt = t[o - 1]);
          }
          return new Nn(t[0], s, t[o + 1]);
        },
        Nt = function (e, t) {
          return e || 0 === e ? t(e) : t;
        },
        Ft = function (e, t, n) {
          return n < e ? e : n > t ? t : n;
        },
        Ut = function (e, t) {
          return me(e) && (t = Le.exec(e)) ? t[1] : "";
        },
        Bt = [].slice,
        zt = function (e, t) {
          return (
            e &&
            be(e) &&
            "length" in e &&
            ((!t && !e.length) || (e.length - 1 in e && be(e[0]))) &&
            !e.nodeType &&
            e !== $
          );
        },
        Vt = function (e, t, n) {
          return J && !t && J.selector
            ? J.selector(e)
            : !me(e) || n || (!ee && hn())
            ? Te(e)
              ? (function (e, t, n) {
                  return (
                    void 0 === n && (n = []),
                    e.forEach(function (e) {
                      var i;
                      return (me(e) && !t) || zt(e, 1)
                        ? (i = n).push.apply(i, Vt(e))
                        : n.push(e);
                    }) || n
                  );
                })(e, n)
              : zt(e)
              ? Bt.call(e, 0)
              : e
              ? [e]
              : []
            : Bt.call((t || te).querySelectorAll(e), 0);
        },
        Ht = function (e) {
          return (
            (e = Vt(e)[0] || Fe("Invalid scope") || {}),
            function (t) {
              var n = e.current || e.nativeElement || e;
              return Vt(
                t,
                n.querySelectorAll
                  ? n
                  : n === e
                  ? Fe("Invalid scope") || te.createElement("div")
                  : e
              );
            }
          );
        },
        Gt = function (e) {
          return e.sort(function () {
            return 0.5 - Math.random();
          });
        },
        Wt = function (e) {
          if (ge(e)) return e;
          var t = be(e) ? e : { each: e },
            n = _n(t.ease),
            i = t.from || 0,
            r = parseFloat(t.base) || 0,
            a = {},
            o = i > 0 && i < 1,
            s = isNaN(i) || o,
            l = t.axis,
            u = i,
            c = i;
          return (
            me(i)
              ? (u = c = { center: 0.5, edges: 0.5, end: 1 }[i] || 0)
              : !o && s && ((u = i[0]), (c = i[1])),
            function (e, o, h) {
              var d,
                p,
                f,
                v,
                m,
                g,
                _,
                y,
                b,
                x = (h || t).length,
                w = a[x];
              if (!w) {
                if (!(b = "auto" === t.grid ? 0 : (t.grid || [1, le])[1])) {
                  for (
                    _ = -le;
                    _ < (_ = h[b++].getBoundingClientRect().left) && b < x;

                  );
                  b--;
                }
                for (
                  w = a[x] = [],
                    d = s ? Math.min(b, x) * u - 0.5 : i % b,
                    p = b === le ? 0 : s ? (x * c) / b - 0.5 : (i / b) | 0,
                    _ = 0,
                    y = le,
                    g = 0;
                  g < x;
                  g++
                )
                  (f = (g % b) - d),
                    (v = p - ((g / b) | 0)),
                    (w[g] = m =
                      l ? Math.abs("y" === l ? v : f) : pe(f * f + v * v)),
                    m > _ && (_ = m),
                    m < y && (y = m);
                "random" === i && Gt(w),
                  (w.max = _ - y),
                  (w.min = y),
                  (w.v = x =
                    (parseFloat(t.amount) ||
                      parseFloat(t.each) *
                        (b > x
                          ? x - 1
                          : l
                          ? "y" === l
                            ? x / b
                            : b
                          : Math.max(b, x / b)) ||
                      0) * ("edges" === i ? -1 : 1)),
                  (w.b = x < 0 ? r - x : r),
                  (w.u = Ut(t.amount || t.each) || 0),
                  (n = n && x < 0 ? mn(n) : n);
              }
              return (
                (x = (w[e] - w.min) / w.max || 0),
                nt(w.b + (n ? n(x) : x) * w.v) + w.u
              );
            }
          );
        },
        jt = function (e) {
          var t = Math.pow(10, ((e + "").split(".")[1] || "").length);
          return function (n) {
            var i = nt(Math.round(parseFloat(n) / e) * e * t);
            return (i - (i % 1)) / t + (_e(n) ? 0 : Ut(n));
          };
        },
        qt = function (e, t) {
          var n,
            i,
            r = Te(e);
          return (
            !r &&
              be(e) &&
              ((n = r = e.radius || le),
              e.values
                ? ((e = Vt(e.values)), (i = !_e(e[0])) && (n *= n))
                : (e = jt(e.increment))),
            Nt(
              t,
              r
                ? ge(e)
                  ? function (t) {
                      return (i = e(t)), Math.abs(i - t) <= n ? i : t;
                    }
                  : function (t) {
                      for (
                        var r,
                          a,
                          o = parseFloat(i ? t.x : t),
                          s = parseFloat(i ? t.y : 0),
                          l = le,
                          u = 0,
                          c = e.length;
                        c--;

                      )
                        (r = i
                          ? (r = e[c].x - o) * r + (a = e[c].y - s) * a
                          : Math.abs(e[c] - o)) < l && ((l = r), (u = c));
                      return (
                        (u = !n || l <= n ? e[u] : t),
                        i || u === t || _e(t) ? u : u + Ut(t)
                      );
                    }
                : jt(e)
            )
          );
        },
        Kt = function (e, t, n, i) {
          return Nt(Te(e) ? !t : !0 === n ? !!(n = 0) : !i, function () {
            return Te(e)
              ? e[~~(Math.random() * e.length)]
              : (n = n || 1e-5) &&
                  (i = n < 1 ? Math.pow(10, (n + "").length - 2) : 1) &&
                  Math.floor(
                    Math.round(
                      (e - n / 2 + Math.random() * (t - e + 0.99 * n)) / n
                    ) *
                      n *
                      i
                  ) / i;
          });
        },
        Xt = function (e, t, n) {
          return Nt(n, function (n) {
            return e[~~t(n)];
          });
        },
        Yt = function (e) {
          for (var t, n, i, r, a = 0, o = ""; ~(t = e.indexOf("random(", a)); )
            (i = e.indexOf(")", t)),
              (r = "[" === e.charAt(t + 7)),
              (n = e.substr(t + 7, i - t - 7).match(r ? Pe : ke)),
              (o +=
                e.substr(a, t - a) +
                Kt(r ? n : +n[0], r ? 0 : +n[1], +n[2] || 1e-5)),
              (a = i + 1);
          return o + e.substr(a, e.length - a);
        },
        Zt = function (e, t, n, i, r) {
          var a = t - e,
            o = i - n;
          return Nt(r, function (t) {
            return n + (((t - e) / a) * o || 0);
          });
        },
        Jt = function (e, t, n) {
          var i,
            r,
            a,
            o = e.labels,
            s = le;
          for (i in o)
            (r = o[i] - t) < 0 == !!n &&
              r &&
              s > (r = Math.abs(r)) &&
              ((a = i), (s = r));
          return a;
        },
        Qt = function (e, t, n) {
          var i,
            r,
            a,
            o = e.vars,
            s = o[t],
            l = J,
            u = e._ctx;
          if (s)
            return (
              (i = o[t + "Params"]),
              (r = o.callbackScope || e),
              n && We.length && at(),
              u && (J = u),
              (a = i ? s.apply(r, i) : s.call(r)),
              (J = l),
              a
            );
        },
        $t = function (e) {
          return (
            mt(e),
            e.scrollTrigger && e.scrollTrigger.kill(!!Z),
            e.progress() < 1 && Qt(e, "onInterrupt"),
            e
          );
        },
        en = 255,
        tn = {
          aqua: [0, en, en],
          lime: [0, en, 0],
          silver: [192, 192, 192],
          black: [0, 0, 0],
          maroon: [128, 0, 0],
          teal: [0, 128, 128],
          blue: [0, 0, en],
          navy: [0, 0, 128],
          white: [en, en, en],
          olive: [128, 128, 0],
          yellow: [en, en, 0],
          orange: [en, 165, 0],
          gray: [128, 128, 128],
          purple: [128, 0, 128],
          green: [0, 128, 0],
          red: [en, 0, 0],
          pink: [en, 192, 203],
          cyan: [0, en, en],
          transparent: [en, en, en, 0]
        },
        nn = function (e, t, n) {
          return (
            ((6 * (e += e < 0 ? 1 : e > 1 ? -1 : 0) < 1
              ? t + (n - t) * e * 6
              : e < 0.5
              ? n
              : 3 * e < 2
              ? t + (n - t) * (2 / 3 - e) * 6
              : t) *
              en +
              0.5) |
            0
          );
        },
        rn = function (e, t, n) {
          var i,
            r,
            a,
            o,
            s,
            l,
            u,
            c,
            h,
            d,
            p = e ? (_e(e) ? [e >> 16, (e >> 8) & en, e & en] : 0) : tn.black;
          if (!p) {
            if (
              ("," === e.substr(-1) && (e = e.substr(0, e.length - 1)), tn[e])
            )
              p = tn[e];
            else if ("#" === e.charAt(0)) {
              if (
                (e.length < 6 &&
                  ((i = e.charAt(1)),
                  (r = e.charAt(2)),
                  (a = e.charAt(3)),
                  (e =
                    "#" +
                    i +
                    i +
                    r +
                    r +
                    a +
                    a +
                    (5 === e.length ? e.charAt(4) + e.charAt(4) : ""))),
                9 === e.length)
              )
                return [
                  (p = parseInt(e.substr(1, 6), 16)) >> 16,
                  (p >> 8) & en,
                  p & en,
                  parseInt(e.substr(7), 16) / 255
                ];
              p = [
                (e = parseInt(e.substr(1), 16)) >> 16,
                (e >> 8) & en,
                e & en
              ];
            } else if ("hsl" === e.substr(0, 3)) {
              if (((p = d = e.match(ke)), t)) {
                if (~e.indexOf("="))
                  return (p = e.match(Ee)), n && p.length < 4 && (p[3] = 1), p;
              } else
                (o = (+p[0] % 360) / 360),
                  (s = +p[1] / 100),
                  (i =
                    2 * (l = +p[2] / 100) -
                    (r = l <= 0.5 ? l * (s + 1) : l + s - l * s)),
                  p.length > 3 && (p[3] *= 1),
                  (p[0] = nn(o + 1 / 3, i, r)),
                  (p[1] = nn(o, i, r)),
                  (p[2] = nn(o - 1 / 3, i, r));
            } else p = e.match(ke) || tn.transparent;
            p = p.map(Number);
          }
          return (
            t &&
              !d &&
              ((i = p[0] / en),
              (r = p[1] / en),
              (a = p[2] / en),
              (l = ((u = Math.max(i, r, a)) + (c = Math.min(i, r, a))) / 2),
              u === c
                ? (o = s = 0)
                : ((h = u - c),
                  (s = l > 0.5 ? h / (2 - u - c) : h / (u + c)),
                  (o =
                    u === i
                      ? (r - a) / h + (r < a ? 6 : 0)
                      : u === r
                      ? (a - i) / h + 2
                      : (i - r) / h + 4),
                  (o *= 60)),
              (p[0] = ~~(o + 0.5)),
              (p[1] = ~~(100 * s + 0.5)),
              (p[2] = ~~(100 * l + 0.5))),
            n && p.length < 4 && (p[3] = 1),
            p
          );
        },
        an = function (e) {
          var t = [],
            n = [],
            i = -1;
          return (
            e.split(sn).forEach(function (e) {
              var r = e.match(Ce) || [];
              t.push.apply(t, r), n.push((i += r.length + 1));
            }),
            (t.c = n),
            t
          );
        },
        on = function (e, t, n) {
          var i,
            r,
            a,
            o,
            s = "",
            l = (e + s).match(sn),
            u = t ? "hsla(" : "rgba(",
            c = 0;
          if (!l) return e;
          if (
            ((l = l.map(function (e) {
              return (
                (e = rn(e, t, 1)) &&
                u +
                  (t
                    ? e[0] + "," + e[1] + "%," + e[2] + "%," + e[3]
                    : e.join(",")) +
                  ")"
              );
            })),
            n && ((a = an(e)), (i = n.c).join(s) !== a.c.join(s)))
          )
            for (o = (r = e.replace(sn, "1").split(Ce)).length - 1; c < o; c++)
              s +=
                r[c] +
                (~i.indexOf(c)
                  ? l.shift() || u + "0,0,0,0)"
                  : (a.length ? a : l.length ? l : n).shift());
          if (!r)
            for (o = (r = e.split(sn)).length - 1; c < o; c++) s += r[c] + l[c];
          return s + r[o];
        },
        sn = (function () {
          var e,
            t =
              "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";
          for (e in tn) t += "|" + e + "\\b";
          return new RegExp(t + ")", "gi");
        })(),
        ln = /hsl[a]?\(/,
        un = function (e) {
          var t,
            n = e.join(" ");
          if (((sn.lastIndex = 0), sn.test(n)))
            return (
              (t = ln.test(n)),
              (e[1] = on(e[1], t)),
              (e[0] = on(e[0], t, an(e[1]))),
              !0
            );
        },
        cn = (function () {
          var e,
            t,
            n,
            i,
            r,
            a,
            o = Date.now,
            s = 500,
            l = 33,
            u = o(),
            c = u,
            h = 1e3 / 240,
            d = h,
            p = [],
            f = function n(f) {
              var v,
                m,
                g,
                _,
                y = o() - c,
                b = !0 === f;
              if (
                (y > s && (u += y - l),
                ((v = (g = (c += y) - u) - d) > 0 || b) &&
                  ((_ = ++i.frame),
                  (r = g - 1e3 * i.time),
                  (i.time = g /= 1e3),
                  (d += v + (v >= h ? 4 : h - v)),
                  (m = 1)),
                b || (e = t(n)),
                m)
              )
                for (a = 0; a < p.length; a++) p[a](g, r, _, f);
            };
          return (
            (i = {
              time: 0,
              frame: 0,
              tick: function () {
                f(!0);
              },
              deltaRatio: function (e) {
                return r / (1e3 / (e || 60));
              },
              wake: function () {
                ne &&
                  (!ee &&
                    we() &&
                    (($ = ee = window),
                    (te = $.document || {}),
                    (Re.gsap = li),
                    ($.gsapVersions || ($.gsapVersions = [])).push(li.version),
                    Oe(Ie || $.GreenSockGlobals || (!$.gsap && $) || {}),
                    (n = $.requestAnimationFrame)),
                  e && i.sleep(),
                  (t =
                    n ||
                    function (e) {
                      return setTimeout(e, (d - 1e3 * i.time + 1) | 0);
                    }),
                  (ae = 1),
                  f(2));
              },
              sleep: function () {
                (n ? $.cancelAnimationFrame : clearTimeout)(e),
                  (ae = 0),
                  (t = Be);
              },
              lagSmoothing: function (e, t) {
                (s = e || 1 / 0), (l = Math.min(t || 33, s));
              },
              fps: function (e) {
                (h = 1e3 / (e || 240)), (d = 1e3 * i.time + h);
              },
              add: function (e, t, n) {
                var r = t
                  ? function (t, n, a, o) {
                      e(t, n, a, o), i.remove(r);
                    }
                  : e;
                return i.remove(e), p[n ? "unshift" : "push"](r), hn(), r;
              },
              remove: function (e, t) {
                ~(t = p.indexOf(e)) && p.splice(t, 1) && a >= t && a--;
              },
              _listeners: p
            }),
            i
          );
        })(),
        hn = function () {
          return !ae && cn.wake();
        },
        dn = {},
        pn = /^[\d.\-M][\d.\-,\s]/,
        fn = /["']/g,
        vn = function (e) {
          for (
            var t,
              n,
              i,
              r = {},
              a = e.substr(1, e.length - 3).split(":"),
              o = a[0],
              s = 1,
              l = a.length;
            s < l;
            s++
          )
            (n = a[s]),
              (t = s !== l - 1 ? n.lastIndexOf(",") : n.length),
              (i = n.substr(0, t)),
              (r[o] = isNaN(i) ? i.replace(fn, "").trim() : +i),
              (o = n.substr(t + 1).trim());
          return r;
        },
        mn = function (e) {
          return function (t) {
            return 1 - e(1 - t);
          };
        },
        gn = function e(t, n) {
          for (var i, r = t._first; r; )
            r instanceof Tn
              ? e(r, n)
              : r.vars.yoyoEase &&
                (!r._yoyo || !r._repeat) &&
                r._yoyo !== n &&
                (r.timeline
                  ? e(r.timeline, n)
                  : ((i = r._ease),
                    (r._ease = r._yEase),
                    (r._yEase = i),
                    (r._yoyo = n))),
              (r = r._next);
        },
        _n = function (e, t) {
          return (
            (e &&
              (ge(e)
                ? e
                : dn[e] ||
                  (function (e) {
                    var t = (e + "").split("("),
                      n = dn[t[0]];
                    return n && t.length > 1 && n.config
                      ? n.config.apply(
                          null,
                          ~e.indexOf("{")
                            ? [vn(t[1])]
                            : (function (e) {
                                var t = e.indexOf("(") + 1,
                                  n = e.indexOf(")"),
                                  i = e.indexOf("(", t);
                                return e.substring(
                                  t,
                                  ~i && i < n ? e.indexOf(")", n + 1) : n
                                );
                              })(e)
                                .split(",")
                                .map(st)
                        )
                      : dn._CE && pn.test(e)
                      ? dn._CE("", e)
                      : n;
                  })(e))) ||
            t
          );
        },
        yn = function (e, t, n, i) {
          void 0 === n &&
            (n = function (e) {
              return 1 - t(1 - e);
            }),
            void 0 === i &&
              (i = function (e) {
                return e < 0.5 ? t(2 * e) / 2 : 1 - t(2 * (1 - e)) / 2;
              });
          var r,
            a = { easeIn: t, easeOut: n, easeInOut: i };
          return (
            et(e, function (e) {
              for (var t in ((dn[e] = Re[e] = a),
              (dn[(r = e.toLowerCase())] = n),
              a))
                dn[
                  r +
                    ("easeIn" === t
                      ? ".in"
                      : "easeOut" === t
                      ? ".out"
                      : ".inOut")
                ] = dn[e + "." + t] = a[t];
            }),
            a
          );
        },
        bn = function (e) {
          return function (t) {
            return t < 0.5
              ? (1 - e(1 - 2 * t)) / 2
              : 0.5 + e(2 * (t - 0.5)) / 2;
          };
        },
        xn = function e(t, n, i) {
          var r = n >= 1 ? n : 1,
            a = (i || (t ? 0.3 : 0.45)) / (n < 1 ? n : 1),
            o = (a / ce) * (Math.asin(1 / r) || 0),
            s = function (e) {
              return 1 === e
                ? 1
                : r * Math.pow(2, -10 * e) * ve((e - o) * a) + 1;
            },
            l =
              "out" === t
                ? s
                : "in" === t
                ? function (e) {
                    return 1 - s(1 - e);
                  }
                : bn(s);
          return (
            (a = ce / a),
            (l.config = function (n, i) {
              return e(t, n, i);
            }),
            l
          );
        },
        wn = function e(t, n) {
          void 0 === n && (n = 1.70158);
          var i = function (e) {
              return e ? --e * e * ((n + 1) * e + n) + 1 : 0;
            },
            r =
              "out" === t
                ? i
                : "in" === t
                ? function (e) {
                    return 1 - i(1 - e);
                  }
                : bn(i);
          return (
            (r.config = function (n) {
              return e(t, n);
            }),
            r
          );
        };
      et("Linear,Quad,Cubic,Quart,Quint,Strong", function (e, t) {
        var n = t < 5 ? t + 1 : t;
        yn(
          e + ",Power" + (n - 1),
          t
            ? function (e) {
                return Math.pow(e, n);
              }
            : function (e) {
                return e;
              },
          function (e) {
            return 1 - Math.pow(1 - e, n);
          },
          function (e) {
            return e < 0.5
              ? Math.pow(2 * e, n) / 2
              : 1 - Math.pow(2 * (1 - e), n) / 2;
          }
        );
      }),
        (dn.Linear.easeNone = dn.none = dn.Linear.easeIn),
        yn("Elastic", xn("in"), xn("out"), xn()),
        (function (e, t) {
          var n = 1 / t,
            i = 2 * n,
            r = 2.5 * n,
            a = function (a) {
              return a < n
                ? e * a * a
                : a < i
                ? e * Math.pow(a - 1.5 / t, 2) + 0.75
                : a < r
                ? e * (a -= 2.25 / t) * a + 0.9375
                : e * Math.pow(a - 2.625 / t, 2) + 0.984375;
            };
          yn(
            "Bounce",
            function (e) {
              return 1 - a(1 - e);
            },
            a
          );
        })(7.5625, 2.75),
        yn("Expo", function (e) {
          return e ? Math.pow(2, 10 * (e - 1)) : 0;
        }),
        yn("Circ", function (e) {
          return -(pe(1 - e * e) - 1);
        }),
        yn("Sine", function (e) {
          return 1 === e ? 1 : 1 - fe(e * he);
        }),
        yn("Back", wn("in"), wn("out"), wn()),
        (dn.SteppedEase =
          dn.steps =
          Re.SteppedEase =
            {
              config: function (e, t) {
                void 0 === e && (e = 1);
                var n = 1 / e,
                  i = e + (t ? 0 : 1),
                  r = t ? 1 : 0,
                  a = 1 - ue;
                return function (e) {
                  return (((i * Ft(0, a, e)) | 0) + r) * n;
                };
              }
            }),
        (se.ease = dn["quad.out"]),
        et(
          "onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",
          function (e) {
            return (Ze += e + "," + e + "Params,");
          }
        );
      var Sn = function (e, t) {
          (this.id = de++),
            (e._gsap = this),
            (this.target = e),
            (this.harness = t),
            (this.get = t ? t.get : $e),
            (this.set = t ? t.getSetter : Vn);
        },
        Mn = (function () {
          function e(e) {
            (this.vars = e),
              (this._delay = +e.delay || 0),
              (this._repeat = e.repeat === 1 / 0 ? -2 : e.repeat || 0) &&
                ((this._rDelay = e.repeatDelay || 0),
                (this._yoyo = !!e.yoyo || !!e.yoyoEase)),
              (this._ts = 1),
              Pt(this, +e.duration, 1, 1),
              (this.data = e.data),
              J && ((this._ctx = J), J.data.push(this)),
              ae || cn.wake();
          }
          var t = e.prototype;
          return (
            (t.delay = function (e) {
              return e || 0 === e
                ? (this.parent &&
                    this.parent.smoothChildTiming &&
                    this.startTime(this._start + e - this._delay),
                  (this._delay = e),
                  this)
                : this._delay;
            }),
            (t.duration = function (e) {
              return arguments.length
                ? this.totalDuration(
                    this._repeat > 0 ? e + (e + this._rDelay) * this._repeat : e
                  )
                : this.totalDuration() && this._dur;
            }),
            (t.totalDuration = function (e) {
              return arguments.length
                ? ((this._dirty = 0),
                  Pt(
                    this,
                    this._repeat < 0
                      ? e
                      : (e - this._repeat * this._rDelay) / (this._repeat + 1)
                  ))
                : this._tDur;
            }),
            (t.totalTime = function (e, t) {
              if ((hn(), !arguments.length)) return this._tTime;
              var n = this._dp;
              if (n && n.smoothChildTiming && this._ts) {
                for (
                  Mt(this, e), !n._dp || n.parent || Tt(n, this);
                  n && n.parent;

                )
                  n.parent._time !==
                    n._start +
                      (n._ts >= 0
                        ? n._tTime / n._ts
                        : (n.totalDuration() - n._tTime) / -n._ts) &&
                    n.totalTime(n._tTime, !0),
                    (n = n.parent);
                !this.parent &&
                  this._dp.autoRemoveChildren &&
                  ((this._ts > 0 && e < this._tDur) ||
                    (this._ts < 0 && e > 0) ||
                    (!this._tDur && !e)) &&
                  kt(this._dp, this, this._start - this._delay);
              }
              return (
                (this._tTime !== e ||
                  (!this._dur && !t) ||
                  (this._initted && Math.abs(this._zTime) === ue) ||
                  (!e && !this._initted && (this.add || this._ptLookup))) &&
                  (this._ts || (this._pTime = e), ot(this, e, t)),
                this
              );
            }),
            (t.time = function (e, t) {
              return arguments.length
                ? this.totalTime(
                    Math.min(this.totalDuration(), e + bt(this)) %
                      (this._dur + this._rDelay) || (e ? this._dur : 0),
                    t
                  )
                : this._time;
            }),
            (t.totalProgress = function (e, t) {
              return arguments.length
                ? this.totalTime(this.totalDuration() * e, t)
                : this.totalDuration()
                ? Math.min(1, this._tTime / this._tDur)
                : this.ratio;
            }),
            (t.progress = function (e, t) {
              return arguments.length
                ? this.totalTime(
                    this.duration() *
                      (!this._yoyo || 1 & this.iteration() ? e : 1 - e) +
                      bt(this),
                    t
                  )
                : this.duration()
                ? Math.min(1, this._time / this._dur)
                : this.ratio;
            }),
            (t.iteration = function (e, t) {
              var n = this.duration() + this._rDelay;
              return arguments.length
                ? this.totalTime(this._time + (e - 1) * n, t)
                : this._repeat
                ? xt(this._tTime, n) + 1
                : 1;
            }),
            (t.timeScale = function (e) {
              if (!arguments.length) return this._rts === -ue ? 0 : this._rts;
              if (this._rts === e) return this;
              var t =
                this.parent && this._ts
                  ? wt(this.parent._time, this)
                  : this._tTime;
              return (
                (this._rts = +e || 0),
                (this._ts = this._ps || e === -ue ? 0 : this._rts),
                this.totalTime(Ft(-this._delay, this._tDur, t), !0),
                St(this),
                (function (e) {
                  for (var t = e.parent; t && t.parent; )
                    (t._dirty = 1), t.totalDuration(), (t = t.parent);
                  return e;
                })(this)
              );
            }),
            (t.paused = function (e) {
              return arguments.length
                ? (this._ps !== e &&
                    ((this._ps = e),
                    e
                      ? ((this._pTime =
                          this._tTime ||
                          Math.max(-this._delay, this.rawTime())),
                        (this._ts = this._act = 0))
                      : (hn(),
                        (this._ts = this._rts),
                        this.totalTime(
                          this.parent && !this.parent.smoothChildTiming
                            ? this.rawTime()
                            : this._tTime || this._pTime,
                          1 === this.progress() &&
                            Math.abs(this._zTime) !== ue &&
                            (this._tTime -= ue)
                        ))),
                  this)
                : this._ps;
            }),
            (t.startTime = function (e) {
              if (arguments.length) {
                this._start = e;
                var t = this.parent || this._dp;
                return (
                  t &&
                    (t._sort || !this.parent) &&
                    kt(t, this, e - this._delay),
                  this
                );
              }
              return this._start;
            }),
            (t.endTime = function (e) {
              return (
                this._start +
                (xe(e) ? this.totalDuration() : this.duration()) /
                  Math.abs(this._ts || 1)
              );
            }),
            (t.rawTime = function (e) {
              var t = this.parent || this._dp;
              return t
                ? e &&
                  (!this._ts ||
                    (this._repeat && this._time && this.totalProgress() < 1))
                  ? this._tTime % (this._dur + this._rDelay)
                  : this._ts
                  ? wt(t.rawTime(e), this)
                  : this._tTime
                : this._tTime;
            }),
            (t.revert = function (e) {
              void 0 === e && (e = He);
              var t = Z;
              return (
                (Z = e),
                (this._initted || this._startAt) &&
                  (this.timeline && this.timeline.revert(e),
                  this.totalTime(-0.01, e.suppressEvents)),
                "nested" !== this.data && !1 !== e.kill && this.kill(),
                (Z = t),
                this
              );
            }),
            (t.globalTime = function (e) {
              for (var t = this, n = arguments.length ? e : t.rawTime(); t; )
                (n = t._start + n / (t._ts || 1)), (t = t._dp);
              return !this.parent && this._sat
                ? this._sat.vars.immediateRender
                  ? -1
                  : this._sat.globalTime(e)
                : n;
            }),
            (t.repeat = function (e) {
              return arguments.length
                ? ((this._repeat = e === 1 / 0 ? -2 : e), Lt(this))
                : -2 === this._repeat
                ? 1 / 0
                : this._repeat;
            }),
            (t.repeatDelay = function (e) {
              if (arguments.length) {
                var t = this._time;
                return (this._rDelay = e), Lt(this), t ? this.time(t) : this;
              }
              return this._rDelay;
            }),
            (t.yoyo = function (e) {
              return arguments.length ? ((this._yoyo = e), this) : this._yoyo;
            }),
            (t.seek = function (e, t) {
              return this.totalTime(It(this, e), xe(t));
            }),
            (t.restart = function (e, t) {
              return this.play().totalTime(e ? -this._delay : 0, xe(t));
            }),
            (t.play = function (e, t) {
              return null != e && this.seek(e, t), this.reversed(!1).paused(!1);
            }),
            (t.reverse = function (e, t) {
              return (
                null != e && this.seek(e || this.totalDuration(), t),
                this.reversed(!0).paused(!1)
              );
            }),
            (t.pause = function (e, t) {
              return null != e && this.seek(e, t), this.paused(!0);
            }),
            (t.resume = function () {
              return this.paused(!1);
            }),
            (t.reversed = function (e) {
              return arguments.length
                ? (!!e !== this.reversed() &&
                    this.timeScale(-this._rts || (e ? -ue : 0)),
                  this)
                : this._rts < 0;
            }),
            (t.invalidate = function () {
              return (this._initted = this._act = 0), (this._zTime = -ue), this;
            }),
            (t.isActive = function () {
              var e,
                t = this.parent || this._dp,
                n = this._start;
              return !(
                t &&
                !(
                  this._ts &&
                  this._initted &&
                  t.isActive() &&
                  (e = t.rawTime(!0)) >= n &&
                  e < this.endTime(!0) - ue
                )
              );
            }),
            (t.eventCallback = function (e, t, n) {
              var i = this.vars;
              return arguments.length > 1
                ? (t
                    ? ((i[e] = t),
                      n && (i[e + "Params"] = n),
                      "onUpdate" === e && (this._onUpdate = t))
                    : delete i[e],
                  this)
                : i[e];
            }),
            (t.then = function (e) {
              var t = this;
              return new Promise(function (n) {
                var i = ge(e) ? e : lt,
                  r = function () {
                    var e = t.then;
                    (t.then = null),
                      ge(i) &&
                        (i = i(t)) &&
                        (i.then || i === t) &&
                        (t.then = e),
                      n(i),
                      (t.then = e);
                  };
                (t._initted && 1 === t.totalProgress() && t._ts >= 0) ||
                (!t._tTime && t._ts < 0)
                  ? r()
                  : (t._prom = r);
              });
            }),
            (t.kill = function () {
              $t(this);
            }),
            e
          );
        })();
      ut(Mn.prototype, {
        _time: 0,
        _start: 0,
        _end: 0,
        _tTime: 0,
        _tDur: 0,
        _dirty: 0,
        _repeat: 0,
        _yoyo: !1,
        parent: null,
        _initted: !1,
        _rDelay: 0,
        _ts: 1,
        _dp: 0,
        ratio: 0,
        _zTime: -ue,
        _prom: 0,
        _ps: !1,
        _rts: 1
      });
      var Tn = (function (e) {
        function t(t, n) {
          var i;
          return (
            void 0 === t && (t = {}),
            ((i = e.call(this, t) || this).labels = {}),
            (i.smoothChildTiming = !!t.smoothChildTiming),
            (i.autoRemoveChildren = !!t.autoRemoveChildren),
            (i._sort = xe(t.sortChildren)),
            Q && kt(t.parent || Q, K(i), n),
            t.reversed && i.reverse(),
            t.paused && i.paused(!0),
            t.scrollTrigger && Et(K(i), t.scrollTrigger),
            i
          );
        }
        X(t, e);
        var n = t.prototype;
        return (
          (n.to = function (e, t, n) {
            return Ot(0, arguments, this), this;
          }),
          (n.from = function (e, t, n) {
            return Ot(1, arguments, this), this;
          }),
          (n.fromTo = function (e, t, n, i) {
            return Ot(2, arguments, this), this;
          }),
          (n.set = function (e, t, n) {
            return (
              (t.duration = 0),
              (t.parent = this),
              pt(t).repeatDelay || (t.repeat = 0),
              (t.immediateRender = !!t.immediateRender),
              new Nn(e, t, It(this, n), 1),
              this
            );
          }),
          (n.call = function (e, t, n) {
            return kt(this, Nn.delayedCall(0, e, t), n);
          }),
          (n.staggerTo = function (e, t, n, i, r, a, o) {
            return (
              (n.duration = t),
              (n.stagger = n.stagger || i),
              (n.onComplete = a),
              (n.onCompleteParams = o),
              (n.parent = this),
              new Nn(e, n, It(this, r)),
              this
            );
          }),
          (n.staggerFrom = function (e, t, n, i, r, a, o) {
            return (
              (n.runBackwards = 1),
              (pt(n).immediateRender = xe(n.immediateRender)),
              this.staggerTo(e, t, n, i, r, a, o)
            );
          }),
          (n.staggerFromTo = function (e, t, n, i, r, a, o, s) {
            return (
              (i.startAt = n),
              (pt(i).immediateRender = xe(i.immediateRender)),
              this.staggerTo(e, t, i, r, a, o, s)
            );
          }),
          (n.render = function (e, t, n) {
            var i,
              r,
              a,
              o,
              s,
              l,
              u,
              c,
              h,
              d,
              p,
              f,
              v = this._time,
              m = this._dirty ? this.totalDuration() : this._tDur,
              g = this._dur,
              _ = e <= 0 ? 0 : nt(e),
              y = this._zTime < 0 != e < 0 && (this._initted || !g);
            if (
              (this !== Q && _ > m && e >= 0 && (_ = m),
              _ !== this._tTime || n || y)
            ) {
              if (
                (v !== this._time &&
                  g &&
                  ((_ += this._time - v), (e += this._time - v)),
                (i = _),
                (h = this._start),
                (l = !(c = this._ts)),
                y && (g || (v = this._zTime), (e || !t) && (this._zTime = e)),
                this._repeat)
              ) {
                if (
                  ((p = this._yoyo),
                  (s = g + this._rDelay),
                  this._repeat < -1 && e < 0)
                )
                  return this.totalTime(100 * s + e, t, n);
                if (
                  ((i = nt(_ % s)),
                  _ === m
                    ? ((o = this._repeat), (i = g))
                    : ((o = ~~(_ / s)) && o === _ / s && ((i = g), o--),
                      i > g && (i = g)),
                  (d = xt(this._tTime, s)),
                  !v && this._tTime && d !== o && (d = o),
                  p && 1 & o && ((i = g - i), (f = 1)),
                  o !== d && !this._lock)
                ) {
                  var b = p && 1 & d,
                    x = b === (p && 1 & o);
                  if (
                    (o < d && (b = !b),
                    (v = b ? 0 : g),
                    (this._lock = 1),
                    (this.render(v || (f ? 0 : nt(o * s)), t, !g)._lock = 0),
                    (this._tTime = _),
                    !t && this.parent && Qt(this, "onRepeat"),
                    this.vars.repeatRefresh &&
                      !f &&
                      (this.invalidate()._lock = 1),
                    (v && v !== this._time) ||
                      l !== !this._ts ||
                      (this.vars.onRepeat && !this.parent && !this._act))
                  )
                    return this;
                  if (
                    ((g = this._dur),
                    (m = this._tDur),
                    x &&
                      ((this._lock = 2),
                      (v = b ? g : -1e-4),
                      this.render(v, !0),
                      this.vars.repeatRefresh && !f && this.invalidate()),
                    (this._lock = 0),
                    !this._ts && !l)
                  )
                    return this;
                  gn(this, f);
                }
              }
              if (
                (this._hasPause &&
                  !this._forcing &&
                  this._lock < 2 &&
                  ((u = (function (e, t, n) {
                    var i;
                    if (n > t)
                      for (i = e._first; i && i._start <= n; ) {
                        if ("isPause" === i.data && i._start > t) return i;
                        i = i._next;
                      }
                    else
                      for (i = e._last; i && i._start >= n; ) {
                        if ("isPause" === i.data && i._start < t) return i;
                        i = i._prev;
                      }
                  })(this, nt(v), nt(i))),
                  u && (_ -= i - (i = u._start))),
                (this._tTime = _),
                (this._time = i),
                (this._act = !c),
                this._initted ||
                  ((this._onUpdate = this.vars.onUpdate),
                  (this._initted = 1),
                  (this._zTime = e),
                  (v = 0)),
                !v && i && !t && (Qt(this, "onStart"), this._tTime !== _))
              )
                return this;
              if (i >= v && e >= 0)
                for (r = this._first; r; ) {
                  if (
                    ((a = r._next),
                    (r._act || i >= r._start) && r._ts && u !== r)
                  ) {
                    if (r.parent !== this) return this.render(e, t, n);
                    if (
                      (r.render(
                        r._ts > 0
                          ? (i - r._start) * r._ts
                          : (r._dirty ? r.totalDuration() : r._tDur) +
                              (i - r._start) * r._ts,
                        t,
                        n
                      ),
                      i !== this._time || (!this._ts && !l))
                    ) {
                      (u = 0), a && (_ += this._zTime = -ue);
                      break;
                    }
                  }
                  r = a;
                }
              else {
                r = this._last;
                for (var w = e < 0 ? e : i; r; ) {
                  if (
                    ((a = r._prev), (r._act || w <= r._end) && r._ts && u !== r)
                  ) {
                    if (r.parent !== this) return this.render(e, t, n);
                    if (
                      (r.render(
                        r._ts > 0
                          ? (w - r._start) * r._ts
                          : (r._dirty ? r.totalDuration() : r._tDur) +
                              (w - r._start) * r._ts,
                        t,
                        n || (Z && (r._initted || r._startAt))
                      ),
                      i !== this._time || (!this._ts && !l))
                    ) {
                      (u = 0), a && (_ += this._zTime = w ? -ue : ue);
                      break;
                    }
                  }
                  r = a;
                }
              }
              if (
                u &&
                !t &&
                (this.pause(),
                (u.render(i >= v ? 0 : -ue)._zTime = i >= v ? 1 : -1),
                this._ts)
              )
                return (this._start = h), St(this), this.render(e, t, n);
              this._onUpdate && !t && Qt(this, "onUpdate", !0),
                ((_ === m && this._tTime >= this.totalDuration()) ||
                  (!_ && v)) &&
                  (h === this._start || Math.abs(c) !== Math.abs(this._ts)) &&
                  (this._lock ||
                    ((e || !g) &&
                      ((_ === m && this._ts > 0) || (!_ && this._ts < 0)) &&
                      mt(this, 1),
                    !t &&
                      (!(e < 0) || v) &&
                      (_ || v || !m) &&
                      (Qt(
                        this,
                        _ === m && e >= 0 ? "onComplete" : "onReverseComplete",
                        !0
                      ),
                      this._prom &&
                        !(_ < m && this.timeScale() > 0) &&
                        this._prom())));
            }
            return this;
          }),
          (n.add = function (e, t) {
            var n = this;
            if ((_e(t) || (t = It(this, t, e)), !(e instanceof Mn))) {
              if (Te(e))
                return (
                  e.forEach(function (e) {
                    return n.add(e, t);
                  }),
                  this
                );
              if (me(e)) return this.addLabel(e, t);
              if (!ge(e)) return this;
              e = Nn.delayedCall(0, e);
            }
            return this !== e ? kt(this, e, t) : this;
          }),
          (n.getChildren = function (e, t, n, i) {
            void 0 === e && (e = !0),
              void 0 === t && (t = !0),
              void 0 === n && (n = !0),
              void 0 === i && (i = -le);
            for (var r = [], a = this._first; a; )
              a._start >= i &&
                (a instanceof Nn
                  ? t && r.push(a)
                  : (n && r.push(a),
                    e && r.push.apply(r, a.getChildren(!0, t, n)))),
                (a = a._next);
            return r;
          }),
          (n.getById = function (e) {
            for (var t = this.getChildren(1, 1, 1), n = t.length; n--; )
              if (t[n].vars.id === e) return t[n];
          }),
          (n.remove = function (e) {
            return me(e)
              ? this.removeLabel(e)
              : ge(e)
              ? this.killTweensOf(e)
              : (vt(this, e),
                e === this._recent && (this._recent = this._last),
                gt(this));
          }),
          (n.totalTime = function (t, n) {
            return arguments.length
              ? ((this._forcing = 1),
                !this._dp &&
                  this._ts &&
                  (this._start = nt(
                    cn.time -
                      (this._ts > 0
                        ? t / this._ts
                        : (this.totalDuration() - t) / -this._ts)
                  )),
                e.prototype.totalTime.call(this, t, n),
                (this._forcing = 0),
                this)
              : this._tTime;
          }),
          (n.addLabel = function (e, t) {
            return (this.labels[e] = It(this, t)), this;
          }),
          (n.removeLabel = function (e) {
            return delete this.labels[e], this;
          }),
          (n.addPause = function (e, t, n) {
            var i = Nn.delayedCall(0, t || Be, n);
            return (
              (i.data = "isPause"),
              (this._hasPause = 1),
              kt(this, i, It(this, e))
            );
          }),
          (n.removePause = function (e) {
            var t = this._first;
            for (e = It(this, e); t; )
              t._start === e && "isPause" === t.data && mt(t), (t = t._next);
          }),
          (n.killTweensOf = function (e, t, n) {
            for (var i = this.getTweensOf(e, n), r = i.length; r--; )
              kn !== i[r] && i[r].kill(e, t);
            return this;
          }),
          (n.getTweensOf = function (e, t) {
            for (var n, i = [], r = Vt(e), a = this._first, o = _e(t); a; )
              a instanceof Nn
                ? rt(a._targets, r) &&
                  (o
                    ? (!kn || (a._initted && a._ts)) &&
                      a.globalTime(0) <= t &&
                      a.globalTime(a.totalDuration()) > t
                    : !t || a.isActive()) &&
                  i.push(a)
                : (n = a.getTweensOf(r, t)).length && i.push.apply(i, n),
                (a = a._next);
            return i;
          }),
          (n.tweenTo = function (e, t) {
            t = t || {};
            var n,
              i = this,
              r = It(i, e),
              a = t,
              o = a.startAt,
              s = a.onStart,
              l = a.onStartParams,
              u = a.immediateRender,
              c = Nn.to(
                i,
                ut(
                  {
                    ease: t.ease || "none",
                    lazy: !1,
                    immediateRender: !1,
                    time: r,
                    overwrite: "auto",
                    duration:
                      t.duration ||
                      Math.abs(
                        (r - (o && "time" in o ? o.time : i._time)) /
                          i.timeScale()
                      ) ||
                      ue,
                    onStart: function () {
                      if ((i.pause(), !n)) {
                        var e =
                          t.duration ||
                          Math.abs(
                            (r - (o && "time" in o ? o.time : i._time)) /
                              i.timeScale()
                          );
                        c._dur !== e && Pt(c, e, 0, 1).render(c._time, !0, !0),
                          (n = 1);
                      }
                      s && s.apply(c, l || []);
                    }
                  },
                  t
                )
              );
            return u ? c.render(0) : c;
          }),
          (n.tweenFromTo = function (e, t, n) {
            return this.tweenTo(t, ut({ startAt: { time: It(this, e) } }, n));
          }),
          (n.recent = function () {
            return this._recent;
          }),
          (n.nextLabel = function (e) {
            return void 0 === e && (e = this._time), Jt(this, It(this, e));
          }),
          (n.previousLabel = function (e) {
            return void 0 === e && (e = this._time), Jt(this, It(this, e), 1);
          }),
          (n.currentLabel = function (e) {
            return arguments.length
              ? this.seek(e, !0)
              : this.previousLabel(this._time + ue);
          }),
          (n.shiftChildren = function (e, t, n) {
            void 0 === n && (n = 0);
            for (var i, r = this._first, a = this.labels; r; )
              r._start >= n && ((r._start += e), (r._end += e)), (r = r._next);
            if (t) for (i in a) a[i] >= n && (a[i] += e);
            return gt(this);
          }),
          (n.invalidate = function (t) {
            var n = this._first;
            for (this._lock = 0; n; ) n.invalidate(t), (n = n._next);
            return e.prototype.invalidate.call(this, t);
          }),
          (n.clear = function (e) {
            void 0 === e && (e = !0);
            for (var t, n = this._first; n; )
              (t = n._next), this.remove(n), (n = t);
            return (
              this._dp && (this._time = this._tTime = this._pTime = 0),
              e && (this.labels = {}),
              gt(this)
            );
          }),
          (n.totalDuration = function (e) {
            var t,
              n,
              i,
              r = 0,
              a = this,
              o = a._last,
              s = le;
            if (arguments.length)
              return a.timeScale(
                (a._repeat < 0 ? a.duration() : a.totalDuration()) /
                  (a.reversed() ? -e : e)
              );
            if (a._dirty) {
              for (i = a.parent; o; )
                (t = o._prev),
                  o._dirty && o.totalDuration(),
                  (n = o._start) > s && a._sort && o._ts && !a._lock
                    ? ((a._lock = 1), (kt(a, o, n - o._delay, 1)._lock = 0))
                    : (s = n),
                  n < 0 &&
                    o._ts &&
                    ((r -= n),
                    ((!i && !a._dp) || (i && i.smoothChildTiming)) &&
                      ((a._start += n / a._ts),
                      (a._time -= n),
                      (a._tTime -= n)),
                    a.shiftChildren(-n, !1, -1 / 0),
                    (s = 0)),
                  o._end > r && o._ts && (r = o._end),
                  (o = t);
              Pt(a, a === Q && a._time > r ? a._time : r, 1, 1), (a._dirty = 0);
            }
            return a._tDur;
          }),
          (t.updateRoot = function (e) {
            if ((Q._ts && (ot(Q, wt(e, Q)), (ie = cn.frame)), cn.frame >= Xe)) {
              Xe += oe.autoSleep || 120;
              var t = Q._first;
              if ((!t || !t._ts) && oe.autoSleep && cn._listeners.length < 2) {
                for (; t && !t._ts; ) t = t._next;
                t || cn.sleep();
              }
            }
          }),
          t
        );
      })(Mn);
      ut(Tn.prototype, { _lock: 0, _hasPause: 0, _forcing: 0 });
      var kn,
        En,
        Cn = function (e, t, n, i, r, a, o) {
          var s,
            l,
            u,
            c,
            h,
            d,
            p,
            f,
            v = new Zn(this._pt, e, t, 0, 1, Wn, null, r),
            m = 0,
            g = 0;
          for (
            v.b = n,
              v.e = i,
              n += "",
              (p = ~(i += "").indexOf("random(")) && (i = Yt(i)),
              a && (a((f = [n, i]), e, t), (n = f[0]), (i = f[1])),
              l = n.match(De) || [];
            (s = De.exec(i));

          )
            (c = s[0]),
              (h = i.substring(m, s.index)),
              u ? (u = (u + 1) % 5) : "rgba(" === h.substr(-5) && (u = 1),
              c !== l[g++] &&
                ((d = parseFloat(l[g - 1]) || 0),
                (v._pt = {
                  _next: v._pt,
                  p: h || 1 === g ? h : ",",
                  s: d,
                  c: "=" === c.charAt(1) ? it(d, c) - d : parseFloat(c) - d,
                  m: u && u < 4 ? Math.round : 0
                }),
                (m = De.lastIndex));
          return (
            (v.c = m < i.length ? i.substring(m, i.length) : ""),
            (v.fp = o),
            (Ae.test(i) || p) && (v.e = 0),
            (this._pt = v),
            v
          );
        },
        Dn = function (e, t, n, i, r, a, o, s, l, u) {
          ge(i) && (i = i(r || 0, e, a));
          var c,
            h = e[t],
            d =
              "get" !== n
                ? n
                : ge(h)
                ? l
                  ? e[
                      t.indexOf("set") || !ge(e["get" + t.substr(3)])
                        ? t
                        : "get" + t.substr(3)
                    ](l)
                  : e[t]()
                : h,
            p = ge(h) ? (l ? Bn : Un) : Fn;
          if (
            (me(i) &&
              (~i.indexOf("random(") && (i = Yt(i)),
              "=" === i.charAt(1) &&
                ((c = it(d, i) + (Ut(d) || 0)) || 0 === c) &&
                (i = c)),
            !u || d !== i || En)
          )
            return isNaN(d * i) || "" === i
              ? (!h && !(t in e) && Ne(t, i),
                Cn.call(this, e, t, d, i, p, s || oe.stringFilter, l))
              : ((c = new Zn(
                  this._pt,
                  e,
                  t,
                  +d || 0,
                  i - (d || 0),
                  "boolean" == typeof h ? Gn : Hn,
                  0,
                  p
                )),
                l && (c.fp = l),
                o && c.modifier(o, this, e),
                (this._pt = c));
        },
        An = function (e, t, n, i, r, a) {
          var o, s, l, u;
          if (
            qe[e] &&
            !1 !==
              (o = new qe[e]()).init(
                r,
                o.rawVars
                  ? t[e]
                  : (function (e, t, n, i, r) {
                      if (
                        (ge(e) && (e = Rn(e, r, t, n, i)),
                        !be(e) || (e.style && e.nodeType) || Te(e) || Me(e))
                      )
                        return me(e) ? Rn(e, r, t, n, i) : e;
                      var a,
                        o = {};
                      for (a in e) o[a] = Rn(e[a], r, t, n, i);
                      return o;
                    })(t[e], i, r, a, n),
                n,
                i,
                a
              ) &&
            ((n._pt = s =
              new Zn(n._pt, r, e, 0, 1, o.render, o, 0, o.priority)),
            n !== re)
          )
            for (
              l = n._ptLookup[n._targets.indexOf(r)], u = o._props.length;
              u--;

            )
              l[o._props[u]] = s;
          return o;
        },
        Pn = function e(t, n, i) {
          var r,
            a,
            o,
            s,
            l,
            u,
            c,
            h,
            d,
            p,
            f,
            v,
            m,
            g = t.vars,
            _ = g.ease,
            y = g.startAt,
            b = g.immediateRender,
            x = g.lazy,
            w = g.onUpdate,
            S = g.onUpdateParams,
            M = g.callbackScope,
            T = g.runBackwards,
            k = g.yoyoEase,
            E = g.keyframes,
            C = g.autoRevert,
            D = t._dur,
            A = t._startAt,
            P = t._targets,
            L = t.parent,
            R = L && "nested" === L.data ? L.vars.targets : P,
            I = "auto" === t._overwrite && !Y,
            O = t.timeline;
          if (
            (O && (!E || !_) && (_ = "none"),
            (t._ease = _n(_, se.ease)),
            (t._yEase = k ? mn(_n(!0 === k ? _ : k, se.ease)) : 0),
            k &&
              t._yoyo &&
              !t._repeat &&
              ((k = t._yEase), (t._yEase = t._ease), (t._ease = k)),
            (t._from = !O && !!g.runBackwards),
            !O || (E && !g.stagger))
          ) {
            if (
              ((v = (h = P[0] ? Qe(P[0]).harness : 0) && g[h.prop]),
              (r = dt(g, Ge)),
              A &&
                (A._zTime < 0 && A.progress(1),
                n < 0 && T && b && !C
                  ? A.render(-1, !0)
                  : A.revert(T && D ? Ve : ze),
                (A._lazy = 0)),
              y)
            ) {
              if (
                (mt(
                  (t._startAt = Nn.set(
                    P,
                    ut(
                      {
                        data: "isStart",
                        overwrite: !1,
                        parent: L,
                        immediateRender: !0,
                        lazy: !A && xe(x),
                        startAt: null,
                        delay: 0,
                        onUpdate: w,
                        onUpdateParams: S,
                        callbackScope: M,
                        stagger: 0
                      },
                      y
                    )
                  ))
                ),
                (t._startAt._dp = 0),
                (t._startAt._sat = t),
                n < 0 && (Z || (!b && !C)) && t._startAt.revert(Ve),
                b && D && n <= 0 && i <= 0)
              )
                return void (n && (t._zTime = n));
            } else if (T && D && !A)
              if (
                (n && (b = !1),
                (o = ut(
                  {
                    overwrite: !1,
                    data: "isFromStart",
                    lazy: b && !A && xe(x),
                    immediateRender: b,
                    stagger: 0,
                    parent: L
                  },
                  r
                )),
                v && (o[h.prop] = v),
                mt((t._startAt = Nn.set(P, o))),
                (t._startAt._dp = 0),
                (t._startAt._sat = t),
                n < 0 &&
                  (Z ? t._startAt.revert(Ve) : t._startAt.render(-1, !0)),
                (t._zTime = n),
                b)
              ) {
                if (!n) return;
              } else e(t._startAt, ue, ue);
            for (
              t._pt = t._ptCache = 0, x = (D && xe(x)) || (x && !D), a = 0;
              a < P.length;
              a++
            ) {
              if (
                ((c = (l = P[a])._gsap || Je(P)[a]._gsap),
                (t._ptLookup[a] = p = {}),
                je[c.id] && We.length && at(),
                (f = R === P ? a : R.indexOf(l)),
                h &&
                  !1 !== (d = new h()).init(l, v || r, t, f, R) &&
                  ((t._pt = s =
                    new Zn(t._pt, l, d.name, 0, 1, d.render, d, 0, d.priority)),
                  d._props.forEach(function (e) {
                    p[e] = s;
                  }),
                  d.priority && (u = 1)),
                !h || v)
              )
                for (o in r)
                  qe[o] && (d = An(o, r, t, f, l, R))
                    ? d.priority && (u = 1)
                    : (p[o] = s =
                        Dn.call(t, l, o, "get", r[o], f, R, 0, g.stringFilter));
              t._op && t._op[a] && t.kill(l, t._op[a]),
                I &&
                  t._pt &&
                  ((kn = t),
                  Q.killTweensOf(l, p, t.globalTime(n)),
                  (m = !t.parent),
                  (kn = 0)),
                t._pt && x && (je[c.id] = 1);
            }
            u && Yn(t), t._onInit && t._onInit(t);
          }
          (t._onUpdate = w),
            (t._initted = (!t._op || t._pt) && !m),
            E && n <= 0 && O.render(le, !0, !0);
        },
        Ln = function (e, t, n, i) {
          var r,
            a,
            o = t.ease || i || "power1.inOut";
          if (Te(t))
            (a = n[e] || (n[e] = [])),
              t.forEach(function (e, n) {
                return a.push({ t: (n / (t.length - 1)) * 100, v: e, e: o });
              });
          else
            for (r in t)
              (a = n[r] || (n[r] = [])),
                "ease" === r || a.push({ t: parseFloat(e), v: t[r], e: o });
        },
        Rn = function (e, t, n, i, r) {
          return ge(e)
            ? e.call(t, n, i, r)
            : me(e) && ~e.indexOf("random(")
            ? Yt(e)
            : e;
        },
        In = Ze + "repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",
        On = {};
      et(In + ",id,stagger,delay,duration,paused,scrollTrigger", function (e) {
        return (On[e] = 1);
      });
      var Nn = (function (e) {
        function t(t, n, i, r) {
          var a;
          "number" == typeof n && ((i.duration = n), (n = i), (i = null));
          var o,
            s,
            l,
            u,
            c,
            h,
            d,
            p,
            f = (a = e.call(this, r ? n : pt(n)) || this).vars,
            v = f.duration,
            m = f.delay,
            g = f.immediateRender,
            _ = f.stagger,
            y = f.overwrite,
            b = f.keyframes,
            x = f.defaults,
            w = f.scrollTrigger,
            S = f.yoyoEase,
            M = n.parent || Q,
            T = (Te(t) || Me(t) ? _e(t[0]) : "length" in n) ? [t] : Vt(t);
          if (
            ((a._targets = T.length
              ? Je(T)
              : Fe(
                  "GSAP target " + t + " not found. https://greensock.com",
                  !oe.nullTargetWarn
                ) || []),
            (a._ptLookup = []),
            (a._overwrite = y),
            b || _ || Se(v) || Se(m))
          ) {
            if (
              ((n = a.vars),
              (o = a.timeline =
                new Tn({
                  data: "nested",
                  defaults: x || {},
                  targets: M && "nested" === M.data ? M.vars.targets : T
                })).kill(),
              (o.parent = o._dp = K(a)),
              (o._start = 0),
              _ || Se(v) || Se(m))
            ) {
              if (((u = T.length), (d = _ && Wt(_)), be(_)))
                for (c in _) ~In.indexOf(c) && (p || (p = {}), (p[c] = _[c]));
              for (s = 0; s < u; s++)
                ((l = dt(n, On)).stagger = 0),
                  S && (l.yoyoEase = S),
                  p && ct(l, p),
                  (h = T[s]),
                  (l.duration = +Rn(v, K(a), s, h, T)),
                  (l.delay = (+Rn(m, K(a), s, h, T) || 0) - a._delay),
                  !_ &&
                    1 === u &&
                    l.delay &&
                    ((a._delay = m = l.delay), (a._start += m), (l.delay = 0)),
                  o.to(h, l, d ? d(s, h, T) : 0),
                  (o._ease = dn.none);
              o.duration() ? (v = m = 0) : (a.timeline = 0);
            } else if (b) {
              pt(ut(o.vars.defaults, { ease: "none" })),
                (o._ease = _n(b.ease || n.ease || "none"));
              var k,
                E,
                C,
                D = 0;
              if (Te(b))
                b.forEach(function (e) {
                  return o.to(T, e, ">");
                }),
                  o.duration();
              else {
                for (c in ((l = {}), b))
                  "ease" === c ||
                    "easeEach" === c ||
                    Ln(c, b[c], l, b.easeEach);
                for (c in l)
                  for (
                    k = l[c].sort(function (e, t) {
                      return e.t - t.t;
                    }),
                      D = 0,
                      s = 0;
                    s < k.length;
                    s++
                  )
                    ((C = {
                      ease: (E = k[s]).e,
                      duration: ((E.t - (s ? k[s - 1].t : 0)) / 100) * v
                    })[c] = E.v),
                      o.to(T, C, D),
                      (D += C.duration);
                o.duration() < v && o.to({}, { duration: v - o.duration() });
              }
            }
            v || a.duration((v = o.duration()));
          } else a.timeline = 0;
          return (
            !0 === y && !Y && ((kn = K(a)), Q.killTweensOf(T), (kn = 0)),
            kt(M, K(a), i),
            n.reversed && a.reverse(),
            n.paused && a.paused(!0),
            (g ||
              (!v &&
                !b &&
                a._start === nt(M._time) &&
                xe(g) &&
                yt(K(a)) &&
                "nested" !== M.data)) &&
              ((a._tTime = -ue), a.render(Math.max(0, -m) || 0)),
            w && Et(K(a), w),
            a
          );
        }
        X(t, e);
        var n = t.prototype;
        return (
          (n.render = function (e, t, n) {
            var i,
              r,
              a,
              o,
              s,
              l,
              u,
              c,
              h,
              d = this._time,
              p = this._tDur,
              f = this._dur,
              v = e < 0,
              m = e > p - ue && !v ? p : e < ue ? 0 : e;
            if (f) {
              if (
                m !== this._tTime ||
                !e ||
                n ||
                (!this._initted && this._tTime) ||
                (this._startAt && this._zTime < 0 !== v)
              ) {
                if (((i = m), (c = this.timeline), this._repeat)) {
                  if (((o = f + this._rDelay), this._repeat < -1 && v))
                    return this.totalTime(100 * o + e, t, n);
                  if (
                    ((i = nt(m % o)),
                    m === p
                      ? ((a = this._repeat), (i = f))
                      : ((a = ~~(m / o)) && a === m / o && ((i = f), a--),
                        i > f && (i = f)),
                    (l = this._yoyo && 1 & a) &&
                      ((h = this._yEase), (i = f - i)),
                    (s = xt(this._tTime, o)),
                    i === d && !n && this._initted)
                  )
                    return (this._tTime = m), this;
                  a !== s &&
                    (c && this._yEase && gn(c, l),
                    this.vars.repeatRefresh &&
                      !l &&
                      !this._lock &&
                      ((this._lock = n = 1),
                      (this.render(nt(o * a), !0).invalidate()._lock = 0)));
                }
                if (!this._initted) {
                  if (Ct(this, v ? e : i, n, t, m))
                    return (this._tTime = 0), this;
                  if (d !== this._time) return this;
                  if (f !== this._dur) return this.render(e, t, n);
                }
                if (
                  ((this._tTime = m),
                  (this._time = i),
                  !this._act && this._ts && ((this._act = 1), (this._lazy = 0)),
                  (this.ratio = u = (h || this._ease)(i / f)),
                  this._from && (this.ratio = u = 1 - u),
                  i && !d && !t && (Qt(this, "onStart"), this._tTime !== m))
                )
                  return this;
                for (r = this._pt; r; ) r.r(u, r.d), (r = r._next);
                (c &&
                  c.render(
                    e < 0 ? e : !i && l ? -ue : c._dur * c._ease(i / this._dur),
                    t,
                    n
                  )) ||
                  (this._startAt && (this._zTime = e)),
                  this._onUpdate &&
                    !t &&
                    (v && _t(this, e, 0, n), Qt(this, "onUpdate")),
                  this._repeat &&
                    a !== s &&
                    this.vars.onRepeat &&
                    !t &&
                    this.parent &&
                    Qt(this, "onRepeat"),
                  (m === this._tDur || !m) &&
                    this._tTime === m &&
                    (v && !this._onUpdate && _t(this, e, 0, !0),
                    (e || !f) &&
                      ((m === this._tDur && this._ts > 0) ||
                        (!m && this._ts < 0)) &&
                      mt(this, 1),
                    !t &&
                      (!v || d) &&
                      (m || d || l) &&
                      (Qt(
                        this,
                        m === p ? "onComplete" : "onReverseComplete",
                        !0
                      ),
                      this._prom &&
                        !(m < p && this.timeScale() > 0) &&
                        this._prom()));
              }
            } else
              !(function (e, t, n, i) {
                var r,
                  a,
                  o,
                  s = e.ratio,
                  l =
                    t < 0 ||
                    (!t &&
                      ((!e._start && Dt(e) && (e._initted || !At(e))) ||
                        ((e._ts < 0 || e._dp._ts < 0) && !At(e))))
                      ? 0
                      : 1,
                  u = e._rDelay,
                  c = 0;
                if (
                  (u &&
                    e._repeat &&
                    ((c = Ft(0, e._tDur, t)),
                    (a = xt(c, u)),
                    e._yoyo && 1 & a && (l = 1 - l),
                    a !== xt(e._tTime, u) &&
                      ((s = 1 - l),
                      e.vars.repeatRefresh && e._initted && e.invalidate())),
                  l !== s || Z || i || e._zTime === ue || (!t && e._zTime))
                ) {
                  if (!e._initted && Ct(e, t, i, n, c)) return;
                  for (
                    o = e._zTime,
                      e._zTime = t || (n ? ue : 0),
                      n || (n = t && !o),
                      e.ratio = l,
                      e._from && (l = 1 - l),
                      e._time = 0,
                      e._tTime = c,
                      r = e._pt;
                    r;

                  )
                    r.r(l, r.d), (r = r._next);
                  t < 0 && _t(e, t, 0, !0),
                    e._onUpdate && !n && Qt(e, "onUpdate"),
                    c && e._repeat && !n && e.parent && Qt(e, "onRepeat"),
                    (t >= e._tDur || t < 0) &&
                      e.ratio === l &&
                      (l && mt(e, 1),
                      !n &&
                        !Z &&
                        (Qt(e, l ? "onComplete" : "onReverseComplete", !0),
                        e._prom && e._prom()));
                } else e._zTime || (e._zTime = t);
              })(this, e, t, n);
            return this;
          }),
          (n.targets = function () {
            return this._targets;
          }),
          (n.invalidate = function (t) {
            return (
              (!t || !this.vars.runBackwards) && (this._startAt = 0),
              (this._pt =
                this._op =
                this._onUpdate =
                this._lazy =
                this.ratio =
                  0),
              (this._ptLookup = []),
              this.timeline && this.timeline.invalidate(t),
              e.prototype.invalidate.call(this, t)
            );
          }),
          (n.resetTo = function (e, t, n, i) {
            ae || cn.wake(), this._ts || this.play();
            var r = Math.min(
              this._dur,
              (this._dp._time - this._start) * this._ts
            );
            return (
              this._initted || Pn(this, r),
              (function (e, t, n, i, r, a, o) {
                var s,
                  l,
                  u,
                  c,
                  h = ((e._pt && e._ptCache) || (e._ptCache = {}))[t];
                if (!h)
                  for (
                    h = e._ptCache[t] = [],
                      u = e._ptLookup,
                      c = e._targets.length;
                    c--;

                  ) {
                    if ((s = u[c][t]) && s.d && s.d._pt)
                      for (s = s.d._pt; s && s.p !== t && s.fp !== t; )
                        s = s._next;
                    if (!s)
                      return (
                        (En = 1), (e.vars[t] = "+=0"), Pn(e, o), (En = 0), 1
                      );
                    h.push(s);
                  }
                for (c = h.length; c--; )
                  ((s = (l = h[c])._pt || l).s =
                    (!i && 0 !== i) || r ? s.s + (i || 0) + a * s.c : i),
                    (s.c = n - s.s),
                    l.e && (l.e = tt(n) + Ut(l.e)),
                    l.b && (l.b = s.s + Ut(l.b));
              })(this, e, t, n, i, this._ease(r / this._dur), r)
                ? this.resetTo(e, t, n, i)
                : (Mt(this, 0),
                  this.parent ||
                    ft(
                      this._dp,
                      this,
                      "_first",
                      "_last",
                      this._dp._sort ? "_start" : 0
                    ),
                  this.render(0))
            );
          }),
          (n.kill = function (e, t) {
            if ((void 0 === t && (t = "all"), !(e || (t && "all" !== t))))
              return (this._lazy = this._pt = 0), this.parent ? $t(this) : this;
            if (this.timeline) {
              var n = this.timeline.totalDuration();
              return (
                this.timeline.killTweensOf(e, t, kn && !0 !== kn.vars.overwrite)
                  ._first || $t(this),
                this.parent &&
                  n !== this.timeline.totalDuration() &&
                  Pt(this, (this._dur * this.timeline._tDur) / n, 0, 1),
                this
              );
            }
            var i,
              r,
              a,
              o,
              s,
              l,
              u,
              c = this._targets,
              h = e ? Vt(e) : c,
              d = this._ptLookup,
              p = this._pt;
            if (
              (!t || "all" === t) &&
              (function (e, t) {
                for (
                  var n = e.length, i = n === t.length;
                  i && n-- && e[n] === t[n];

                );
                return n < 0;
              })(c, h)
            )
              return "all" === t && (this._pt = 0), $t(this);
            for (
              i = this._op = this._op || [],
                "all" !== t &&
                  (me(t) &&
                    ((s = {}),
                    et(t, function (e) {
                      return (s[e] = 1);
                    }),
                    (t = s)),
                  (t = (function (e, t) {
                    var n,
                      i,
                      r,
                      a,
                      o = e[0] ? Qe(e[0]).harness : 0,
                      s = o && o.aliases;
                    if (!s) return t;
                    for (i in ((n = ct({}, t)), s))
                      if ((i in n))
                        for (r = (a = s[i].split(",")).length; r--; )
                          n[a[r]] = n[i];
                    return n;
                  })(c, t))),
                u = c.length;
              u--;

            )
              if (~h.indexOf(c[u]))
                for (s in ((r = d[u]),
                "all" === t
                  ? ((i[u] = t), (o = r), (a = {}))
                  : ((a = i[u] = i[u] || {}), (o = t)),
                o))
                  (l = r && r[s]) &&
                    ((!("kill" in l.d) || !0 === l.d.kill(s)) &&
                      vt(this, l, "_pt"),
                    delete r[s]),
                    "all" !== a && (a[s] = 1);
            return this._initted && !this._pt && p && $t(this), this;
          }),
          (t.to = function (e, n) {
            return new t(e, n, arguments[2]);
          }),
          (t.from = function (e, t) {
            return Ot(1, arguments);
          }),
          (t.delayedCall = function (e, n, i, r) {
            return new t(n, 0, {
              immediateRender: !1,
              lazy: !1,
              overwrite: !1,
              delay: e,
              onComplete: n,
              onReverseComplete: n,
              onCompleteParams: i,
              onReverseCompleteParams: i,
              callbackScope: r
            });
          }),
          (t.fromTo = function (e, t, n) {
            return Ot(2, arguments);
          }),
          (t.set = function (e, n) {
            return (
              (n.duration = 0), n.repeatDelay || (n.repeat = 0), new t(e, n)
            );
          }),
          (t.killTweensOf = function (e, t, n) {
            return Q.killTweensOf(e, t, n);
          }),
          t
        );
      })(Mn);
      ut(Nn.prototype, {
        _targets: [],
        _lazy: 0,
        _startAt: 0,
        _op: 0,
        _onInit: 0
      }),
        et("staggerTo,staggerFrom,staggerFromTo", function (e) {
          Nn[e] = function () {
            var t = new Tn(),
              n = Bt.call(arguments, 0);
            return (
              n.splice("staggerFromTo" === e ? 5 : 4, 0, 0), t[e].apply(t, n)
            );
          };
        });
      var Fn = function (e, t, n) {
          return (e[t] = n);
        },
        Un = function (e, t, n) {
          return e[t](n);
        },
        Bn = function (e, t, n, i) {
          return e[t](i.fp, n);
        },
        zn = function (e, t, n) {
          return e.setAttribute(t, n);
        },
        Vn = function (e, t) {
          return ge(e[t]) ? Un : ye(e[t]) && e.setAttribute ? zn : Fn;
        },
        Hn = function (e, t) {
          return t.set(t.t, t.p, Math.round(1e6 * (t.s + t.c * e)) / 1e6, t);
        },
        Gn = function (e, t) {
          return t.set(t.t, t.p, !!(t.s + t.c * e), t);
        },
        Wn = function (e, t) {
          var n = t._pt,
            i = "";
          if (!e && t.b) i = t.b;
          else if (1 === e && t.e) i = t.e;
          else {
            for (; n; )
              (i =
                n.p +
                (n.m
                  ? n.m(n.s + n.c * e)
                  : Math.round(1e4 * (n.s + n.c * e)) / 1e4) +
                i),
                (n = n._next);
            i += t.c;
          }
          t.set(t.t, t.p, i, t);
        },
        jn = function (e, t) {
          for (var n = t._pt; n; ) n.r(e, n.d), (n = n._next);
        },
        qn = function (e, t, n, i) {
          for (var r, a = this._pt; a; )
            (r = a._next), a.p === i && a.modifier(e, t, n), (a = r);
        },
        Kn = function (e) {
          for (var t, n, i = this._pt; i; )
            (n = i._next),
              (i.p === e && !i.op) || i.op === e
                ? vt(this, i, "_pt")
                : i.dep || (t = 1),
              (i = n);
          return !t;
        },
        Xn = function (e, t, n, i) {
          i.mSet(e, t, i.m.call(i.tween, n, i.mt), i);
        },
        Yn = function (e) {
          for (var t, n, i, r, a = e._pt; a; ) {
            for (t = a._next, n = i; n && n.pr > a.pr; ) n = n._next;
            (a._prev = n ? n._prev : r) ? (a._prev._next = a) : (i = a),
              (a._next = n) ? (n._prev = a) : (r = a),
              (a = t);
          }
          e._pt = i;
        },
        Zn = (function () {
          function e(e, t, n, i, r, a, o, s, l) {
            (this.t = t),
              (this.s = i),
              (this.c = r),
              (this.p = n),
              (this.r = a || Hn),
              (this.d = o || this),
              (this.set = s || Fn),
              (this.pr = l || 0),
              (this._next = e),
              e && (e._prev = this);
          }
          return (
            (e.prototype.modifier = function (e, t, n) {
              (this.mSet = this.mSet || this.set),
                (this.set = Xn),
                (this.m = e),
                (this.mt = n),
                (this.tween = t);
            }),
            e
          );
        })();
      et(
        Ze +
          "parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",
        function (e) {
          return (Ge[e] = 1);
        }
      ),
        (Re.TweenMax = Re.TweenLite = Nn),
        (Re.TimelineLite = Re.TimelineMax = Tn),
        (Q = new Tn({
          sortChildren: !1,
          defaults: se,
          autoRemoveChildren: !0,
          id: "root",
          smoothChildTiming: !0
        })),
        (oe.stringFilter = un);
      var Jn = [],
        Qn = {},
        $n = [],
        ei = 0,
        ti = function (e) {
          return (Qn[e] || $n).map(function (e) {
            return e();
          });
        },
        ni = function () {
          var e = Date.now(),
            t = [];
          e - ei > 2 &&
            (ti("matchMediaInit"),
            Jn.forEach(function (e) {
              var n,
                i,
                r,
                a,
                o = e.queries,
                s = e.conditions;
              for (i in o)
                (n = $.matchMedia(o[i]).matches) && (r = 1),
                  n !== s[i] && ((s[i] = n), (a = 1));
              a && (e.revert(), r && t.push(e));
            }),
            ti("matchMediaRevert"),
            t.forEach(function (e) {
              return e.onMatch(e);
            }),
            (ei = e),
            ti("matchMedia"));
        },
        ii = (function () {
          function e(e, t) {
            (this.selector = t && Ht(t)),
              (this.data = []),
              (this._r = []),
              (this.isReverted = !1),
              e && this.add(e);
          }
          var t = e.prototype;
          return (
            (t.add = function (e, t, n) {
              ge(e) && ((n = t), (t = e), (e = ge));
              var i = this,
                r = function () {
                  var e,
                    r = J,
                    a = i.selector;
                  return (
                    r && r !== i && r.data.push(i),
                    n && (i.selector = Ht(n)),
                    (J = i),
                    (e = t.apply(i, arguments)),
                    ge(e) && i._r.push(e),
                    (J = r),
                    (i.selector = a),
                    (i.isReverted = !1),
                    e
                  );
                };
              return (i.last = r), e === ge ? r(i) : e ? (i[e] = r) : r;
            }),
            (t.ignore = function (e) {
              var t = J;
              (J = null), e(this), (J = t);
            }),
            (t.getTweens = function () {
              var t = [];
              return (
                this.data.forEach(function (n) {
                  return n instanceof e
                    ? t.push.apply(t, n.getTweens())
                    : n instanceof Nn &&
                        !(n.parent && "nested" === n.parent.data) &&
                        t.push(n);
                }),
                t
              );
            }),
            (t.clear = function () {
              this._r.length = this.data.length = 0;
            }),
            (t.kill = function (e, t) {
              var n = this;
              if (e) {
                var i = this.getTweens();
                this.data.forEach(function (e) {
                  "isFlip" === e.data &&
                    (e.revert(),
                    e.getChildren(!0, !0, !1).forEach(function (e) {
                      return i.splice(i.indexOf(e), 1);
                    }));
                }),
                  i
                    .map(function (e) {
                      return { g: e.globalTime(0), t: e };
                    })
                    .sort(function (e, t) {
                      return t.g - e.g || -1;
                    })
                    .forEach(function (t) {
                      return t.t.revert(e);
                    }),
                  this.data.forEach(function (t) {
                    return !(t instanceof Mn) && t.revert && t.revert(e);
                  }),
                  this._r.forEach(function (t) {
                    return t(e, n);
                  }),
                  (this.isReverted = !0);
              } else
                this.data.forEach(function (e) {
                  return e.kill && e.kill();
                });
              if ((this.clear(), t)) {
                var r = Jn.indexOf(this);
                ~r && Jn.splice(r, 1);
              }
            }),
            (t.revert = function (e) {
              this.kill(e || {});
            }),
            e
          );
        })(),
        ri = (function () {
          function e(e) {
            (this.contexts = []), (this.scope = e);
          }
          var t = e.prototype;
          return (
            (t.add = function (e, t, n) {
              be(e) || (e = { matches: e });
              var i,
                r,
                a,
                o = new ii(0, n || this.scope),
                s = (o.conditions = {});
              for (r in (this.contexts.push(o),
              (t = o.add("onMatch", t)),
              (o.queries = e),
              e))
                "all" === r
                  ? (a = 1)
                  : (i = $.matchMedia(e[r])) &&
                    (Jn.indexOf(o) < 0 && Jn.push(o),
                    (s[r] = i.matches) && (a = 1),
                    i.addListener
                      ? i.addListener(ni)
                      : i.addEventListener("change", ni));
              return a && t(o), this;
            }),
            (t.revert = function (e) {
              this.kill(e || {});
            }),
            (t.kill = function (e) {
              this.contexts.forEach(function (t) {
                return t.kill(e, !0);
              });
            }),
            e
          );
        })(),
        ai = {
          registerPlugin: function () {
            for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)
              t[n] = arguments[n];
            t.forEach(function (e) {
              return (function (e) {
                var t = (e = (!e.name && e.default) || e).name,
                  n = ge(e),
                  i =
                    t && !n && e.init
                      ? function () {
                          this._props = [];
                        }
                      : e,
                  r = {
                    init: Be,
                    render: jn,
                    add: Dn,
                    kill: Kn,
                    modifier: qn,
                    rawVars: 0
                  },
                  a = {
                    targetTest: 0,
                    get: 0,
                    getSetter: Vn,
                    aliases: {},
                    register: 0
                  };
                if ((hn(), e !== i)) {
                  if (qe[t]) return;
                  ut(i, ut(dt(e, r), a)),
                    ct(i.prototype, ct(r, dt(e, a))),
                    (qe[(i.prop = t)] = i),
                    e.targetTest && (Ye.push(i), (Ge[t] = 1)),
                    (t =
                      ("css" === t
                        ? "CSS"
                        : t.charAt(0).toUpperCase() + t.substr(1)) + "Plugin");
                }
                Ue(t, i), e.register && e.register(li, i, Zn);
              })(e);
            });
          },
          timeline: function (e) {
            return new Tn(e);
          },
          getTweensOf: function (e, t) {
            return Q.getTweensOf(e, t);
          },
          getProperty: function (e, t, n, i) {
            me(e) && (e = Vt(e)[0]);
            var r = Qe(e || {}).get,
              a = n ? lt : st;
            return (
              "native" === n && (n = ""),
              e &&
                (t
                  ? a(((qe[t] && qe[t].get) || r)(e, t, n, i))
                  : function (t, n, i) {
                      return a(((qe[t] && qe[t].get) || r)(e, t, n, i));
                    })
            );
          },
          quickSetter: function (e, t, n) {
            if ((e = Vt(e)).length > 1) {
              var i = e.map(function (e) {
                  return li.quickSetter(e, t, n);
                }),
                r = i.length;
              return function (e) {
                for (var t = r; t--; ) i[t](e);
              };
            }
            e = e[0] || {};
            var a = qe[t],
              o = Qe(e),
              s = (o.harness && (o.harness.aliases || {})[t]) || t,
              l = a
                ? function (t) {
                    var i = new a();
                    (re._pt = 0),
                      i.init(e, n ? t + n : t, re, 0, [e]),
                      i.render(1, i),
                      re._pt && jn(1, re);
                  }
                : o.set(e, s);
            return a
              ? l
              : function (t) {
                  return l(e, s, n ? t + n : t, o, 1);
                };
          },
          quickTo: function (e, t, n) {
            var i,
              r = li.to(
                e,
                ct((((i = {})[t] = "+=0.1"), (i.paused = !0), i), n || {})
              ),
              a = function (e, n, i) {
                return r.resetTo(t, e, n, i);
              };
            return (a.tween = r), a;
          },
          isTweening: function (e) {
            return Q.getTweensOf(e, !0).length > 0;
          },
          defaults: function (e) {
            return (
              e && e.ease && (e.ease = _n(e.ease, se.ease)), ht(se, e || {})
            );
          },
          config: function (e) {
            return ht(oe, e || {});
          },
          registerEffect: function (e) {
            var t = e.name,
              n = e.effect,
              i = e.plugins,
              r = e.defaults,
              a = e.extendTimeline;
            (i || "").split(",").forEach(function (e) {
              return (
                e &&
                !qe[e] &&
                !Re[e] &&
                Fe(t + " effect requires " + e + " plugin.")
              );
            }),
              (Ke[t] = function (e, t, i) {
                return n(Vt(e), ut(t || {}, r), i);
              }),
              a &&
                (Tn.prototype[t] = function (e, n, i) {
                  return this.add(Ke[t](e, be(n) ? n : (i = n) && {}, this), i);
                });
          },
          registerEase: function (e, t) {
            dn[e] = _n(t);
          },
          parseEase: function (e, t) {
            return arguments.length ? _n(e, t) : dn;
          },
          getById: function (e) {
            return Q.getById(e);
          },
          exportRoot: function (e, t) {
            void 0 === e && (e = {});
            var n,
              i,
              r = new Tn(e);
            for (
              r.smoothChildTiming = xe(e.smoothChildTiming),
                Q.remove(r),
                r._dp = 0,
                r._time = r._tTime = Q._time,
                n = Q._first;
              n;

            )
              (i = n._next),
                (t ||
                  !(
                    !n._dur &&
                    n instanceof Nn &&
                    n.vars.onComplete === n._targets[0]
                  )) &&
                  kt(r, n, n._start - n._delay),
                (n = i);
            return kt(Q, r, 0), r;
          },
          context: function (e, t) {
            return e ? new ii(e, t) : J;
          },
          matchMedia: function (e) {
            return new ri(e);
          },
          matchMediaRefresh: function () {
            return (
              Jn.forEach(function (e) {
                var t,
                  n,
                  i = e.conditions;
                for (n in i) i[n] && ((i[n] = !1), (t = 1));
                t && e.revert();
              }) || ni()
            );
          },
          addEventListener: function (e, t) {
            var n = Qn[e] || (Qn[e] = []);
            ~n.indexOf(t) || n.push(t);
          },
          removeEventListener: function (e, t) {
            var n = Qn[e],
              i = n && n.indexOf(t);
            i >= 0 && n.splice(i, 1);
          },
          utils: {
            wrap: function e(t, n, i) {
              var r = n - t;
              return Te(t)
                ? Xt(t, e(0, t.length), n)
                : Nt(i, function (e) {
                    return ((r + ((e - t) % r)) % r) + t;
                  });
            },
            wrapYoyo: function e(t, n, i) {
              var r = n - t,
                a = 2 * r;
              return Te(t)
                ? Xt(t, e(0, t.length - 1), n)
                : Nt(i, function (e) {
                    return (
                      t + ((e = (a + ((e - t) % a)) % a || 0) > r ? a - e : e)
                    );
                  });
            },
            distribute: Wt,
            random: Kt,
            snap: qt,
            normalize: function (e, t, n) {
              return Zt(e, t, 0, 1, n);
            },
            getUnit: Ut,
            clamp: function (e, t, n) {
              return Nt(n, function (n) {
                return Ft(e, t, n);
              });
            },
            splitColor: rn,
            toArray: Vt,
            selector: Ht,
            mapRange: Zt,
            pipe: function () {
              for (
                var e = arguments.length, t = new Array(e), n = 0;
                n < e;
                n++
              )
                t[n] = arguments[n];
              return function (e) {
                return t.reduce(function (e, t) {
                  return t(e);
                }, e);
              };
            },
            unitize: function (e, t) {
              return function (n) {
                return e(parseFloat(n)) + (t || Ut(n));
              };
            },
            interpolate: function e(t, n, i, r) {
              var a = isNaN(t + n)
                ? 0
                : function (e) {
                    return (1 - e) * t + e * n;
                  };
              if (!a) {
                var o,
                  s,
                  l,
                  u,
                  c,
                  h = me(t),
                  d = {};
                if ((!0 === i && (r = 1) && (i = null), h))
                  (t = { p: t }), (n = { p: n });
                else if (Te(t) && !Te(n)) {
                  for (l = [], u = t.length, c = u - 2, s = 1; s < u; s++)
                    l.push(e(t[s - 1], t[s]));
                  u--,
                    (a = function (e) {
                      e *= u;
                      var t = Math.min(c, ~~e);
                      return l[t](e - t);
                    }),
                    (i = n);
                } else r || (t = ct(Te(t) ? [] : {}, t));
                if (!l) {
                  for (o in n) Dn.call(d, t, o, "get", n[o]);
                  a = function (e) {
                    return jn(e, d) || (h ? t.p : t);
                  };
                }
              }
              return Nt(i, a);
            },
            shuffle: Gt
          },
          install: Oe,
          effects: Ke,
          ticker: cn,
          updateRoot: Tn.updateRoot,
          plugins: qe,
          globalTimeline: Q,
          core: {
            PropTween: Zn,
            globals: Ue,
            Tween: Nn,
            Timeline: Tn,
            Animation: Mn,
            getCache: Qe,
            _removeLinkedListItem: vt,
            reverting: function () {
              return Z;
            },
            context: function (e) {
              return e && J && (J.data.push(e), (e._ctx = J)), J;
            },
            suppressOverwrites: function (e) {
              return (Y = e);
            }
          }
        };
      et("to,from,fromTo,delayedCall,set,killTweensOf", function (e) {
        return (ai[e] = Nn[e]);
      }),
        cn.add(Tn.updateRoot),
        (re = ai.to({}, { duration: 0 }));
      var oi = function (e, t) {
          for (var n = e._pt; n && n.p !== t && n.op !== t && n.fp !== t; )
            n = n._next;
          return n;
        },
        si = function (e, t) {
          return {
            name: e,
            rawVars: 1,
            init: function (e, n, i) {
              i._onInit = function (e) {
                var i, r;
                if (
                  (me(n) &&
                    ((i = {}),
                    et(n, function (e) {
                      return (i[e] = 1);
                    }),
                    (n = i)),
                  t)
                ) {
                  for (r in ((i = {}), n)) i[r] = t(n[r]);
                  n = i;
                }
                !(function (e, t) {
                  var n,
                    i,
                    r,
                    a = e._targets;
                  for (n in t)
                    for (i = a.length; i--; )
                      (r = e._ptLookup[i][n]) &&
                        (r = r.d) &&
                        (r._pt && (r = oi(r, n)),
                        r && r.modifier && r.modifier(t[n], e, a[i], n));
                })(e, n);
              };
            }
          };
        },
        li =
          ai.registerPlugin(
            {
              name: "attr",
              init: function (e, t, n, i, r) {
                var a, o, s;
                for (a in ((this.tween = n), t))
                  (s = e.getAttribute(a) || ""),
                    ((o = this.add(
                      e,
                      "setAttribute",
                      (s || 0) + "",
                      t[a],
                      i,
                      r,
                      0,
                      0,
                      a
                    )).op = a),
                    (o.b = s),
                    this._props.push(a);
              },
              render: function (e, t) {
                for (var n = t._pt; n; )
                  Z ? n.set(n.t, n.p, n.b, n) : n.r(e, n.d), (n = n._next);
              }
            },
            {
              name: "endArray",
              init: function (e, t) {
                for (var n = t.length; n--; )
                  this.add(e, n, e[n] || 0, t[n], 0, 0, 0, 0, 0, 1);
              }
            },
            si("roundProps", jt),
            si("modifiers"),
            si("snap", qt)
          ) || ai;
      (Nn.version = Tn.version = li.version = "3.11.4"),
        (ne = 1),
        we() && hn(),
        dn.Power0,
        dn.Power1,
        dn.Power2,
        dn.Power3,
        dn.Power4,
        dn.Linear,
        dn.Quad,
        dn.Cubic,
        dn.Quart,
        dn.Quint,
        dn.Strong,
        dn.Elastic,
        dn.Back,
        dn.SteppedEase,
        dn.Bounce,
        dn.Sine,
        dn.Expo,
        dn.Circ;
      var ui,
        ci,
        hi,
        di,
        pi,
        fi,
        vi,
        mi,
        gi = {},
        _i = 180 / Math.PI,
        yi = Math.PI / 180,
        bi = Math.atan2,
        xi = 1e8,
        wi = /([A-Z])/g,
        Si = /(left|right|width|margin|padding|x)/i,
        Mi = /[\s,\(]\S/,
        Ti = {
          autoAlpha: "opacity,visibility",
          scale: "scaleX,scaleY",
          alpha: "opacity"
        },
        ki = function (e, t) {
          return t.set(
            t.t,
            t.p,
            Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u,
            t
          );
        },
        Ei = function (e, t) {
          return t.set(
            t.t,
            t.p,
            1 === e ? t.e : Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u,
            t
          );
        },
        Ci = function (e, t) {
          return t.set(
            t.t,
            t.p,
            e ? Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u : t.b,
            t
          );
        },
        Di = function (e, t) {
          var n = t.s + t.c * e;
          t.set(t.t, t.p, ~~(n + (n < 0 ? -0.5 : 0.5)) + t.u, t);
        },
        Ai = function (e, t) {
          return t.set(t.t, t.p, e ? t.e : t.b, t);
        },
        Pi = function (e, t) {
          return t.set(t.t, t.p, 1 !== e ? t.b : t.e, t);
        },
        Li = function (e, t, n) {
          return (e.style[t] = n);
        },
        Ri = function (e, t, n) {
          return e.style.setProperty(t, n);
        },
        Ii = function (e, t, n) {
          return (e._gsap[t] = n);
        },
        Oi = function (e, t, n) {
          return (e._gsap.scaleX = e._gsap.scaleY = n);
        },
        Ni = function (e, t, n, i, r) {
          var a = e._gsap;
          (a.scaleX = a.scaleY = n), a.renderTransform(r, a);
        },
        Fi = function (e, t, n, i, r) {
          var a = e._gsap;
          (a[t] = n), a.renderTransform(r, a);
        },
        Ui = "transform",
        Bi = Ui + "Origin",
        zi = function (e, t) {
          var n = this,
            i = this.target,
            r = i.style;
          if (e in gi) {
            if (
              ((this.tfm = this.tfm || {}),
              "transform" !== e &&
                (~(e = Ti[e] || e).indexOf(",")
                  ? e.split(",").forEach(function (e) {
                      return (n.tfm[e] = rr(i, e));
                    })
                  : (this.tfm[e] = i._gsap.x ? i._gsap[e] : rr(i, e))),
              this.props.indexOf(Ui) >= 0)
            )
              return;
            i._gsap.svg &&
              ((this.svgo = i.getAttribute("data-svg-origin")),
              this.props.push(Bi, t, "")),
              (e = Ui);
          }
          (r || t) && this.props.push(e, t, r[e]);
        },
        Vi = function (e) {
          e.translate &&
            (e.removeProperty("translate"),
            e.removeProperty("scale"),
            e.removeProperty("rotate"));
        },
        Hi = function () {
          var e,
            t,
            n = this.props,
            i = this.target,
            r = i.style,
            a = i._gsap;
          for (e = 0; e < n.length; e += 3)
            n[e + 1]
              ? (i[n[e]] = n[e + 2])
              : n[e + 2]
              ? (r[n[e]] = n[e + 2])
              : r.removeProperty(n[e].replace(wi, "-$1").toLowerCase());
          if (this.tfm) {
            for (t in this.tfm) a[t] = this.tfm[t];
            a.svg &&
              (a.renderTransform(),
              i.setAttribute("data-svg-origin", this.svgo || "")),
              (e = vi()) && !e.isStart && !r[Ui] && (Vi(r), (a.uncache = 1));
          }
        },
        Gi = function (e, t) {
          var n = { target: e, props: [], revert: Hi, save: zi };
          return (
            t &&
              t.split(",").forEach(function (e) {
                return n.save(e);
              }),
            n
          );
        },
        Wi = function (e, t) {
          var n = ci.createElementNS
            ? ci.createElementNS(
                (t || "http://www.w3.org/1999/xhtml").replace(/^https/, "http"),
                e
              )
            : ci.createElement(e);
          return n.style ? n : ci.createElement(e);
        },
        ji = function e(t, n, i) {
          var r = getComputedStyle(t);
          return (
            r[n] ||
            r.getPropertyValue(n.replace(wi, "-$1").toLowerCase()) ||
            r.getPropertyValue(n) ||
            (!i && e(t, Ki(n) || n, 1)) ||
            ""
          );
        },
        qi = "O,Moz,ms,Ms,Webkit".split(","),
        Ki = function (e, t, n) {
          var i = (t || pi).style,
            r = 5;
          if (e in i && !n) return e;
          for (
            e = e.charAt(0).toUpperCase() + e.substr(1);
            r-- && !(qi[r] + e in i);

          );
          return r < 0 ? null : (3 === r ? "ms" : r >= 0 ? qi[r] : "") + e;
        },
        Xi = function () {
          ("undefined" == typeof window ? "undefined" : M(window)) < "u" &&
            window.document &&
            ((ui = window),
            (ci = ui.document),
            (hi = ci.documentElement),
            (pi = Wi("div") || { style: {} }),
            Wi("div"),
            (Ui = Ki(Ui)),
            (Bi = Ui + "Origin"),
            (pi.style.cssText =
              "border-width:0;line-height:0;position:absolute;padding:0"),
            (mi = !!Ki("perspective")),
            (vi = li.core.reverting),
            (di = 1));
        },
        Yi = function e(t) {
          var n,
            i = Wi(
              "svg",
              (this.ownerSVGElement &&
                this.ownerSVGElement.getAttribute("xmlns")) ||
                "http://www.w3.org/2000/svg"
            ),
            r = this.parentNode,
            a = this.nextSibling,
            o = this.style.cssText;
          if (
            (hi.appendChild(i),
            i.appendChild(this),
            (this.style.display = "block"),
            t)
          )
            try {
              (n = this.getBBox()),
                (this._gsapBBox = this.getBBox),
                (this.getBBox = e);
            } catch (e) {}
          else this._gsapBBox && (n = this._gsapBBox());
          return (
            r && (a ? r.insertBefore(this, a) : r.appendChild(this)),
            hi.removeChild(i),
            (this.style.cssText = o),
            n
          );
        },
        Zi = function (e, t) {
          for (var n = t.length; n--; )
            if (e.hasAttribute(t[n])) return e.getAttribute(t[n]);
        },
        Ji = function (e) {
          var t;
          try {
            t = e.getBBox();
          } catch (n) {
            t = Yi.call(e, !0);
          }
          return (
            (t && (t.width || t.height)) ||
              e.getBBox === Yi ||
              (t = Yi.call(e, !0)),
            !t || t.width || t.x || t.y
              ? t
              : {
                  x: +Zi(e, ["x", "cx", "x1"]) || 0,
                  y: +Zi(e, ["y", "cy", "y1"]) || 0,
                  width: 0,
                  height: 0
                }
          );
        },
        Qi = function (e) {
          return !(!e.getCTM || (e.parentNode && !e.ownerSVGElement) || !Ji(e));
        },
        $i = function (e, t) {
          if (t) {
            var n = e.style;
            t in gi && t !== Bi && (t = Ui),
              n.removeProperty
                ? (("ms" === t.substr(0, 2) || "webkit" === t.substr(0, 6)) &&
                    (t = "-" + t),
                  n.removeProperty(t.replace(wi, "-$1").toLowerCase()))
                : n.removeAttribute(t);
          }
        },
        er = function (e, t, n, i, r, a) {
          var o = new Zn(e._pt, t, n, 0, 1, a ? Pi : Ai);
          return (e._pt = o), (o.b = i), (o.e = r), e._props.push(n), o;
        },
        tr = { deg: 1, rad: 1, turn: 1 },
        nr = { grid: 1, flex: 1 },
        ir = function e(t, n, i, r) {
          var a,
            o,
            s,
            l,
            u = parseFloat(i) || 0,
            c = (i + "").trim().substr((u + "").length) || "px",
            h = pi.style,
            d = Si.test(n),
            p = "svg" === t.tagName.toLowerCase(),
            f = (p ? "client" : "offset") + (d ? "Width" : "Height"),
            v = 100,
            m = "px" === r,
            g = "%" === r;
          return r === c || !u || tr[r] || tr[c]
            ? u
            : ("px" !== c && !m && (u = e(t, n, i, "px")),
              (l = t.getCTM && Qi(t)),
              (!g && "%" !== c) || (!gi[n] && !~n.indexOf("adius"))
                ? ((h[d ? "width" : "height"] = v + (m ? c : r)),
                  (o =
                    ~n.indexOf("adius") || ("em" === r && t.appendChild && !p)
                      ? t
                      : t.parentNode),
                  l && (o = (t.ownerSVGElement || {}).parentNode),
                  (!o || o === ci || !o.appendChild) && (o = ci.body),
                  (s = o._gsap) &&
                  g &&
                  s.width &&
                  d &&
                  s.time === cn.time &&
                  !s.uncache
                    ? tt((u / s.width) * v)
                    : ((g || "%" === c) &&
                        !nr[ji(o, "display")] &&
                        (h.position = ji(t, "position")),
                      o === t && (h.position = "static"),
                      o.appendChild(pi),
                      (a = pi[f]),
                      o.removeChild(pi),
                      (h.position = "absolute"),
                      d &&
                        g &&
                        (((s = Qe(o)).time = cn.time), (s.width = o[f])),
                      tt(m ? (a * u) / v : a && u ? (v / a) * u : 0)))
                : ((a = l ? t.getBBox()[d ? "width" : "height"] : t[f]),
                  tt(g ? (u / a) * v : (u / 100) * a)));
        },
        rr = function (e, t, n, i) {
          var r;
          return (
            di || Xi(),
            t in Ti &&
              "transform" !== t &&
              ~(t = Ti[t]).indexOf(",") &&
              (t = t.split(",")[0]),
            gi[t] && "transform" !== t
              ? ((r = mr(e, i)),
                (r =
                  "transformOrigin" !== t
                    ? r[t]
                    : r.svg
                    ? r.origin
                    : gr(ji(e, Bi)) + " " + r.zOrigin + "px"))
              : (!(r = e.style[t]) ||
                  "auto" === r ||
                  i ||
                  ~(r + "").indexOf("calc(")) &&
                (r =
                  (ur[t] && ur[t](e, t, n)) ||
                  ji(e, t) ||
                  $e(e, t) ||
                  ("opacity" === t ? 1 : 0)),
            n && !~(r + "").trim().indexOf(" ") ? ir(e, t, r, n) + n : r
          );
        },
        ar = function (e, t, n, i) {
          if (!n || "none" === n) {
            var r = Ki(t, e, 1),
              a = r && ji(e, r, 1);
            a && a !== n
              ? ((t = r), (n = a))
              : "borderColor" === t && (n = ji(e, "borderTopColor"));
          }
          var o,
            s,
            l,
            u,
            c,
            h,
            d,
            p,
            f,
            v,
            m,
            g = new Zn(this._pt, e.style, t, 0, 1, Wn),
            _ = 0,
            y = 0;
          if (
            ((g.b = n),
            (g.e = i),
            (n += ""),
            "auto" == (i += "") &&
              ((e.style[t] = i), (i = ji(e, t) || i), (e.style[t] = n)),
            un((o = [n, i])),
            (i = o[1]),
            (l = (n = o[0]).match(Ce) || []),
            (i.match(Ce) || []).length)
          ) {
            for (; (s = Ce.exec(i)); )
              (d = s[0]),
                (f = i.substring(_, s.index)),
                c
                  ? (c = (c + 1) % 5)
                  : ("rgba(" === f.substr(-5) || "hsla(" === f.substr(-5)) &&
                    (c = 1),
                d !== (h = l[y++] || "") &&
                  ((u = parseFloat(h) || 0),
                  (m = h.substr((u + "").length)),
                  "=" === d.charAt(1) && (d = it(u, d) + m),
                  (p = parseFloat(d)),
                  (v = d.substr((p + "").length)),
                  (_ = Ce.lastIndex - v.length),
                  v ||
                    ((v = v || oe.units[t] || m),
                    _ === i.length && ((i += v), (g.e += v))),
                  m !== v && (u = ir(e, t, h, v) || 0),
                  (g._pt = {
                    _next: g._pt,
                    p: f || 1 === y ? f : ",",
                    s: u,
                    c: p - u,
                    m: (c && c < 4) || "zIndex" === t ? Math.round : 0
                  }));
            g.c = _ < i.length ? i.substring(_, i.length) : "";
          } else g.r = "display" === t && "none" === i ? Pi : Ai;
          return Ae.test(i) && (g.e = 0), (this._pt = g), g;
        },
        or = {
          top: "0%",
          bottom: "100%",
          left: "0%",
          right: "100%",
          center: "50%"
        },
        sr = function (e) {
          var t = e.split(" "),
            n = t[0],
            i = t[1] || "50%";
          return (
            ("top" === n || "bottom" === n || "left" === i || "right" === i) &&
              ((e = n), (n = i), (i = e)),
            (t[0] = or[n] || n),
            (t[1] = or[i] || i),
            t.join(" ")
          );
        },
        lr = function (e, t) {
          if (t.tween && t.tween._time === t.tween._dur) {
            var n,
              i,
              r,
              a = t.t,
              o = a.style,
              s = t.u,
              l = a._gsap;
            if ("all" === s || !0 === s) (o.cssText = ""), (i = 1);
            else
              for (r = (s = s.split(",")).length; --r > -1; )
                (n = s[r]),
                  gi[n] && ((i = 1), (n = "transformOrigin" === n ? Bi : Ui)),
                  $i(a, n);
            i &&
              ($i(a, Ui),
              l &&
                (l.svg && a.removeAttribute("transform"),
                mr(a, 1),
                (l.uncache = 1),
                Vi(o)));
          }
        },
        ur = {
          clearProps: function (e, t, n, i, r) {
            if ("isFromStart" !== r.data) {
              var a = (e._pt = new Zn(e._pt, t, n, 0, 0, lr));
              return (
                (a.u = i), (a.pr = -10), (a.tween = r), e._props.push(n), 1
              );
            }
          }
        },
        cr = [1, 0, 0, 1, 0, 0],
        hr = {},
        dr = function (e) {
          return "matrix(1, 0, 0, 1, 0, 0)" === e || "none" === e || !e;
        },
        pr = function (e) {
          var t = ji(e, Ui);
          return dr(t) ? cr : t.substr(7).match(Ee).map(tt);
        },
        fr = function (e, t) {
          var n,
            i,
            r,
            a,
            o = e._gsap || Qe(e),
            s = e.style,
            l = pr(e);
          return o.svg && e.getAttribute("transform")
            ? "1,0,0,1,0,0" ===
              (l = [
                (r = e.transform.baseVal.consolidate().matrix).a,
                r.b,
                r.c,
                r.d,
                r.e,
                r.f
              ]).join(",")
              ? cr
              : l
            : (l === cr &&
                !e.offsetParent &&
                e !== hi &&
                !o.svg &&
                ((r = s.display),
                (s.display = "block"),
                (!(n = e.parentNode) || !e.offsetParent) &&
                  ((a = 1), (i = e.nextElementSibling), hi.appendChild(e)),
                (l = pr(e)),
                r ? (s.display = r) : $i(e, "display"),
                a &&
                  (i
                    ? n.insertBefore(e, i)
                    : n
                    ? n.appendChild(e)
                    : hi.removeChild(e))),
              t && l.length > 6 ? [l[0], l[1], l[4], l[5], l[12], l[13]] : l);
        },
        vr = function (e, t, n, i, r, a) {
          var o,
            s,
            l,
            u = e._gsap,
            c = r || fr(e, !0),
            h = u.xOrigin || 0,
            d = u.yOrigin || 0,
            p = u.xOffset || 0,
            f = u.yOffset || 0,
            v = c[0],
            m = c[1],
            g = c[2],
            _ = c[3],
            y = c[4],
            b = c[5],
            x = t.split(" "),
            w = parseFloat(x[0]) || 0,
            S = parseFloat(x[1]) || 0;
          n
            ? c !== cr &&
              (s = v * _ - m * g) &&
              ((l = w * (-m / s) + S * (v / s) - (v * b - m * y) / s),
              (w = w * (_ / s) + S * (-g / s) + (g * b - _ * y) / s),
              (S = l))
            : ((w =
                (o = Ji(e)).x + (~x[0].indexOf("%") ? (w / 100) * o.width : w)),
              (S =
                o.y +
                (~(x[1] || x[0]).indexOf("%") ? (S / 100) * o.height : S))),
            i || (!1 !== i && u.smooth)
              ? ((y = w - h),
                (b = S - d),
                (u.xOffset = p + (y * v + b * g) - y),
                (u.yOffset = f + (y * m + b * _) - b))
              : (u.xOffset = u.yOffset = 0),
            (u.xOrigin = w),
            (u.yOrigin = S),
            (u.smooth = !!i),
            (u.origin = t),
            (u.originIsAbsolute = !!n),
            (e.style[Bi] = "0px 0px"),
            a &&
              (er(a, u, "xOrigin", h, w),
              er(a, u, "yOrigin", d, S),
              er(a, u, "xOffset", p, u.xOffset),
              er(a, u, "yOffset", f, u.yOffset)),
            e.setAttribute("data-svg-origin", w + " " + S);
        },
        mr = function (e, t) {
          var n = e._gsap || new Sn(e);
          if ("x" in n && !t && !n.uncache) return n;
          var i,
            r,
            a,
            o,
            s,
            l,
            u,
            c,
            h,
            d,
            p,
            f,
            v,
            m,
            g,
            _,
            y,
            b,
            x,
            w,
            S,
            M,
            T,
            k,
            E,
            C,
            D,
            A,
            P,
            L,
            R,
            I,
            O = e.style,
            N = n.scaleX < 0,
            F = "px",
            U = "deg",
            B = getComputedStyle(e),
            z = ji(e, Bi) || "0";
          return (
            (i = r = a = l = u = c = h = d = p = 0),
            (o = s = 1),
            (n.svg = !(!e.getCTM || !Qi(e))),
            B.translate &&
              (("none" !== B.translate ||
                "none" !== B.scale ||
                "none" !== B.rotate) &&
                (O[Ui] =
                  ("none" !== B.translate
                    ? "translate3d(" +
                      (B.translate + " 0 0").split(" ").slice(0, 3).join(", ") +
                      ") "
                    : "") +
                  ("none" !== B.rotate ? "rotate(" + B.rotate + ") " : "") +
                  ("none" !== B.scale
                    ? "scale(" + B.scale.split(" ").join(",") + ") "
                    : "") +
                  ("none" !== B[Ui] ? B[Ui] : "")),
              (O.scale = O.rotate = O.translate = "none")),
            (m = fr(e, n.svg)),
            n.svg &&
              (n.uncache
                ? ((E = e.getBBox()),
                  (z = n.xOrigin - E.x + "px " + (n.yOrigin - E.y) + "px"),
                  (k = ""))
                : (k = !t && e.getAttribute("data-svg-origin")),
              vr(e, k || z, !!k || n.originIsAbsolute, !1 !== n.smooth, m)),
            (f = n.xOrigin || 0),
            (v = n.yOrigin || 0),
            m !== cr &&
              ((b = m[0]),
              (x = m[1]),
              (w = m[2]),
              (S = m[3]),
              (i = M = m[4]),
              (r = T = m[5]),
              6 === m.length
                ? ((o = Math.sqrt(b * b + x * x)),
                  (s = Math.sqrt(S * S + w * w)),
                  (l = b || x ? bi(x, b) * _i : 0),
                  (h = w || S ? bi(w, S) * _i + l : 0) &&
                    (s *= Math.abs(Math.cos(h * yi))),
                  n.svg &&
                    ((i -= f - (f * b + v * w)), (r -= v - (f * x + v * S))))
                : ((I = m[6]),
                  (L = m[7]),
                  (D = m[8]),
                  (A = m[9]),
                  (P = m[10]),
                  (R = m[11]),
                  (i = m[12]),
                  (r = m[13]),
                  (a = m[14]),
                  (u = (g = bi(I, P)) * _i),
                  g &&
                    ((k = M * (_ = Math.cos(-g)) + D * (y = Math.sin(-g))),
                    (E = T * _ + A * y),
                    (C = I * _ + P * y),
                    (D = M * -y + D * _),
                    (A = T * -y + A * _),
                    (P = I * -y + P * _),
                    (R = L * -y + R * _),
                    (M = k),
                    (T = E),
                    (I = C)),
                  (c = (g = bi(-w, P)) * _i),
                  g &&
                    ((_ = Math.cos(-g)),
                    (R = S * (y = Math.sin(-g)) + R * _),
                    (b = k = b * _ - D * y),
                    (x = E = x * _ - A * y),
                    (w = C = w * _ - P * y)),
                  (l = (g = bi(x, b)) * _i),
                  g &&
                    ((k = b * (_ = Math.cos(g)) + x * (y = Math.sin(g))),
                    (E = M * _ + T * y),
                    (x = x * _ - b * y),
                    (T = T * _ - M * y),
                    (b = k),
                    (M = E)),
                  u &&
                    Math.abs(u) + Math.abs(l) > 359.9 &&
                    ((u = l = 0), (c = 180 - c)),
                  (o = tt(Math.sqrt(b * b + x * x + w * w))),
                  (s = tt(Math.sqrt(T * T + I * I))),
                  (g = bi(M, T)),
                  (h = Math.abs(g) > 2e-4 ? g * _i : 0),
                  (p = R ? 1 / (R < 0 ? -R : R) : 0)),
              n.svg &&
                ((k = e.getAttribute("transform")),
                (n.forceCSS =
                  e.setAttribute("transform", "") || !dr(ji(e, Ui))),
                k && e.setAttribute("transform", k))),
            Math.abs(h) > 90 &&
              Math.abs(h) < 270 &&
              (N
                ? ((o *= -1),
                  (h += l <= 0 ? 180 : -180),
                  (l += l <= 0 ? 180 : -180))
                : ((s *= -1), (h += h <= 0 ? 180 : -180))),
            (t = t || n.uncache),
            (n.x =
              i -
              ((n.xPercent =
                i &&
                ((!t && n.xPercent) ||
                  (Math.round(e.offsetWidth / 2) === Math.round(-i) ? -50 : 0)))
                ? (e.offsetWidth * n.xPercent) / 100
                : 0) +
              F),
            (n.y =
              r -
              ((n.yPercent =
                r &&
                ((!t && n.yPercent) ||
                  (Math.round(e.offsetHeight / 2) === Math.round(-r)
                    ? -50
                    : 0)))
                ? (e.offsetHeight * n.yPercent) / 100
                : 0) +
              F),
            (n.z = a + F),
            (n.scaleX = tt(o)),
            (n.scaleY = tt(s)),
            (n.rotation = tt(l) + U),
            (n.rotationX = tt(u) + U),
            (n.rotationY = tt(c) + U),
            (n.skewX = h + U),
            (n.skewY = d + U),
            (n.transformPerspective = p + F),
            (n.zOrigin = parseFloat(z.split(" ")[2]) || 0) && (O[Bi] = gr(z)),
            (n.xOffset = n.yOffset = 0),
            (n.force3D = oe.force3D),
            (n.renderTransform = n.svg ? Mr : mi ? Sr : yr),
            (n.uncache = 0),
            n
          );
        },
        gr = function (e) {
          return (e = e.split(" "))[0] + " " + e[1];
        },
        _r = function (e, t, n) {
          var i = Ut(t);
          return tt(parseFloat(t) + parseFloat(ir(e, "x", n + "px", i))) + i;
        },
        yr = function (e, t) {
          (t.z = "0px"),
            (t.rotationY = t.rotationX = "0deg"),
            (t.force3D = 0),
            Sr(e, t);
        },
        br = "0deg",
        xr = "0px",
        wr = ") ",
        Sr = function (e, t) {
          var n = t || this,
            i = n.xPercent,
            r = n.yPercent,
            a = n.x,
            o = n.y,
            s = n.z,
            l = n.rotation,
            u = n.rotationY,
            c = n.rotationX,
            h = n.skewX,
            d = n.skewY,
            p = n.scaleX,
            f = n.scaleY,
            v = n.transformPerspective,
            m = n.force3D,
            g = n.target,
            _ = n.zOrigin,
            y = "",
            b = ("auto" === m && e && 1 !== e) || !0 === m;
          if (_ && (c !== br || u !== br)) {
            var x,
              w = parseFloat(u) * yi,
              S = Math.sin(w),
              M = Math.cos(w);
            (w = parseFloat(c) * yi),
              (x = Math.cos(w)),
              (a = _r(g, a, S * x * -_)),
              (o = _r(g, o, -Math.sin(w) * -_)),
              (s = _r(g, s, M * x * -_ + _));
          }
          v !== xr && (y += "perspective(" + v + wr),
            (i || r) && (y += "translate(" + i + "%, " + r + "%) "),
            (b || a !== xr || o !== xr || s !== xr) &&
              (y +=
                s !== xr || b
                  ? "translate3d(" + a + ", " + o + ", " + s + ") "
                  : "translate(" + a + ", " + o + wr),
            l !== br && (y += "rotate(" + l + wr),
            u !== br && (y += "rotateY(" + u + wr),
            c !== br && (y += "rotateX(" + c + wr),
            (h !== br || d !== br) && (y += "skew(" + h + ", " + d + wr),
            (1 !== p || 1 !== f) && (y += "scale(" + p + ", " + f + wr),
            (g.style[Ui] = y || "translate(0, 0)");
        },
        Mr = function (e, t) {
          var n,
            i,
            r,
            a,
            o,
            s = t || this,
            l = s.xPercent,
            u = s.yPercent,
            c = s.x,
            h = s.y,
            d = s.rotation,
            p = s.skewX,
            f = s.skewY,
            v = s.scaleX,
            m = s.scaleY,
            g = s.target,
            _ = s.xOrigin,
            y = s.yOrigin,
            b = s.xOffset,
            x = s.yOffset,
            w = s.forceCSS,
            S = parseFloat(c),
            M = parseFloat(h);
          (d = parseFloat(d)),
            (p = parseFloat(p)),
            (f = parseFloat(f)) && ((p += f = parseFloat(f)), (d += f)),
            d || p
              ? ((d *= yi),
                (p *= yi),
                (n = Math.cos(d) * v),
                (i = Math.sin(d) * v),
                (r = Math.sin(d - p) * -m),
                (a = Math.cos(d - p) * m),
                p &&
                  ((f *= yi),
                  (o = Math.tan(p - f)),
                  (r *= o = Math.sqrt(1 + o * o)),
                  (a *= o),
                  f &&
                    ((o = Math.tan(f)),
                    (n *= o = Math.sqrt(1 + o * o)),
                    (i *= o))),
                (n = tt(n)),
                (i = tt(i)),
                (r = tt(r)),
                (a = tt(a)))
              : ((n = v), (a = m), (i = r = 0)),
            ((S && !~(c + "").indexOf("px")) ||
              (M && !~(h + "").indexOf("px"))) &&
              ((S = ir(g, "x", c, "px")), (M = ir(g, "y", h, "px"))),
            (_ || y || b || x) &&
              ((S = tt(S + _ - (_ * n + y * r) + b)),
              (M = tt(M + y - (_ * i + y * a) + x))),
            (l || u) &&
              ((o = g.getBBox()),
              (S = tt(S + (l / 100) * o.width)),
              (M = tt(M + (u / 100) * o.height))),
            (o =
              "matrix(" +
              n +
              "," +
              i +
              "," +
              r +
              "," +
              a +
              "," +
              S +
              "," +
              M +
              ")"),
            g.setAttribute("transform", o),
            w && (g.style[Ui] = o);
        },
        Tr = function (e, t, n, i, r) {
          var a,
            o,
            s = 360,
            l = me(r),
            u = parseFloat(r) * (l && ~r.indexOf("rad") ? _i : 1) - i,
            c = i + u + "deg";
          return (
            l &&
              ("short" === (a = r.split("_")[1]) &&
                (u %= s) != u % 180 &&
                (u += u < 0 ? s : -s),
              "cw" === a && u < 0
                ? (u = ((u + s * xi) % s) - ~~(u / s) * s)
                : "ccw" === a &&
                  u > 0 &&
                  (u = ((u - s * xi) % s) - ~~(u / s) * s)),
            (e._pt = o = new Zn(e._pt, t, n, i, u, Ei)),
            (o.e = c),
            (o.u = "deg"),
            e._props.push(n),
            o
          );
        },
        kr = function (e, t) {
          for (var n in t) e[n] = t[n];
          return e;
        },
        Er = function (e, t, n) {
          var i,
            r,
            a,
            o,
            s,
            l,
            u,
            c = kr({}, n._gsap),
            h = n.style;
          for (r in (c.svg
            ? ((a = n.getAttribute("transform")),
              n.setAttribute("transform", ""),
              (h[Ui] = t),
              (i = mr(n, 1)),
              $i(n, Ui),
              n.setAttribute("transform", a))
            : ((a = getComputedStyle(n)[Ui]),
              (h[Ui] = t),
              (i = mr(n, 1)),
              (h[Ui] = a)),
          gi))
            (a = c[r]) !== (o = i[r]) &&
              "perspective,force3D,transformOrigin,svgOrigin".indexOf(r) < 0 &&
              ((s = Ut(a) !== (u = Ut(o)) ? ir(n, r, a, u) : parseFloat(a)),
              (l = parseFloat(o)),
              (e._pt = new Zn(e._pt, i, r, s, l - s, ki)),
              (e._pt.u = u || 0),
              e._props.push(r));
          kr(i, c);
        };
      et("padding,margin,Width,Radius", function (e, t) {
        var n = "Top",
          i = "Right",
          r = "Bottom",
          a = "Left",
          o = (t < 3 ? [n, i, r, a] : [n + a, n + i, r + i, r + a]).map(
            function (n) {
              return t < 2 ? e + n : "border" + n + e;
            }
          );
        ur[t > 1 ? "border" + e : e] = function (e, t, n, i, r) {
          var a, s;
          if (arguments.length < 4)
            return (
              (a = o.map(function (t) {
                return rr(e, t, n);
              })),
              5 === (s = a.join(" ")).split(a[0]).length ? a[0] : s
            );
          (a = (i + "").split(" ")),
            (s = {}),
            o.forEach(function (e, t) {
              return (s[e] = a[t] = a[t] || a[((t - 1) / 2) | 0]);
            }),
            e.init(t, s, r);
        };
      });
      var Cr = {
        name: "css",
        register: Xi,
        targetTest: function (e) {
          return e.style && e.nodeType;
        },
        init: function (e, t, n, i, r) {
          var a,
            o,
            s,
            l,
            u,
            c,
            h,
            d,
            p,
            f,
            v,
            m,
            g,
            _,
            y,
            b,
            x = this._props,
            w = e.style,
            S = n.vars.startAt;
          for (h in (di || Xi(),
          (this.styles = this.styles || Gi(e)),
          (b = this.styles.props),
          (this.tween = n),
          t))
            if (
              "autoRound" !== h &&
              ((o = t[h]), !qe[h] || !An(h, t, n, i, e, r))
            )
              if (
                ((u = M(o)),
                (c = ur[h]),
                "function" === u && (u = M((o = o.call(n, i, e, r)))),
                "string" === u && ~o.indexOf("random(") && (o = Yt(o)),
                c)
              )
                c(this, e, h, o, n) && (y = 1);
              else if ("--" === h.substr(0, 2))
                (a = (getComputedStyle(e).getPropertyValue(h) + "").trim()),
                  (o += ""),
                  (sn.lastIndex = 0),
                  sn.test(a) || ((d = Ut(a)), (p = Ut(o))),
                  p ? d !== p && (a = ir(e, h, a, p) + p) : d && (o += d),
                  this.add(w, "setProperty", a, o, i, r, 0, 0, h),
                  x.push(h),
                  b.push(h, 0, w[h]);
              else if ("undefined" !== u) {
                if (
                  (S && h in S
                    ? ((a =
                        "function" == typeof S[h]
                          ? S[h].call(n, i, e, r)
                          : S[h]),
                      me(a) && ~a.indexOf("random(") && (a = Yt(a)),
                      Ut(a + "") || (a += oe.units[h] || Ut(rr(e, h)) || ""),
                      "=" === (a + "").charAt(1) && (a = rr(e, h)))
                    : (a = rr(e, h)),
                  (l = parseFloat(a)),
                  (f =
                    "string" === u && "=" === o.charAt(1) && o.substr(0, 2)) &&
                    (o = o.substr(2)),
                  (s = parseFloat(o)),
                  h in Ti &&
                    ("autoAlpha" === h &&
                      (1 === l &&
                        "hidden" === rr(e, "visibility") &&
                        s &&
                        (l = 0),
                      b.push("visibility", 0, w.visibility),
                      er(
                        this,
                        w,
                        "visibility",
                        l ? "inherit" : "hidden",
                        s ? "inherit" : "hidden",
                        !s
                      )),
                    "scale" !== h &&
                      "transform" !== h &&
                      ~(h = Ti[h]).indexOf(",") &&
                      (h = h.split(",")[0])),
                  (v = h in gi))
                ) {
                  if (
                    (this.styles.save(h),
                    m ||
                      (((g = e._gsap).renderTransform && !t.parseTransform) ||
                        mr(e, t.parseTransform),
                      (_ = !1 !== t.smoothOrigin && g.smooth),
                      ((m = this._pt =
                        new Zn(
                          this._pt,
                          w,
                          Ui,
                          0,
                          1,
                          g.renderTransform,
                          g,
                          0,
                          -1
                        )).dep = 1)),
                    "scale" === h)
                  )
                    (this._pt = new Zn(
                      this._pt,
                      g,
                      "scaleY",
                      g.scaleY,
                      (f ? it(g.scaleY, f + s) : s) - g.scaleY || 0,
                      ki
                    )),
                      (this._pt.u = 0),
                      x.push("scaleY", h),
                      (h += "X");
                  else {
                    if ("transformOrigin" === h) {
                      b.push(Bi, 0, w[Bi]),
                        (o = sr(o)),
                        g.svg
                          ? vr(e, o, 0, _, 0, this)
                          : ((p = parseFloat(o.split(" ")[2]) || 0) !==
                              g.zOrigin && er(this, g, "zOrigin", g.zOrigin, p),
                            er(this, w, h, gr(a), gr(o)));
                      continue;
                    }
                    if ("svgOrigin" === h) {
                      vr(e, o, 1, _, 0, this);
                      continue;
                    }
                    if (h in hr) {
                      Tr(this, g, h, l, f ? it(l, f + o) : o);
                      continue;
                    }
                    if ("smoothOrigin" === h) {
                      er(this, g, "smooth", g.smooth, o);
                      continue;
                    }
                    if ("force3D" === h) {
                      g[h] = o;
                      continue;
                    }
                    if ("transform" === h) {
                      Er(this, o, e);
                      continue;
                    }
                  }
                } else h in w || (h = Ki(h) || h);
                if (
                  v ||
                  ((s || 0 === s) && (l || 0 === l) && !Mi.test(o) && h in w)
                )
                  s || (s = 0),
                    (d = (a + "").substr((l + "").length)) !==
                      (p = Ut(o) || (h in oe.units ? oe.units[h] : d)) &&
                      (l = ir(e, h, a, p)),
                    (this._pt = new Zn(
                      this._pt,
                      v ? g : w,
                      h,
                      l,
                      (f ? it(l, f + s) : s) - l,
                      v || ("px" !== p && "zIndex" !== h) || !1 === t.autoRound
                        ? ki
                        : Di
                    )),
                    (this._pt.u = p || 0),
                    d !== p &&
                      "%" !== p &&
                      ((this._pt.b = a), (this._pt.r = Ci));
                else if (h in w) ar.call(this, e, h, a, f ? f + o : o);
                else if (h in e) this.add(e, h, a || e[h], f ? f + o : o, i, r);
                else if ("parseTransform" !== h) {
                  Ne(h, o);
                  continue;
                }
                v || (h in w ? b.push(h, 0, w[h]) : b.push(h, 1, a || e[h])),
                  x.push(h);
              }
          y && Yn(this);
        },
        render: function (e, t) {
          if (t.tween._time || !vi())
            for (var n = t._pt; n; ) n.r(e, n.d), (n = n._next);
          else t.styles.revert();
        },
        get: rr,
        aliases: Ti,
        getSetter: function (e, t, n) {
          var i = Ti[t];
          return (
            i && i.indexOf(",") < 0 && (t = i),
            t in gi && t !== Bi && (e._gsap.x || rr(e, "x"))
              ? n && fi === n
                ? "scale" === t
                  ? Oi
                  : Ii
                : (fi = n || {}) && ("scale" === t ? Ni : Fi)
              : e.style && !ye(e.style[t])
              ? Li
              : ~t.indexOf("-")
              ? Ri
              : Vn(e, t)
          );
        },
        core: { _removeProperty: $i, _getMatrix: fr }
      };
      (li.utils.checkPrefix = Ki),
        (li.core.getStyleSaver = Gi),
        (function (e, t) {
          var n = et(
            e +
              "," +
              t +
              ",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",
            function (e) {
              gi[e] = 1;
            }
          );
          et(t, function (e) {
            (oe.units[e] = "deg"), (hr[e] = 1);
          }),
            (Ti[n[13]] = e + "," + t),
            et(
              "0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",
              function (e) {
                var t = e.split(":");
                Ti[t[1]] = n[t[0]];
              }
            );
        })(
          "x,y,z,scale,scaleX,scaleY,xPercent,yPercent",
          "rotation,rotationX,rotationY,skewX,skewY"
        ),
        et(
          "x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",
          function (e) {
            oe.units[e] = "px";
          }
        ),
        li.registerPlugin(Cr);
      var Dr = li.registerPlugin(Cr) || li;
      Dr.core.Tween;
      var Ar = /[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,
        Pr = /[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,
        Lr = Math.PI / 180,
        Rr = Math.sin,
        Ir = Math.cos,
        Or = Math.abs,
        Nr = Math.sqrt,
        Fr = 1e5,
        Ur = function (e) {
          return Math.round(e * Fr) / Fr || 0;
        };
      function Br(e, t, n, i, r, a, o, s, l) {
        if (e !== s || t !== l) {
          (n = Or(n)), (i = Or(i));
          var u = (r % 360) * Lr,
            c = Ir(u),
            h = Rr(u),
            d = Math.PI,
            p = 2 * d,
            f = (e - s) / 2,
            v = (t - l) / 2,
            m = c * f + h * v,
            g = -h * f + c * v,
            _ = m * m,
            y = g * g,
            b = _ / (n * n) + y / (i * i);
          b > 1 && ((n = Nr(b) * n), (i = Nr(b) * i));
          var x = n * n,
            w = i * i,
            S = (x * w - x * y - w * _) / (x * y + w * _);
          S < 0 && (S = 0);
          var M = (a === o ? -1 : 1) * Nr(S),
            T = M * ((n * g) / i),
            k = M * ((-i * m) / n),
            E = (e + s) / 2 + (c * T - h * k),
            C = (t + l) / 2 + (h * T + c * k),
            D = (m - T) / n,
            A = (g - k) / i,
            P = (-m - T) / n,
            L = (-g - k) / i,
            R = D * D + A * A,
            I = (A < 0 ? -1 : 1) * Math.acos(D / Nr(R)),
            O =
              (D * L - A * P < 0 ? -1 : 1) *
              Math.acos((D * P + A * L) / Nr(R * (P * P + L * L)));
          isNaN(O) && (O = d),
            !o && O > 0 ? (O -= p) : o && O < 0 && (O += p),
            (I %= p),
            (O %= p);
          var N,
            F = Math.ceil(Or(O) / (p / 4)),
            U = [],
            B = O / F,
            z = ((4 / 3) * Rr(B / 2)) / (1 + Ir(B / 2)),
            V = c * n,
            H = h * n,
            G = h * -i,
            W = c * i;
          for (N = 0; N < F; N++)
            (m = Ir((r = I + N * B))),
              (g = Rr(r)),
              (D = Ir((r += B))),
              (A = Rr(r)),
              U.push(m - z * g, g + z * m, D + z * A, A - z * D, D, A);
          for (N = 0; N < U.length; N += 2)
            (m = U[N]),
              (g = U[N + 1]),
              (U[N] = m * V + g * G + E),
              (U[N + 1] = m * H + g * W + C);
          return (U[N - 2] = s), (U[N - 1] = l), U;
        }
      }
      var zr,
        Vr,
        Hr = function () {
          return (
            zr ||
            (("undefined" == typeof window ? "undefined" : M(window)) < "u" &&
              (zr = window.gsap) &&
              zr.registerPlugin &&
              zr)
          );
        },
        Gr = function () {
          (zr = Hr())
            ? (zr.registerEase("_CE", Xr.create), (Vr = 1))
            : console.warn("Please gsap.registerPlugin(CustomEase)");
        },
        Wr = function (e) {
          return ~~(1e3 * e + (e < 0 ? -0.5 : 0.5)) / 1e3;
        },
        jr = /[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,
        qr = /[cLlsSaAhHvVtTqQ]/g,
        Kr = function e(t, n, i, r, a, o, s, l, u, c, h) {
          var d,
            p = (t + i) / 2,
            f = (n + r) / 2,
            v = (i + a) / 2,
            m = (r + o) / 2,
            g = (a + s) / 2,
            _ = (o + l) / 2,
            y = (p + v) / 2,
            b = (f + m) / 2,
            x = (v + g) / 2,
            w = (m + _) / 2,
            S = (y + x) / 2,
            M = (b + w) / 2,
            T = s - t,
            k = l - n,
            E = Math.abs((i - s) * k - (r - l) * T),
            C = Math.abs((a - s) * k - (o - l) * T);
          return (
            c ||
              ((c = [
                { x: t, y: n },
                { x: s, y: l }
              ]),
              (h = 1)),
            c.splice(h || c.length - 1, 0, { x: S, y: M }),
            (E + C) * (E + C) > u * (T * T + k * k) &&
              ((d = c.length),
              e(t, n, p, f, y, b, S, M, u, c, h),
              e(S, M, x, w, g, _, s, l, u, c, h + 1 + (c.length - d))),
            c
          );
        },
        Xr = (function () {
          function e(e, t, n) {
            Vr || Gr(), (this.id = e), this.setData(t, n);
          }
          var t = e.prototype;
          return (
            (t.setData = function (e, t) {
              t = t || {};
              var n,
                i,
                r,
                a,
                o,
                s,
                l,
                u,
                c,
                h = (e = e || "0,0,1,1").match(jr),
                d = 1,
                p = [],
                f = [],
                v = t.precision || 1,
                m = v <= 1;
              if (
                ((this.data = e),
                (qr.test(e) || (~e.indexOf("M") && e.indexOf("C") < 0)) &&
                  (h = (function (e) {
                    var t,
                      n,
                      i,
                      r,
                      a,
                      o,
                      s,
                      l,
                      u,
                      c,
                      h,
                      d,
                      p,
                      f,
                      v,
                      m =
                        (e + "")
                          .replace(Pr, function (e) {
                            var t = +e;
                            return t < 1e-4 && t > -1e-4 ? 0 : t;
                          })
                          .match(Ar) || [],
                      g = [],
                      _ = 0,
                      y = 0,
                      b = 2 / 3,
                      x = m.length,
                      w = 0,
                      S = "ERROR: malformed path: " + e,
                      M = function (e, t, n, i) {
                        (c = (n - e) / 3),
                          (h = (i - t) / 3),
                          s.push(e + c, t + h, n - c, i - h, n, i);
                      };
                    if (!e || !isNaN(m[0]) || isNaN(m[1]))
                      return console.log(S), g;
                    for (t = 0; t < x; t++)
                      if (
                        ((p = a),
                        isNaN(m[t])
                          ? (o = (a = m[t].toUpperCase()) !== m[t])
                          : t--,
                        (i = +m[t + 1]),
                        (r = +m[t + 2]),
                        o && ((i += _), (r += y)),
                        t || ((l = i), (u = r)),
                        "M" === a)
                      )
                        s && (s.length < 8 ? (g.length -= 1) : (w += s.length)),
                          (_ = l = i),
                          (y = u = r),
                          (s = [i, r]),
                          g.push(s),
                          (t += 2),
                          (a = "L");
                      else if ("C" === a)
                        s || (s = [0, 0]),
                          o || (_ = y = 0),
                          s.push(
                            i,
                            r,
                            _ + 1 * m[t + 3],
                            y + 1 * m[t + 4],
                            (_ += 1 * m[t + 5]),
                            (y += 1 * m[t + 6])
                          ),
                          (t += 6);
                      else if ("S" === a)
                        (c = _),
                          (h = y),
                          ("C" === p || "S" === p) &&
                            ((c += _ - s[s.length - 4]),
                            (h += y - s[s.length - 3])),
                          o || (_ = y = 0),
                          s.push(
                            c,
                            h,
                            i,
                            r,
                            (_ += 1 * m[t + 3]),
                            (y += 1 * m[t + 4])
                          ),
                          (t += 4);
                      else if ("Q" === a)
                        (c = _ + (i - _) * b),
                          (h = y + (r - y) * b),
                          o || (_ = y = 0),
                          (_ += 1 * m[t + 3]),
                          (y += 1 * m[t + 4]),
                          s.push(c, h, _ + (i - _) * b, y + (r - y) * b, _, y),
                          (t += 4);
                      else if ("T" === a)
                        (c = _ - s[s.length - 4]),
                          (h = y - s[s.length - 3]),
                          s.push(
                            _ + c,
                            y + h,
                            i + (_ + 1.5 * c - i) * b,
                            r + (y + 1.5 * h - r) * b,
                            (_ = i),
                            (y = r)
                          ),
                          (t += 2);
                      else if ("H" === a) M(_, y, (_ = i), y), (t += 1);
                      else if ("V" === a)
                        M(_, y, _, (y = i + (o ? y - _ : 0))), (t += 1);
                      else if ("L" === a || "Z" === a)
                        "Z" === a && ((i = l), (r = u), (s.closed = !0)),
                          ("L" === a || Or(_ - i) > 0.5 || Or(y - r) > 0.5) &&
                            (M(_, y, i, r), "L" === a && (t += 2)),
                          (_ = i),
                          (y = r);
                      else if ("A" === a) {
                        if (
                          ((f = m[t + 4]),
                          (v = m[t + 5]),
                          (c = m[t + 6]),
                          (h = m[t + 7]),
                          (n = 7),
                          f.length > 1 &&
                            (f.length < 3
                              ? ((h = c), (c = v), n--)
                              : ((h = v), (c = f.substr(2)), (n -= 2)),
                            (v = f.charAt(1)),
                            (f = f.charAt(0))),
                          (d = Br(
                            _,
                            y,
                            +m[t + 1],
                            +m[t + 2],
                            +m[t + 3],
                            +f,
                            +v,
                            (o ? _ : 0) + 1 * c,
                            (o ? y : 0) + 1 * h
                          )),
                          (t += n),
                          d)
                        )
                          for (n = 0; n < d.length; n++) s.push(d[n]);
                        (_ = s[s.length - 2]), (y = s[s.length - 1]);
                      } else console.log(S);
                    return (
                      (t = s.length) < 6
                        ? (g.pop(), (t = 0))
                        : s[0] === s[t - 2] &&
                          s[1] === s[t - 1] &&
                          (s.closed = !0),
                      (g.totalPoints = w + t),
                      g
                    );
                  })(e)[0]),
                4 === (n = h.length))
              )
                h.unshift(0, 0), h.push(1, 1), (n = 8);
              else if ((n - 2) % 6) throw "Invalid CustomEase";
              for (
                (0 != +h[0] || 1 != +h[n - 2]) &&
                  (function (e, t, n) {
                    !n && 0 !== n && (n = Math.max(+e[e.length - 1], +e[1]));
                    var i,
                      r = -1 * +e[0],
                      a = -n,
                      o = e.length,
                      s = 1 / (+e[o - 2] + r),
                      l =
                        -t ||
                        (Math.abs(+e[o - 1] - +e[1]) <
                        0.01 * (+e[o - 2] - +e[0])
                          ? (function (e) {
                              var t,
                                n = e.length,
                                i = 1e20;
                              for (t = 1; t < n; t += 6)
                                +e[t] < i && (i = +e[t]);
                              return i;
                            })(e) + a
                          : +e[o - 1] + a);
                    for (l = l ? 1 / l : -s, i = 0; i < o; i += 2)
                      (e[i] = (+e[i] + r) * s),
                        (e[i + 1] = (+e[i + 1] + a) * l);
                  })(h, t.height, t.originY),
                  this.segment = h,
                  a = 2;
                a < n;
                a += 6
              )
                (i = { x: +h[a - 2], y: +h[a - 1] }),
                  (r = { x: +h[a + 4], y: +h[a + 5] }),
                  p.push(i, r),
                  Kr(
                    i.x,
                    i.y,
                    +h[a],
                    +h[a + 1],
                    +h[a + 2],
                    +h[a + 3],
                    r.x,
                    r.y,
                    1 / (2e5 * v),
                    p,
                    p.length - 1
                  );
              for (n = p.length, a = 0; a < n; a++)
                (l = p[a]),
                  (u = p[a - 1] || l),
                  (l.x > u.x || (u.y !== l.y && u.x === l.x) || l === u) &&
                  l.x <= 1
                    ? ((u.cx = l.x - u.x),
                      (u.cy = l.y - u.y),
                      (u.n = l),
                      (u.nx = l.x),
                      m &&
                        a > 1 &&
                        Math.abs(u.cy / u.cx - p[a - 2].cy / p[a - 2].cx) > 2 &&
                        (m = 0),
                      u.cx < d &&
                        (u.cx
                          ? (d = u.cx)
                          : ((u.cx = 0.001),
                            a === n - 1 &&
                              ((u.x -= 0.001),
                              (d = Math.min(d, 0.001)),
                              (m = 0)))))
                    : (p.splice(a--, 1), n--);
              if (((o = 1 / (n = (1 / d + 1) | 0)), (s = 0), (l = p[0]), m)) {
                for (a = 0; a < n; a++)
                  (c = a * o),
                    l.nx < c && (l = p[++s]),
                    (i = l.y + ((c - l.x) / l.cx) * l.cy),
                    (f[a] = { x: c, cx: o, y: i, cy: 0, nx: 9 }),
                    a && (f[a - 1].cy = i - f[a - 1].y);
                f[n - 1].cy = p[p.length - 1].y - i;
              } else {
                for (a = 0; a < n; a++)
                  l.nx < a * o && (l = p[++s]), (f[a] = l);
                s < p.length - 1 && (f[a - 1] = p[p.length - 2]);
              }
              return (
                (this.ease = function (e) {
                  var t = f[(e * n) | 0] || f[n - 1];
                  return t.nx < e && (t = t.n), t.y + ((e - t.x) / t.cx) * t.cy;
                }),
                (this.ease.custom = this),
                this.id && zr && zr.registerEase(this.id, this.ease),
                this
              );
            }),
            (t.getSVGData = function (t) {
              return e.getSVGData(this, t);
            }),
            (e.create = function (t, n, i) {
              return new e(t, n, i).ease;
            }),
            (e.register = function (e) {
              (zr = e), Gr();
            }),
            (e.get = function (e) {
              return zr.parseEase(e);
            }),
            (e.getSVGData = function (t, n) {
              var i,
                r,
                a,
                o,
                s,
                l,
                u,
                c,
                h,
                d,
                p = (n = n || {}).width || 100,
                f = n.height || 100,
                v = n.x || 0,
                m = (n.y || 0) + f,
                g = zr.utils.toArray(n.path)[0];
              if (
                (n.invert && ((f = -f), (m = 0)),
                "string" == typeof t && (t = zr.parseEase(t)),
                t.custom && (t = t.custom),
                t instanceof e)
              )
                i = (function (e) {
                  (function (e) {
                    return "number" == typeof e;
                  })(e[0]) && (e = [e]);
                  var t,
                    n,
                    i,
                    r,
                    a = "",
                    o = e.length;
                  for (n = 0; n < o; n++) {
                    for (
                      r = e[n],
                        a += "M" + Ur(r[0]) + "," + Ur(r[1]) + " C",
                        t = r.length,
                        i = 2;
                      i < t;
                      i++
                    )
                      a +=
                        Ur(r[i++]) +
                        "," +
                        Ur(r[i++]) +
                        " " +
                        Ur(r[i++]) +
                        "," +
                        Ur(r[i++]) +
                        " " +
                        Ur(r[i++]) +
                        "," +
                        Ur(r[i]) +
                        " ";
                    r.closed && (a += "z");
                  }
                  return a;
                })(
                  (function (e, t, n, i, r, a, o) {
                    for (var s, l, u, c, h, d = e.length; --d > -1; )
                      for (l = (s = e[d]).length, u = 0; u < l; u += 2)
                        (c = s[u]),
                          (h = s[u + 1]),
                          (s[u] = c * t + 0 * h + a),
                          (s[u + 1] = 0 * c + h * r + o);
                    return (e._dirty = 1), e;
                  })([t.segment], p, 0, 0, -f, v, m)
                );
              else {
                for (
                  i = [v, m],
                    o = 1 / (u = Math.max(5, 200 * (n.precision || 1))),
                    c = 5 / (u += 2),
                    h = Wr(v + o * p),
                    r = ((d = Wr(m + t(o) * -f)) - m) / (h - v),
                    a = 2;
                  a < u;
                  a++
                )
                  (s = Wr(v + a * o * p)),
                    (l = Wr(m + t(a * o) * -f)),
                    (Math.abs((l - d) / (s - h) - r) > c || a === u - 1) &&
                      (i.push(h, d), (r = (l - d) / (s - h))),
                    (h = s),
                    (d = l);
                i = "M" + i.join(",");
              }
              return g && g.setAttribute("d", i), i;
            }),
            e
          );
        })();
      Hr() && zr.registerPlugin(Xr), (Xr.version = "3.11.4");
      var Yr = (window._GLOBAL_.store = window._GLOBAL_.store || {
        designWidthPc: 1600,
        designHeightPc: 964,
        designWidthSp: 414,
        designHeightSp: 666,
        breakpoint: 768,
        baseWidthMinPc: 1200,
        windowWidth: 0,
        windowHeight: 0,
        variableSizeRate: 1,
        pageId: "",
        pageIdPrev: "",
        cScroll: null,
        cIntersecting: null,
        scrollY: 0,
        scrollDirection: 0,
        scrollYSmooth: 0,
        scrollYNative: 0,
        windowHeightInitial: window.innerHeight,
        statusBarHeight: 0,
        componentCache: new Map(),
        modals: {},
        isOpenModal: !1,
        view: null,
        isLoadStart: {
          pageTop: !1,
          pageSmbService: !1,
          pageAbout: !1,
          pageCareers: !1
        },
        isLoadDone: {
          pageTop: !1,
          pageSmbService: !1,
          pageAbout: !1,
          pageCareers: !1
        },
        isTransitioning: !1,
        isTransitioned: !1,
        isLoadedStyles: !1,
        isLeave: !1,
        isPopstate: !1,
        popDirection: null,
        isInitializedAsynchronousTransition: !1,
        historyCount: 0,
        prevHistoryCount: 0,
        isScrollAnimating: !1,
        elTransitionContents: document.querySelector(
          "[data-transition-contents]"
        ),
        isActiveTypekit: !1,
        isHorizontalScroll: !1,
        isDebug: new URL(window.location.href).searchParams.has("debug"),
        isScrollMode: new URL(window.location.href).searchParams.has("scroll"),
        isFastMode: new URL(window.location.href).searchParams.has("fast"),
        enablePane: new URL(window.location.href).searchParams.has("pane"),
        enableStats: new URL(window.location.href).searchParams.has("stats"),
        pane: null,
        isHiddenPane: !1,
        gltfLoader: null,
        gltf: {},
        loadingCountList: {
          pageTop: [],
          pageWhyUse: [],
          pageSmbService: [],
          pageAbout: [],
          pageCareers: [],
          page404: []
        },
        components: {},
        currentScene: "",
        nextScene: "",
        isNightMode: new URL(window.location.href).searchParams.has("night")
      });
      if (!window.gsap) {
        (window.gsap = Dr), Dr.config({ force3D: !0 });
        var Zr = { ease: { medium: ".4,0,.2,1", move: ".24,.1,.2,1" } };
        Dr.registerPlugin(Xr);
        var Jr = Object.keys(Zr.ease);
        Jr.length > 0 &&
          Jr.forEach(function (e) {
            Xr.create(e, Zr.ease[e]);
          }),
          Yr.isDebug &&
            (document.body.addEventListener("mouseleave", function () {
              Dr.ticker.sleep();
            }),
            document.body.addEventListener("mouseenter", function () {
              Dr.ticker.wake();
            }));
      }
      var Qr = {};
      !(function (e, t) {
        !(function (e) {
          var t = (function () {
              return w(
                function e(t) {
                  b(this, e);
                  var n = g(t.split("-"), 2),
                    i = n[0],
                    r = n[1],
                    a = i.split(".");
                  (this.major = parseInt(a[0], 10)),
                    (this.minor = parseInt(a[1], 10)),
                    (this.patch = parseInt(a[2], 10)),
                    (this.prerelease = null != r ? r : null);
                },
                [
                  {
                    key: "toString",
                    value: function () {
                      var e = [this.major, this.minor, this.patch].join(".");
                      return null !== this.prerelease
                        ? [e, this.prerelease].join("-")
                        : e;
                    }
                  }
                ]
              );
            })(),
            n = (function () {
              return w(
                function e(t) {
                  b(this, e), (this.controller_ = t);
                },
                [
                  {
                    key: "element",
                    get: function () {
                      return this.controller_.view.element;
                    }
                  },
                  {
                    key: "disabled",
                    get: function () {
                      return this.controller_.viewProps.get("disabled");
                    },
                    set: function (e) {
                      this.controller_.viewProps.set("disabled", e);
                    }
                  },
                  {
                    key: "hidden",
                    get: function () {
                      return this.controller_.viewProps.get("hidden");
                    },
                    set: function (e) {
                      this.controller_.viewProps.set("hidden", e);
                    }
                  },
                  {
                    key: "dispose",
                    value: function () {
                      this.controller_.viewProps.set("disposed", !0);
                    }
                  }
                ]
              );
            })(),
            i = w(function e(t) {
              b(this, e), (this.target = t);
            }),
            r = (function (e) {
              function t(e, n, i, r) {
                var a;
                return (
                  b(this, t),
                  ((a = h(this, t, [e])).value = n),
                  (a.presetKey = i),
                  (a.last = null == r || r),
                  a
                );
              }
              return v(t, e), w(t);
            })(i),
            o = (function (e) {
              function t(e, n, i) {
                var r;
                return (
                  b(this, t),
                  ((r = h(this, t, [e])).value = n),
                  (r.presetKey = i),
                  r
                );
              }
              return v(t, e), w(t);
            })(i),
            p = (function (e) {
              function t(e, n) {
                var i;
                return b(this, t), ((i = h(this, t, [e])).expanded = n), i;
              }
              return v(t, e), w(t);
            })(i),
            m = (function (e) {
              function t(e, n) {
                var i;
                return b(this, t), ((i = h(this, t, [e])).index = n), i;
              }
              return v(t, e), w(t);
            })(i);
          function _(e) {
            return null == e;
          }
          function y(e, t) {
            if (e.length !== t.length) return !1;
            for (var n = 0; n < e.length; n++) if (e[n] !== t[n]) return !1;
            return !0;
          }
          function x(e, t) {
            var n = e;
            do {
              var i = Object.getOwnPropertyDescriptor(n, t);
              if (i && (void 0 !== i.set || !0 === i.writable)) return !0;
              n = Object.getPrototypeOf(n);
            } while (null !== n);
            return !1;
          }
          var S = {
              alreadydisposed: function () {
                return "View has been already disposed";
              },
              invalidparams: function (e) {
                return "Invalid parameters for '".concat(e.name, "'");
              },
              nomatchingcontroller: function (e) {
                return "No matching controller for '".concat(e.key, "'");
              },
              nomatchingview: function (e) {
                return "No matching view for '".concat(
                  JSON.stringify(e.params),
                  "'"
                );
              },
              notbindable: function () {
                return "Value is not bindable";
              },
              propertynotfound: function (e) {
                return "Property '".concat(e.name, "' not found");
              },
              shouldneverhappen: function () {
                return "This error should never happen";
              }
            },
            T = (function () {
              function e(t) {
                var n;
                b(this, e),
                  (this.message =
                    null !== (n = S[t.type](t.context)) && void 0 !== n
                      ? n
                      : "Unexpected error"),
                  (this.name = this.constructor.name),
                  (this.stack = new Error(this.message).stack),
                  (this.type = t.type);
              }
              return w(e, null, [
                {
                  key: "alreadyDisposed",
                  value: function () {
                    return new e({ type: "alreadydisposed" });
                  }
                },
                {
                  key: "notBindable",
                  value: function () {
                    return new e({ type: "notbindable" });
                  }
                },
                {
                  key: "propertyNotFound",
                  value: function (t) {
                    return new e({
                      type: "propertynotfound",
                      context: { name: t }
                    });
                  }
                },
                {
                  key: "shouldNeverHappen",
                  value: function () {
                    return new e({ type: "shouldneverhappen" });
                  }
                }
              ]);
            })(),
            k = (function () {
              function e(t, n, i) {
                b(this, e),
                  (this.obj_ = t),
                  (this.key_ = n),
                  (this.presetKey_ = null != i ? i : n);
              }
              return w(
                e,
                [
                  {
                    key: "key",
                    get: function () {
                      return this.key_;
                    }
                  },
                  {
                    key: "presetKey",
                    get: function () {
                      return this.presetKey_;
                    }
                  },
                  {
                    key: "read",
                    value: function () {
                      return this.obj_[this.key_];
                    }
                  },
                  {
                    key: "write",
                    value: function (e) {
                      this.obj_[this.key_] = e;
                    }
                  },
                  {
                    key: "writeProperty",
                    value: function (t, n) {
                      var i = this.read();
                      if (!e.isBindable(i)) throw T.notBindable();
                      if (!(t in i)) throw T.propertyNotFound(t);
                      i[t] = n;
                    }
                  }
                ],
                [
                  {
                    key: "isBindable",
                    value: function (e) {
                      return !(
                        null === e ||
                        ("object" != M(e) && "function" != typeof e)
                      );
                    }
                  }
                ]
              );
            })(),
            E = (function (e) {
              function t() {
                return b(this, t), h(this, t, arguments);
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "label",
                    get: function () {
                      return this.controller_.props.get("label");
                    },
                    set: function (e) {
                      this.controller_.props.set("label", e);
                    }
                  },
                  {
                    key: "title",
                    get: function () {
                      var e;
                      return null !==
                        (e =
                          this.controller_.valueController.props.get(
                            "title"
                          )) && void 0 !== e
                        ? e
                        : "";
                    },
                    set: function (e) {
                      this.controller_.valueController.props.set("title", e);
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = this,
                        r = t.bind(this);
                      return (
                        this.controller_.valueController.emitter.on(
                          e,
                          function () {
                            r(new i(n));
                          }
                        ),
                        this
                      );
                    }
                  }
                ])
              );
            })(n),
            C = (function () {
              return w(
                function e() {
                  b(this, e), (this.observers_ = {});
                },
                [
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = this.observers_[e];
                      return (
                        n || (n = this.observers_[e] = []),
                        n.push({ handler: t }),
                        this
                      );
                    }
                  },
                  {
                    key: "off",
                    value: function (e, t) {
                      var n = this.observers_[e];
                      return (
                        n &&
                          (this.observers_[e] = n.filter(function (e) {
                            return e.handler !== t;
                          })),
                        this
                      );
                    }
                  },
                  {
                    key: "emit",
                    value: function (e, t) {
                      var n = this.observers_[e];
                      n &&
                        n.forEach(function (e) {
                          e.handler(t);
                        });
                    }
                  }
                ]
              );
            })(),
            D = "tp";
          function A(e) {
            return function (t, n) {
              return [
                D,
                "-",
                e,
                "v",
                t ? "_".concat(t) : "",
                n ? "-".concat(n) : ""
              ].join("");
            };
          }
          function P(e) {
            return e.rawValue;
          }
          function L(e, t) {
            e.emitter.on(
              "change",
              (function (e, t) {
                return function (n) {
                  return t(e(n));
                };
              })(P, t)
            ),
              t(e.rawValue);
          }
          function R(e, t, n) {
            L(e.value(t), n);
          }
          function I(e, t) {
            return function (n) {
              !(function (e, t, n) {
                n ? e.classList.add(t) : e.classList.remove(t);
              })(e, t, n);
            };
          }
          function O(e, t) {
            L(e, function (e) {
              t.textContent = null != e ? e : "";
            });
          }
          var N = A("btn"),
            F = w(function e(t, n) {
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(N()),
                n.viewProps.bindClassModifiers(this.element);
              var i = t.createElement("button");
              i.classList.add(N("b")),
                n.viewProps.bindDisabled(i),
                this.element.appendChild(i),
                (this.buttonElement = i);
              var r = t.createElement("div");
              r.classList.add(N("t")),
                O(n.props.value("title"), r),
                this.buttonElement.appendChild(r);
            }),
            U = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.emitter = new C()),
                    (this.onClick_ = this.onClick_.bind(this)),
                    (this.props = n.props),
                    (this.viewProps = n.viewProps),
                    (this.view = new F(t, {
                      props: this.props,
                      viewProps: this.viewProps
                    })),
                    this.view.buttonElement.addEventListener(
                      "click",
                      this.onClick_
                    );
                },
                [
                  {
                    key: "onClick_",
                    value: function () {
                      this.emitter.emit("click", { sender: this });
                    }
                  }
                ]
              );
            })(),
            B = (function () {
              return w(
                function e(t, n) {
                  var i;
                  b(this, e),
                    (this.constraint_ = null == n ? void 0 : n.constraint),
                    (this.equals_ =
                      null !== (i = null == n ? void 0 : n.equals) &&
                      void 0 !== i
                        ? i
                        : function (e, t) {
                            return e === t;
                          }),
                    (this.emitter = new C()),
                    (this.rawValue_ = t);
                },
                [
                  {
                    key: "constraint",
                    get: function () {
                      return this.constraint_;
                    }
                  },
                  {
                    key: "rawValue",
                    get: function () {
                      return this.rawValue_;
                    },
                    set: function (e) {
                      this.setRawValue(e, { forceEmit: !1, last: !0 });
                    }
                  },
                  {
                    key: "setRawValue",
                    value: function (e, t) {
                      var n = null != t ? t : { forceEmit: !1, last: !0 },
                        i = this.constraint_
                          ? this.constraint_.constrain(e)
                          : e,
                        r = this.rawValue_;
                      (this.equals_(r, i) && !n.forceEmit) ||
                        (this.emitter.emit("beforechange", { sender: this }),
                        (this.rawValue_ = i),
                        this.emitter.emit("change", {
                          options: n,
                          previousRawValue: r,
                          rawValue: i,
                          sender: this
                        }));
                    }
                  }
                ]
              );
            })(),
            z = (function () {
              return w(
                function e(t) {
                  b(this, e), (this.emitter = new C()), (this.value_ = t);
                },
                [
                  {
                    key: "rawValue",
                    get: function () {
                      return this.value_;
                    },
                    set: function (e) {
                      this.setRawValue(e, { forceEmit: !1, last: !0 });
                    }
                  },
                  {
                    key: "setRawValue",
                    value: function (e, t) {
                      var n = null != t ? t : { forceEmit: !1, last: !0 },
                        i = this.value_;
                      (i === e && !n.forceEmit) ||
                        (this.emitter.emit("beforechange", { sender: this }),
                        (this.value_ = e),
                        this.emitter.emit("change", {
                          options: n,
                          previousRawValue: i,
                          rawValue: this.value_,
                          sender: this
                        }));
                    }
                  }
                ]
              );
            })();
          function V(e, t) {
            var n = null == t ? void 0 : t.constraint,
              i = null == t ? void 0 : t.equals;
            return n || i ? new B(e, t) : new z(e);
          }
          var H = (function () {
            function e(t) {
              var n = this;
              b(this, e), (this.emitter = new C()), (this.valMap_ = t);
              var i = function (e) {
                n.valMap_[e].emitter.on("change", function () {
                  n.emitter.emit("change", { key: e, sender: n });
                });
              };
              for (var r in this.valMap_) i(r);
            }
            return w(
              e,
              [
                {
                  key: "get",
                  value: function (e) {
                    return this.valMap_[e].rawValue;
                  }
                },
                {
                  key: "set",
                  value: function (e, t) {
                    this.valMap_[e].rawValue = t;
                  }
                },
                {
                  key: "value",
                  value: function (e) {
                    return this.valMap_[e];
                  }
                }
              ],
              [
                {
                  key: "createCore",
                  value: function (e) {
                    return Object.keys(e).reduce(function (t, n) {
                      return Object.assign(t, c({}, n, V(e[n])));
                    }, {});
                  }
                },
                {
                  key: "fromObject",
                  value: function (t) {
                    return new e(this.createCore(t));
                  }
                }
              ]
            );
          })();
          function G(e) {
            return function (t) {
              return function (n) {
                if (!t && void 0 === n) return { succeeded: !1, value: void 0 };
                if (t && void 0 === n) return { succeeded: !0, value: void 0 };
                var i = e(n);
                return void 0 !== i
                  ? { succeeded: !0, value: i }
                  : { succeeded: !1, value: void 0 };
              };
            };
          }
          function W(e) {
            return {
              custom: function (t) {
                return G(t)(e);
              },
              boolean: G(function (e) {
                return "boolean" == typeof e ? e : void 0;
              })(e),
              number: G(function (e) {
                return "number" == typeof e ? e : void 0;
              })(e),
              string: G(function (e) {
                return "string" == typeof e ? e : void 0;
              })(e),
              function: G(function (e) {
                return "function" == typeof e ? e : void 0;
              })(e),
              constant: function (t) {
                return G(function (e) {
                  return e === t ? t : void 0;
                })(e);
              },
              raw: G(function (e) {
                return e;
              })(e),
              object: function (t) {
                return G(function (e) {
                  if (
                    (function (e) {
                      return null !== e && "object" == M(e);
                    })(e)
                  )
                    return (function (e, t) {
                      return Object.keys(t).reduce(function (n, i) {
                        if (void 0 !== n) {
                          var r = (0, t[i])(e[i]);
                          return r.succeeded
                            ? Object.assign(
                                Object.assign({}, n),
                                c({}, i, r.value)
                              )
                            : void 0;
                        }
                      }, {});
                    })(e, t);
                })(e);
              },
              array: function (t) {
                return G(function (e) {
                  if (Array.isArray(e))
                    return (function (e, t) {
                      return e.reduce(function (e, n) {
                        if (void 0 !== e) {
                          var i = t(n);
                          return i.succeeded && void 0 !== i.value
                            ? [].concat(u(e), [i.value])
                            : void 0;
                        }
                      }, []);
                    })(e, t);
                })(e);
              }
            };
          }
          var j = { optional: W(!0), required: W(!1) };
          function q(e, t) {
            var n = j.required.object(t)(e);
            return n.succeeded ? n.value : void 0;
          }
          function K(e) {
            console.warn(
              [
                "Missing '"
                  .concat(e.key, "' of ")
                  .concat(e.target, " in ")
                  .concat(e.place, "."),
                "Please rebuild plugins with the latest core package."
              ].join(" ")
            );
          }
          var X = (function () {
              function e(t) {
                b(this, e), (this.value_ = t);
              }
              return w(
                e,
                [
                  {
                    key: "emitter",
                    get: function () {
                      return this.value_.emitter;
                    }
                  },
                  {
                    key: "rawValue",
                    get: function () {
                      return this.value_.rawValue;
                    }
                  }
                ],
                [
                  {
                    key: "create",
                    value: function (t) {
                      return [
                        new e(t),
                        function (e, n) {
                          t.setRawValue(e, n);
                        }
                      ];
                    }
                  }
                ]
              );
            })(),
            Y = A("");
          function Z(e, t) {
            return I(e, Y(void 0, t));
          }
          var J = (function (e) {
            function t(e) {
              var n, i, r;
              return (
                b(this, t),
                ((i = h(this, t, [e])).onDisabledChange_ =
                  i.onDisabledChange_.bind(d(i))),
                (i.onParentChange_ = i.onParentChange_.bind(d(i))),
                (i.onParentGlobalDisabledChange_ =
                  i.onParentGlobalDisabledChange_.bind(d(i))),
                (n = g(X.create(V(i.getGlobalDisabled_())), 2)),
                (i.globalDisabled_ = n[0]),
                (i.setGlobalDisabled_ = n[1]),
                i.value("disabled").emitter.on("change", i.onDisabledChange_),
                i.value("parent").emitter.on("change", i.onParentChange_),
                null === (r = i.get("parent")) ||
                  void 0 === r ||
                  r.globalDisabled.emitter.on(
                    "change",
                    i.onParentGlobalDisabledChange_
                  ),
                i
              );
            }
            return (
              v(t, e),
              w(
                t,
                [
                  {
                    key: "globalDisabled",
                    get: function () {
                      return this.globalDisabled_;
                    }
                  },
                  {
                    key: "bindClassModifiers",
                    value: function (e) {
                      L(this.globalDisabled_, Z(e, "disabled")),
                        R(this, "hidden", Z(e, "hidden"));
                    }
                  },
                  {
                    key: "bindDisabled",
                    value: function (e) {
                      L(this.globalDisabled_, function (t) {
                        e.disabled = t;
                      });
                    }
                  },
                  {
                    key: "bindTabIndex",
                    value: function (e) {
                      L(this.globalDisabled_, function (t) {
                        e.tabIndex = t ? -1 : 0;
                      });
                    }
                  },
                  {
                    key: "handleDispose",
                    value: function (e) {
                      this.value("disposed").emitter.on("change", function (t) {
                        t && e();
                      });
                    }
                  },
                  {
                    key: "getGlobalDisabled_",
                    value: function () {
                      var e = this.get("parent");
                      return (
                        (!!e && e.globalDisabled.rawValue) ||
                        this.get("disabled")
                      );
                    }
                  },
                  {
                    key: "updateGlobalDisabled_",
                    value: function () {
                      this.setGlobalDisabled_(this.getGlobalDisabled_());
                    }
                  },
                  {
                    key: "onDisabledChange_",
                    value: function () {
                      this.updateGlobalDisabled_();
                    }
                  },
                  {
                    key: "onParentGlobalDisabledChange_",
                    value: function () {
                      this.updateGlobalDisabled_();
                    }
                  },
                  {
                    key: "onParentChange_",
                    value: function (e) {
                      var t,
                        n = e.previousRawValue;
                      null != n &&
                        n.globalDisabled.emitter.off(
                          "change",
                          this.onParentGlobalDisabledChange_
                        ),
                        null === (t = this.get("parent")) ||
                          void 0 === t ||
                          t.globalDisabled.emitter.on(
                            "change",
                            this.onParentGlobalDisabledChange_
                          ),
                        this.updateGlobalDisabled_();
                    }
                  }
                ],
                [
                  {
                    key: "create",
                    value: function (e) {
                      var n,
                        i,
                        r,
                        a = null != e ? e : {};
                      return new t(
                        H.createCore({
                          disabled:
                            null !== (n = a.disabled) && void 0 !== n && n,
                          disposed: !1,
                          hidden: null !== (i = a.hidden) && void 0 !== i && i,
                          parent:
                            null !== (r = a.parent) && void 0 !== r ? r : null
                        })
                      );
                    }
                  }
                ]
              )
            );
          })(H);
          var Q = A(""),
            $ = {
              veryfirst: "vfst",
              first: "fst",
              last: "lst",
              verylast: "vlst"
            },
            ee = (function () {
              return w(
                function e(t) {
                  var n = this;
                  b(this, e),
                    (this.parent_ = null),
                    (this.blade = t.blade),
                    (this.view = t.view),
                    (this.viewProps = t.viewProps);
                  var i = this.view.element;
                  this.blade
                    .value("positions")
                    .emitter.on("change", function () {
                      ["veryfirst", "first", "last", "verylast"].forEach(
                        function (e) {
                          i.classList.remove(Q(void 0, $[e]));
                        }
                      ),
                        n.blade.get("positions").forEach(function (e) {
                          i.classList.add(Q(void 0, $[e]));
                        });
                    }),
                    this.viewProps.handleDispose(function () {
                      var e;
                      (e = i) &&
                        e.parentElement &&
                        e.parentElement.removeChild(e);
                    });
                },
                [
                  {
                    key: "parent",
                    get: function () {
                      return this.parent_;
                    },
                    set: function (e) {
                      (this.parent_ = e),
                        "parent" in this.viewProps.valMap_
                          ? this.viewProps.set(
                              "parent",
                              this.parent_ ? this.parent_.viewProps : null
                            )
                          : K({
                              key: "parent",
                              target: J.name,
                              place: "BladeController.parent"
                            });
                    }
                  }
                ]
              );
            })(),
            te = "http://www.w3.org/2000/svg";
          function ne(e) {
            e.offsetHeight;
          }
          function ie(e) {
            return void 0 !== e.ontouchstart;
          }
          function re() {
            return globalThis.document;
          }
          var ae = {
            check: '<path d="M2 8l4 4l8 -8"/>',
            dropdown: '<path d="M5 7h6l-3 3 z"/>',
            p2dpad:
              '<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'
          };
          function oe(e, t) {
            var n = e.createElementNS(te, "svg");
            return (n.innerHTML = ae[t]), n;
          }
          function se(e, t, n) {
            e.insertBefore(t, e.children[n]);
          }
          function le(e) {
            e.parentElement && e.parentElement.removeChild(e);
          }
          function ue(e) {
            for (; e.children.length > 0; ) e.removeChild(e.children[0]);
          }
          function ce(e) {
            return e.relatedTarget
              ? e.relatedTarget
              : "explicitOriginalTarget" in e
              ? e.explicitOriginalTarget
              : null;
          }
          var he = A("lbl");
          var de = w(function e(t, n) {
              var i = this;
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(he()),
                n.viewProps.bindClassModifiers(this.element);
              var r = t.createElement("div");
              r.classList.add(he("l")),
                R(n.props, "label", function (e) {
                  _(e)
                    ? i.element.classList.add(he(void 0, "nol"))
                    : (i.element.classList.remove(he(void 0, "nol")),
                      (function (e) {
                        for (; e.childNodes.length > 0; )
                          e.removeChild(e.childNodes[0]);
                      })(r),
                      r.appendChild(
                        (function (e, t) {
                          var n = e.createDocumentFragment();
                          return (
                            t
                              .split("\n")
                              .map(function (t) {
                                return e.createTextNode(t);
                              })
                              .forEach(function (t, i) {
                                i > 0 && n.appendChild(e.createElement("br")),
                                  n.appendChild(t);
                              }),
                            n
                          );
                        })(t, e)
                      ));
                }),
                this.element.appendChild(r),
                (this.labelElement = r);
              var a = t.createElement("div");
              a.classList.add(he("v")),
                this.element.appendChild(a),
                (this.valueElement = a);
            }),
            pe = (function (e) {
              function t(e, n) {
                var i;
                b(this, t);
                var r = n.valueController.viewProps;
                return (
                  ((i = h(this, t, [
                    Object.assign(Object.assign({}, n), {
                      view: new de(e, { props: n.props, viewProps: r }),
                      viewProps: r
                    })
                  ])).props = n.props),
                  (i.valueController = n.valueController),
                  i.view.valueElement.appendChild(
                    i.valueController.view.element
                  ),
                  i
                );
              }
              return v(t, e), w(t);
            })(ee),
            fe = {
              id: "button",
              type: "blade",
              accept: function (e) {
                var t = j,
                  n = q(e, {
                    title: t.required.string,
                    view: t.required.constant("button"),
                    label: t.optional.string
                  });
                return n ? { params: n } : null;
              },
              controller: function (e) {
                return new pe(e.document, {
                  blade: e.blade,
                  props: H.fromObject({ label: e.params.label }),
                  valueController: new U(e.document, {
                    props: H.fromObject({ title: e.params.title }),
                    viewProps: e.viewProps
                  })
                });
              },
              api: function (e) {
                return e.controller instanceof pe &&
                  e.controller.valueController instanceof U
                  ? new E(e.controller)
                  : null;
              }
            },
            ve = (function (e) {
              function t(e) {
                var n;
                return b(this, t), ((n = h(this, t, [e])).value = e.value), n;
              }
              return v(t, e), w(t);
            })(ee);
          function me() {
            return new H({ positions: V([], { equals: y }) });
          }
          var ge = (function (e) {
            function t(e) {
              return b(this, t), h(this, t, [e]);
            }
            return (
              v(t, e),
              w(
                t,
                [
                  {
                    key: "styleExpanded",
                    get: function () {
                      var e;
                      return null !== (e = this.get("temporaryExpanded")) &&
                        void 0 !== e
                        ? e
                        : this.get("expanded");
                    }
                  },
                  {
                    key: "styleHeight",
                    get: function () {
                      if (!this.styleExpanded) return "0";
                      var e = this.get("expandedHeight");
                      return this.get("shouldFixHeight") && !_(e)
                        ? "".concat(e, "px")
                        : "auto";
                    }
                  },
                  {
                    key: "bindExpandedClass",
                    value: function (e, t) {
                      var n = this,
                        i = function () {
                          n.styleExpanded
                            ? e.classList.add(t)
                            : e.classList.remove(t);
                        };
                      R(this, "expanded", i), R(this, "temporaryExpanded", i);
                    }
                  },
                  {
                    key: "cleanUpTransition",
                    value: function () {
                      this.set("shouldFixHeight", !1),
                        this.set("expandedHeight", null),
                        this.set("completed", !0);
                    }
                  }
                ],
                [
                  {
                    key: "create",
                    value: function (e) {
                      var n = {
                        completed: !0,
                        expanded: e,
                        expandedHeight: null,
                        shouldFixHeight: !1,
                        temporaryExpanded: null
                      };
                      return new t(H.createCore(n));
                    }
                  }
                ]
              )
            );
          })(H);
          function _e(e, t) {
            t.style.height = e.styleHeight;
          }
          function ye(e, t) {
            e.value("expanded").emitter.on("beforechange", function () {
              if ((e.set("completed", !1), _(e.get("expandedHeight")))) {
                var n = (function (e, t) {
                  var n = 0;
                  return (
                    (function (e, t) {
                      var n = e.style.transition;
                      (e.style.transition = "none"),
                        t(),
                        (e.style.transition = n);
                    })(t, function () {
                      e.set("expandedHeight", null),
                        e.set("temporaryExpanded", !0),
                        ne(t),
                        (n = t.clientHeight),
                        e.set("temporaryExpanded", null),
                        ne(t);
                    }),
                    n
                  );
                })(e, t);
                n > 0 && e.set("expandedHeight", n);
              }
              e.set("shouldFixHeight", !0), ne(t);
            }),
              e.emitter.on("change", function () {
                _e(e, t);
              }),
              _e(e, t),
              t.addEventListener("transitionend", function (t) {
                "height" === t.propertyName && e.cleanUpTransition();
              });
          }
          var be = (function (e) {
            function t(e, n) {
              var i;
              return b(this, t), ((i = h(this, t, [e])).rackApi_ = n), i;
            }
            return v(t, e), w(t);
          })(n);
          var xe = (function () {
              return w(
                function e(t) {
                  b(this, e),
                    (this.emitter = new C()),
                    (this.items_ = []),
                    (this.cache_ = new Set()),
                    (this.onSubListAdd_ = this.onSubListAdd_.bind(this)),
                    (this.onSubListRemove_ = this.onSubListRemove_.bind(this)),
                    (this.extract_ = t);
                },
                [
                  {
                    key: "items",
                    get: function () {
                      return this.items_;
                    }
                  },
                  {
                    key: "allItems",
                    value: function () {
                      return Array.from(this.cache_);
                    }
                  },
                  {
                    key: "find",
                    value: function (e) {
                      var t,
                        n = l(this.allItems());
                      try {
                        for (n.s(); !(t = n.n()).done; ) {
                          var i = t.value;
                          if (e(i)) return i;
                        }
                      } catch (e) {
                        n.e(e);
                      } finally {
                        n.f();
                      }
                      return null;
                    }
                  },
                  {
                    key: "includes",
                    value: function (e) {
                      return this.cache_.has(e);
                    }
                  },
                  {
                    key: "add",
                    value: function (e, t) {
                      var n = this;
                      if (this.includes(e)) throw T.shouldNeverHappen();
                      var i = void 0 !== t ? t : this.items_.length;
                      this.items_.splice(i, 0, e), this.cache_.add(e);
                      var r = this.extract_(e);
                      r &&
                        (r.emitter.on("add", this.onSubListAdd_),
                        r.emitter.on("remove", this.onSubListRemove_),
                        r.allItems().forEach(function (e) {
                          n.cache_.add(e);
                        })),
                        this.emitter.emit("add", {
                          index: i,
                          item: e,
                          root: this,
                          target: this
                        });
                    }
                  },
                  {
                    key: "remove",
                    value: function (e) {
                      var t = this.items_.indexOf(e);
                      if (!(t < 0)) {
                        this.items_.splice(t, 1), this.cache_.delete(e);
                        var n = this.extract_(e);
                        n &&
                          (n.emitter.off("add", this.onSubListAdd_),
                          n.emitter.off("remove", this.onSubListRemove_)),
                          this.emitter.emit("remove", {
                            index: t,
                            item: e,
                            root: this,
                            target: this
                          });
                      }
                    }
                  },
                  {
                    key: "onSubListAdd_",
                    value: function (e) {
                      this.cache_.add(e.item),
                        this.emitter.emit("add", {
                          index: e.index,
                          item: e.item,
                          root: this,
                          target: e.target
                        });
                    }
                  },
                  {
                    key: "onSubListRemove_",
                    value: function (e) {
                      this.cache_.delete(e.item),
                        this.emitter.emit("remove", {
                          index: e.index,
                          item: e.item,
                          root: this,
                          target: e.target
                        });
                    }
                  }
                ]
              );
            })(),
            we = (function (e) {
              function t(e) {
                var n;
                return (
                  b(this, t),
                  ((n = h(this, t, [e])).onBindingChange_ =
                    n.onBindingChange_.bind(d(n))),
                  (n.emitter_ = new C()),
                  n.controller_.binding.emitter.on(
                    "change",
                    n.onBindingChange_
                  ),
                  n
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "label",
                    get: function () {
                      return this.controller_.props.get("label");
                    },
                    set: function (e) {
                      this.controller_.props.set("label", e);
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = t.bind(this);
                      return (
                        this.emitter_.on(e, function (e) {
                          n(e.event);
                        }),
                        this
                      );
                    }
                  },
                  {
                    key: "refresh",
                    value: function () {
                      this.controller_.binding.read();
                    }
                  },
                  {
                    key: "onBindingChange_",
                    value: function (e) {
                      var t = e.sender.target.read();
                      this.emitter_.emit("change", {
                        event: new r(
                          this,
                          t,
                          this.controller_.binding.target.presetKey,
                          e.options.last
                        )
                      });
                    }
                  }
                ])
              );
            })(n),
            Se = (function (e) {
              function t(e, n) {
                var i;
                return (
                  b(this, t), ((i = h(this, t, [e, n])).binding = n.binding), i
                );
              }
              return v(t, e), w(t);
            })(pe),
            Me = (function (e) {
              function t(e) {
                var n;
                return (
                  b(this, t),
                  ((n = h(this, t, [e])).onBindingUpdate_ =
                    n.onBindingUpdate_.bind(d(n))),
                  (n.emitter_ = new C()),
                  n.controller_.binding.emitter.on(
                    "update",
                    n.onBindingUpdate_
                  ),
                  n
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "label",
                    get: function () {
                      return this.controller_.props.get("label");
                    },
                    set: function (e) {
                      this.controller_.props.set("label", e);
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = t.bind(this);
                      return (
                        this.emitter_.on(e, function (e) {
                          n(e.event);
                        }),
                        this
                      );
                    }
                  },
                  {
                    key: "refresh",
                    value: function () {
                      this.controller_.binding.read();
                    }
                  },
                  {
                    key: "onBindingUpdate_",
                    value: function (e) {
                      var t = e.sender.target.read();
                      this.emitter_.emit("update", {
                        event: new o(
                          this,
                          t,
                          this.controller_.binding.target.presetKey
                        )
                      });
                    }
                  }
                ])
              );
            })(n),
            Te = (function (e) {
              function t(e, n) {
                var i;
                return (
                  b(this, t),
                  ((i = h(this, t, [e, n])).binding = n.binding),
                  i.viewProps.bindDisabled(i.binding.ticker),
                  i.viewProps.handleDispose(function () {
                    i.binding.dispose();
                  }),
                  i
                );
              }
              return v(t, e), w(t);
            })(pe);
          function ke(e) {
            return e instanceof De
              ? e.apiSet_
              : e instanceof be
              ? e.rackApi_.apiSet_
              : null;
          }
          function Ee(e, t) {
            var n = e.find(function (e) {
              return e.controller_ === t;
            });
            if (!n) throw T.shouldNeverHappen();
            return n;
          }
          function Ce(e, t, n) {
            if (!k.isBindable(e)) throw T.notBindable();
            return new k(e, t, n);
          }
          var De = (function (e) {
              function t(e, n) {
                var i;
                b(this, t),
                  ((i = h(this, t, [e])).onRackAdd_ = i.onRackAdd_.bind(d(i))),
                  (i.onRackRemove_ = i.onRackRemove_.bind(d(i))),
                  (i.onRackInputChange_ = i.onRackInputChange_.bind(d(i))),
                  (i.onRackMonitorUpdate_ = i.onRackMonitorUpdate_.bind(d(i))),
                  (i.emitter_ = new C()),
                  (i.apiSet_ = new xe(ke)),
                  (i.pool_ = n);
                var r = i.controller_.rack;
                return (
                  r.emitter.on("add", i.onRackAdd_),
                  r.emitter.on("remove", i.onRackRemove_),
                  r.emitter.on("inputchange", i.onRackInputChange_),
                  r.emitter.on("monitorupdate", i.onRackMonitorUpdate_),
                  r.children.forEach(function (e) {
                    i.setUpApi_(e);
                  }),
                  i
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "children",
                    get: function () {
                      var e = this;
                      return this.controller_.rack.children.map(function (t) {
                        return Ee(e.apiSet_, t);
                      });
                    }
                  },
                  {
                    key: "addInput",
                    value: function (e, t, n) {
                      var i = null != n ? n : {},
                        r = this.controller_.view.element.ownerDocument,
                        a = this.pool_.createInput(r, Ce(e, t, i.presetKey), i),
                        o = new we(a);
                      return this.add(o, i.index);
                    }
                  },
                  {
                    key: "addMonitor",
                    value: function (e, t, n) {
                      var i = null != n ? n : {},
                        r = this.controller_.view.element.ownerDocument,
                        a = this.pool_.createMonitor(r, Ce(e, t), i),
                        o = new Me(a);
                      return this.add(o, i.index);
                    }
                  },
                  {
                    key: "addFolder",
                    value: function (e) {
                      return (function (e, t) {
                        return e.addBlade(
                          Object.assign(Object.assign({}, t), {
                            view: "folder"
                          })
                        );
                      })(this, e);
                    }
                  },
                  {
                    key: "addButton",
                    value: function (e) {
                      return (function (e, t) {
                        return e.addBlade(
                          Object.assign(Object.assign({}, t), {
                            view: "button"
                          })
                        );
                      })(this, e);
                    }
                  },
                  {
                    key: "addSeparator",
                    value: function (e) {
                      return (function (e, t) {
                        var n = null != t ? t : {};
                        return e.addBlade(
                          Object.assign(Object.assign({}, n), {
                            view: "separator"
                          })
                        );
                      })(this, e);
                    }
                  },
                  {
                    key: "addTab",
                    value: function (e) {
                      return (function (e, t) {
                        return e.addBlade(
                          Object.assign(Object.assign({}, t), { view: "tab" })
                        );
                      })(this, e);
                    }
                  },
                  {
                    key: "add",
                    value: function (e, t) {
                      this.controller_.rack.add(e.controller_, t);
                      var n = this.apiSet_.find(function (t) {
                        return t.controller_ === e.controller_;
                      });
                      return (
                        n && this.apiSet_.remove(n), this.apiSet_.add(e), e
                      );
                    }
                  },
                  {
                    key: "remove",
                    value: function (e) {
                      this.controller_.rack.remove(e.controller_);
                    }
                  },
                  {
                    key: "addBlade",
                    value: function (e) {
                      var t = this.controller_.view.element.ownerDocument,
                        n = this.pool_.createBlade(t, e),
                        i = this.pool_.createBladeApi(n);
                      return this.add(i, e.index);
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = t.bind(this);
                      return (
                        this.emitter_.on(e, function (e) {
                          n(e.event);
                        }),
                        this
                      );
                    }
                  },
                  {
                    key: "setUpApi_",
                    value: function (e) {
                      this.apiSet_.find(function (t) {
                        return t.controller_ === e;
                      }) || this.apiSet_.add(this.pool_.createBladeApi(e));
                    }
                  },
                  {
                    key: "onRackAdd_",
                    value: function (e) {
                      this.setUpApi_(e.bladeController);
                    }
                  },
                  {
                    key: "onRackRemove_",
                    value: function (e) {
                      if (e.isRoot) {
                        var t = Ee(this.apiSet_, e.bladeController);
                        this.apiSet_.remove(t);
                      }
                    }
                  },
                  {
                    key: "onRackInputChange_",
                    value: function (e) {
                      var t = e.bladeController;
                      if (t instanceof Se) {
                        var n = Ee(this.apiSet_, t),
                          i = t.binding;
                        this.emitter_.emit("change", {
                          event: new r(
                            n,
                            i.target.read(),
                            i.target.presetKey,
                            e.options.last
                          )
                        });
                      } else if (t instanceof ve) {
                        var a = Ee(this.apiSet_, t);
                        this.emitter_.emit("change", {
                          event: new r(
                            a,
                            t.value.rawValue,
                            void 0,
                            e.options.last
                          )
                        });
                      }
                    }
                  },
                  {
                    key: "onRackMonitorUpdate_",
                    value: function (e) {
                      if (!(e.bladeController instanceof Te))
                        throw T.shouldNeverHappen();
                      var t = Ee(this.apiSet_, e.bladeController),
                        n = e.bladeController.binding;
                      this.emitter_.emit("update", {
                        event: new o(t, n.target.read(), n.target.presetKey)
                      });
                    }
                  }
                ])
              );
            })(n),
            Ae = (function (e) {
              function t(e, n) {
                var i;
                return (
                  b(this, t),
                  ((i = h(this, t, [e, new De(e.rackController, n)])).emitter_ =
                    new C()),
                  i.controller_.foldable
                    .value("expanded")
                    .emitter.on("change", function (e) {
                      i.emitter_.emit("fold", {
                        event: new p(d(i), e.sender.rawValue)
                      });
                    }),
                  i.rackApi_.on("change", function (e) {
                    i.emitter_.emit("change", { event: e });
                  }),
                  i.rackApi_.on("update", function (e) {
                    i.emitter_.emit("update", { event: e });
                  }),
                  i
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "expanded",
                    get: function () {
                      return this.controller_.foldable.get("expanded");
                    },
                    set: function (e) {
                      this.controller_.foldable.set("expanded", e);
                    }
                  },
                  {
                    key: "title",
                    get: function () {
                      return this.controller_.props.get("title");
                    },
                    set: function (e) {
                      this.controller_.props.set("title", e);
                    }
                  },
                  {
                    key: "children",
                    get: function () {
                      return this.rackApi_.children;
                    }
                  },
                  {
                    key: "addInput",
                    value: function (e, t, n) {
                      return this.rackApi_.addInput(e, t, n);
                    }
                  },
                  {
                    key: "addMonitor",
                    value: function (e, t, n) {
                      return this.rackApi_.addMonitor(e, t, n);
                    }
                  },
                  {
                    key: "addFolder",
                    value: function (e) {
                      return this.rackApi_.addFolder(e);
                    }
                  },
                  {
                    key: "addButton",
                    value: function (e) {
                      return this.rackApi_.addButton(e);
                    }
                  },
                  {
                    key: "addSeparator",
                    value: function (e) {
                      return this.rackApi_.addSeparator(e);
                    }
                  },
                  {
                    key: "addTab",
                    value: function (e) {
                      return this.rackApi_.addTab(e);
                    }
                  },
                  {
                    key: "add",
                    value: function (e, t) {
                      return this.rackApi_.add(e, t);
                    }
                  },
                  {
                    key: "remove",
                    value: function (e) {
                      this.rackApi_.remove(e);
                    }
                  },
                  {
                    key: "addBlade",
                    value: function (e) {
                      return this.rackApi_.addBlade(e);
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = t.bind(this);
                      return (
                        this.emitter_.on(e, function (e) {
                          n(e.event);
                        }),
                        this
                      );
                    }
                  }
                ])
              );
            })(be),
            Pe = (function (e) {
              function t(e) {
                var n;
                return (
                  b(this, t),
                  ((n = h(this, t, [
                    {
                      blade: e.blade,
                      view: e.view,
                      viewProps: e.rackController.viewProps
                    }
                  ])).rackController = e.rackController),
                  n
                );
              }
              return v(t, e), w(t);
            })(ee),
            Le = w(function e(t, n) {
              b(this, e);
              var i = A(n.viewName);
              (this.element = t.createElement("div")),
                this.element.classList.add(i()),
                n.viewProps.bindClassModifiers(this.element);
            });
          function Re(e) {
            return e instanceof Ne
              ? e.rack
              : e instanceof Pe
              ? e.rackController.rack
              : null;
          }
          function Ie(e) {
            var t = Re(e);
            return t ? t.bcSet_ : null;
          }
          var Oe = (function () {
              return w(
                function e(t) {
                  var n, i;
                  b(this, e),
                    (this.onBladePositionsChange_ =
                      this.onBladePositionsChange_.bind(this)),
                    (this.onSetAdd_ = this.onSetAdd_.bind(this)),
                    (this.onSetRemove_ = this.onSetRemove_.bind(this)),
                    (this.onChildDispose_ = this.onChildDispose_.bind(this)),
                    (this.onChildPositionsChange_ =
                      this.onChildPositionsChange_.bind(this)),
                    (this.onChildInputChange_ =
                      this.onChildInputChange_.bind(this)),
                    (this.onChildMonitorUpdate_ =
                      this.onChildMonitorUpdate_.bind(this)),
                    (this.onChildValueChange_ =
                      this.onChildValueChange_.bind(this)),
                    (this.onChildViewPropsChange_ =
                      this.onChildViewPropsChange_.bind(this)),
                    (this.onDescendantLayout_ =
                      this.onDescendantLayout_.bind(this)),
                    (this.onDescendantInputChange_ =
                      this.onDescendantInputChange_.bind(this)),
                    (this.onDescendantMonitorUpdate_ =
                      this.onDescendantMonitorUpdate_.bind(this)),
                    (this.emitter = new C()),
                    (this.blade_ =
                      null !== (n = t.blade) && void 0 !== n ? n : null),
                    null === (i = this.blade_) ||
                      void 0 === i ||
                      i
                        .value("positions")
                        .emitter.on("change", this.onBladePositionsChange_),
                    (this.viewProps = t.viewProps),
                    (this.bcSet_ = new xe(Ie)),
                    this.bcSet_.emitter.on("add", this.onSetAdd_),
                    this.bcSet_.emitter.on("remove", this.onSetRemove_);
                },
                [
                  {
                    key: "children",
                    get: function () {
                      return this.bcSet_.items;
                    }
                  },
                  {
                    key: "add",
                    value: function (e, t) {
                      var n;
                      null === (n = e.parent) || void 0 === n || n.remove(e),
                        x(e, "parent")
                          ? (e.parent = this)
                          : ((e.parent_ = this),
                            K({
                              key: "parent",
                              target: "BladeController",
                              place: "BladeRack.add"
                            })),
                        this.bcSet_.add(e, t);
                    }
                  },
                  {
                    key: "remove",
                    value: function (e) {
                      x(e, "parent")
                        ? (e.parent = null)
                        : ((e.parent_ = null),
                          K({
                            key: "parent",
                            target: "BladeController",
                            place: "BladeRack.remove"
                          })),
                        this.bcSet_.remove(e);
                    }
                  },
                  {
                    key: "find",
                    value: function (e) {
                      return this.bcSet_.allItems().filter(function (t) {
                        return t instanceof e;
                      });
                    }
                  },
                  {
                    key: "onSetAdd_",
                    value: function (e) {
                      this.updatePositions_();
                      var t = e.target === e.root;
                      if (
                        (this.emitter.emit("add", {
                          bladeController: e.item,
                          index: e.index,
                          isRoot: t,
                          sender: this
                        }),
                        t)
                      ) {
                        var n = e.item;
                        if (
                          (n.viewProps.emitter.on(
                            "change",
                            this.onChildViewPropsChange_
                          ),
                          n.blade
                            .value("positions")
                            .emitter.on("change", this.onChildPositionsChange_),
                          n.viewProps.handleDispose(this.onChildDispose_),
                          n instanceof Se)
                        )
                          n.binding.emitter.on(
                            "change",
                            this.onChildInputChange_
                          );
                        else if (n instanceof Te)
                          n.binding.emitter.on(
                            "update",
                            this.onChildMonitorUpdate_
                          );
                        else if (n instanceof ve)
                          n.value.emitter.on(
                            "change",
                            this.onChildValueChange_
                          );
                        else {
                          var i = Re(n);
                          if (i) {
                            var r = i.emitter;
                            r.on("layout", this.onDescendantLayout_),
                              r.on(
                                "inputchange",
                                this.onDescendantInputChange_
                              ),
                              r.on(
                                "monitorupdate",
                                this.onDescendantMonitorUpdate_
                              );
                          }
                        }
                      }
                    }
                  },
                  {
                    key: "onSetRemove_",
                    value: function (e) {
                      this.updatePositions_();
                      var t = e.target === e.root;
                      if (
                        (this.emitter.emit("remove", {
                          bladeController: e.item,
                          isRoot: t,
                          sender: this
                        }),
                        t)
                      ) {
                        var n = e.item;
                        if (n instanceof Se)
                          n.binding.emitter.off(
                            "change",
                            this.onChildInputChange_
                          );
                        else if (n instanceof Te)
                          n.binding.emitter.off(
                            "update",
                            this.onChildMonitorUpdate_
                          );
                        else if (n instanceof ve)
                          n.value.emitter.off(
                            "change",
                            this.onChildValueChange_
                          );
                        else {
                          var i = Re(n);
                          if (i) {
                            var r = i.emitter;
                            r.off("layout", this.onDescendantLayout_),
                              r.off(
                                "inputchange",
                                this.onDescendantInputChange_
                              ),
                              r.off(
                                "monitorupdate",
                                this.onDescendantMonitorUpdate_
                              );
                          }
                        }
                      }
                    }
                  },
                  {
                    key: "updatePositions_",
                    value: function () {
                      var e = this,
                        t = this.bcSet_.items.filter(function (e) {
                          return !e.viewProps.get("hidden");
                        }),
                        n = t[0],
                        i = t[t.length - 1];
                      this.bcSet_.items.forEach(function (t) {
                        var r = [];
                        t === n &&
                          (r.push("first"),
                          (!e.blade_ ||
                            e.blade_.get("positions").includes("veryfirst")) &&
                            r.push("veryfirst")),
                          t === i &&
                            (r.push("last"),
                            (!e.blade_ ||
                              e.blade_.get("positions").includes("verylast")) &&
                              r.push("verylast")),
                          t.blade.set("positions", r);
                      });
                    }
                  },
                  {
                    key: "onChildPositionsChange_",
                    value: function () {
                      this.updatePositions_(),
                        this.emitter.emit("layout", { sender: this });
                    }
                  },
                  {
                    key: "onChildViewPropsChange_",
                    value: function (e) {
                      this.updatePositions_(),
                        this.emitter.emit("layout", { sender: this });
                    }
                  },
                  {
                    key: "onChildDispose_",
                    value: function () {
                      var e = this;
                      this.bcSet_.items
                        .filter(function (e) {
                          return e.viewProps.get("disposed");
                        })
                        .forEach(function (t) {
                          e.bcSet_.remove(t);
                        });
                    }
                  },
                  {
                    key: "onChildInputChange_",
                    value: function (e) {
                      var t = (function (e, t) {
                        for (var n = 0; n < e.length; n++) {
                          var i = e[n];
                          if (i instanceof Se && i.binding === t) return i;
                        }
                        return null;
                      })(this.find(Se), e.sender);
                      if (!t) throw T.alreadyDisposed();
                      this.emitter.emit("inputchange", {
                        bladeController: t,
                        options: e.options,
                        sender: this
                      });
                    }
                  },
                  {
                    key: "onChildMonitorUpdate_",
                    value: function (e) {
                      var t = (function (e, t) {
                        for (var n = 0; n < e.length; n++) {
                          var i = e[n];
                          if (i instanceof Te && i.binding === t) return i;
                        }
                        return null;
                      })(this.find(Te), e.sender);
                      if (!t) throw T.alreadyDisposed();
                      this.emitter.emit("monitorupdate", {
                        bladeController: t,
                        sender: this
                      });
                    }
                  },
                  {
                    key: "onChildValueChange_",
                    value: function (e) {
                      var t = (function (e, t) {
                        for (var n = 0; n < e.length; n++) {
                          var i = e[n];
                          if (i instanceof ve && i.value === t) return i;
                        }
                        return null;
                      })(this.find(ve), e.sender);
                      if (!t) throw T.alreadyDisposed();
                      this.emitter.emit("inputchange", {
                        bladeController: t,
                        options: e.options,
                        sender: this
                      });
                    }
                  },
                  {
                    key: "onDescendantLayout_",
                    value: function (e) {
                      this.updatePositions_(),
                        this.emitter.emit("layout", { sender: this });
                    }
                  },
                  {
                    key: "onDescendantInputChange_",
                    value: function (e) {
                      this.emitter.emit("inputchange", {
                        bladeController: e.bladeController,
                        options: e.options,
                        sender: this
                      });
                    }
                  },
                  {
                    key: "onDescendantMonitorUpdate_",
                    value: function (e) {
                      this.emitter.emit("monitorupdate", {
                        bladeController: e.bladeController,
                        sender: this
                      });
                    }
                  },
                  {
                    key: "onBladePositionsChange_",
                    value: function () {
                      this.updatePositions_();
                    }
                  }
                ]
              );
            })(),
            Ne = (function (e) {
              function t(e, n) {
                var i;
                b(this, t),
                  ((i = h(this, t, [
                    Object.assign(Object.assign({}, n), {
                      view: new Le(e, {
                        viewName: "brk",
                        viewProps: n.viewProps
                      })
                    })
                  ])).onRackAdd_ = i.onRackAdd_.bind(d(i))),
                  (i.onRackRemove_ = i.onRackRemove_.bind(d(i)));
                var r = new Oe({
                  blade: n.root ? void 0 : n.blade,
                  viewProps: n.viewProps
                });
                return (
                  r.emitter.on("add", i.onRackAdd_),
                  r.emitter.on("remove", i.onRackRemove_),
                  (i.rack = r),
                  i.viewProps.handleDispose(function () {
                    for (var e = i.rack.children.length - 1; e >= 0; e--)
                      i.rack.children[e].viewProps.set("disposed", !0);
                  }),
                  i
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "onRackAdd_",
                    value: function (e) {
                      e.isRoot &&
                        se(
                          this.view.element,
                          e.bladeController.view.element,
                          e.index
                        );
                    }
                  },
                  {
                    key: "onRackRemove_",
                    value: function (e) {
                      e.isRoot && le(e.bladeController.view.element);
                    }
                  }
                ])
              );
            })(ee),
            Fe = A("cnt"),
            Ue = w(function e(t, n) {
              var i,
                r = this;
              b(this, e),
                (this.className_ = A(
                  null !== (i = n.viewName) && void 0 !== i ? i : "fld"
                )),
                (this.element = t.createElement("div")),
                this.element.classList.add(this.className_(), Fe()),
                n.viewProps.bindClassModifiers(this.element),
                (this.foldable_ = n.foldable),
                this.foldable_.bindExpandedClass(
                  this.element,
                  this.className_(void 0, "expanded")
                ),
                R(
                  this.foldable_,
                  "completed",
                  I(this.element, this.className_(void 0, "cpl"))
                );
              var a = t.createElement("button");
              a.classList.add(this.className_("b")),
                R(n.props, "title", function (e) {
                  _(e)
                    ? r.element.classList.add(r.className_(void 0, "not"))
                    : r.element.classList.remove(r.className_(void 0, "not"));
                }),
                n.viewProps.bindDisabled(a),
                this.element.appendChild(a),
                (this.buttonElement = a);
              var o = t.createElement("div");
              o.classList.add(this.className_("i")),
                this.element.appendChild(o);
              var s = t.createElement("div");
              s.classList.add(this.className_("t")),
                O(n.props.value("title"), s),
                this.buttonElement.appendChild(s),
                (this.titleElement = s);
              var l = t.createElement("div");
              l.classList.add(this.className_("m")),
                this.buttonElement.appendChild(l);
              var u = n.containerElement;
              u.classList.add(this.className_("c")),
                this.element.appendChild(u),
                (this.containerElement = u);
            }),
            Be = (function (e) {
              function t(e, n) {
                var i, r;
                b(this, t);
                var a = ge.create(
                    null === (r = n.expanded) || void 0 === r || r
                  ),
                  o = new Ne(e, {
                    blade: n.blade,
                    root: n.root,
                    viewProps: n.viewProps
                  });
                return (
                  ((i = h(this, t, [
                    Object.assign(Object.assign({}, n), {
                      rackController: o,
                      view: new Ue(e, {
                        containerElement: o.view.element,
                        foldable: a,
                        props: n.props,
                        viewName: n.root ? "rot" : void 0,
                        viewProps: n.viewProps
                      })
                    })
                  ])).onTitleClick_ = i.onTitleClick_.bind(d(i))),
                  (i.props = n.props),
                  (i.foldable = a),
                  ye(i.foldable, i.view.containerElement),
                  i.rackController.rack.emitter.on("add", function () {
                    i.foldable.cleanUpTransition();
                  }),
                  i.rackController.rack.emitter.on("remove", function () {
                    i.foldable.cleanUpTransition();
                  }),
                  i.view.buttonElement.addEventListener(
                    "click",
                    i.onTitleClick_
                  ),
                  i
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "document",
                    get: function () {
                      return this.view.element.ownerDocument;
                    }
                  },
                  {
                    key: "onTitleClick_",
                    value: function () {
                      this.foldable.set(
                        "expanded",
                        !this.foldable.get("expanded")
                      );
                    }
                  }
                ])
              );
            })(Pe),
            ze = {
              id: "folder",
              type: "blade",
              accept: function (e) {
                var t = j,
                  n = q(e, {
                    title: t.required.string,
                    view: t.required.constant("folder"),
                    expanded: t.optional.boolean
                  });
                return n ? { params: n } : null;
              },
              controller: function (e) {
                return new Be(e.document, {
                  blade: e.blade,
                  expanded: e.params.expanded,
                  props: H.fromObject({ title: e.params.title }),
                  viewProps: e.viewProps
                });
              },
              api: function (e) {
                return e.controller instanceof Be
                  ? new Ae(e.controller, e.pool)
                  : null;
              }
            },
            Ve = (function (e) {
              function t(e, n) {
                var i;
                b(this, t);
                var r = n.valueController.viewProps;
                return (
                  ((i = h(this, t, [
                    Object.assign(Object.assign({}, n), {
                      value: n.valueController.value,
                      view: new de(e, { props: n.props, viewProps: r }),
                      viewProps: r
                    })
                  ])).props = n.props),
                  (i.valueController = n.valueController),
                  i.view.valueElement.appendChild(
                    i.valueController.view.element
                  ),
                  i
                );
              }
              return v(t, e), w(t);
            })(ve),
            He = (function (e) {
              function t() {
                return b(this, t), h(this, t, arguments);
              }
              return v(t, e), w(t);
            })(n),
            Ge = A("spr"),
            We = w(function e(t, n) {
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(Ge()),
                n.viewProps.bindClassModifiers(this.element);
              var i = t.createElement("hr");
              i.classList.add(Ge("r")), this.element.appendChild(i);
            }),
            je = (function (e) {
              function t(e, n) {
                return (
                  b(this, t),
                  h(this, t, [
                    Object.assign(Object.assign({}, n), {
                      view: new We(e, { viewProps: n.viewProps })
                    })
                  ])
                );
              }
              return v(t, e), w(t);
            })(ee),
            qe = {
              id: "separator",
              type: "blade",
              accept: function (e) {
                var t = q(e, { view: j.required.constant("separator") });
                return t ? { params: t } : null;
              },
              controller: function (e) {
                return new je(e.document, {
                  blade: e.blade,
                  viewProps: e.viewProps
                });
              },
              api: function (e) {
                return e.controller instanceof je ? new He(e.controller) : null;
              }
            },
            Ke = A("tbi"),
            Xe = w(function e(t, n) {
              var i = this;
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(Ke()),
                n.viewProps.bindClassModifiers(this.element),
                R(n.props, "selected", function (e) {
                  e
                    ? i.element.classList.add(Ke(void 0, "sel"))
                    : i.element.classList.remove(Ke(void 0, "sel"));
                });
              var r = t.createElement("button");
              r.classList.add(Ke("b")),
                n.viewProps.bindDisabled(r),
                this.element.appendChild(r),
                (this.buttonElement = r);
              var a = t.createElement("div");
              a.classList.add(Ke("t")),
                O(n.props.value("title"), a),
                this.buttonElement.appendChild(a),
                (this.titleElement = a);
            }),
            Ye = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.emitter = new C()),
                    (this.onClick_ = this.onClick_.bind(this)),
                    (this.props = n.props),
                    (this.viewProps = n.viewProps),
                    (this.view = new Xe(t, {
                      props: n.props,
                      viewProps: n.viewProps
                    })),
                    this.view.buttonElement.addEventListener(
                      "click",
                      this.onClick_
                    );
                },
                [
                  {
                    key: "onClick_",
                    value: function () {
                      this.emitter.emit("click", { sender: this });
                    }
                  }
                ]
              );
            })(),
            Ze = (function () {
              return w(
                function e(t, n) {
                  var i = this;
                  b(this, e),
                    (this.onItemClick_ = this.onItemClick_.bind(this)),
                    (this.ic_ = new Ye(t, {
                      props: n.itemProps,
                      viewProps: J.create()
                    })),
                    this.ic_.emitter.on("click", this.onItemClick_),
                    (this.cc_ = new Ne(t, {
                      blade: me(),
                      viewProps: J.create()
                    })),
                    (this.props = n.props),
                    R(this.props, "selected", function (e) {
                      i.itemController.props.set("selected", e),
                        i.contentController.viewProps.set("hidden", !e);
                    });
                },
                [
                  {
                    key: "itemController",
                    get: function () {
                      return this.ic_;
                    }
                  },
                  {
                    key: "contentController",
                    get: function () {
                      return this.cc_;
                    }
                  },
                  {
                    key: "onItemClick_",
                    value: function () {
                      this.props.set("selected", !0);
                    }
                  }
                ]
              );
            })(),
            Je = (function () {
              return w(
                function e(t, n) {
                  b(this, e), (this.controller_ = t), (this.rackApi_ = n);
                },
                [
                  {
                    key: "title",
                    get: function () {
                      var e;
                      return null !==
                        (e =
                          this.controller_.itemController.props.get("title")) &&
                        void 0 !== e
                        ? e
                        : "";
                    },
                    set: function (e) {
                      this.controller_.itemController.props.set("title", e);
                    }
                  },
                  {
                    key: "selected",
                    get: function () {
                      return this.controller_.props.get("selected");
                    },
                    set: function (e) {
                      this.controller_.props.set("selected", e);
                    }
                  },
                  {
                    key: "children",
                    get: function () {
                      return this.rackApi_.children;
                    }
                  },
                  {
                    key: "addButton",
                    value: function (e) {
                      return this.rackApi_.addButton(e);
                    }
                  },
                  {
                    key: "addFolder",
                    value: function (e) {
                      return this.rackApi_.addFolder(e);
                    }
                  },
                  {
                    key: "addSeparator",
                    value: function (e) {
                      return this.rackApi_.addSeparator(e);
                    }
                  },
                  {
                    key: "addTab",
                    value: function (e) {
                      return this.rackApi_.addTab(e);
                    }
                  },
                  {
                    key: "add",
                    value: function (e, t) {
                      this.rackApi_.add(e, t);
                    }
                  },
                  {
                    key: "remove",
                    value: function (e) {
                      this.rackApi_.remove(e);
                    }
                  },
                  {
                    key: "addInput",
                    value: function (e, t, n) {
                      return this.rackApi_.addInput(e, t, n);
                    }
                  },
                  {
                    key: "addMonitor",
                    value: function (e, t, n) {
                      return this.rackApi_.addMonitor(e, t, n);
                    }
                  },
                  {
                    key: "addBlade",
                    value: function (e) {
                      return this.rackApi_.addBlade(e);
                    }
                  }
                ]
              );
            })(),
            Qe = (function (e) {
              function t(e, n) {
                var i;
                return (
                  b(this, t),
                  ((i = h(this, t, [
                    e,
                    new De(e.rackController, n)
                  ])).onPageAdd_ = i.onPageAdd_.bind(d(i))),
                  (i.onPageRemove_ = i.onPageRemove_.bind(d(i))),
                  (i.onSelect_ = i.onSelect_.bind(d(i))),
                  (i.emitter_ = new C()),
                  (i.pageApiMap_ = new Map()),
                  i.rackApi_.on("change", function (e) {
                    i.emitter_.emit("change", { event: e });
                  }),
                  i.rackApi_.on("update", function (e) {
                    i.emitter_.emit("update", { event: e });
                  }),
                  i.controller_.tab.selectedIndex.emitter.on(
                    "change",
                    i.onSelect_
                  ),
                  i.controller_.pageSet.emitter.on("add", i.onPageAdd_),
                  i.controller_.pageSet.emitter.on("remove", i.onPageRemove_),
                  i.controller_.pageSet.items.forEach(function (e) {
                    i.setUpPageApi_(e);
                  }),
                  i
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "pages",
                    get: function () {
                      var e = this;
                      return this.controller_.pageSet.items.map(function (t) {
                        var n = e.pageApiMap_.get(t);
                        if (!n) throw T.shouldNeverHappen();
                        return n;
                      });
                    }
                  },
                  {
                    key: "addPage",
                    value: function (e) {
                      var t = this.controller_.view.element.ownerDocument,
                        n = new Ze(t, {
                          itemProps: H.fromObject({
                            selected: !1,
                            title: e.title
                          }),
                          props: H.fromObject({ selected: !1 })
                        });
                      this.controller_.add(n, e.index);
                      var i = this.pageApiMap_.get(n);
                      if (!i) throw T.shouldNeverHappen();
                      return i;
                    }
                  },
                  {
                    key: "removePage",
                    value: function (e) {
                      this.controller_.remove(e);
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = t.bind(this);
                      return (
                        this.emitter_.on(e, function (e) {
                          n(e.event);
                        }),
                        this
                      );
                    }
                  },
                  {
                    key: "setUpPageApi_",
                    value: function (e) {
                      var t = this.rackApi_.apiSet_.find(function (t) {
                        return t.controller_ === e.contentController;
                      });
                      if (!t) throw T.shouldNeverHappen();
                      var n = new Je(e, t);
                      this.pageApiMap_.set(e, n);
                    }
                  },
                  {
                    key: "onPageAdd_",
                    value: function (e) {
                      this.setUpPageApi_(e.item);
                    }
                  },
                  {
                    key: "onPageRemove_",
                    value: function (e) {
                      if (!this.pageApiMap_.get(e.item))
                        throw T.shouldNeverHappen();
                      this.pageApiMap_.delete(e.item);
                    }
                  },
                  {
                    key: "onSelect_",
                    value: function (e) {
                      this.emitter_.emit("select", {
                        event: new m(this, e.rawValue)
                      });
                    }
                  }
                ])
              );
            })(be),
            $e = (function () {
              return w(
                function e() {
                  b(this, e),
                    (this.onItemSelectedChange_ =
                      this.onItemSelectedChange_.bind(this)),
                    (this.empty = V(!0)),
                    (this.selectedIndex = V(-1)),
                    (this.items_ = []);
                },
                [
                  {
                    key: "add",
                    value: function (e, t) {
                      var n = null != t ? t : this.items_.length;
                      this.items_.splice(n, 0, e),
                        e.emitter.on("change", this.onItemSelectedChange_),
                        this.keepSelection_();
                    }
                  },
                  {
                    key: "remove",
                    value: function (e) {
                      var t = this.items_.indexOf(e);
                      t < 0 ||
                        (this.items_.splice(t, 1),
                        e.emitter.off("change", this.onItemSelectedChange_),
                        this.keepSelection_());
                    }
                  },
                  {
                    key: "keepSelection_",
                    value: function () {
                      if (0 === this.items_.length)
                        return (
                          (this.selectedIndex.rawValue = -1),
                          void (this.empty.rawValue = !0)
                        );
                      var e = this.items_.findIndex(function (e) {
                        return e.rawValue;
                      });
                      e < 0
                        ? (this.items_.forEach(function (e, t) {
                            e.rawValue = 0 === t;
                          }),
                          (this.selectedIndex.rawValue = 0))
                        : (this.items_.forEach(function (t, n) {
                            t.rawValue = n === e;
                          }),
                          (this.selectedIndex.rawValue = e)),
                        (this.empty.rawValue = !1);
                    }
                  },
                  {
                    key: "onItemSelectedChange_",
                    value: function (e) {
                      if (e.rawValue) {
                        var t = this.items_.findIndex(function (t) {
                          return t === e.sender;
                        });
                        this.items_.forEach(function (e, n) {
                          e.rawValue = n === t;
                        }),
                          (this.selectedIndex.rawValue = t);
                      } else this.keepSelection_();
                    }
                  }
                ]
              );
            })(),
            et = A("tab"),
            tt = w(function e(t, n) {
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(et(), Fe()),
                n.viewProps.bindClassModifiers(this.element),
                L(n.empty, I(this.element, et(void 0, "nop")));
              var i = t.createElement("div");
              i.classList.add(et("t")),
                this.element.appendChild(i),
                (this.itemsElement = i);
              var r = t.createElement("div");
              r.classList.add(et("i")), this.element.appendChild(r);
              var a = n.contentsElement;
              a.classList.add(et("c")),
                this.element.appendChild(a),
                (this.contentsElement = a);
            }),
            nt = (function (e) {
              function t(e, n) {
                var i;
                b(this, t);
                var r = new Ne(e, { blade: n.blade, viewProps: n.viewProps }),
                  a = new $e();
                return (
                  ((i = h(this, t, [
                    {
                      blade: n.blade,
                      rackController: r,
                      view: new tt(e, {
                        contentsElement: r.view.element,
                        empty: a.empty,
                        viewProps: n.viewProps
                      })
                    }
                  ])).onPageAdd_ = i.onPageAdd_.bind(d(i))),
                  (i.onPageRemove_ = i.onPageRemove_.bind(d(i))),
                  (i.pageSet_ = new xe(function () {
                    return null;
                  })),
                  i.pageSet_.emitter.on("add", i.onPageAdd_),
                  i.pageSet_.emitter.on("remove", i.onPageRemove_),
                  (i.tab = a),
                  i
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "pageSet",
                    get: function () {
                      return this.pageSet_;
                    }
                  },
                  {
                    key: "add",
                    value: function (e, t) {
                      this.pageSet_.add(e, t);
                    }
                  },
                  {
                    key: "remove",
                    value: function (e) {
                      this.pageSet_.remove(this.pageSet_.items[e]);
                    }
                  },
                  {
                    key: "onPageAdd_",
                    value: function (e) {
                      var t = e.item;
                      se(
                        this.view.itemsElement,
                        t.itemController.view.element,
                        e.index
                      ),
                        t.itemController.viewProps.set(
                          "parent",
                          this.viewProps
                        ),
                        this.rackController.rack.add(
                          t.contentController,
                          e.index
                        ),
                        this.tab.add(t.props.value("selected"));
                    }
                  },
                  {
                    key: "onPageRemove_",
                    value: function (e) {
                      var t = e.item;
                      le(t.itemController.view.element),
                        t.itemController.viewProps.set("parent", null),
                        this.rackController.rack.remove(t.contentController),
                        this.tab.remove(t.props.value("selected"));
                    }
                  }
                ])
              );
            })(Pe),
            it = {
              id: "tab",
              type: "blade",
              accept: function (e) {
                var t = j,
                  n = q(e, {
                    pages: t.required.array(
                      t.required.object({ title: t.required.string })
                    ),
                    view: t.required.constant("tab")
                  });
                return n && 0 !== n.pages.length ? { params: n } : null;
              },
              controller: function (e) {
                var t = new nt(e.document, {
                  blade: e.blade,
                  viewProps: e.viewProps
                });
                return (
                  e.params.pages.forEach(function (n) {
                    var i = new Ze(e.document, {
                      itemProps: H.fromObject({ selected: !1, title: n.title }),
                      props: H.fromObject({ selected: !1 })
                    });
                    t.add(i);
                  }),
                  t
                );
              },
              api: function (e) {
                return e.controller instanceof nt
                  ? new Qe(e.controller, e.pool)
                  : null;
              }
            };
          var rt = (function () {
              return w(
                function e() {
                  b(this, e), (this.disabled = !1), (this.emitter = new C());
                },
                [
                  { key: "dispose", value: function () {} },
                  {
                    key: "tick",
                    value: function () {
                      this.disabled ||
                        this.emitter.emit("tick", { sender: this });
                    }
                  }
                ]
              );
            })(),
            at = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.disabled_ = !1),
                    (this.timerId_ = null),
                    (this.onTick_ = this.onTick_.bind(this)),
                    (this.doc_ = t),
                    (this.emitter = new C()),
                    (this.interval_ = n),
                    this.setTimer_();
                },
                [
                  {
                    key: "disabled",
                    get: function () {
                      return this.disabled_;
                    },
                    set: function (e) {
                      (this.disabled_ = e),
                        this.disabled_ ? this.clearTimer_() : this.setTimer_();
                    }
                  },
                  {
                    key: "dispose",
                    value: function () {
                      this.clearTimer_();
                    }
                  },
                  {
                    key: "clearTimer_",
                    value: function () {
                      if (null !== this.timerId_) {
                        var e = this.doc_.defaultView;
                        e && e.clearInterval(this.timerId_),
                          (this.timerId_ = null);
                      }
                    }
                  },
                  {
                    key: "setTimer_",
                    value: function () {
                      if ((this.clearTimer_(), !(this.interval_ <= 0))) {
                        var e = this.doc_.defaultView;
                        e &&
                          (this.timerId_ = e.setInterval(
                            this.onTick_,
                            this.interval_
                          ));
                      }
                    }
                  },
                  {
                    key: "onTick_",
                    value: function () {
                      this.disabled_ ||
                        this.emitter.emit("tick", { sender: this });
                    }
                  }
                ]
              );
            })(),
            ot = (function () {
              return w(
                function e(t) {
                  b(this, e),
                    (this.onValueChange_ = this.onValueChange_.bind(this)),
                    (this.reader = t.reader),
                    (this.writer = t.writer),
                    (this.emitter = new C()),
                    (this.value = t.value),
                    this.value.emitter.on("change", this.onValueChange_),
                    (this.target = t.target),
                    this.read();
                },
                [
                  {
                    key: "read",
                    value: function () {
                      var e = this.target.read();
                      void 0 !== e && (this.value.rawValue = this.reader(e));
                    }
                  },
                  {
                    key: "write_",
                    value: function (e) {
                      this.writer(this.target, e);
                    }
                  },
                  {
                    key: "onValueChange_",
                    value: function (e) {
                      this.write_(e.rawValue),
                        this.emitter.emit("change", {
                          options: e.options,
                          rawValue: e.rawValue,
                          sender: this
                        });
                    }
                  }
                ]
              );
            })();
          function st(e, t) {
            for (; e.length < t; ) e.push(void 0);
          }
          function lt(e) {
            var t = [];
            return st(t, e), V(t);
          }
          var ut = (function () {
              return w(
                function e(t) {
                  b(this, e),
                    (this.onTick_ = this.onTick_.bind(this)),
                    (this.reader_ = t.reader),
                    (this.target = t.target),
                    (this.emitter = new C()),
                    (this.value = t.value),
                    (this.ticker = t.ticker),
                    this.ticker.emitter.on("tick", this.onTick_),
                    this.read();
                },
                [
                  {
                    key: "dispose",
                    value: function () {
                      this.ticker.dispose();
                    }
                  },
                  {
                    key: "read",
                    value: function () {
                      var e = this.target.read();
                      if (void 0 !== e) {
                        var t = this.value.rawValue,
                          n = this.reader_(e);
                        (this.value.rawValue = (function (e, t) {
                          var n = [].concat(
                            u(
                              (function (e) {
                                var t = e.indexOf(void 0);
                                return t < 0 ? e : e.slice(0, t);
                              })(e)
                            ),
                            [t]
                          );
                          return (
                            n.length > e.length
                              ? n.splice(0, n.length - e.length)
                              : st(n, e.length),
                            n
                          );
                        })(t, n)),
                          this.emitter.emit("update", {
                            rawValue: n,
                            sender: this
                          });
                      }
                    }
                  },
                  {
                    key: "onTick_",
                    value: function (e) {
                      this.read();
                    }
                  }
                ]
              );
            })(),
            ct = (function () {
              return w(
                function e(t) {
                  b(this, e), (this.constraints = t);
                },
                [
                  {
                    key: "constrain",
                    value: function (e) {
                      return this.constraints.reduce(function (e, t) {
                        return t.constrain(e);
                      }, e);
                    }
                  }
                ]
              );
            })();
          function ht(e, t) {
            if (e instanceof t) return e;
            if (e instanceof ct) {
              var n = e.constraints.reduce(function (e, n) {
                return e || (n instanceof t ? n : null);
              }, null);
              if (n) return n;
            }
            return null;
          }
          var dt = (function () {
              return w(
                function e(t) {
                  b(this, e),
                    (this.values = H.fromObject({ max: t.max, min: t.min }));
                },
                [
                  {
                    key: "constrain",
                    value: function (e) {
                      var t = this.values.get("max"),
                        n = this.values.get("min");
                      return Math.min(Math.max(e, n), t);
                    }
                  }
                ]
              );
            })(),
            pt = (function () {
              return w(
                function e(t) {
                  b(this, e), (this.values = H.fromObject({ options: t }));
                },
                [
                  {
                    key: "options",
                    get: function () {
                      return this.values.get("options");
                    }
                  },
                  {
                    key: "constrain",
                    value: function (e) {
                      var t = this.values.get("options");
                      return 0 === t.length ||
                        t.filter(function (t) {
                          return t.value === e;
                        }).length > 0
                        ? e
                        : t[0].value;
                    }
                  }
                ]
              );
            })(),
            ft = (function () {
              return w(
                function e(t) {
                  b(this, e),
                    (this.values = H.fromObject({ max: t.max, min: t.min }));
                },
                [
                  {
                    key: "maxValue",
                    get: function () {
                      return this.values.get("max");
                    }
                  },
                  {
                    key: "minValue",
                    get: function () {
                      return this.values.get("min");
                    }
                  },
                  {
                    key: "constrain",
                    value: function (e) {
                      var t = this.values.get("max"),
                        n = this.values.get("min"),
                        i = e;
                      return (
                        _(n) || (i = Math.max(i, n)),
                        _(t) || (i = Math.min(i, t)),
                        i
                      );
                    }
                  }
                ]
              );
            })(),
            vt = (function () {
              return w(
                function e(t) {
                  var n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  b(this, e), (this.step = t), (this.origin = n);
                },
                [
                  {
                    key: "constrain",
                    value: function (e) {
                      var t = this.origin % this.step;
                      return t + Math.round((e - t) / this.step) * this.step;
                    }
                  }
                ]
              );
            })(),
            mt = A("lst"),
            gt = (function () {
              return w(
                function e(t, n) {
                  var i = this;
                  b(this, e),
                    (this.onValueChange_ = this.onValueChange_.bind(this)),
                    (this.props_ = n.props),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(mt()),
                    n.viewProps.bindClassModifiers(this.element);
                  var r = t.createElement("select");
                  r.classList.add(mt("s")),
                    n.viewProps.bindDisabled(r),
                    this.element.appendChild(r),
                    (this.selectElement = r);
                  var a = t.createElement("div");
                  a.classList.add(mt("m")),
                    a.appendChild(oe(t, "dropdown")),
                    this.element.appendChild(a),
                    n.value.emitter.on("change", this.onValueChange_),
                    (this.value_ = n.value),
                    R(this.props_, "options", function (e) {
                      ue(i.selectElement),
                        e.forEach(function (e) {
                          var n = t.createElement("option");
                          (n.textContent = e.text),
                            i.selectElement.appendChild(n);
                        }),
                        i.update_();
                    });
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      var e = this.props_.get("options").map(function (e) {
                        return e.value;
                      });
                      this.selectElement.selectedIndex = e.indexOf(
                        this.value_.rawValue
                      );
                    }
                  },
                  {
                    key: "onValueChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            _t = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onSelectChange_ = this.onSelectChange_.bind(this)),
                    (this.props = n.props),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.view = new gt(t, {
                      props: this.props,
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    this.view.selectElement.addEventListener(
                      "change",
                      this.onSelectChange_
                    );
                },
                [
                  {
                    key: "onSelectChange_",
                    value: function (e) {
                      var t = e.currentTarget;
                      this.value.rawValue =
                        this.props.get("options")[t.selectedIndex].value;
                    }
                  }
                ]
              );
            })(),
            yt = A("pop"),
            bt = w(function e(t, n) {
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(yt()),
                n.viewProps.bindClassModifiers(this.element),
                L(n.shows, I(this.element, yt(void 0, "v")));
            }),
            xt = w(function e(t, n) {
              b(this, e),
                (this.shows = V(!1)),
                (this.viewProps = n.viewProps),
                (this.view = new bt(t, {
                  shows: this.shows,
                  viewProps: this.viewProps
                }));
            }),
            wt = A("txt"),
            St = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onChange_ = this.onChange_.bind(this)),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(wt()),
                    n.viewProps.bindClassModifiers(this.element),
                    (this.props_ = n.props),
                    this.props_.emitter.on("change", this.onChange_);
                  var i = t.createElement("input");
                  i.classList.add(wt("i")),
                    (i.type = "text"),
                    n.viewProps.bindDisabled(i),
                    this.element.appendChild(i),
                    (this.inputElement = i),
                    n.value.emitter.on("change", this.onChange_),
                    (this.value_ = n.value),
                    this.refresh();
                },
                [
                  {
                    key: "refresh",
                    value: function () {
                      var e = this.props_.get("formatter");
                      this.inputElement.value = e(this.value_.rawValue);
                    }
                  },
                  {
                    key: "onChange_",
                    value: function () {
                      this.refresh();
                    }
                  }
                ]
              );
            })(),
            Mt = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onInputChange_ = this.onInputChange_.bind(this)),
                    (this.parser_ = n.parser),
                    (this.props = n.props),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.view = new St(t, {
                      props: n.props,
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    this.view.inputElement.addEventListener(
                      "change",
                      this.onInputChange_
                    );
                },
                [
                  {
                    key: "onInputChange_",
                    value: function (e) {
                      var t = e.currentTarget.value,
                        n = this.parser_(t);
                      _(n) || (this.value.rawValue = n), this.view.refresh();
                    }
                  }
                ]
              );
            })();
          function Tt(e) {
            return "false" !== e && !!e;
          }
          function kt(e) {
            return (function (e) {
              return String(e);
            })(e);
          }
          var Et = (function () {
              return w(
                function e(t) {
                  b(this, e), (this.text = t);
                },
                [
                  {
                    key: "evaluate",
                    value: function () {
                      return Number(this.text);
                    }
                  },
                  {
                    key: "toString",
                    value: function () {
                      return this.text;
                    }
                  }
                ]
              );
            })(),
            Ct = {
              "**": function (e, t) {
                return Math.pow(e, t);
              },
              "*": function (e, t) {
                return e * t;
              },
              "/": function (e, t) {
                return e / t;
              },
              "%": function (e, t) {
                return e % t;
              },
              "+": function (e, t) {
                return e + t;
              },
              "-": function (e, t) {
                return e - t;
              },
              "<<": function (e, t) {
                return e << t;
              },
              ">>": function (e, t) {
                return e >> t;
              },
              ">>>": function (e, t) {
                return e >>> t;
              },
              "&": function (e, t) {
                return e & t;
              },
              "^": function (e, t) {
                return e ^ t;
              },
              "|": function (e, t) {
                return e | t;
              }
            },
            Dt = (function () {
              return w(
                function e(t, n, i) {
                  b(this, e),
                    (this.left = n),
                    (this.operator = t),
                    (this.right = i);
                },
                [
                  {
                    key: "evaluate",
                    value: function () {
                      var e = Ct[this.operator];
                      if (!e)
                        throw new Error(
                          "unexpected binary operator: '".concat(this.operator)
                        );
                      return e(this.left.evaluate(), this.right.evaluate());
                    }
                  },
                  {
                    key: "toString",
                    value: function () {
                      return [
                        "b(",
                        this.left.toString(),
                        this.operator,
                        this.right.toString(),
                        ")"
                      ].join(" ");
                    }
                  }
                ]
              );
            })(),
            At = {
              "+": function (e) {
                return e;
              },
              "-": function (e) {
                return -e;
              },
              "~": function (e) {
                return ~e;
              }
            },
            Pt = (function () {
              return w(
                function e(t, n) {
                  b(this, e), (this.operator = t), (this.expression = n);
                },
                [
                  {
                    key: "evaluate",
                    value: function () {
                      var e = At[this.operator];
                      if (!e)
                        throw new Error(
                          "unexpected unary operator: '".concat(this.operator)
                        );
                      return e(this.expression.evaluate());
                    }
                  },
                  {
                    key: "toString",
                    value: function () {
                      return [
                        "u(",
                        this.operator,
                        this.expression.toString(),
                        ")"
                      ].join(" ");
                    }
                  }
                ]
              );
            })();
          function Lt(e) {
            return function (t, n) {
              for (var i = 0; i < e.length; i++) {
                var r = e[i](t, n);
                if ("" !== r) return r;
              }
              return "";
            };
          }
          function Rt(e, t) {
            var n,
              i = e.substr(t).match(/^\s+/);
            return null !== (n = i && i[0]) && void 0 !== n ? n : "";
          }
          function It(e, t) {
            var n,
              i = e.substr(t).match(/^[0-9]+/);
            return null !== (n = i && i[0]) && void 0 !== n ? n : "";
          }
          function Ot(e, t) {
            var n = e.substr(t, 1);
            if (((t += 1), "e" !== n.toLowerCase())) return "";
            var i = (function (e, t) {
              var n = It(e, t);
              if ("" !== n) return n;
              var i = e.substr(t, 1);
              if ("-" !== i && "+" !== i) return "";
              var r = It(e, (t += 1));
              return "" === r ? "" : i + r;
            })(e, t);
            return "" === i ? "" : n + i;
          }
          function Nt(e, t) {
            var n = e.substr(t, 1);
            if ("0" === n) return n;
            var i = (function (e, t) {
              var n = e.substr(t, 1);
              return n.match(/^[1-9]$/) ? n : "";
            })(e, t);
            return (t += i.length), "" === i ? "" : i + It(e, t);
          }
          var Ft = Lt([
            function (e, t) {
              var n = Nt(e, t);
              if (((t += n.length), "" === n)) return "";
              var i = e.substr(t, 1);
              if (((t += i.length), "." !== i)) return "";
              var r = It(e, t);
              return n + i + r + Ot(e, (t += r.length));
            },
            function (e, t) {
              var n = e.substr(t, 1);
              if (((t += n.length), "." !== n)) return "";
              var i = It(e, t);
              return (t += i.length), "" === i ? "" : n + i + Ot(e, t);
            },
            function (e, t) {
              var n = Nt(e, t);
              return (t += n.length), "" === n ? "" : n + Ot(e, t);
            }
          ]);
          var Ut = Lt([
              function (e, t) {
                var n = e.substr(t, 2);
                if (((t += n.length), "0b" !== n.toLowerCase())) return "";
                var i = (function (e, t) {
                  var n,
                    i = e.substr(t).match(/^[01]+/);
                  return null !== (n = i && i[0]) && void 0 !== n ? n : "";
                })(e, t);
                return "" === i ? "" : n + i;
              },
              function (e, t) {
                var n = e.substr(t, 2);
                if (((t += n.length), "0o" !== n.toLowerCase())) return "";
                var i = (function (e, t) {
                  var n,
                    i = e.substr(t).match(/^[0-7]+/);
                  return null !== (n = i && i[0]) && void 0 !== n ? n : "";
                })(e, t);
                return "" === i ? "" : n + i;
              },
              function (e, t) {
                var n = e.substr(t, 2);
                if (((t += n.length), "0x" !== n.toLowerCase())) return "";
                var i = (function (e, t) {
                  var n,
                    i = e.substr(t).match(/^[0-9a-f]+/i);
                  return null !== (n = i && i[0]) && void 0 !== n ? n : "";
                })(e, t);
                return "" === i ? "" : n + i;
              }
            ]),
            Bt = Lt([Ut, Ft]);
          function zt(e, t) {
            var n;
            return null !==
              (n = (function (e, t) {
                var n = Bt(e, t);
                return (
                  (t += n.length),
                  "" === n ? null : { evaluable: new Et(n), cursor: t }
                );
              })(e, t)) && void 0 !== n
              ? n
              : (function (e, t) {
                  var n = e.substr(t, 1);
                  if (((t += n.length), "(" !== n)) return null;
                  var i = Gt(e, t);
                  if (!i) return null;
                  (t = i.cursor), (t += Rt(e, t).length);
                  var r = e.substr(t, 1);
                  return (
                    (t += r.length),
                    ")" !== r ? null : { evaluable: i.evaluable, cursor: t }
                  );
                })(e, t);
          }
          function Vt(e, t, n) {
            n += Rt(t, n).length;
            var i = e.filter(function (e) {
              return t.startsWith(e, n);
            })[0];
            return i
              ? ((n += i.length),
                { cursor: (n += Rt(t, n).length), operator: i })
              : null;
          }
          var Ht = [
            ["**"],
            ["*", "/", "%"],
            ["+", "-"],
            ["<<", ">>>", ">>"],
            ["&"],
            ["^"],
            ["|"]
          ].reduce(
            function (e, t) {
              return (function (e, t) {
                return function (n, i) {
                  var r = e(n, i);
                  if (!r) return null;
                  i = r.cursor;
                  for (var a = r.evaluable; ; ) {
                    var o = Vt(t, n, i);
                    if (!o) break;
                    i = o.cursor;
                    var s = e(n, i);
                    if (!s) return null;
                    (i = s.cursor), (a = new Dt(o.operator, a, s.evaluable));
                  }
                  return a ? { cursor: i, evaluable: a } : null;
                };
              })(e, t);
            },
            function e(t, n) {
              var i = zt(t, n);
              if (i) return i;
              var r = t.substr(n, 1);
              if (((n += r.length), "+" !== r && "-" !== r && "~" !== r))
                return null;
              var a = e(t, n);
              return a
                ? { cursor: (n = a.cursor), evaluable: new Pt(r, a.evaluable) }
                : null;
            }
          );
          function Gt(e, t) {
            return (t += Rt(e, t).length), Ht(e, t);
          }
          function Wt(e) {
            var t,
              n = (function (e) {
                var t = Gt(e, 0);
                return t && t.cursor + Rt(e, t.cursor).length === e.length
                  ? t.evaluable
                  : null;
              })(e);
            return null !== (t = null == n ? void 0 : n.evaluate()) &&
              void 0 !== t
              ? t
              : null;
          }
          function jt(e) {
            if ("number" == typeof e) return e;
            if ("string" == typeof e) {
              var t = Wt(e);
              if (!_(t)) return t;
            }
            return 0;
          }
          function qt(e) {
            return String(e);
          }
          function Kt(e) {
            return function (t) {
              return t.toFixed(Math.max(Math.min(e, 20), 0));
            };
          }
          var Xt = Kt(0);
          function Yt(e) {
            return Xt(e) + "%";
          }
          function Zt(e) {
            return String(e);
          }
          function Jt(e) {
            return e;
          }
          function Qt(e) {
            var t = e.primary,
              n = e.secondary,
              i = e.forward,
              r = e.backward,
              a = !1;
            function o(e) {
              a || ((a = !0), e(), (a = !1));
            }
            t.emitter.on("change", function (e) {
              o(function () {
                n.setRawValue(i(t, n), e.options);
              });
            }),
              n.emitter.on("change", function (e) {
                o(function () {
                  t.setRawValue(r(t, n), e.options);
                }),
                  o(function () {
                    n.setRawValue(i(t, n), e.options);
                  });
              }),
              o(function () {
                n.setRawValue(i(t, n), { forceEmit: !1, last: !0 });
              });
          }
          function $t(e, t) {
            var n = e * (t.altKey ? 0.1 : 1) * (t.shiftKey ? 10 : 1);
            return t.upKey ? +n : t.downKey ? -n : 0;
          }
          function en(e) {
            return {
              altKey: e.altKey,
              downKey: "ArrowDown" === e.key,
              shiftKey: e.shiftKey,
              upKey: "ArrowUp" === e.key
            };
          }
          function tn(e) {
            return {
              altKey: e.altKey,
              downKey: "ArrowLeft" === e.key,
              shiftKey: e.shiftKey,
              upKey: "ArrowRight" === e.key
            };
          }
          function nn(e) {
            return (
              (function (e) {
                return "ArrowUp" === e || "ArrowDown" === e;
              })(e) ||
              "ArrowLeft" === e ||
              "ArrowRight" === e
            );
          }
          function rn(e, t) {
            var n,
              i,
              r = t.ownerDocument.defaultView,
              a = t.getBoundingClientRect();
            return {
              x:
                e.pageX -
                ((null !== (n = r && r.scrollX) && void 0 !== n ? n : 0) +
                  a.left),
              y:
                e.pageY -
                ((null !== (i = r && r.scrollY) && void 0 !== i ? i : 0) +
                  a.top)
            };
          }
          var an = (function () {
            return w(
              function e(t) {
                b(this, e),
                  (this.lastTouch_ = null),
                  (this.onDocumentMouseMove_ =
                    this.onDocumentMouseMove_.bind(this)),
                  (this.onDocumentMouseUp_ =
                    this.onDocumentMouseUp_.bind(this)),
                  (this.onMouseDown_ = this.onMouseDown_.bind(this)),
                  (this.onTouchEnd_ = this.onTouchEnd_.bind(this)),
                  (this.onTouchMove_ = this.onTouchMove_.bind(this)),
                  (this.onTouchStart_ = this.onTouchStart_.bind(this)),
                  (this.elem_ = t),
                  (this.emitter = new C()),
                  t.addEventListener("touchstart", this.onTouchStart_, {
                    passive: !1
                  }),
                  t.addEventListener("touchmove", this.onTouchMove_, {
                    passive: !0
                  }),
                  t.addEventListener("touchend", this.onTouchEnd_),
                  t.addEventListener("mousedown", this.onMouseDown_);
              },
              [
                {
                  key: "computePosition_",
                  value: function (e) {
                    var t = this.elem_.getBoundingClientRect();
                    return {
                      bounds: { width: t.width, height: t.height },
                      point: e ? { x: e.x, y: e.y } : null
                    };
                  }
                },
                {
                  key: "onMouseDown_",
                  value: function (e) {
                    var t;
                    e.preventDefault(),
                      null === (t = e.currentTarget) ||
                        void 0 === t ||
                        t.focus();
                    var n = this.elem_.ownerDocument;
                    n.addEventListener("mousemove", this.onDocumentMouseMove_),
                      n.addEventListener("mouseup", this.onDocumentMouseUp_),
                      this.emitter.emit("down", {
                        altKey: e.altKey,
                        data: this.computePosition_(rn(e, this.elem_)),
                        sender: this,
                        shiftKey: e.shiftKey
                      });
                  }
                },
                {
                  key: "onDocumentMouseMove_",
                  value: function (e) {
                    this.emitter.emit("move", {
                      altKey: e.altKey,
                      data: this.computePosition_(rn(e, this.elem_)),
                      sender: this,
                      shiftKey: e.shiftKey
                    });
                  }
                },
                {
                  key: "onDocumentMouseUp_",
                  value: function (e) {
                    var t = this.elem_.ownerDocument;
                    t.removeEventListener(
                      "mousemove",
                      this.onDocumentMouseMove_
                    ),
                      t.removeEventListener("mouseup", this.onDocumentMouseUp_),
                      this.emitter.emit("up", {
                        altKey: e.altKey,
                        data: this.computePosition_(rn(e, this.elem_)),
                        sender: this,
                        shiftKey: e.shiftKey
                      });
                  }
                },
                {
                  key: "onTouchStart_",
                  value: function (e) {
                    e.preventDefault();
                    var t = e.targetTouches.item(0),
                      n = this.elem_.getBoundingClientRect();
                    this.emitter.emit("down", {
                      altKey: e.altKey,
                      data: this.computePosition_(
                        t
                          ? { x: t.clientX - n.left, y: t.clientY - n.top }
                          : void 0
                      ),
                      sender: this,
                      shiftKey: e.shiftKey
                    }),
                      (this.lastTouch_ = t);
                  }
                },
                {
                  key: "onTouchMove_",
                  value: function (e) {
                    var t = e.targetTouches.item(0),
                      n = this.elem_.getBoundingClientRect();
                    this.emitter.emit("move", {
                      altKey: e.altKey,
                      data: this.computePosition_(
                        t
                          ? { x: t.clientX - n.left, y: t.clientY - n.top }
                          : void 0
                      ),
                      sender: this,
                      shiftKey: e.shiftKey
                    }),
                      (this.lastTouch_ = t);
                  }
                },
                {
                  key: "onTouchEnd_",
                  value: function (e) {
                    var t,
                      n =
                        null !== (t = e.targetTouches.item(0)) && void 0 !== t
                          ? t
                          : this.lastTouch_,
                      i = this.elem_.getBoundingClientRect();
                    this.emitter.emit("up", {
                      altKey: e.altKey,
                      data: this.computePosition_(
                        n
                          ? { x: n.clientX - i.left, y: n.clientY - i.top }
                          : void 0
                      ),
                      sender: this,
                      shiftKey: e.shiftKey
                    });
                  }
                }
              ]
            );
          })();
          function on(e, t, n, i, r) {
            return i + ((e - t) / (n - t)) * (r - i);
          }
          function sn(e) {
            return String(e.toFixed(10)).split(".")[1].replace(/0+$/, "")
              .length;
          }
          function ln(e, t, n) {
            return Math.min(Math.max(e, t), n);
          }
          function un(e, t) {
            return ((e % t) + t) % t;
          }
          var cn = A("txt"),
            hn = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onChange_ = this.onChange_.bind(this)),
                    (this.props_ = n.props),
                    this.props_.emitter.on("change", this.onChange_),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(cn(), cn(void 0, "num")),
                    n.arrayPosition &&
                      this.element.classList.add(cn(void 0, n.arrayPosition)),
                    n.viewProps.bindClassModifiers(this.element);
                  var i = t.createElement("input");
                  i.classList.add(cn("i")),
                    (i.type = "text"),
                    n.viewProps.bindDisabled(i),
                    this.element.appendChild(i),
                    (this.inputElement = i),
                    (this.onDraggingChange_ =
                      this.onDraggingChange_.bind(this)),
                    (this.dragging_ = n.dragging),
                    this.dragging_.emitter.on("change", this.onDraggingChange_),
                    this.element.classList.add(cn()),
                    this.inputElement.classList.add(cn("i"));
                  var r = t.createElement("div");
                  r.classList.add(cn("k")),
                    this.element.appendChild(r),
                    (this.knobElement = r);
                  var a = t.createElementNS(te, "svg");
                  a.classList.add(cn("g")), this.knobElement.appendChild(a);
                  var o = t.createElementNS(te, "path");
                  o.classList.add(cn("gb")),
                    a.appendChild(o),
                    (this.guideBodyElem_ = o);
                  var s = t.createElementNS(te, "path");
                  s.classList.add(cn("gh")),
                    a.appendChild(s),
                    (this.guideHeadElem_ = s);
                  var l = t.createElement("div");
                  l.classList.add(A("tt")()),
                    this.knobElement.appendChild(l),
                    (this.tooltipElem_ = l),
                    n.value.emitter.on("change", this.onChange_),
                    (this.value = n.value),
                    this.refresh();
                },
                [
                  {
                    key: "onDraggingChange_",
                    value: function (e) {
                      if (null !== e.rawValue) {
                        this.element.classList.add(cn(void 0, "drg"));
                        var t = e.rawValue / this.props_.get("draggingScale"),
                          n = t + (t > 0 ? -1 : t < 0 ? 1 : 0),
                          i = ln(-n, -4, 4);
                        this.guideHeadElem_.setAttributeNS(
                          null,
                          "d",
                          [
                            "M "
                              .concat(n + i, ",0 L")
                              .concat(n, ",4 L")
                              .concat(n + i, ",8"),
                            "M ".concat(t, ",-1 L").concat(t, ",9")
                          ].join(" ")
                        ),
                          this.guideBodyElem_.setAttributeNS(
                            null,
                            "d",
                            "M 0,4 L".concat(t, ",4")
                          );
                        var r = this.props_.get("formatter");
                        (this.tooltipElem_.textContent = r(
                          this.value.rawValue
                        )),
                          (this.tooltipElem_.style.left = "".concat(t, "px"));
                      } else this.element.classList.remove(cn(void 0, "drg"));
                    }
                  },
                  {
                    key: "refresh",
                    value: function () {
                      var e = this.props_.get("formatter");
                      this.inputElement.value = e(this.value.rawValue);
                    }
                  },
                  {
                    key: "onChange_",
                    value: function () {
                      this.refresh();
                    }
                  }
                ]
              );
            })(),
            dn = (function () {
              return w(
                function e(t, n) {
                  var i;
                  b(this, e),
                    (this.originRawValue_ = 0),
                    (this.onInputChange_ = this.onInputChange_.bind(this)),
                    (this.onInputKeyDown_ = this.onInputKeyDown_.bind(this)),
                    (this.onInputKeyUp_ = this.onInputKeyUp_.bind(this)),
                    (this.onPointerDown_ = this.onPointerDown_.bind(this)),
                    (this.onPointerMove_ = this.onPointerMove_.bind(this)),
                    (this.onPointerUp_ = this.onPointerUp_.bind(this)),
                    (this.baseStep_ = n.baseStep),
                    (this.parser_ = n.parser),
                    (this.props = n.props),
                    (this.sliderProps_ =
                      null !== (i = n.sliderProps) && void 0 !== i ? i : null),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.dragging_ = V(null)),
                    (this.view = new hn(t, {
                      arrayPosition: n.arrayPosition,
                      dragging: this.dragging_,
                      props: this.props,
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    this.view.inputElement.addEventListener(
                      "change",
                      this.onInputChange_
                    ),
                    this.view.inputElement.addEventListener(
                      "keydown",
                      this.onInputKeyDown_
                    ),
                    this.view.inputElement.addEventListener(
                      "keyup",
                      this.onInputKeyUp_
                    );
                  var r = new an(this.view.knobElement);
                  r.emitter.on("down", this.onPointerDown_),
                    r.emitter.on("move", this.onPointerMove_),
                    r.emitter.on("up", this.onPointerUp_);
                },
                [
                  {
                    key: "constrainValue_",
                    value: function (e) {
                      var t,
                        n,
                        i =
                          null === (t = this.sliderProps_) || void 0 === t
                            ? void 0
                            : t.get("minValue"),
                        r =
                          null === (n = this.sliderProps_) || void 0 === n
                            ? void 0
                            : n.get("maxValue"),
                        a = e;
                      return (
                        void 0 !== i && (a = Math.max(a, i)),
                        void 0 !== r && (a = Math.min(a, r)),
                        a
                      );
                    }
                  },
                  {
                    key: "onInputChange_",
                    value: function (e) {
                      var t = e.currentTarget.value,
                        n = this.parser_(t);
                      _(n) || (this.value.rawValue = this.constrainValue_(n)),
                        this.view.refresh();
                    }
                  },
                  {
                    key: "onInputKeyDown_",
                    value: function (e) {
                      var t = $t(this.baseStep_, en(e));
                      0 !== t &&
                        this.value.setRawValue(
                          this.constrainValue_(this.value.rawValue + t),
                          { forceEmit: !1, last: !1 }
                        );
                    }
                  },
                  {
                    key: "onInputKeyUp_",
                    value: function (e) {
                      0 !== $t(this.baseStep_, en(e)) &&
                        this.value.setRawValue(this.value.rawValue, {
                          forceEmit: !0,
                          last: !0
                        });
                    }
                  },
                  {
                    key: "onPointerDown_",
                    value: function () {
                      (this.originRawValue_ = this.value.rawValue),
                        (this.dragging_.rawValue = 0);
                    }
                  },
                  {
                    key: "computeDraggingValue_",
                    value: function (e) {
                      if (!e.point) return null;
                      var t = e.point.x - e.bounds.width / 2;
                      return this.constrainValue_(
                        this.originRawValue_ +
                          t * this.props.get("draggingScale")
                      );
                    }
                  },
                  {
                    key: "onPointerMove_",
                    value: function (e) {
                      var t = this.computeDraggingValue_(e.data);
                      null !== t &&
                        (this.value.setRawValue(t, { forceEmit: !1, last: !1 }),
                        (this.dragging_.rawValue =
                          this.value.rawValue - this.originRawValue_));
                    }
                  },
                  {
                    key: "onPointerUp_",
                    value: function (e) {
                      var t = this.computeDraggingValue_(e.data);
                      null !== t &&
                        (this.value.setRawValue(t, { forceEmit: !0, last: !0 }),
                        (this.dragging_.rawValue = null));
                    }
                  }
                ]
              );
            })(),
            pn = A("sld"),
            fn = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onChange_ = this.onChange_.bind(this)),
                    (this.props_ = n.props),
                    this.props_.emitter.on("change", this.onChange_),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(pn()),
                    n.viewProps.bindClassModifiers(this.element);
                  var i = t.createElement("div");
                  i.classList.add(pn("t")),
                    n.viewProps.bindTabIndex(i),
                    this.element.appendChild(i),
                    (this.trackElement = i);
                  var r = t.createElement("div");
                  r.classList.add(pn("k")),
                    this.trackElement.appendChild(r),
                    (this.knobElement = r),
                    n.value.emitter.on("change", this.onChange_),
                    (this.value = n.value),
                    this.update_();
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      var e = ln(
                        on(
                          this.value.rawValue,
                          this.props_.get("minValue"),
                          this.props_.get("maxValue"),
                          0,
                          100
                        ),
                        0,
                        100
                      );
                      this.knobElement.style.width = "".concat(e, "%");
                    }
                  },
                  {
                    key: "onChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            vn = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onKeyDown_ = this.onKeyDown_.bind(this)),
                    (this.onKeyUp_ = this.onKeyUp_.bind(this)),
                    (this.onPointerDownOrMove_ =
                      this.onPointerDownOrMove_.bind(this)),
                    (this.onPointerUp_ = this.onPointerUp_.bind(this)),
                    (this.baseStep_ = n.baseStep),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.props = n.props),
                    (this.view = new fn(t, {
                      props: this.props,
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.ptHandler_ = new an(this.view.trackElement)),
                    this.ptHandler_.emitter.on(
                      "down",
                      this.onPointerDownOrMove_
                    ),
                    this.ptHandler_.emitter.on(
                      "move",
                      this.onPointerDownOrMove_
                    ),
                    this.ptHandler_.emitter.on("up", this.onPointerUp_),
                    this.view.trackElement.addEventListener(
                      "keydown",
                      this.onKeyDown_
                    ),
                    this.view.trackElement.addEventListener(
                      "keyup",
                      this.onKeyUp_
                    );
                },
                [
                  {
                    key: "handlePointerEvent_",
                    value: function (e, t) {
                      e.point &&
                        this.value.setRawValue(
                          on(
                            ln(e.point.x, 0, e.bounds.width),
                            0,
                            e.bounds.width,
                            this.props.get("minValue"),
                            this.props.get("maxValue")
                          ),
                          t
                        );
                    }
                  },
                  {
                    key: "onPointerDownOrMove_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerUp_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !0,
                        last: !0
                      });
                    }
                  },
                  {
                    key: "onKeyDown_",
                    value: function (e) {
                      var t = $t(this.baseStep_, tn(e));
                      0 !== t &&
                        this.value.setRawValue(this.value.rawValue + t, {
                          forceEmit: !1,
                          last: !1
                        });
                    }
                  },
                  {
                    key: "onKeyUp_",
                    value: function (e) {
                      0 !== $t(this.baseStep_, tn(e)) &&
                        this.value.setRawValue(this.value.rawValue, {
                          forceEmit: !0,
                          last: !0
                        });
                    }
                  }
                ]
              );
            })(),
            mn = A("sldtxt"),
            gn = w(function e(t, n) {
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(mn());
              var i = t.createElement("div");
              i.classList.add(mn("s")),
                (this.sliderView_ = n.sliderView),
                i.appendChild(this.sliderView_.element),
                this.element.appendChild(i);
              var r = t.createElement("div");
              r.classList.add(mn("t")),
                (this.textView_ = n.textView),
                r.appendChild(this.textView_.element),
                this.element.appendChild(r);
            }),
            _n = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.sliderC_ = new vn(t, {
                      baseStep: n.baseStep,
                      props: n.sliderProps,
                      value: n.value,
                      viewProps: this.viewProps
                    })),
                    (this.textC_ = new dn(t, {
                      baseStep: n.baseStep,
                      parser: n.parser,
                      props: n.textProps,
                      sliderProps: n.sliderProps,
                      value: n.value,
                      viewProps: n.viewProps
                    })),
                    (this.view = new gn(t, {
                      sliderView: this.sliderC_.view,
                      textView: this.textC_.view
                    }));
                },
                [
                  {
                    key: "sliderController",
                    get: function () {
                      return this.sliderC_;
                    }
                  },
                  {
                    key: "textController",
                    get: function () {
                      return this.textC_;
                    }
                  }
                ]
              );
            })();
          function yn(e, t) {
            e.write(t);
          }
          function bn(e) {
            var t = j;
            return Array.isArray(e)
              ? t.required.array(
                  t.required.object({
                    text: t.required.string,
                    value: t.required.raw
                  })
                )(e).value
              : "object" == M(e)
              ? t.required.raw(e).value
              : void 0;
          }
          function xn(e) {
            if ("inline" === e || "popup" === e) return e;
          }
          function wn(e) {
            var t = j;
            return t.required.object({
              max: t.optional.number,
              min: t.optional.number,
              step: t.optional.number
            })(e).value;
          }
          function Sn(e) {
            if (Array.isArray(e)) return e;
            var t = [];
            return (
              Object.keys(e).forEach(function (n) {
                t.push({ text: n, value: e[n] });
              }),
              t
            );
          }
          function Mn(e) {
            return _(e) ? null : new pt(Sn(e));
          }
          function Tn(e, t) {
            var n = e && ht(e, vt);
            return n ? sn(n.step) : Math.max(sn(t), 2);
          }
          function kn(e) {
            var t = (function (e) {
              var t = e ? ht(e, vt) : null;
              return t ? t.step : null;
            })(e);
            return null != t ? t : 1;
          }
          function En(e, t) {
            var n,
              i = e && ht(e, vt),
              r = Math.abs(
                null !== (n = null == i ? void 0 : i.step) && void 0 !== n
                  ? n
                  : t
              );
            return 0 === r ? 0.1 : Math.pow(10, Math.floor(Math.log10(r)) - 1);
          }
          var Cn = A("ckb"),
            Dn = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onValueChange_ = this.onValueChange_.bind(this)),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(Cn()),
                    n.viewProps.bindClassModifiers(this.element);
                  var i = t.createElement("label");
                  i.classList.add(Cn("l")), this.element.appendChild(i);
                  var r = t.createElement("input");
                  r.classList.add(Cn("i")),
                    (r.type = "checkbox"),
                    i.appendChild(r),
                    (this.inputElement = r),
                    n.viewProps.bindDisabled(this.inputElement);
                  var a = t.createElement("div");
                  a.classList.add(Cn("w")), i.appendChild(a);
                  var o = oe(t, "check");
                  a.appendChild(o),
                    n.value.emitter.on("change", this.onValueChange_),
                    (this.value = n.value),
                    this.update_();
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      this.inputElement.checked = this.value.rawValue;
                    }
                  },
                  {
                    key: "onValueChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            An = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onInputChange_ = this.onInputChange_.bind(this)),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.view = new Dn(t, {
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    this.view.inputElement.addEventListener(
                      "change",
                      this.onInputChange_
                    );
                },
                [
                  {
                    key: "onInputChange_",
                    value: function (e) {
                      var t = e.currentTarget;
                      this.value.rawValue = t.checked;
                    }
                  }
                ]
              );
            })();
          var Pn = {
              id: "input-bool",
              type: "input",
              accept: function (e, t) {
                if ("boolean" != typeof e) return null;
                var n = q(t, { options: j.optional.custom(bn) });
                return n ? { initialValue: e, params: n } : null;
              },
              binding: {
                reader: function (e) {
                  return Tt;
                },
                constraint: function (e) {
                  return (function (e) {
                    var t = [],
                      n = Mn(e.options);
                    return n && t.push(n), new ct(t);
                  })(e.params);
                },
                writer: function (e) {
                  return yn;
                }
              },
              controller: function (e) {
                var t = e.document,
                  n = e.value,
                  i = e.constraint,
                  r = i && ht(i, pt);
                return r
                  ? new _t(t, {
                      props: new H({ options: r.values.value("options") }),
                      value: n,
                      viewProps: e.viewProps
                    })
                  : new An(t, { value: n, viewProps: e.viewProps });
              }
            },
            Ln = A("col"),
            Rn = w(function e(t, n) {
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(Ln()),
                n.foldable.bindExpandedClass(
                  this.element,
                  Ln(void 0, "expanded")
                ),
                R(n.foldable, "completed", I(this.element, Ln(void 0, "cpl")));
              var i = t.createElement("div");
              i.classList.add(Ln("h")), this.element.appendChild(i);
              var r = t.createElement("div");
              r.classList.add(Ln("s")),
                i.appendChild(r),
                (this.swatchElement = r);
              var a = t.createElement("div");
              if (
                (a.classList.add(Ln("t")),
                i.appendChild(a),
                (this.textElement = a),
                "inline" === n.pickerLayout)
              ) {
                var o = t.createElement("div");
                o.classList.add(Ln("p")),
                  this.element.appendChild(o),
                  (this.pickerElement = o);
              } else this.pickerElement = null;
            });
          function In(e, t, n) {
            var i,
              r,
              a,
              o,
              s,
              l,
              u,
              c,
              h,
              d = un(e, 360),
              p = ln(t / 100, 0, 1),
              f = ln(n / 100, 0, 1),
              v = f * p,
              m = v * (1 - Math.abs(((d / 60) % 2) - 1)),
              g = f - v;
            return (
              d >= 0 && d < 60
                ? ((u = (i = [v, m, 0])[0]), (c = i[1]), (h = i[2]))
                : d >= 60 && d < 120
                ? ((u = (r = [m, v, 0])[0]), (c = r[1]), (h = r[2]))
                : d >= 120 && d < 180
                ? ((u = (a = [0, v, m])[0]), (c = a[1]), (h = a[2]))
                : d >= 180 && d < 240
                ? ((u = (o = [0, m, v])[0]), (c = o[1]), (h = o[2]))
                : d >= 240 && d < 300
                ? ((u = (s = [m, 0, v])[0]), (c = s[1]), (h = s[2]))
                : ((u = (l = [v, 0, m])[0]), (c = l[1]), (h = l[2])),
              [255 * (u + g), 255 * (c + g), 255 * (h + g)]
            );
          }
          function On(e) {
            return [e[0], e[1], e[2]];
          }
          function Nn(e, t) {
            return [e[0], e[1], e[2], t];
          }
          var Fn = {
            hsl: {
              hsl: function (e, t, n) {
                return [e, t, n];
              },
              hsv: function (e, t, n) {
                var i = n + (t * (100 - Math.abs(2 * n - 100))) / 200;
                return [
                  e,
                  0 !== i ? (t * (100 - Math.abs(2 * n - 100))) / i : 0,
                  n + (t * (100 - Math.abs(2 * n - 100))) / 200
                ];
              },
              rgb: function (e, t, n) {
                var i,
                  r,
                  a,
                  o,
                  s,
                  l,
                  u,
                  c,
                  h,
                  d = ((e % 360) + 360) % 360,
                  p = ln(t / 100, 0, 1),
                  f = ln(n / 100, 0, 1),
                  v = (1 - Math.abs(2 * f - 1)) * p,
                  m = v * (1 - Math.abs(((d / 60) % 2) - 1)),
                  g = f - v / 2;
                return (
                  d >= 0 && d < 60
                    ? ((u = (i = [v, m, 0])[0]), (c = i[1]), (h = i[2]))
                    : d >= 60 && d < 120
                    ? ((u = (r = [m, v, 0])[0]), (c = r[1]), (h = r[2]))
                    : d >= 120 && d < 180
                    ? ((u = (a = [0, v, m])[0]), (c = a[1]), (h = a[2]))
                    : d >= 180 && d < 240
                    ? ((u = (o = [0, m, v])[0]), (c = o[1]), (h = o[2]))
                    : d >= 240 && d < 300
                    ? ((u = (s = [m, 0, v])[0]), (c = s[1]), (h = s[2]))
                    : ((u = (l = [v, 0, m])[0]), (c = l[1]), (h = l[2])),
                  [255 * (u + g), 255 * (c + g), 255 * (h + g)]
                );
              }
            },
            hsv: {
              hsl: function (e, t, n) {
                var i = 100 - Math.abs((n * (200 - t)) / 100 - 100);
                return [e, 0 !== i ? (t * n) / i : 0, (n * (200 - t)) / 200];
              },
              hsv: function (e, t, n) {
                return [e, t, n];
              },
              rgb: In
            },
            rgb: {
              hsl: function (e, t, n) {
                var i = ln(e / 255, 0, 1),
                  r = ln(t / 255, 0, 1),
                  a = ln(n / 255, 0, 1),
                  o = Math.max(i, r, a),
                  s = Math.min(i, r, a),
                  l = o - s,
                  u = 0,
                  c = 0,
                  h = (s + o) / 2;
                return (
                  0 !== l &&
                    ((c = l / (1 - Math.abs(o + s - 1))),
                    (u =
                      (u =
                        i === o
                          ? (r - a) / l
                          : r === o
                          ? 2 + (a - i) / l
                          : 4 + (i - r) / l) /
                        6 +
                      (u < 0 ? 1 : 0))),
                  [360 * u, 100 * c, 100 * h]
                );
              },
              hsv: function (e, t, n) {
                var i = ln(e / 255, 0, 1),
                  r = ln(t / 255, 0, 1),
                  a = ln(n / 255, 0, 1),
                  o = Math.max(i, r, a),
                  s = o - Math.min(i, r, a);
                return [
                  0 === s
                    ? 0
                    : o === i
                    ? (((((r - a) / s) % 6) + 6) % 6) * 60
                    : o === r
                    ? 60 * ((a - i) / s + 2)
                    : 60 * ((i - r) / s + 4),
                  100 * (0 === o ? 0 : s / o),
                  100 * o
                ];
              },
              rgb: function (e, t, n) {
                return [e, t, n];
              }
            }
          };
          function Un(e, t) {
            return [
              "float" === t ? 1 : "rgb" === e ? 255 : 360,
              "float" === t ? 1 : "rgb" === e ? 255 : 100,
              "float" === t ? 1 : "rgb" === e ? 255 : 100
            ];
          }
          function Bn(e, t) {
            return e === t ? t : un(e, t);
          }
          function zn(e, t, n, i) {
            var r = Un(t, n),
              a = Un(t, i);
            return e.map(function (e, t) {
              return (e / r[t]) * a[t];
            });
          }
          function Vn(e, t) {
            return (
              "object" == M(e) && !_(e) && t in e && "number" == typeof e[t]
            );
          }
          var Hn = (function () {
              function e(t, n) {
                var i =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : "int";
                b(this, e),
                  (this.mode = n),
                  (this.type = i),
                  (this.comps_ = (function (e, t, n) {
                    var i,
                      r = Un(t, n);
                    return [
                      "rgb" === t ? ln(e[0], 0, r[0]) : Bn(e[0], r[0]),
                      ln(e[1], 0, r[1]),
                      ln(e[2], 0, r[2]),
                      ln(null !== (i = e[3]) && void 0 !== i ? i : 1, 0, 1)
                    ];
                  })(t, n, i));
              }
              return w(
                e,
                [
                  {
                    key: "getComponents",
                    value: function (e) {
                      var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : "int";
                      return Nn(
                        (function (e, t, n) {
                          var i,
                            r = zn(e, t.mode, t.type, "int");
                          return zn(
                            (i = Fn[t.mode])[n.mode].apply(i, u(r)),
                            n.mode,
                            "int",
                            n.type
                          );
                        })(
                          On(this.comps_),
                          { mode: this.mode, type: this.type },
                          { mode: null != e ? e : this.mode, type: t }
                        ),
                        this.comps_[3]
                      );
                    }
                  },
                  {
                    key: "toRgbaObject",
                    value: function () {
                      var e =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : "int",
                        t = this.getComponents("rgb", e);
                      return { r: t[0], g: t[1], b: t[2], a: t[3] };
                    }
                  }
                ],
                [
                  {
                    key: "black",
                    value: function () {
                      return new e(
                        [0, 0, 0],
                        "rgb",
                        arguments.length > 0 && void 0 !== arguments[0]
                          ? arguments[0]
                          : "int"
                      );
                    }
                  },
                  {
                    key: "fromObject",
                    value: function (t) {
                      var n =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : "int";
                      return new e(
                        "a" in t ? [t.r, t.g, t.b, t.a] : [t.r, t.g, t.b],
                        "rgb",
                        n
                      );
                    }
                  },
                  {
                    key: "toRgbaObject",
                    value: function (e) {
                      var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : "int";
                      return e.toRgbaObject(t);
                    }
                  },
                  {
                    key: "isRgbColorObject",
                    value: function (e) {
                      return Vn(e, "r") && Vn(e, "g") && Vn(e, "b");
                    }
                  },
                  {
                    key: "isRgbaColorObject",
                    value: function (e) {
                      return this.isRgbColorObject(e) && Vn(e, "a");
                    }
                  },
                  {
                    key: "isColorObject",
                    value: function (e) {
                      return this.isRgbColorObject(e);
                    }
                  },
                  {
                    key: "equals",
                    value: function (e, t) {
                      if (e.mode !== t.mode) return !1;
                      for (
                        var n = e.comps_, i = t.comps_, r = 0;
                        r < n.length;
                        r++
                      )
                        if (n[r] !== i[r]) return !1;
                      return !0;
                    }
                  }
                ]
              );
            })(),
            Gn = A("colp"),
            Wn = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.alphaViews_ = null),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(Gn()),
                    n.viewProps.bindClassModifiers(this.element);
                  var i = t.createElement("div");
                  i.classList.add(Gn("hsv"));
                  var r = t.createElement("div");
                  r.classList.add(Gn("sv")),
                    (this.svPaletteView_ = n.svPaletteView),
                    r.appendChild(this.svPaletteView_.element),
                    i.appendChild(r);
                  var a = t.createElement("div");
                  a.classList.add(Gn("h")),
                    (this.hPaletteView_ = n.hPaletteView),
                    a.appendChild(this.hPaletteView_.element),
                    i.appendChild(a),
                    this.element.appendChild(i);
                  var o = t.createElement("div");
                  if (
                    (o.classList.add(Gn("rgb")),
                    (this.textView_ = n.textView),
                    o.appendChild(this.textView_.element),
                    this.element.appendChild(o),
                    n.alphaViews)
                  ) {
                    this.alphaViews_ = {
                      palette: n.alphaViews.palette,
                      text: n.alphaViews.text
                    };
                    var s = t.createElement("div");
                    s.classList.add(Gn("a"));
                    var l = t.createElement("div");
                    l.classList.add(Gn("ap")),
                      l.appendChild(this.alphaViews_.palette.element),
                      s.appendChild(l);
                    var u = t.createElement("div");
                    u.classList.add(Gn("at")),
                      u.appendChild(this.alphaViews_.text.element),
                      s.appendChild(u),
                      this.element.appendChild(s);
                  }
                },
                [
                  {
                    key: "allFocusableElements",
                    get: function () {
                      var e = [
                        this.svPaletteView_.element,
                        this.hPaletteView_.element,
                        this.textView_.modeSelectElement
                      ].concat(
                        u(
                          this.textView_.textViews.map(function (e) {
                            return e.inputElement;
                          })
                        )
                      );
                      return (
                        this.alphaViews_ &&
                          e.push(
                            this.alphaViews_.palette.element,
                            this.alphaViews_.text.inputElement
                          ),
                        e
                      );
                    }
                  }
                ]
              );
            })();
          function jn(e) {
            return "int" === e ? "int" : "float" === e ? "float" : void 0;
          }
          function qn(e) {
            var t = j;
            return q(e, {
              alpha: t.optional.boolean,
              color: t.optional.object({
                alpha: t.optional.boolean,
                type: t.optional.custom(jn)
              }),
              expanded: t.optional.boolean,
              picker: t.optional.custom(xn)
            });
          }
          function Kn(e) {
            return e ? 0.1 : 1;
          }
          function Xn(e) {
            var t;
            return null === (t = e.color) || void 0 === t ? void 0 : t.type;
          }
          function Yn(e, t) {
            var n = e.match(/^(.+)%$/);
            return Math.min(n ? 0.01 * parseFloat(n[1]) * t : parseFloat(e), t);
          }
          var Zn = {
            deg: function (e) {
              return e;
            },
            grad: function (e) {
              return (360 * e) / 400;
            },
            rad: function (e) {
              return (360 * e) / (2 * Math.PI);
            },
            turn: function (e) {
              return 360 * e;
            }
          };
          function Jn(e) {
            var t = e.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);
            if (!t) return parseFloat(e);
            var n = parseFloat(t[1]),
              i = t[2];
            return Zn[i](n);
          }
          function Qn(e) {
            var t = e.match(
              /^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/
            );
            if (!t) return null;
            var n = [Yn(t[1], 255), Yn(t[2], 255), Yn(t[3], 255)];
            return isNaN(n[0]) || isNaN(n[1]) || isNaN(n[2]) ? null : n;
          }
          function $n(e) {
            return function (t) {
              var n = Qn(t);
              return n ? new Hn(n, "rgb", e) : null;
            };
          }
          function ei(e) {
            var t = e.match(
              /^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/
            );
            if (!t) return null;
            var n = [Yn(t[1], 255), Yn(t[2], 255), Yn(t[3], 255), Yn(t[4], 1)];
            return isNaN(n[0]) || isNaN(n[1]) || isNaN(n[2]) || isNaN(n[3])
              ? null
              : n;
          }
          function ti(e) {
            return function (t) {
              var n = ei(t);
              return n ? new Hn(n, "rgb", e) : null;
            };
          }
          function ni(e) {
            var t = e.match(
              /^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/
            );
            if (!t) return null;
            var n = [Jn(t[1]), Yn(t[2], 100), Yn(t[3], 100)];
            return isNaN(n[0]) || isNaN(n[1]) || isNaN(n[2]) ? null : n;
          }
          function ii(e) {
            return function (t) {
              var n = ni(t);
              return n ? new Hn(n, "hsl", e) : null;
            };
          }
          function ri(e) {
            var t = e.match(
              /^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/
            );
            if (!t) return null;
            var n = [Jn(t[1]), Yn(t[2], 100), Yn(t[3], 100), Yn(t[4], 1)];
            return isNaN(n[0]) || isNaN(n[1]) || isNaN(n[2]) || isNaN(n[3])
              ? null
              : n;
          }
          function ai(e) {
            return function (t) {
              var n = ri(t);
              return n ? new Hn(n, "hsl", e) : null;
            };
          }
          function oi(e) {
            var t = e.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);
            if (t)
              return [
                parseInt(t[1] + t[1], 16),
                parseInt(t[2] + t[2], 16),
                parseInt(t[3] + t[3], 16)
              ];
            var n = e.match(
              /^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/
            );
            return n
              ? [parseInt(n[1], 16), parseInt(n[2], 16), parseInt(n[3], 16)]
              : null;
          }
          function si(e) {
            var t = e.match(
              /^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/
            );
            if (t)
              return [
                parseInt(t[1] + t[1], 16),
                parseInt(t[2] + t[2], 16),
                parseInt(t[3] + t[3], 16),
                on(parseInt(t[4] + t[4], 16), 0, 255, 0, 1)
              ];
            var n = e.match(
              /^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/
            );
            return n
              ? [
                  parseInt(n[1], 16),
                  parseInt(n[2], 16),
                  parseInt(n[3], 16),
                  on(parseInt(n[4], 16), 0, 255, 0, 1)
                ]
              : null;
          }
          function li(e) {
            var t = e.match(
              /^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/
            );
            if (!t) return null;
            var n = [parseFloat(t[1]), parseFloat(t[2]), parseFloat(t[3])];
            return isNaN(n[0]) || isNaN(n[1]) || isNaN(n[2]) ? null : n;
          }
          function ui(e) {
            return function (t) {
              var n = li(t);
              return n ? new Hn(n, "rgb", e) : null;
            };
          }
          function ci(e) {
            var t = e.match(
              /^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/
            );
            if (!t) return null;
            var n = [
              parseFloat(t[1]),
              parseFloat(t[2]),
              parseFloat(t[3]),
              parseFloat(t[4])
            ];
            return isNaN(n[0]) || isNaN(n[1]) || isNaN(n[2]) || isNaN(n[3])
              ? null
              : n;
          }
          function hi(e) {
            return function (t) {
              var n = ci(t);
              return n ? new Hn(n, "rgb", e) : null;
            };
          }
          var di = [
            { parser: oi, result: { alpha: !1, mode: "rgb", notation: "hex" } },
            { parser: si, result: { alpha: !0, mode: "rgb", notation: "hex" } },
            {
              parser: Qn,
              result: { alpha: !1, mode: "rgb", notation: "func" }
            },
            {
              parser: ei,
              result: { alpha: !0, mode: "rgb", notation: "func" }
            },
            {
              parser: ni,
              result: { alpha: !1, mode: "hsl", notation: "func" }
            },
            {
              parser: ri,
              result: { alpha: !0, mode: "hsl", notation: "func" }
            },
            {
              parser: li,
              result: { alpha: !1, mode: "rgb", notation: "object" }
            },
            {
              parser: ci,
              result: { alpha: !0, mode: "rgb", notation: "object" }
            }
          ];
          function pi(e) {
            var t =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : "int",
              n = (function (e) {
                return di.reduce(function (t, n) {
                  var i = n.parser,
                    r = n.result;
                  return t || (i(e) ? r : null);
                }, null);
              })(e);
            return n
              ? "hex" === n.notation && "float" !== t
                ? Object.assign(Object.assign({}, n), { type: "int" })
                : "func" === n.notation
                ? Object.assign(Object.assign({}, n), { type: t })
                : null
              : null;
          }
          var fi = {
            int: [
              function (e) {
                var t = oi(e);
                return t ? new Hn(t, "rgb", "int") : null;
              },
              function (e) {
                var t = si(e);
                return t ? new Hn(t, "rgb", "int") : null;
              },
              $n("int"),
              ti("int"),
              ii("int"),
              ai("int"),
              ui("int"),
              hi("int")
            ],
            float: [
              $n("float"),
              ti("float"),
              ii("float"),
              ai("float"),
              ui("float"),
              hi("float")
            ]
          };
          function vi(e) {
            var t = fi[e];
            return function (e) {
              return t.reduce(function (t, n) {
                return t || n(e);
              }, null);
            };
          }
          function mi(e) {
            var t = ln(Math.floor(e), 0, 255).toString(16);
            return 1 === t.length ? "0".concat(t) : t;
          }
          function gi(e) {
            var t =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : "#",
              n = On(e.getComponents("rgb")).map(mi).join("");
            return "".concat(t).concat(n);
          }
          function _i(e) {
            var t =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : "#",
              n = e.getComponents("rgb"),
              i = [n[0], n[1], n[2], 255 * n[3]].map(mi).join("");
            return "".concat(t).concat(i);
          }
          function yi(e, t) {
            var n = Kt("float" === t ? 2 : 0);
            return "rgb(".concat(
              On(e.getComponents("rgb", t))
                .map(function (e) {
                  return n(e);
                })
                .join(", "),
              ")"
            );
          }
          function bi(e) {
            return function (t) {
              return yi(t, e);
            };
          }
          function xi(e, t) {
            var n = Kt(2),
              i = Kt("float" === t ? 2 : 0);
            return "rgba(".concat(
              e
                .getComponents("rgb", t)
                .map(function (e, t) {
                  return (3 === t ? n : i)(e);
                })
                .join(", "),
              ")"
            );
          }
          function wi(e) {
            return function (t) {
              return xi(t, e);
            };
          }
          function Si(e, t) {
            var n = Kt("float" === t ? 2 : 0),
              i = ["r", "g", "b"];
            return "{".concat(
              On(e.getComponents("rgb", t))
                .map(function (e, t) {
                  return "".concat(i[t], ": ").concat(n(e));
                })
                .join(", "),
              "}"
            );
          }
          function Mi(e) {
            return function (t) {
              return Si(t, e);
            };
          }
          function Ti(e, t) {
            var n = Kt(2),
              i = Kt("float" === t ? 2 : 0),
              r = ["r", "g", "b", "a"];
            return "{".concat(
              e
                .getComponents("rgb", t)
                .map(function (e, t) {
                  var a = 3 === t ? n : i;
                  return "".concat(r[t], ": ").concat(a(e));
                })
                .join(", "),
              "}"
            );
          }
          function ki(e) {
            return function (t) {
              return Ti(t, e);
            };
          }
          var Ei = [
            {
              format: { alpha: !1, mode: "rgb", notation: "hex", type: "int" },
              stringifier: gi
            },
            {
              format: { alpha: !0, mode: "rgb", notation: "hex", type: "int" },
              stringifier: _i
            },
            {
              format: { alpha: !1, mode: "hsl", notation: "func", type: "int" },
              stringifier: function (e) {
                var t = [Kt(0), Yt, Yt];
                return "hsl(".concat(
                  On(e.getComponents("hsl"))
                    .map(function (e, n) {
                      return t[n](e);
                    })
                    .join(", "),
                  ")"
                );
              }
            },
            {
              format: { alpha: !0, mode: "hsl", notation: "func", type: "int" },
              stringifier: function (e) {
                var t = [Kt(0), Yt, Yt, Kt(2)];
                return "hsla(".concat(
                  e
                    .getComponents("hsl")
                    .map(function (e, n) {
                      return t[n](e);
                    })
                    .join(", "),
                  ")"
                );
              }
            }
          ].concat(
            u(
              ["int", "float"].reduce(function (e, t) {
                return [].concat(u(e), [
                  {
                    format: {
                      alpha: !1,
                      mode: "rgb",
                      notation: "func",
                      type: t
                    },
                    stringifier: bi(t)
                  },
                  {
                    format: {
                      alpha: !0,
                      mode: "rgb",
                      notation: "func",
                      type: t
                    },
                    stringifier: wi(t)
                  },
                  {
                    format: {
                      alpha: !1,
                      mode: "rgb",
                      notation: "object",
                      type: t
                    },
                    stringifier: Mi(t)
                  },
                  {
                    format: {
                      alpha: !0,
                      mode: "rgb",
                      notation: "object",
                      type: t
                    },
                    stringifier: ki(t)
                  }
                ]);
              }, [])
            )
          );
          function Ci(e) {
            return Ei.reduce(function (t, n) {
              return (
                t ||
                ((function (e, t) {
                  return (
                    e.alpha === t.alpha &&
                    e.mode === t.mode &&
                    e.notation === t.notation &&
                    e.type === t.type
                  );
                })(n.format, e)
                  ? n.stringifier
                  : null)
              );
            }, null);
          }
          var Di = A("apl"),
            Ai = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onValueChange_ = this.onValueChange_.bind(this)),
                    (this.value = n.value),
                    this.value.emitter.on("change", this.onValueChange_),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(Di()),
                    n.viewProps.bindClassModifiers(this.element),
                    n.viewProps.bindTabIndex(this.element);
                  var i = t.createElement("div");
                  i.classList.add(Di("b")), this.element.appendChild(i);
                  var r = t.createElement("div");
                  r.classList.add(Di("c")),
                    i.appendChild(r),
                    (this.colorElem_ = r);
                  var a = t.createElement("div");
                  a.classList.add(Di("m")),
                    this.element.appendChild(a),
                    (this.markerElem_ = a);
                  var o = t.createElement("div");
                  o.classList.add(Di("p")),
                    this.markerElem_.appendChild(o),
                    (this.previewElem_ = o),
                    this.update_();
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      var e = this.value.rawValue,
                        t = e.getComponents("rgb"),
                        n = new Hn([t[0], t[1], t[2], 0], "rgb"),
                        i = new Hn([t[0], t[1], t[2], 255], "rgb"),
                        r = ["to right", xi(n), xi(i)];
                      (this.colorElem_.style.background =
                        "linear-gradient(".concat(r.join(","), ")")),
                        (this.previewElem_.style.backgroundColor = xi(e));
                      var a = on(t[3], 0, 1, 0, 100);
                      this.markerElem_.style.left = "".concat(a, "%");
                    }
                  },
                  {
                    key: "onValueChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            Pi = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onKeyDown_ = this.onKeyDown_.bind(this)),
                    (this.onKeyUp_ = this.onKeyUp_.bind(this)),
                    (this.onPointerDown_ = this.onPointerDown_.bind(this)),
                    (this.onPointerMove_ = this.onPointerMove_.bind(this)),
                    (this.onPointerUp_ = this.onPointerUp_.bind(this)),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.view = new Ai(t, {
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.ptHandler_ = new an(this.view.element)),
                    this.ptHandler_.emitter.on("down", this.onPointerDown_),
                    this.ptHandler_.emitter.on("move", this.onPointerMove_),
                    this.ptHandler_.emitter.on("up", this.onPointerUp_),
                    this.view.element.addEventListener(
                      "keydown",
                      this.onKeyDown_
                    ),
                    this.view.element.addEventListener("keyup", this.onKeyUp_);
                },
                [
                  {
                    key: "handlePointerEvent_",
                    value: function (e, t) {
                      if (e.point) {
                        var n = e.point.x / e.bounds.width,
                          i = g(this.value.rawValue.getComponents("hsv"), 3),
                          r = i[0],
                          a = i[1],
                          o = i[2];
                        this.value.setRawValue(new Hn([r, a, o, n], "hsv"), t);
                      }
                    }
                  },
                  {
                    key: "onPointerDown_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerMove_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerUp_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !0,
                        last: !0
                      });
                    }
                  },
                  {
                    key: "onKeyDown_",
                    value: function (e) {
                      var t = $t(Kn(!0), tn(e));
                      if (0 !== t) {
                        var n = g(this.value.rawValue.getComponents("hsv"), 4),
                          i = n[0],
                          r = n[1],
                          a = n[2],
                          o = n[3];
                        this.value.setRawValue(
                          new Hn([i, r, a, o + t], "hsv"),
                          { forceEmit: !1, last: !1 }
                        );
                      }
                    }
                  },
                  {
                    key: "onKeyUp_",
                    value: function (e) {
                      0 !== $t(Kn(!0), tn(e)) &&
                        this.value.setRawValue(this.value.rawValue, {
                          forceEmit: !0,
                          last: !0
                        });
                    }
                  }
                ]
              );
            })(),
            Li = A("coltxt");
          var Ri = (function () {
            return w(
              function e(t, n) {
                var i = this;
                b(this, e),
                  (this.element = t.createElement("div")),
                  this.element.classList.add(Li()),
                  n.viewProps.bindClassModifiers(this.element);
                var r = t.createElement("div");
                r.classList.add(Li("m")),
                  (this.modeElem_ = (function (e) {
                    var t = e.createElement("select");
                    return (
                      t.appendChild(
                        [
                          { text: "RGB", value: "rgb" },
                          { text: "HSL", value: "hsl" },
                          { text: "HSV", value: "hsv" }
                        ].reduce(function (t, n) {
                          var i = e.createElement("option");
                          return (
                            (i.textContent = n.text),
                            (i.value = n.value),
                            t.appendChild(i),
                            t
                          );
                        }, e.createDocumentFragment())
                      ),
                      t
                    );
                  })(t)),
                  this.modeElem_.classList.add(Li("ms")),
                  r.appendChild(this.modeSelectElement),
                  n.viewProps.bindDisabled(this.modeElem_);
                var a = t.createElement("div");
                a.classList.add(Li("mm")),
                  a.appendChild(oe(t, "dropdown")),
                  r.appendChild(a),
                  this.element.appendChild(r);
                var o = t.createElement("div");
                o.classList.add(Li("w")),
                  this.element.appendChild(o),
                  (this.textsElem_ = o),
                  (this.textViews_ = n.textViews),
                  this.applyTextViews_(),
                  L(n.colorMode, function (e) {
                    i.modeElem_.value = e;
                  });
              },
              [
                {
                  key: "modeSelectElement",
                  get: function () {
                    return this.modeElem_;
                  }
                },
                {
                  key: "textViews",
                  get: function () {
                    return this.textViews_;
                  },
                  set: function (e) {
                    (this.textViews_ = e), this.applyTextViews_();
                  }
                },
                {
                  key: "applyTextViews_",
                  value: function () {
                    var e = this;
                    ue(this.textsElem_);
                    var t = this.element.ownerDocument;
                    this.textViews_.forEach(function (n) {
                      var i = t.createElement("div");
                      i.classList.add(Li("c")),
                        i.appendChild(n.element),
                        e.textsElem_.appendChild(i);
                    });
                  }
                }
              ]
            );
          })();
          function Ii(e) {
            return Kt("float" === e ? 2 : 0);
          }
          function Oi(e, t, n) {
            var i = Un(e, t)[n];
            return new dt({ min: 0, max: i });
          }
          function Ni(e, t, n) {
            return new dn(e, {
              arrayPosition: 0 === n ? "fst" : 2 === n ? "lst" : "mid",
              baseStep: Kn(!1),
              parser: t.parser,
              props: H.fromObject({
                draggingScale: "float" === t.colorType ? 0.01 : 1,
                formatter: Ii(t.colorType)
              }),
              value: V(0, { constraint: Oi(t.colorMode, t.colorType, n) }),
              viewProps: t.viewProps
            });
          }
          var Fi = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onModeSelectChange_ =
                      this.onModeSelectChange_.bind(this)),
                    (this.colorType_ = n.colorType),
                    (this.parser_ = n.parser),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.colorMode = V(this.value.rawValue.mode)),
                    (this.ccs_ = this.createComponentControllers_(t)),
                    (this.view = new Ri(t, {
                      colorMode: this.colorMode,
                      textViews: [
                        this.ccs_[0].view,
                        this.ccs_[1].view,
                        this.ccs_[2].view
                      ],
                      viewProps: this.viewProps
                    })),
                    this.view.modeSelectElement.addEventListener(
                      "change",
                      this.onModeSelectChange_
                    );
                },
                [
                  {
                    key: "createComponentControllers_",
                    value: function (e) {
                      var t = this,
                        n = {
                          colorMode: this.colorMode.rawValue,
                          colorType: this.colorType_,
                          parser: this.parser_,
                          viewProps: this.viewProps
                        },
                        i = [Ni(e, n, 0), Ni(e, n, 1), Ni(e, n, 2)];
                      return (
                        i.forEach(function (e, n) {
                          Qt({
                            primary: t.value,
                            secondary: e.value,
                            forward: function (e) {
                              return e.rawValue.getComponents(
                                t.colorMode.rawValue,
                                t.colorType_
                              )[n];
                            },
                            backward: function (e, i) {
                              var r = t.colorMode.rawValue,
                                a = e.rawValue.getComponents(r, t.colorType_);
                              return (
                                (a[n] = i.rawValue),
                                new Hn(Nn(On(a), a[3]), r, t.colorType_)
                              );
                            }
                          });
                        }),
                        i
                      );
                    }
                  },
                  {
                    key: "onModeSelectChange_",
                    value: function (e) {
                      var t = e.currentTarget;
                      (this.colorMode.rawValue = t.value),
                        (this.ccs_ = this.createComponentControllers_(
                          this.view.element.ownerDocument
                        )),
                        (this.view.textViews = [
                          this.ccs_[0].view,
                          this.ccs_[1].view,
                          this.ccs_[2].view
                        ]);
                    }
                  }
                ]
              );
            })(),
            Ui = A("hpl"),
            Bi = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onValueChange_ = this.onValueChange_.bind(this)),
                    (this.value = n.value),
                    this.value.emitter.on("change", this.onValueChange_),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(Ui()),
                    n.viewProps.bindClassModifiers(this.element),
                    n.viewProps.bindTabIndex(this.element);
                  var i = t.createElement("div");
                  i.classList.add(Ui("c")), this.element.appendChild(i);
                  var r = t.createElement("div");
                  r.classList.add(Ui("m")),
                    this.element.appendChild(r),
                    (this.markerElem_ = r),
                    this.update_();
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      var e = g(this.value.rawValue.getComponents("hsv"), 1)[0];
                      this.markerElem_.style.backgroundColor = yi(
                        new Hn([e, 100, 100], "hsv")
                      );
                      var t = on(e, 0, 360, 0, 100);
                      this.markerElem_.style.left = "".concat(t, "%");
                    }
                  },
                  {
                    key: "onValueChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            zi = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onKeyDown_ = this.onKeyDown_.bind(this)),
                    (this.onKeyUp_ = this.onKeyUp_.bind(this)),
                    (this.onPointerDown_ = this.onPointerDown_.bind(this)),
                    (this.onPointerMove_ = this.onPointerMove_.bind(this)),
                    (this.onPointerUp_ = this.onPointerUp_.bind(this)),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.view = new Bi(t, {
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.ptHandler_ = new an(this.view.element)),
                    this.ptHandler_.emitter.on("down", this.onPointerDown_),
                    this.ptHandler_.emitter.on("move", this.onPointerMove_),
                    this.ptHandler_.emitter.on("up", this.onPointerUp_),
                    this.view.element.addEventListener(
                      "keydown",
                      this.onKeyDown_
                    ),
                    this.view.element.addEventListener("keyup", this.onKeyUp_);
                },
                [
                  {
                    key: "handlePointerEvent_",
                    value: function (e, t) {
                      if (e.point) {
                        var n = on(
                            ln(e.point.x, 0, e.bounds.width),
                            0,
                            e.bounds.width,
                            0,
                            360
                          ),
                          i = g(this.value.rawValue.getComponents("hsv"), 4),
                          r = i[1],
                          a = i[2],
                          o = i[3];
                        this.value.setRawValue(new Hn([n, r, a, o], "hsv"), t);
                      }
                    }
                  },
                  {
                    key: "onPointerDown_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerMove_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerUp_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !0,
                        last: !0
                      });
                    }
                  },
                  {
                    key: "onKeyDown_",
                    value: function (e) {
                      var t = $t(Kn(!1), tn(e));
                      if (0 !== t) {
                        var n = g(this.value.rawValue.getComponents("hsv"), 4),
                          i = n[0],
                          r = n[1],
                          a = n[2],
                          o = n[3];
                        this.value.setRawValue(
                          new Hn([i + t, r, a, o], "hsv"),
                          { forceEmit: !1, last: !1 }
                        );
                      }
                    }
                  },
                  {
                    key: "onKeyUp_",
                    value: function (e) {
                      0 !== $t(Kn(!1), tn(e)) &&
                        this.value.setRawValue(this.value.rawValue, {
                          forceEmit: !0,
                          last: !0
                        });
                    }
                  }
                ]
              );
            })(),
            Vi = A("svp"),
            Hi = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onValueChange_ = this.onValueChange_.bind(this)),
                    (this.value = n.value),
                    this.value.emitter.on("change", this.onValueChange_),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(Vi()),
                    n.viewProps.bindClassModifiers(this.element),
                    n.viewProps.bindTabIndex(this.element);
                  var i = t.createElement("canvas");
                  (i.height = 64),
                    (i.width = 64),
                    i.classList.add(Vi("c")),
                    this.element.appendChild(i),
                    (this.canvasElement = i);
                  var r = t.createElement("div");
                  r.classList.add(Vi("m")),
                    this.element.appendChild(r),
                    (this.markerElem_ = r),
                    this.update_();
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      var e = (function (e) {
                        var t = e.ownerDocument.defaultView;
                        return t && "document" in t
                          ? e.getContext("2d", { willReadFrequently: !0 })
                          : null;
                      })(this.canvasElement);
                      if (e) {
                        for (
                          var t = this.value.rawValue.getComponents("hsv"),
                            n = this.canvasElement.width,
                            i = this.canvasElement.height,
                            r = e.getImageData(0, 0, n, i),
                            a = r.data,
                            o = 0;
                          o < i;
                          o++
                        )
                          for (var s = 0; s < n; s++) {
                            var l = on(s, 0, n, 0, 100),
                              u = on(o, 0, i, 100, 0),
                              c = In(t[0], l, u),
                              h = 4 * (o * n + s);
                            (a[h] = c[0]),
                              (a[h + 1] = c[1]),
                              (a[h + 2] = c[2]),
                              (a[h + 3] = 255);
                          }
                        e.putImageData(r, 0, 0);
                        var d = on(t[1], 0, 100, 0, 100);
                        this.markerElem_.style.left = "".concat(d, "%");
                        var p = on(t[2], 0, 100, 100, 0);
                        this.markerElem_.style.top = "".concat(p, "%");
                      }
                    }
                  },
                  {
                    key: "onValueChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            Gi = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onKeyDown_ = this.onKeyDown_.bind(this)),
                    (this.onKeyUp_ = this.onKeyUp_.bind(this)),
                    (this.onPointerDown_ = this.onPointerDown_.bind(this)),
                    (this.onPointerMove_ = this.onPointerMove_.bind(this)),
                    (this.onPointerUp_ = this.onPointerUp_.bind(this)),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.view = new Hi(t, {
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.ptHandler_ = new an(this.view.element)),
                    this.ptHandler_.emitter.on("down", this.onPointerDown_),
                    this.ptHandler_.emitter.on("move", this.onPointerMove_),
                    this.ptHandler_.emitter.on("up", this.onPointerUp_),
                    this.view.element.addEventListener(
                      "keydown",
                      this.onKeyDown_
                    ),
                    this.view.element.addEventListener("keyup", this.onKeyUp_);
                },
                [
                  {
                    key: "handlePointerEvent_",
                    value: function (e, t) {
                      if (e.point) {
                        var n = on(e.point.x, 0, e.bounds.width, 0, 100),
                          i = on(e.point.y, 0, e.bounds.height, 100, 0),
                          r = g(this.value.rawValue.getComponents("hsv"), 4),
                          a = r[0],
                          o = r[3];
                        this.value.setRawValue(new Hn([a, n, i, o], "hsv"), t);
                      }
                    }
                  },
                  {
                    key: "onPointerDown_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerMove_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerUp_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !0,
                        last: !0
                      });
                    }
                  },
                  {
                    key: "onKeyDown_",
                    value: function (e) {
                      nn(e.key) && e.preventDefault();
                      var t = g(this.value.rawValue.getComponents("hsv"), 4),
                        n = t[0],
                        i = t[1],
                        r = t[2],
                        a = t[3],
                        o = Kn(!1),
                        s = $t(o, tn(e)),
                        l = $t(o, en(e));
                      (0 === s && 0 === l) ||
                        this.value.setRawValue(
                          new Hn([n, i + s, r + l, a], "hsv"),
                          { forceEmit: !1, last: !1 }
                        );
                    }
                  },
                  {
                    key: "onKeyUp_",
                    value: function (e) {
                      var t = Kn(!1),
                        n = $t(t, tn(e)),
                        i = $t(t, en(e));
                      (0 === n && 0 === i) ||
                        this.value.setRawValue(this.value.rawValue, {
                          forceEmit: !0,
                          last: !0
                        });
                    }
                  }
                ]
              );
            })(),
            Wi = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.hPaletteC_ = new zi(t, {
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.svPaletteC_ = new Gi(t, {
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.alphaIcs_ = n.supportsAlpha
                      ? {
                          palette: new Pi(t, {
                            value: this.value,
                            viewProps: this.viewProps
                          }),
                          text: new dn(t, {
                            parser: Wt,
                            baseStep: 0.1,
                            props: H.fromObject({
                              draggingScale: 0.01,
                              formatter: Kt(2)
                            }),
                            value: V(0, {
                              constraint: new dt({ min: 0, max: 1 })
                            }),
                            viewProps: this.viewProps
                          })
                        }
                      : null),
                    this.alphaIcs_ &&
                      Qt({
                        primary: this.value,
                        secondary: this.alphaIcs_.text.value,
                        forward: function (e) {
                          return e.rawValue.getComponents()[3];
                        },
                        backward: function (e, t) {
                          var n = e.rawValue.getComponents();
                          return (
                            (n[3] = t.rawValue), new Hn(n, e.rawValue.mode)
                          );
                        }
                      }),
                    (this.textC_ = new Fi(t, {
                      colorType: n.colorType,
                      parser: Wt,
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.view = new Wn(t, {
                      alphaViews: this.alphaIcs_
                        ? {
                            palette: this.alphaIcs_.palette.view,
                            text: this.alphaIcs_.text.view
                          }
                        : null,
                      hPaletteView: this.hPaletteC_.view,
                      supportsAlpha: n.supportsAlpha,
                      svPaletteView: this.svPaletteC_.view,
                      textView: this.textC_.view,
                      viewProps: this.viewProps
                    }));
                },
                [
                  {
                    key: "textController",
                    get: function () {
                      return this.textC_;
                    }
                  }
                ]
              );
            })(),
            ji = A("colsw"),
            qi = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onValueChange_ = this.onValueChange_.bind(this)),
                    n.value.emitter.on("change", this.onValueChange_),
                    (this.value = n.value),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(ji()),
                    n.viewProps.bindClassModifiers(this.element);
                  var i = t.createElement("div");
                  i.classList.add(ji("sw")),
                    this.element.appendChild(i),
                    (this.swatchElem_ = i);
                  var r = t.createElement("button");
                  r.classList.add(ji("b")),
                    n.viewProps.bindDisabled(r),
                    this.element.appendChild(r),
                    (this.buttonElement = r),
                    this.update_();
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      var e = this.value.rawValue;
                      this.swatchElem_.style.backgroundColor = _i(e);
                    }
                  },
                  {
                    key: "onValueChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            Ki = w(function e(t, n) {
              b(this, e),
                (this.value = n.value),
                (this.viewProps = n.viewProps),
                (this.view = new qi(t, {
                  value: this.value,
                  viewProps: this.viewProps
                }));
            }),
            Xi = (function () {
              return w(
                function e(t, n) {
                  var i = this;
                  b(this, e),
                    (this.onButtonBlur_ = this.onButtonBlur_.bind(this)),
                    (this.onButtonClick_ = this.onButtonClick_.bind(this)),
                    (this.onPopupChildBlur_ =
                      this.onPopupChildBlur_.bind(this)),
                    (this.onPopupChildKeydown_ =
                      this.onPopupChildKeydown_.bind(this)),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.foldable_ = ge.create(n.expanded)),
                    (this.swatchC_ = new Ki(t, {
                      value: this.value,
                      viewProps: this.viewProps
                    }));
                  var r = this.swatchC_.view.buttonElement;
                  r.addEventListener("blur", this.onButtonBlur_),
                    r.addEventListener("click", this.onButtonClick_),
                    (this.textC_ = new Mt(t, {
                      parser: n.parser,
                      props: H.fromObject({ formatter: n.formatter }),
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.view = new Rn(t, {
                      foldable: this.foldable_,
                      pickerLayout: n.pickerLayout
                    })),
                    this.view.swatchElement.appendChild(
                      this.swatchC_.view.element
                    ),
                    this.view.textElement.appendChild(this.textC_.view.element),
                    (this.popC_ =
                      "popup" === n.pickerLayout
                        ? new xt(t, { viewProps: this.viewProps })
                        : null);
                  var a = new Wi(t, {
                    colorType: n.colorType,
                    supportsAlpha: n.supportsAlpha,
                    value: this.value,
                    viewProps: this.viewProps
                  });
                  a.view.allFocusableElements.forEach(function (e) {
                    e.addEventListener("blur", i.onPopupChildBlur_),
                      e.addEventListener("keydown", i.onPopupChildKeydown_);
                  }),
                    (this.pickerC_ = a),
                    this.popC_
                      ? (this.view.element.appendChild(this.popC_.view.element),
                        this.popC_.view.element.appendChild(a.view.element),
                        Qt({
                          primary: this.foldable_.value("expanded"),
                          secondary: this.popC_.shows,
                          forward: function (e) {
                            return e.rawValue;
                          },
                          backward: function (e, t) {
                            return t.rawValue;
                          }
                        }))
                      : this.view.pickerElement &&
                        (this.view.pickerElement.appendChild(
                          this.pickerC_.view.element
                        ),
                        ye(this.foldable_, this.view.pickerElement));
                },
                [
                  {
                    key: "textController",
                    get: function () {
                      return this.textC_;
                    }
                  },
                  {
                    key: "onButtonBlur_",
                    value: function (e) {
                      if (this.popC_) {
                        var t = this.view.element,
                          n = e.relatedTarget;
                        (!n || !t.contains(n)) &&
                          (this.popC_.shows.rawValue = !1);
                      }
                    }
                  },
                  {
                    key: "onButtonClick_",
                    value: function () {
                      this.foldable_.set(
                        "expanded",
                        !this.foldable_.get("expanded")
                      ),
                        this.foldable_.get("expanded") &&
                          this.pickerC_.view.allFocusableElements[0].focus();
                    }
                  },
                  {
                    key: "onPopupChildBlur_",
                    value: function (e) {
                      if (this.popC_) {
                        var t = this.popC_.view.element,
                          n = ce(e);
                        (n && t.contains(n)) ||
                          (n &&
                            n === this.swatchC_.view.buttonElement &&
                            !ie(t.ownerDocument)) ||
                          (this.popC_.shows.rawValue = !1);
                      }
                    }
                  },
                  {
                    key: "onPopupChildKeydown_",
                    value: function (e) {
                      this.popC_
                        ? "Escape" === e.key && (this.popC_.shows.rawValue = !1)
                        : this.view.pickerElement &&
                          "Escape" === e.key &&
                          this.swatchC_.view.buttonElement.focus();
                    }
                  }
                ]
              );
            })();
          function Yi(e) {
            return On(e.getComponents("rgb")).reduce(function (e, t) {
              return (e << 8) | (255 & Math.floor(t));
            }, 0);
          }
          function Zi(e) {
            return (
              e.getComponents("rgb").reduce(function (e, t, n) {
                return (e << 8) | (255 & Math.floor(3 === n ? 255 * t : t));
              }, 0) >>> 0
            );
          }
          function Ji(e) {
            return "number" != typeof e
              ? Hn.black()
              : (function (e) {
                  return new Hn(
                    [(e >> 16) & 255, (e >> 8) & 255, 255 & e],
                    "rgb"
                  );
                })(e);
          }
          function Qi(e) {
            return "number" != typeof e
              ? Hn.black()
              : (function (e) {
                  return new Hn(
                    [
                      (e >> 24) & 255,
                      (e >> 16) & 255,
                      (e >> 8) & 255,
                      on(255 & e, 0, 255, 0, 1)
                    ],
                    "rgb"
                  );
                })(e);
          }
          function $i(e) {
            var t;
            return !!(
              (null != e && e.alpha) ||
              (null !== (t = null == e ? void 0 : e.color) &&
                void 0 !== t &&
                t.alpha)
            );
          }
          function er(e) {
            return e
              ? function (e) {
                  return _i(e, "0x");
                }
              : function (e) {
                  return gi(e, "0x");
                };
          }
          var tr = {
            id: "input-color-number",
            type: "input",
            accept: function (e, t) {
              if (
                "number" != typeof e ||
                !(function (e) {
                  return "color" in e || ("view" in e && "color" === e.view);
                })(t)
              )
                return null;
              var n = qn(t);
              return n ? { initialValue: e, params: n } : null;
            },
            binding: {
              reader: function (e) {
                return $i(e.params) ? Qi : Ji;
              },
              equals: Hn.equals,
              writer: function (e) {
                return (function (e) {
                  var t = e ? Zi : Yi;
                  return function (e, n) {
                    yn(e, t(n));
                  };
                })($i(e.params));
              }
            },
            controller: function (e) {
              var t = $i(e.params),
                n = "expanded" in e.params ? e.params.expanded : void 0,
                i = "picker" in e.params ? e.params.picker : void 0;
              return new Xi(e.document, {
                colorType: "int",
                expanded: null != n && n,
                formatter: er(t),
                parser: vi("int"),
                pickerLayout: null != i ? i : "popup",
                supportsAlpha: t,
                value: e.value,
                viewProps: e.viewProps
              });
            }
          };
          function nr(e) {
            return function (t) {
              return (function (e, t) {
                return Hn.isColorObject(e) ? Hn.fromObject(e, t) : Hn.black(t);
              })(t, e);
            };
          }
          function ir(e, t) {
            return function (n) {
              return e ? Ti(n, t) : Si(n, t);
            };
          }
          var rr = {
              id: "input-color-object",
              type: "input",
              accept: function (e, t) {
                if (!Hn.isColorObject(e)) return null;
                var n = qn(t);
                return n ? { initialValue: e, params: n } : null;
              },
              binding: {
                reader: function (e) {
                  return nr(Xn(e.params));
                },
                equals: Hn.equals,
                writer: function (e) {
                  return (function (e, t) {
                    return function (n, i) {
                      e
                        ? (function (e, t, n) {
                            var i = t.toRgbaObject(n);
                            e.writeProperty("r", i.r),
                              e.writeProperty("g", i.g),
                              e.writeProperty("b", i.b),
                              e.writeProperty("a", i.a);
                          })(n, i, t)
                        : (function (e, t, n) {
                            var i = t.toRgbaObject(n);
                            e.writeProperty("r", i.r),
                              e.writeProperty("g", i.g),
                              e.writeProperty("b", i.b);
                          })(n, i, t);
                    };
                  })(
                    (function (e) {
                      return Hn.isRgbaColorObject(e);
                    })(e.initialValue),
                    Xn(e.params)
                  );
                }
              },
              controller: function (e) {
                var t,
                  n = Hn.isRgbaColorObject(e.initialValue),
                  i = "expanded" in e.params ? e.params.expanded : void 0,
                  r = "picker" in e.params ? e.params.picker : void 0,
                  a = null !== (t = Xn(e.params)) && void 0 !== t ? t : "int";
                return new Xi(e.document, {
                  colorType: a,
                  expanded: null != i && i,
                  formatter: ir(n, a),
                  parser: vi(a),
                  pickerLayout: null != r ? r : "popup",
                  supportsAlpha: n,
                  value: e.value,
                  viewProps: e.viewProps
                });
              }
            },
            ar = {
              id: "input-color-string",
              type: "input",
              accept: function (e, t) {
                if ("string" != typeof e || ("view" in t && "text" === t.view))
                  return null;
                var n = pi(e, Xn(t));
                if (!n || !Ci(n)) return null;
                var i = qn(t);
                return i ? { initialValue: e, params: i } : null;
              },
              binding: {
                reader: function (e) {
                  var t;
                  return (function (e) {
                    var t = fi[e];
                    return function (n) {
                      if ("string" != typeof n) return Hn.black(e);
                      var i = t.reduce(function (e, t) {
                        return e || t(n);
                      }, null);
                      return null != i ? i : Hn.black(e);
                    };
                  })(null !== (t = Xn(e.params)) && void 0 !== t ? t : "int");
                },
                equals: Hn.equals,
                writer: function (e) {
                  var t = pi(e.initialValue, Xn(e.params));
                  if (!t) throw T.shouldNeverHappen();
                  var n = (function (e) {
                    var t = Ci(e);
                    return t
                      ? function (e, n) {
                          yn(e, t(n));
                        }
                      : null;
                  })(t);
                  if (!n) throw T.notBindable();
                  return n;
                }
              },
              controller: function (e) {
                var t = pi(e.initialValue, Xn(e.params));
                if (!t) throw T.shouldNeverHappen();
                var n = Ci(t);
                if (!n) throw T.shouldNeverHappen();
                var i = "expanded" in e.params ? e.params.expanded : void 0,
                  r = "picker" in e.params ? e.params.picker : void 0;
                return new Xi(e.document, {
                  colorType: t.type,
                  expanded: null != i && i,
                  formatter: n,
                  parser: vi(t.type),
                  pickerLayout: null != r ? r : "popup",
                  supportsAlpha: t.alpha,
                  value: e.value,
                  viewProps: e.viewProps
                });
              }
            },
            or = (function () {
              return w(
                function e(t) {
                  b(this, e),
                    (this.components = t.components),
                    (this.asm_ = t.assembly);
                },
                [
                  {
                    key: "constrain",
                    value: function (e) {
                      var t = this,
                        n = this.asm_.toComponents(e).map(function (e, n) {
                          var i, r;
                          return null !==
                            (r =
                              null === (i = t.components[n]) || void 0 === i
                                ? void 0
                                : i.constrain(e)) && void 0 !== r
                            ? r
                            : e;
                        });
                      return this.asm_.fromComponents(n);
                    }
                  }
                ]
              );
            })(),
            sr = A("pndtxt"),
            lr = w(function e(t, n) {
              var i = this;
              b(this, e),
                (this.textViews = n.textViews),
                (this.element = t.createElement("div")),
                this.element.classList.add(sr()),
                this.textViews.forEach(function (e) {
                  var n = t.createElement("div");
                  n.classList.add(sr("a")),
                    n.appendChild(e.element),
                    i.element.appendChild(n);
                });
            });
          var ur = w(function e(t, n) {
            var i = this;
            b(this, e),
              (this.value = n.value),
              (this.viewProps = n.viewProps),
              (this.acs_ = n.axes.map(function (e, i) {
                return (function (e, t, n) {
                  return new dn(e, {
                    arrayPosition:
                      0 === n ? "fst" : n === t.axes.length - 1 ? "lst" : "mid",
                    baseStep: t.axes[n].baseStep,
                    parser: t.parser,
                    props: t.axes[n].textProps,
                    value: V(0, { constraint: t.axes[n].constraint }),
                    viewProps: t.viewProps
                  });
                })(t, n, i);
              })),
              this.acs_.forEach(function (e, t) {
                Qt({
                  primary: i.value,
                  secondary: e.value,
                  forward: function (e) {
                    return n.assembly.toComponents(e.rawValue)[t];
                  },
                  backward: function (e, i) {
                    var r = n.assembly.toComponents(e.rawValue);
                    return (r[t] = i.rawValue), n.assembly.fromComponents(r);
                  }
                });
              }),
              (this.view = new lr(t, {
                textViews: this.acs_.map(function (e) {
                  return e.view;
                })
              }));
          });
          function cr(e, t) {
            return "step" in e && !_(e.step) ? new vt(e.step, t) : null;
          }
          function hr(e) {
            return _(e.max) || _(e.min)
              ? _(e.max) && _(e.min)
                ? null
                : new ft({ max: e.max, min: e.min })
              : new dt({ max: e.max, min: e.min });
          }
          var dr = {
              id: "input-number",
              type: "input",
              accept: function (e, t) {
                if ("number" != typeof e) return null;
                var n = j,
                  i = q(t, {
                    format: n.optional.function,
                    max: n.optional.number,
                    min: n.optional.number,
                    options: n.optional.custom(bn),
                    step: n.optional.number
                  });
                return i ? { initialValue: e, params: i } : null;
              },
              binding: {
                reader: function (e) {
                  return jt;
                },
                constraint: function (e) {
                  return (function (e, t) {
                    var n = [],
                      i = cr(e, t);
                    i && n.push(i);
                    var r = hr(e);
                    r && n.push(r);
                    var a = Mn(e.options);
                    return a && n.push(a), new ct(n);
                  })(e.params, e.initialValue);
                },
                writer: function (e) {
                  return yn;
                }
              },
              controller: function (e) {
                var t,
                  n = e.value,
                  i = e.constraint,
                  r = i && ht(i, pt);
                if (r)
                  return new _t(e.document, {
                    props: new H({ options: r.values.value("options") }),
                    value: n,
                    viewProps: e.viewProps
                  });
                var a =
                    null !==
                      (t = "format" in e.params ? e.params.format : void 0) &&
                    void 0 !== t
                      ? t
                      : Kt(Tn(i, n.rawValue)),
                  o = i && ht(i, dt);
                return o
                  ? new _n(e.document, {
                      baseStep: kn(i),
                      parser: Wt,
                      sliderProps: new H({
                        maxValue: o.values.value("max"),
                        minValue: o.values.value("min")
                      }),
                      textProps: H.fromObject({
                        draggingScale: En(i, n.rawValue),
                        formatter: a
                      }),
                      value: n,
                      viewProps: e.viewProps
                    })
                  : new dn(e.document, {
                      baseStep: kn(i),
                      parser: Wt,
                      props: H.fromObject({
                        draggingScale: En(i, n.rawValue),
                        formatter: a
                      }),
                      value: n,
                      viewProps: e.viewProps
                    });
              }
            },
            pr = (function () {
              return w(
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  b(this, e), (this.x = t), (this.y = n);
                },
                [
                  {
                    key: "getComponents",
                    value: function () {
                      return [this.x, this.y];
                    }
                  },
                  {
                    key: "toObject",
                    value: function () {
                      return { x: this.x, y: this.y };
                    }
                  }
                ],
                [
                  {
                    key: "isObject",
                    value: function (e) {
                      if (_(e)) return !1;
                      var t = e.x,
                        n = e.y;
                      return !("number" != typeof t || "number" != typeof n);
                    }
                  },
                  {
                    key: "equals",
                    value: function (e, t) {
                      return e.x === t.x && e.y === t.y;
                    }
                  }
                ]
              );
            })(),
            fr = {
              toComponents: function (e) {
                return e.getComponents();
              },
              fromComponents: function (e) {
                return s(pr, u(e));
              }
            },
            vr = A("p2d"),
            mr = w(function e(t, n) {
              b(this, e),
                (this.element = t.createElement("div")),
                this.element.classList.add(vr()),
                n.viewProps.bindClassModifiers(this.element),
                L(n.expanded, I(this.element, vr(void 0, "expanded")));
              var i = t.createElement("div");
              i.classList.add(vr("h")), this.element.appendChild(i);
              var r = t.createElement("button");
              r.classList.add(vr("b")),
                r.appendChild(oe(t, "p2dpad")),
                n.viewProps.bindDisabled(r),
                i.appendChild(r),
                (this.buttonElement = r);
              var a = t.createElement("div");
              if (
                (a.classList.add(vr("t")),
                i.appendChild(a),
                (this.textElement = a),
                "inline" === n.pickerLayout)
              ) {
                var o = t.createElement("div");
                o.classList.add(vr("p")),
                  this.element.appendChild(o),
                  (this.pickerElement = o);
              } else this.pickerElement = null;
            }),
            gr = A("p2dp"),
            _r = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onFoldableChange_ =
                      this.onFoldableChange_.bind(this)),
                    (this.onValueChange_ = this.onValueChange_.bind(this)),
                    (this.invertsY_ = n.invertsY),
                    (this.maxValue_ = n.maxValue),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(gr()),
                    "popup" === n.layout &&
                      this.element.classList.add(gr(void 0, "p")),
                    n.viewProps.bindClassModifiers(this.element);
                  var i = t.createElement("div");
                  i.classList.add(gr("p")),
                    n.viewProps.bindTabIndex(i),
                    this.element.appendChild(i),
                    (this.padElement = i);
                  var r = t.createElementNS(te, "svg");
                  r.classList.add(gr("g")),
                    this.padElement.appendChild(r),
                    (this.svgElem_ = r);
                  var a = t.createElementNS(te, "line");
                  a.classList.add(gr("ax")),
                    a.setAttributeNS(null, "x1", "0"),
                    a.setAttributeNS(null, "y1", "50%"),
                    a.setAttributeNS(null, "x2", "100%"),
                    a.setAttributeNS(null, "y2", "50%"),
                    this.svgElem_.appendChild(a);
                  var o = t.createElementNS(te, "line");
                  o.classList.add(gr("ax")),
                    o.setAttributeNS(null, "x1", "50%"),
                    o.setAttributeNS(null, "y1", "0"),
                    o.setAttributeNS(null, "x2", "50%"),
                    o.setAttributeNS(null, "y2", "100%"),
                    this.svgElem_.appendChild(o);
                  var s = t.createElementNS(te, "line");
                  s.classList.add(gr("l")),
                    s.setAttributeNS(null, "x1", "50%"),
                    s.setAttributeNS(null, "y1", "50%"),
                    this.svgElem_.appendChild(s),
                    (this.lineElem_ = s);
                  var l = t.createElement("div");
                  l.classList.add(gr("m")),
                    this.padElement.appendChild(l),
                    (this.markerElem_ = l),
                    n.value.emitter.on("change", this.onValueChange_),
                    (this.value = n.value),
                    this.update_();
                },
                [
                  {
                    key: "allFocusableElements",
                    get: function () {
                      return [this.padElement];
                    }
                  },
                  {
                    key: "update_",
                    value: function () {
                      var e = g(this.value.rawValue.getComponents(), 2),
                        t = e[0],
                        n = e[1],
                        i = this.maxValue_,
                        r = on(t, -i, +i, 0, 100),
                        a = on(n, -i, +i, 0, 100),
                        o = this.invertsY_ ? 100 - a : a;
                      this.lineElem_.setAttributeNS(
                        null,
                        "x2",
                        "".concat(r, "%")
                      ),
                        this.lineElem_.setAttributeNS(
                          null,
                          "y2",
                          "".concat(o, "%")
                        ),
                        (this.markerElem_.style.left = "".concat(r, "%")),
                        (this.markerElem_.style.top = "".concat(o, "%"));
                    }
                  },
                  {
                    key: "onValueChange_",
                    value: function () {
                      this.update_();
                    }
                  },
                  {
                    key: "onFoldableChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })();
          function yr(e, t, n) {
            return [$t(t[0], tn(e)), $t(t[1], en(e)) * (n ? 1 : -1)];
          }
          var br = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onPadKeyDown_ = this.onPadKeyDown_.bind(this)),
                    (this.onPadKeyUp_ = this.onPadKeyUp_.bind(this)),
                    (this.onPointerDown_ = this.onPointerDown_.bind(this)),
                    (this.onPointerMove_ = this.onPointerMove_.bind(this)),
                    (this.onPointerUp_ = this.onPointerUp_.bind(this)),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.baseSteps_ = n.baseSteps),
                    (this.maxValue_ = n.maxValue),
                    (this.invertsY_ = n.invertsY),
                    (this.view = new _r(t, {
                      invertsY: this.invertsY_,
                      layout: n.layout,
                      maxValue: this.maxValue_,
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.ptHandler_ = new an(this.view.padElement)),
                    this.ptHandler_.emitter.on("down", this.onPointerDown_),
                    this.ptHandler_.emitter.on("move", this.onPointerMove_),
                    this.ptHandler_.emitter.on("up", this.onPointerUp_),
                    this.view.padElement.addEventListener(
                      "keydown",
                      this.onPadKeyDown_
                    ),
                    this.view.padElement.addEventListener(
                      "keyup",
                      this.onPadKeyUp_
                    );
                },
                [
                  {
                    key: "handlePointerEvent_",
                    value: function (e, t) {
                      if (e.point) {
                        var n = this.maxValue_,
                          i = on(e.point.x, 0, e.bounds.width, -n, +n),
                          r = on(
                            this.invertsY_
                              ? e.bounds.height - e.point.y
                              : e.point.y,
                            0,
                            e.bounds.height,
                            -n,
                            +n
                          );
                        this.value.setRawValue(new pr(i, r), t);
                      }
                    }
                  },
                  {
                    key: "onPointerDown_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerMove_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !1,
                        last: !1
                      });
                    }
                  },
                  {
                    key: "onPointerUp_",
                    value: function (e) {
                      this.handlePointerEvent_(e.data, {
                        forceEmit: !0,
                        last: !0
                      });
                    }
                  },
                  {
                    key: "onPadKeyDown_",
                    value: function (e) {
                      nn(e.key) && e.preventDefault();
                      var t = g(yr(e, this.baseSteps_, this.invertsY_), 2),
                        n = t[0],
                        i = t[1];
                      (0 === n && 0 === i) ||
                        this.value.setRawValue(
                          new pr(
                            this.value.rawValue.x + n,
                            this.value.rawValue.y + i
                          ),
                          { forceEmit: !1, last: !1 }
                        );
                    }
                  },
                  {
                    key: "onPadKeyUp_",
                    value: function (e) {
                      var t = g(yr(e, this.baseSteps_, this.invertsY_), 2),
                        n = t[0],
                        i = t[1];
                      (0 === n && 0 === i) ||
                        this.value.setRawValue(this.value.rawValue, {
                          forceEmit: !0,
                          last: !0
                        });
                    }
                  }
                ]
              );
            })(),
            xr = (function () {
              return w(
                function e(t, n) {
                  var i,
                    r,
                    a = this;
                  b(this, e),
                    (this.onPopupChildBlur_ =
                      this.onPopupChildBlur_.bind(this)),
                    (this.onPopupChildKeydown_ =
                      this.onPopupChildKeydown_.bind(this)),
                    (this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this)),
                    (this.onPadButtonClick_ =
                      this.onPadButtonClick_.bind(this)),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.foldable_ = ge.create(n.expanded)),
                    (this.popC_ =
                      "popup" === n.pickerLayout
                        ? new xt(t, { viewProps: this.viewProps })
                        : null);
                  var o = new br(t, {
                    baseSteps: [n.axes[0].baseStep, n.axes[1].baseStep],
                    invertsY: n.invertsY,
                    layout: n.pickerLayout,
                    maxValue: n.maxValue,
                    value: this.value,
                    viewProps: this.viewProps
                  });
                  o.view.allFocusableElements.forEach(function (e) {
                    e.addEventListener("blur", a.onPopupChildBlur_),
                      e.addEventListener("keydown", a.onPopupChildKeydown_);
                  }),
                    (this.pickerC_ = o),
                    (this.textC_ = new ur(t, {
                      assembly: fr,
                      axes: n.axes,
                      parser: n.parser,
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    (this.view = new mr(t, {
                      expanded: this.foldable_.value("expanded"),
                      pickerLayout: n.pickerLayout,
                      viewProps: this.viewProps
                    })),
                    this.view.textElement.appendChild(this.textC_.view.element),
                    null === (i = this.view.buttonElement) ||
                      void 0 === i ||
                      i.addEventListener("blur", this.onPadButtonBlur_),
                    null === (r = this.view.buttonElement) ||
                      void 0 === r ||
                      r.addEventListener("click", this.onPadButtonClick_),
                    this.popC_
                      ? (this.view.element.appendChild(this.popC_.view.element),
                        this.popC_.view.element.appendChild(
                          this.pickerC_.view.element
                        ),
                        Qt({
                          primary: this.foldable_.value("expanded"),
                          secondary: this.popC_.shows,
                          forward: function (e) {
                            return e.rawValue;
                          },
                          backward: function (e, t) {
                            return t.rawValue;
                          }
                        }))
                      : this.view.pickerElement &&
                        (this.view.pickerElement.appendChild(
                          this.pickerC_.view.element
                        ),
                        ye(this.foldable_, this.view.pickerElement));
                },
                [
                  {
                    key: "onPadButtonBlur_",
                    value: function (e) {
                      if (this.popC_) {
                        var t = this.view.element,
                          n = e.relatedTarget;
                        (!n || !t.contains(n)) &&
                          (this.popC_.shows.rawValue = !1);
                      }
                    }
                  },
                  {
                    key: "onPadButtonClick_",
                    value: function () {
                      this.foldable_.set(
                        "expanded",
                        !this.foldable_.get("expanded")
                      ),
                        this.foldable_.get("expanded") &&
                          this.pickerC_.view.allFocusableElements[0].focus();
                    }
                  },
                  {
                    key: "onPopupChildBlur_",
                    value: function (e) {
                      if (this.popC_) {
                        var t = this.popC_.view.element,
                          n = ce(e);
                        (n && t.contains(n)) ||
                          (n &&
                            n === this.view.buttonElement &&
                            !ie(t.ownerDocument)) ||
                          (this.popC_.shows.rawValue = !1);
                      }
                    }
                  },
                  {
                    key: "onPopupChildKeydown_",
                    value: function (e) {
                      this.popC_
                        ? "Escape" === e.key && (this.popC_.shows.rawValue = !1)
                        : this.view.pickerElement &&
                          "Escape" === e.key &&
                          this.view.buttonElement.focus();
                    }
                  }
                ]
              );
            })(),
            wr = (function () {
              return w(
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0;
                  b(this, e), (this.x = t), (this.y = n), (this.z = i);
                },
                [
                  {
                    key: "getComponents",
                    value: function () {
                      return [this.x, this.y, this.z];
                    }
                  },
                  {
                    key: "toObject",
                    value: function () {
                      return { x: this.x, y: this.y, z: this.z };
                    }
                  }
                ],
                [
                  {
                    key: "isObject",
                    value: function (e) {
                      if (_(e)) return !1;
                      var t = e.x,
                        n = e.y,
                        i = e.z;
                      return !(
                        "number" != typeof t ||
                        "number" != typeof n ||
                        "number" != typeof i
                      );
                    }
                  },
                  {
                    key: "equals",
                    value: function (e, t) {
                      return e.x === t.x && e.y === t.y && e.z === t.z;
                    }
                  }
                ]
              );
            })(),
            Sr = {
              toComponents: function (e) {
                return e.getComponents();
              },
              fromComponents: function (e) {
                return s(wr, u(e));
              }
            };
          function Mr(e) {
            return wr.isObject(e) ? new wr(e.x, e.y, e.z) : new wr();
          }
          function Tr(e, t) {
            e.writeProperty("x", t.x),
              e.writeProperty("y", t.y),
              e.writeProperty("z", t.z);
          }
          function kr(e, t) {
            return {
              baseStep: kn(t),
              constraint: t,
              textProps: H.fromObject({
                draggingScale: En(t, e),
                formatter: Kt(Tn(t, e))
              })
            };
          }
          var Er = {
              id: "input-point3d",
              type: "input",
              accept: function (e, t) {
                if (!wr.isObject(e)) return null;
                var n = j,
                  i = q(t, {
                    x: n.optional.custom(wn),
                    y: n.optional.custom(wn),
                    z: n.optional.custom(wn)
                  });
                return i ? { initialValue: e, params: i } : null;
              },
              binding: {
                reader: function (e) {
                  return Mr;
                },
                constraint: function (e) {
                  return (function (e, t) {
                    return new or({
                      assembly: Sr,
                      components: [
                        $r("x" in e ? e.x : void 0, t.x),
                        $r("y" in e ? e.y : void 0, t.y),
                        $r("z" in e ? e.z : void 0, t.z)
                      ]
                    });
                  })(e.params, e.initialValue);
                },
                equals: wr.equals,
                writer: function (e) {
                  return Tr;
                }
              },
              controller: function (e) {
                var t = e.value,
                  n = e.constraint;
                if (!(n instanceof or)) throw T.shouldNeverHappen();
                return new ur(e.document, {
                  assembly: Sr,
                  axes: [
                    kr(t.rawValue.x, n.components[0]),
                    kr(t.rawValue.y, n.components[1]),
                    kr(t.rawValue.z, n.components[2])
                  ],
                  parser: Wt,
                  value: t,
                  viewProps: e.viewProps
                });
              }
            },
            Cr = (function () {
              return w(
                function e() {
                  var t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0,
                    r =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0;
                  b(this, e),
                    (this.x = t),
                    (this.y = n),
                    (this.z = i),
                    (this.w = r);
                },
                [
                  {
                    key: "getComponents",
                    value: function () {
                      return [this.x, this.y, this.z, this.w];
                    }
                  },
                  {
                    key: "toObject",
                    value: function () {
                      return { x: this.x, y: this.y, z: this.z, w: this.w };
                    }
                  }
                ],
                [
                  {
                    key: "isObject",
                    value: function (e) {
                      if (_(e)) return !1;
                      var t = e.x,
                        n = e.y,
                        i = e.z,
                        r = e.w;
                      return !(
                        "number" != typeof t ||
                        "number" != typeof n ||
                        "number" != typeof i ||
                        "number" != typeof r
                      );
                    }
                  },
                  {
                    key: "equals",
                    value: function (e, t) {
                      return (
                        e.x === t.x && e.y === t.y && e.z === t.z && e.w === t.w
                      );
                    }
                  }
                ]
              );
            })(),
            Dr = {
              toComponents: function (e) {
                return e.getComponents();
              },
              fromComponents: function (e) {
                return s(Cr, u(e));
              }
            };
          function Ar(e) {
            return Cr.isObject(e) ? new Cr(e.x, e.y, e.z, e.w) : new Cr();
          }
          function Pr(e, t) {
            e.writeProperty("x", t.x),
              e.writeProperty("y", t.y),
              e.writeProperty("z", t.z),
              e.writeProperty("w", t.w);
          }
          var Lr = {
            id: "input-point4d",
            type: "input",
            accept: function (e, t) {
              if (!Cr.isObject(e)) return null;
              var n = j,
                i = q(t, {
                  x: n.optional.custom(wn),
                  y: n.optional.custom(wn),
                  z: n.optional.custom(wn),
                  w: n.optional.custom(wn)
                });
              return i ? { initialValue: e, params: i } : null;
            },
            binding: {
              reader: function (e) {
                return Ar;
              },
              constraint: function (e) {
                return (function (e, t) {
                  return new or({
                    assembly: Dr,
                    components: [
                      $r("x" in e ? e.x : void 0, t.x),
                      $r("y" in e ? e.y : void 0, t.y),
                      $r("z" in e ? e.z : void 0, t.z),
                      $r("w" in e ? e.w : void 0, t.w)
                    ]
                  });
                })(e.params, e.initialValue);
              },
              equals: Cr.equals,
              writer: function (e) {
                return Pr;
              }
            },
            controller: function (e) {
              var t = e.value,
                n = e.constraint;
              if (!(n instanceof or)) throw T.shouldNeverHappen();
              return new ur(e.document, {
                assembly: Dr,
                axes: t.rawValue.getComponents().map(function (e, t) {
                  return (function (e, t) {
                    return {
                      baseStep: kn(t),
                      constraint: t,
                      textProps: H.fromObject({
                        draggingScale: En(t, e),
                        formatter: Kt(Tn(t, e))
                      })
                    };
                  })(e, n.components[t]);
                }),
                parser: Wt,
                value: t,
                viewProps: e.viewProps
              });
            }
          };
          var Rr = {
              id: "input-string",
              type: "input",
              accept: function (e, t) {
                if ("string" != typeof e) return null;
                var n = q(t, { options: j.optional.custom(bn) });
                return n ? { initialValue: e, params: n } : null;
              },
              binding: {
                reader: function (e) {
                  return Zt;
                },
                constraint: function (e) {
                  return (function (e) {
                    var t = [],
                      n = Mn(e.options);
                    return n && t.push(n), new ct(t);
                  })(e.params);
                },
                writer: function (e) {
                  return yn;
                }
              },
              controller: function (e) {
                var t = e.document,
                  n = e.value,
                  i = e.constraint,
                  r = i && ht(i, pt);
                return r
                  ? new _t(t, {
                      props: new H({ options: r.values.value("options") }),
                      value: n,
                      viewProps: e.viewProps
                    })
                  : new Mt(t, {
                      parser: function (e) {
                        return e;
                      },
                      props: H.fromObject({ formatter: Jt }),
                      value: n,
                      viewProps: e.viewProps
                    });
              }
            },
            Ir = { defaultInterval: 200, defaultLineCount: 3 },
            Or = A("mll"),
            Nr = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onValueUpdate_ = this.onValueUpdate_.bind(this)),
                    (this.formatter_ = n.formatter),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(Or()),
                    n.viewProps.bindClassModifiers(this.element);
                  var i = t.createElement("textarea");
                  i.classList.add(Or("i")),
                    (i.style.height = "calc(var(--bld-us) * ".concat(
                      n.lineCount,
                      ")"
                    )),
                    (i.readOnly = !0),
                    n.viewProps.bindDisabled(i),
                    this.element.appendChild(i),
                    (this.textareaElem_ = i),
                    n.value.emitter.on("change", this.onValueUpdate_),
                    (this.value = n.value),
                    this.update_();
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      var e = this,
                        t = this.textareaElem_,
                        n = t.scrollTop === t.scrollHeight - t.clientHeight,
                        i = [];
                      this.value.rawValue.forEach(function (t) {
                        void 0 !== t && i.push(e.formatter_(t));
                      }),
                        (t.textContent = i.join("\n")),
                        n && (t.scrollTop = t.scrollHeight);
                    }
                  },
                  {
                    key: "onValueUpdate_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            Fr = w(function e(t, n) {
              b(this, e),
                (this.value = n.value),
                (this.viewProps = n.viewProps),
                (this.view = new Nr(t, {
                  formatter: n.formatter,
                  lineCount: n.lineCount,
                  value: this.value,
                  viewProps: this.viewProps
                }));
            }),
            Ur = A("sgl"),
            Br = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onValueUpdate_ = this.onValueUpdate_.bind(this)),
                    (this.formatter_ = n.formatter),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(Ur()),
                    n.viewProps.bindClassModifiers(this.element);
                  var i = t.createElement("input");
                  i.classList.add(Ur("i")),
                    (i.readOnly = !0),
                    (i.type = "text"),
                    n.viewProps.bindDisabled(i),
                    this.element.appendChild(i),
                    (this.inputElement = i),
                    n.value.emitter.on("change", this.onValueUpdate_),
                    (this.value = n.value),
                    this.update_();
                },
                [
                  {
                    key: "update_",
                    value: function () {
                      var e = this.value.rawValue,
                        t = e[e.length - 1];
                      this.inputElement.value =
                        void 0 !== t ? this.formatter_(t) : "";
                    }
                  },
                  {
                    key: "onValueUpdate_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            zr = w(function e(t, n) {
              b(this, e),
                (this.value = n.value),
                (this.viewProps = n.viewProps),
                (this.view = new Br(t, {
                  formatter: n.formatter,
                  value: this.value,
                  viewProps: this.viewProps
                }));
            }),
            Vr = {
              id: "monitor-bool",
              type: "monitor",
              accept: function (e, t) {
                if ("boolean" != typeof e) return null;
                var n = q(t, { lineCount: j.optional.number });
                return n ? { initialValue: e, params: n } : null;
              },
              binding: {
                reader: function (e) {
                  return Tt;
                }
              },
              controller: function (e) {
                var t;
                return 1 === e.value.rawValue.length
                  ? new zr(e.document, {
                      formatter: kt,
                      value: e.value,
                      viewProps: e.viewProps
                    })
                  : new Fr(e.document, {
                      formatter: kt,
                      lineCount:
                        null !== (t = e.params.lineCount) && void 0 !== t
                          ? t
                          : Ir.defaultLineCount,
                      value: e.value,
                      viewProps: e.viewProps
                    });
              }
            },
            Hr = A("grl"),
            Gr = (function () {
              return w(
                function e(t, n) {
                  b(this, e),
                    (this.onCursorChange_ = this.onCursorChange_.bind(this)),
                    (this.onValueUpdate_ = this.onValueUpdate_.bind(this)),
                    (this.element = t.createElement("div")),
                    this.element.classList.add(Hr()),
                    n.viewProps.bindClassModifiers(this.element),
                    (this.formatter_ = n.formatter),
                    (this.props_ = n.props),
                    (this.cursor_ = n.cursor),
                    this.cursor_.emitter.on("change", this.onCursorChange_);
                  var i = t.createElementNS(te, "svg");
                  i.classList.add(Hr("g")),
                    (i.style.height = "calc(var(--bld-us) * ".concat(
                      n.lineCount,
                      ")"
                    )),
                    this.element.appendChild(i),
                    (this.svgElem_ = i);
                  var r = t.createElementNS(te, "polyline");
                  this.svgElem_.appendChild(r), (this.lineElem_ = r);
                  var a = t.createElement("div");
                  a.classList.add(Hr("t"), A("tt")()),
                    this.element.appendChild(a),
                    (this.tooltipElem_ = a),
                    n.value.emitter.on("change", this.onValueUpdate_),
                    (this.value = n.value),
                    this.update_();
                },
                [
                  {
                    key: "graphElement",
                    get: function () {
                      return this.svgElem_;
                    }
                  },
                  {
                    key: "update_",
                    value: function () {
                      var e = this.svgElem_.getBoundingClientRect(),
                        t = this.value.rawValue.length - 1,
                        n = this.props_.get("minValue"),
                        i = this.props_.get("maxValue"),
                        r = [];
                      this.value.rawValue.forEach(function (a, o) {
                        if (void 0 !== a) {
                          var s = on(o, 0, t, 0, e.width),
                            l = on(a, n, i, e.height, 0);
                          r.push([s, l].join(","));
                        }
                      }),
                        this.lineElem_.setAttributeNS(
                          null,
                          "points",
                          r.join(" ")
                        );
                      var a = this.tooltipElem_,
                        o = this.value.rawValue[this.cursor_.rawValue];
                      if (void 0 !== o) {
                        var s = on(this.cursor_.rawValue, 0, t, 0, e.width),
                          l = on(o, n, i, e.height, 0);
                        (a.style.left = "".concat(s, "px")),
                          (a.style.top = "".concat(l, "px")),
                          (a.textContent = "".concat(this.formatter_(o))),
                          a.classList.contains(Hr("t", "a")) ||
                            (a.classList.add(Hr("t", "a"), Hr("t", "in")),
                            ne(a),
                            a.classList.remove(Hr("t", "in")));
                      } else a.classList.remove(Hr("t", "a"));
                    }
                  },
                  {
                    key: "onValueUpdate_",
                    value: function () {
                      this.update_();
                    }
                  },
                  {
                    key: "onCursorChange_",
                    value: function () {
                      this.update_();
                    }
                  }
                ]
              );
            })(),
            Wr = (function () {
              return w(
                function e(t, n) {
                  if (
                    (b(this, e),
                    (this.onGraphMouseMove_ =
                      this.onGraphMouseMove_.bind(this)),
                    (this.onGraphMouseLeave_ =
                      this.onGraphMouseLeave_.bind(this)),
                    (this.onGraphPointerDown_ =
                      this.onGraphPointerDown_.bind(this)),
                    (this.onGraphPointerMove_ =
                      this.onGraphPointerMove_.bind(this)),
                    (this.onGraphPointerUp_ =
                      this.onGraphPointerUp_.bind(this)),
                    (this.props_ = n.props),
                    (this.value = n.value),
                    (this.viewProps = n.viewProps),
                    (this.cursor_ = V(-1)),
                    (this.view = new Gr(t, {
                      cursor: this.cursor_,
                      formatter: n.formatter,
                      lineCount: n.lineCount,
                      props: this.props_,
                      value: this.value,
                      viewProps: this.viewProps
                    })),
                    ie(t))
                  ) {
                    var i = new an(this.view.element);
                    i.emitter.on("down", this.onGraphPointerDown_),
                      i.emitter.on("move", this.onGraphPointerMove_),
                      i.emitter.on("up", this.onGraphPointerUp_);
                  } else
                    this.view.element.addEventListener(
                      "mousemove",
                      this.onGraphMouseMove_
                    ),
                      this.view.element.addEventListener(
                        "mouseleave",
                        this.onGraphMouseLeave_
                      );
                },
                [
                  {
                    key: "onGraphMouseLeave_",
                    value: function () {
                      this.cursor_.rawValue = -1;
                    }
                  },
                  {
                    key: "onGraphMouseMove_",
                    value: function (e) {
                      var t = this.view.element.getBoundingClientRect();
                      this.cursor_.rawValue = Math.floor(
                        on(e.offsetX, 0, t.width, 0, this.value.rawValue.length)
                      );
                    }
                  },
                  {
                    key: "onGraphPointerDown_",
                    value: function (e) {
                      this.onGraphPointerMove_(e);
                    }
                  },
                  {
                    key: "onGraphPointerMove_",
                    value: function (e) {
                      e.data.point
                        ? (this.cursor_.rawValue = Math.floor(
                            on(
                              e.data.point.x,
                              0,
                              e.data.bounds.width,
                              0,
                              this.value.rawValue.length
                            )
                          ))
                        : (this.cursor_.rawValue = -1);
                    }
                  },
                  {
                    key: "onGraphPointerUp_",
                    value: function () {
                      this.cursor_.rawValue = -1;
                    }
                  }
                ]
              );
            })();
          function jr(e) {
            return "format" in e && !_(e.format) ? e.format : Kt(2);
          }
          function qr(e) {
            return "view" in e && "graph" === e.view;
          }
          var Kr = {
              id: "monitor-number",
              type: "monitor",
              accept: function (e, t) {
                if ("number" != typeof e) return null;
                var n = j,
                  i = q(t, {
                    format: n.optional.function,
                    lineCount: n.optional.number,
                    max: n.optional.number,
                    min: n.optional.number,
                    view: n.optional.string
                  });
                return i ? { initialValue: e, params: i } : null;
              },
              binding: {
                defaultBufferSize: function (e) {
                  return qr(e) ? 64 : 1;
                },
                reader: function (e) {
                  return jt;
                }
              },
              controller: function (e) {
                return qr(e.params)
                  ? (function (e) {
                      var t, n, i;
                      return new Wr(e.document, {
                        formatter: jr(e.params),
                        lineCount:
                          null !== (t = e.params.lineCount) && void 0 !== t
                            ? t
                            : Ir.defaultLineCount,
                        props: H.fromObject({
                          maxValue:
                            null !==
                              (n = "max" in e.params ? e.params.max : null) &&
                            void 0 !== n
                              ? n
                              : 100,
                          minValue:
                            null !==
                              (i = "min" in e.params ? e.params.min : null) &&
                            void 0 !== i
                              ? i
                              : 0
                        }),
                        value: e.value,
                        viewProps: e.viewProps
                      });
                    })(e)
                  : (function (e) {
                      var t;
                      return 1 === e.value.rawValue.length
                        ? new zr(e.document, {
                            formatter: jr(e.params),
                            value: e.value,
                            viewProps: e.viewProps
                          })
                        : new Fr(e.document, {
                            formatter: jr(e.params),
                            lineCount:
                              null !== (t = e.params.lineCount) && void 0 !== t
                                ? t
                                : Ir.defaultLineCount,
                            value: e.value,
                            viewProps: e.viewProps
                          });
                    })(e);
              }
            },
            Xr = {
              id: "monitor-string",
              type: "monitor",
              accept: function (e, t) {
                if ("string" != typeof e) return null;
                var n = j,
                  i = q(t, {
                    lineCount: n.optional.number,
                    multiline: n.optional.boolean
                  });
                return i ? { initialValue: e, params: i } : null;
              },
              binding: {
                reader: function (e) {
                  return Zt;
                }
              },
              controller: function (e) {
                var t,
                  n = e.value;
                return n.rawValue.length > 1 ||
                  ("multiline" in e.params && e.params.multiline)
                  ? new Fr(e.document, {
                      formatter: Jt,
                      lineCount:
                        null !== (t = e.params.lineCount) && void 0 !== t
                          ? t
                          : Ir.defaultLineCount,
                      value: n,
                      viewProps: e.viewProps
                    })
                  : new zr(e.document, {
                      formatter: Jt,
                      value: n,
                      viewProps: e.viewProps
                    });
              }
            };
          function Yr(e, t) {
            return 0 === t
              ? new rt()
              : new at(e, null != t ? t : Ir.defaultInterval);
          }
          var Zr = (function () {
            return w(
              function e() {
                b(this, e),
                  (this.pluginsMap_ = { blades: [], inputs: [], monitors: [] });
              },
              [
                {
                  key: "getAll",
                  value: function () {
                    return [].concat(
                      u(this.pluginsMap_.blades),
                      u(this.pluginsMap_.inputs),
                      u(this.pluginsMap_.monitors)
                    );
                  }
                },
                {
                  key: "register",
                  value: function (e) {
                    "blade" === e.type
                      ? this.pluginsMap_.blades.unshift(e)
                      : "input" === e.type
                      ? this.pluginsMap_.inputs.unshift(e)
                      : "monitor" === e.type &&
                        this.pluginsMap_.monitors.unshift(e);
                  }
                },
                {
                  key: "createInput",
                  value: function (e, t, n) {
                    if (_(t.read()))
                      throw new T({
                        context: { key: t.key },
                        type: "nomatchingcontroller"
                      });
                    var i = this.pluginsMap_.inputs.reduce(function (i, r) {
                      return null != i
                        ? i
                        : (function (e, t) {
                            var n,
                              i = e.accept(t.target.read(), t.params);
                            if (_(i)) return null;
                            var r = j,
                              a = {
                                target: t.target,
                                initialValue: i.initialValue,
                                params: i.params
                              },
                              o = e.binding.reader(a),
                              s = e.binding.constraint
                                ? e.binding.constraint(a)
                                : void 0,
                              l = V(o(i.initialValue), {
                                constraint: s,
                                equals: e.binding.equals
                              }),
                              u = new ot({
                                reader: o,
                                target: t.target,
                                value: l,
                                writer: e.binding.writer(a)
                              }),
                              c = r.optional.boolean(t.params.disabled).value,
                              h = r.optional.boolean(t.params.hidden).value,
                              d = e.controller({
                                constraint: s,
                                document: t.document,
                                initialValue: i.initialValue,
                                params: i.params,
                                value: u.value,
                                viewProps: J.create({ disabled: c, hidden: h })
                              });
                            return new Se(t.document, {
                              binding: u,
                              blade: me(),
                              props: H.fromObject({
                                label:
                                  "label" in t.params
                                    ? null !==
                                        (n = r.optional.string(
                                          t.params.label
                                        ).value) && void 0 !== n
                                      ? n
                                      : null
                                    : t.target.key
                              }),
                              valueController: d
                            });
                          })(r, { document: e, target: t, params: n });
                    }, null);
                    if (i) return i;
                    throw new T({
                      context: { key: t.key },
                      type: "nomatchingcontroller"
                    });
                  }
                },
                {
                  key: "createMonitor",
                  value: function (e, t, n) {
                    var i = this.pluginsMap_.monitors.reduce(function (i, r) {
                      return null != i
                        ? i
                        : (function (e, t) {
                            var n,
                              i,
                              r,
                              a = j,
                              o = e.accept(t.target.read(), t.params);
                            if (_(o)) return null;
                            var s = {
                                target: t.target,
                                initialValue: o.initialValue,
                                params: o.params
                              },
                              l = e.binding.reader(s),
                              u =
                                null !==
                                  (i =
                                    null !==
                                      (n = a.optional.number(
                                        t.params.bufferSize
                                      ).value) && void 0 !== n
                                      ? n
                                      : e.binding.defaultBufferSize &&
                                        e.binding.defaultBufferSize(
                                          o.params
                                        )) && void 0 !== i
                                  ? i
                                  : 1,
                              c = a.optional.number(t.params.interval).value,
                              h = new ut({
                                reader: l,
                                target: t.target,
                                ticker: Yr(t.document, c),
                                value: lt(u)
                              }),
                              d = a.optional.boolean(t.params.disabled).value,
                              p = a.optional.boolean(t.params.hidden).value,
                              f = e.controller({
                                document: t.document,
                                params: o.params,
                                value: h.value,
                                viewProps: J.create({ disabled: d, hidden: p })
                              });
                            return new Te(t.document, {
                              binding: h,
                              blade: me(),
                              props: H.fromObject({
                                label:
                                  "label" in t.params
                                    ? null !==
                                        (r = a.optional.string(
                                          t.params.label
                                        ).value) && void 0 !== r
                                      ? r
                                      : null
                                    : t.target.key
                              }),
                              valueController: f
                            });
                          })(r, { document: e, params: n, target: t });
                    }, null);
                    if (i) return i;
                    throw new T({
                      context: { key: t.key },
                      type: "nomatchingcontroller"
                    });
                  }
                },
                {
                  key: "createBlade",
                  value: function (e, t) {
                    var n = this.pluginsMap_.blades.reduce(function (n, i) {
                      return null != n
                        ? n
                        : (function (e, t) {
                            var n = e.accept(t.params);
                            if (!n) return null;
                            var i = j.optional.boolean(t.params.disabled).value,
                              r = j.optional.boolean(t.params.hidden).value;
                            return e.controller({
                              blade: me(),
                              document: t.document,
                              params: Object.assign(
                                Object.assign({}, n.params),
                                { disabled: i, hidden: r }
                              ),
                              viewProps: J.create({ disabled: i, hidden: r })
                            });
                          })(i, { document: e, params: t });
                    }, null);
                    if (!n)
                      throw new T({
                        type: "nomatchingview",
                        context: { params: t }
                      });
                    return n;
                  }
                },
                {
                  key: "createBladeApi",
                  value: function (e) {
                    var t = this;
                    if (e instanceof Se) return new we(e);
                    if (e instanceof Te) return new Me(e);
                    if (e instanceof Ne) return new De(e, this);
                    var n = this.pluginsMap_.blades.reduce(function (n, i) {
                      return null != n ? n : i.api({ controller: e, pool: t });
                    }, null);
                    if (!n) throw T.shouldNeverHappen();
                    return n;
                  }
                }
              ]
            );
          })();
          function Jr(e) {
            return pr.isObject(e) ? new pr(e.x, e.y) : new pr();
          }
          function Qr(e, t) {
            e.writeProperty("x", t.x), e.writeProperty("y", t.y);
          }
          function $r(e, t) {
            if (e) {
              var n = [],
                i = cr(e, t);
              i && n.push(i);
              var r = hr(e);
              return r && n.push(r), new ct(n);
            }
          }
          function ea(e, t) {
            var n = g(
                e
                  ? (function (e) {
                      var t = ht(e, dt);
                      if (t) return [t.values.get("min"), t.values.get("max")];
                      var n = ht(e, ft);
                      return n ? [n.minValue, n.maxValue] : [void 0, void 0];
                    })(e)
                  : [],
                2
              ),
              i = n[0],
              r = n[1];
            if (!_(i) || !_(r))
              return Math.max(
                Math.abs(null != i ? i : 0),
                Math.abs(null != r ? r : 0)
              );
            var a = kn(e);
            return Math.max(10 * Math.abs(a), 10 * Math.abs(t));
          }
          function ta(e, t) {
            var n = t instanceof or ? t.components[0] : void 0,
              i = t instanceof or ? t.components[1] : void 0,
              r = ea(n, e.x),
              a = ea(i, e.y);
            return Math.max(r, a);
          }
          function na(e, t) {
            return {
              baseStep: kn(t),
              constraint: t,
              textProps: H.fromObject({
                draggingScale: En(t, e),
                formatter: Kt(Tn(t, e))
              })
            };
          }
          function ia(e) {
            if (!("y" in e)) return !1;
            var t = e.y;
            return !(!t || !("inverted" in t) || !t.inverted);
          }
          var ra = {
              id: "input-point2d",
              type: "input",
              accept: function (e, t) {
                if (!pr.isObject(e)) return null;
                var n = j,
                  i = q(t, {
                    expanded: n.optional.boolean,
                    picker: n.optional.custom(xn),
                    x: n.optional.custom(wn),
                    y: n.optional.object({
                      inverted: n.optional.boolean,
                      max: n.optional.number,
                      min: n.optional.number,
                      step: n.optional.number
                    })
                  });
                return i ? { initialValue: e, params: i } : null;
              },
              binding: {
                reader: function (e) {
                  return Jr;
                },
                constraint: function (e) {
                  return (function (e, t) {
                    return new or({
                      assembly: fr,
                      components: [
                        $r("x" in e ? e.x : void 0, t.x),
                        $r("y" in e ? e.y : void 0, t.y)
                      ]
                    });
                  })(e.params, e.initialValue);
                },
                equals: pr.equals,
                writer: function (e) {
                  return Qr;
                }
              },
              controller: function (e) {
                var t = e.document,
                  n = e.value,
                  i = e.constraint;
                if (!(i instanceof or)) throw T.shouldNeverHappen();
                var r = "expanded" in e.params ? e.params.expanded : void 0,
                  a = "picker" in e.params ? e.params.picker : void 0;
                return new xr(t, {
                  axes: [
                    na(n.rawValue.x, i.components[0]),
                    na(n.rawValue.y, i.components[1])
                  ],
                  expanded: null != r && r,
                  invertsY: ia(e.params),
                  maxValue: ta(n.rawValue, i),
                  parser: Wt,
                  pickerLayout: null != a ? a : "popup",
                  value: n,
                  viewProps: e.viewProps
                });
              }
            },
            aa = (function (e) {
              function t(e) {
                var n;
                return (
                  b(this, t),
                  ((n = h(this, t, [e])).emitter_ = new C()),
                  n.controller_.valueController.value.emitter.on(
                    "change",
                    function (e) {
                      n.emitter_.emit("change", {
                        event: new r(d(n), e.rawValue)
                      });
                    }
                  ),
                  n
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "label",
                    get: function () {
                      return this.controller_.props.get("label");
                    },
                    set: function (e) {
                      this.controller_.props.set("label", e);
                    }
                  },
                  {
                    key: "options",
                    get: function () {
                      return this.controller_.valueController.props.get(
                        "options"
                      );
                    },
                    set: function (e) {
                      this.controller_.valueController.props.set("options", e);
                    }
                  },
                  {
                    key: "value",
                    get: function () {
                      return this.controller_.valueController.value.rawValue;
                    },
                    set: function (e) {
                      this.controller_.valueController.value.rawValue = e;
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = t.bind(this);
                      return (
                        this.emitter_.on(e, function (e) {
                          n(e.event);
                        }),
                        this
                      );
                    }
                  }
                ])
              );
            })(n),
            oa = (function (e) {
              function t(e) {
                var n;
                return (
                  b(this, t),
                  ((n = h(this, t, [e])).emitter_ = new C()),
                  n.controller_.valueController.value.emitter.on(
                    "change",
                    function (e) {
                      n.emitter_.emit("change", {
                        event: new r(d(n), e.rawValue)
                      });
                    }
                  ),
                  n
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "label",
                    get: function () {
                      return this.controller_.props.get("label");
                    },
                    set: function (e) {
                      this.controller_.props.set("label", e);
                    }
                  },
                  {
                    key: "maxValue",
                    get: function () {
                      return this.controller_.valueController.sliderController.props.get(
                        "maxValue"
                      );
                    },
                    set: function (e) {
                      this.controller_.valueController.sliderController.props.set(
                        "maxValue",
                        e
                      );
                    }
                  },
                  {
                    key: "minValue",
                    get: function () {
                      return this.controller_.valueController.sliderController.props.get(
                        "minValue"
                      );
                    },
                    set: function (e) {
                      this.controller_.valueController.sliderController.props.set(
                        "minValue",
                        e
                      );
                    }
                  },
                  {
                    key: "value",
                    get: function () {
                      return this.controller_.valueController.value.rawValue;
                    },
                    set: function (e) {
                      this.controller_.valueController.value.rawValue = e;
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = t.bind(this);
                      return (
                        this.emitter_.on(e, function (e) {
                          n(e.event);
                        }),
                        this
                      );
                    }
                  }
                ])
              );
            })(n),
            sa = (function (e) {
              function t(e) {
                var n;
                return (
                  b(this, t),
                  ((n = h(this, t, [e])).emitter_ = new C()),
                  n.controller_.valueController.value.emitter.on(
                    "change",
                    function (e) {
                      n.emitter_.emit("change", {
                        event: new r(d(n), e.rawValue)
                      });
                    }
                  ),
                  n
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "label",
                    get: function () {
                      return this.controller_.props.get("label");
                    },
                    set: function (e) {
                      this.controller_.props.set("label", e);
                    }
                  },
                  {
                    key: "formatter",
                    get: function () {
                      return this.controller_.valueController.props.get(
                        "formatter"
                      );
                    },
                    set: function (e) {
                      this.controller_.valueController.props.set(
                        "formatter",
                        e
                      );
                    }
                  },
                  {
                    key: "value",
                    get: function () {
                      return this.controller_.valueController.value.rawValue;
                    },
                    set: function (e) {
                      this.controller_.valueController.value.rawValue = e;
                    }
                  },
                  {
                    key: "on",
                    value: function (e, t) {
                      var n = t.bind(this);
                      return (
                        this.emitter_.on(e, function (e) {
                          n(e.event);
                        }),
                        this
                      );
                    }
                  }
                ])
              );
            })(n),
            la = {
              id: "list",
              type: "blade",
              accept: function (e) {
                var t = j,
                  n = q(e, {
                    options: t.required.custom(bn),
                    value: t.required.raw,
                    view: t.required.constant("list"),
                    label: t.optional.string
                  });
                return n ? { params: n } : null;
              },
              controller: function (e) {
                var t = new pt(Sn(e.params.options)),
                  n = V(e.params.value, { constraint: t }),
                  i = new _t(e.document, {
                    props: new H({ options: t.values.value("options") }),
                    value: n,
                    viewProps: e.viewProps
                  });
                return new Ve(e.document, {
                  blade: e.blade,
                  props: H.fromObject({ label: e.params.label }),
                  valueController: i
                });
              },
              api: function (e) {
                return e.controller instanceof Ve &&
                  e.controller.valueController instanceof _t
                  ? new aa(e.controller)
                  : null;
              }
            };
          var ua = (function (e) {
              function t(e, n) {
                return b(this, t), h(this, t, [e, n]);
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "element",
                    get: function () {
                      return this.controller_.view.element;
                    }
                  },
                  {
                    key: "importPreset",
                    value: function (e) {
                      (function (e, t) {
                        e.forEach(function (e) {
                          var n = t[e.target.presetKey];
                          void 0 !== n && e.writer(e.target, e.reader(n));
                        });
                      })(
                        this.controller_.rackController.rack
                          .find(Se)
                          .map(function (e) {
                            return e.binding;
                          }),
                        e
                      ),
                        this.refresh();
                    }
                  },
                  {
                    key: "exportPreset",
                    value: function () {
                      var e = this.controller_.rackController.rack
                        .find(Se)
                        .map(function (e) {
                          return e.binding.target;
                        });
                      return e.reduce(function (e, t) {
                        return Object.assign(e, c({}, t.presetKey, t.read()));
                      }, {});
                    }
                  },
                  {
                    key: "refresh",
                    value: function () {
                      this.controller_.rackController.rack
                        .find(Se)
                        .forEach(function (e) {
                          e.binding.read();
                        }),
                        this.controller_.rackController.rack
                          .find(Te)
                          .forEach(function (e) {
                            e.binding.read();
                          });
                    }
                  }
                ])
              );
            })(Ae),
            ca = (function (e) {
              function t(e, n) {
                return (
                  b(this, t),
                  h(this, t, [
                    e,
                    {
                      expanded: n.expanded,
                      blade: n.blade,
                      props: n.props,
                      root: !0,
                      viewProps: n.viewProps
                    }
                  ])
                );
              }
              return v(t, e), w(t);
            })(Be),
            ha = {
              id: "slider",
              type: "blade",
              accept: function (e) {
                var t = j,
                  n = q(e, {
                    max: t.required.number,
                    min: t.required.number,
                    view: t.required.constant("slider"),
                    format: t.optional.function,
                    label: t.optional.string,
                    value: t.optional.number
                  });
                return n ? { params: n } : null;
              },
              controller: function (e) {
                var t,
                  n,
                  i = null !== (t = e.params.value) && void 0 !== t ? t : 0,
                  r = new dt({ max: e.params.max, min: e.params.min }),
                  a = new _n(e.document, {
                    baseStep: 1,
                    parser: Wt,
                    sliderProps: new H({
                      maxValue: r.values.value("max"),
                      minValue: r.values.value("min")
                    }),
                    textProps: H.fromObject({
                      draggingScale: En(void 0, i),
                      formatter:
                        null !== (n = e.params.format) && void 0 !== n ? n : qt
                    }),
                    value: V(i, { constraint: r }),
                    viewProps: e.viewProps
                  });
                return new Ve(e.document, {
                  blade: e.blade,
                  props: H.fromObject({ label: e.params.label }),
                  valueController: a
                });
              },
              api: function (e) {
                return e.controller instanceof Ve &&
                  e.controller.valueController instanceof _n
                  ? new oa(e.controller)
                  : null;
              }
            },
            da = {
              id: "text",
              type: "blade",
              accept: function (e) {
                var t = j,
                  n = q(e, {
                    parse: t.required.function,
                    value: t.required.raw,
                    view: t.required.constant("text"),
                    format: t.optional.function,
                    label: t.optional.string
                  });
                return n ? { params: n } : null;
              },
              controller: function (e) {
                var t,
                  n = new Mt(e.document, {
                    parser: e.params.parse,
                    props: H.fromObject({
                      formatter:
                        null !== (t = e.params.format) && void 0 !== t
                          ? t
                          : function (e) {
                              return String(e);
                            }
                    }),
                    value: V(e.params.value),
                    viewProps: e.viewProps
                  });
                return new Ve(e.document, {
                  blade: e.blade,
                  props: H.fromObject({ label: e.params.label }),
                  valueController: n
                });
              },
              api: function (e) {
                return e.controller instanceof Ve &&
                  e.controller.valueController instanceof Mt
                  ? new sa(e.controller)
                  : null;
              }
            };
          function pa(e, t, n) {
            if (!e.querySelector("style[data-tp-style=".concat(t, "]"))) {
              var i = e.createElement("style");
              (i.dataset.tpStyle = t),
                (i.textContent = n),
                e.head.appendChild(i);
            }
          }
          var fa = (function (e) {
              function t(e) {
                var n, i, r;
                b(this, t);
                var a,
                  o = null != e ? e : {},
                  s = null !== (i = o.document) && void 0 !== i ? i : re(),
                  l =
                    ((a = new Zr()),
                    [
                      ra,
                      Er,
                      Lr,
                      Rr,
                      dr,
                      ar,
                      rr,
                      tr,
                      Pn,
                      Vr,
                      Xr,
                      Kr,
                      fe,
                      ze,
                      qe,
                      it
                    ].forEach(function (e) {
                      a.register(e);
                    }),
                    a);
                return (
                  ((n = h(this, t, [
                    new ca(s, {
                      expanded: o.expanded,
                      blade: me(),
                      props: H.fromObject({ title: o.title }),
                      viewProps: J.create()
                    }),
                    l
                  ])).pool_ = l),
                  (n.containerElem_ =
                    null !== (r = o.container) && void 0 !== r
                      ? r
                      : (function (e) {
                          var t = e.createElement("div");
                          return (
                            t.classList.add(A("dfw")()),
                            e.body && e.body.appendChild(t),
                            t
                          );
                        })(s)),
                  n.containerElem_.appendChild(n.element),
                  (n.doc_ = s),
                  (n.usesDefaultWrapper_ = !o.container),
                  n.setUpDefaultPlugins_(),
                  n
                );
              }
              return (
                v(t, e),
                w(t, [
                  {
                    key: "document",
                    get: function () {
                      if (!this.doc_) throw T.alreadyDisposed();
                      return this.doc_;
                    }
                  },
                  {
                    key: "dispose",
                    value: function () {
                      var e = this.containerElem_;
                      if (!e) throw T.alreadyDisposed();
                      if (this.usesDefaultWrapper_) {
                        var n = e.parentElement;
                        n && n.removeChild(e);
                      }
                      (this.containerElem_ = null),
                        (this.doc_ = null),
                        (function (e, t, n) {
                          var i = a(f(e.prototype), "dispose", n);
                          return "function" == typeof i
                            ? function (e) {
                                return i.apply(n, e);
                              }
                            : i;
                        })(
                          t,
                          0,
                          this
                        )([]);
                    }
                  },
                  {
                    key: "registerPlugin",
                    value: function (e) {
                      var t = this;
                      ("plugin" in e
                        ? [e.plugin]
                        : "plugins" in e
                        ? e.plugins
                        : []
                      ).forEach(function (e) {
                        t.pool_.register(e), t.embedPluginStyle_(e);
                      });
                    }
                  },
                  {
                    key: "embedPluginStyle_",
                    value: function (e) {
                      e.css && pa(this.document, "plugin-".concat(e.id), e.css);
                    }
                  },
                  {
                    key: "setUpDefaultPlugins_",
                    value: function () {
                      var e = this;
                      pa(
                        this.document,
                        "default",
                        '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'
                      ),
                        this.pool_.getAll().forEach(function (t) {
                          e.embedPluginStyle_(t);
                        }),
                        this.registerPlugin({ plugins: [ha, la, it, da] });
                    }
                  }
                ])
              );
            })(ua),
            va = new t("3.1.10");
          (e.BladeApi = n),
            (e.ButtonApi = E),
            (e.FolderApi = Ae),
            (e.InputBindingApi = we),
            (e.ListApi = aa),
            (e.MonitorBindingApi = Me),
            (e.Pane = fa),
            (e.SeparatorApi = He),
            (e.SliderApi = oa),
            (e.TabApi = Qe),
            (e.TabPageApi = Je),
            (e.TextApi = sa),
            (e.TpChangeEvent = r),
            (e.VERSION = va),
            Object.defineProperty(e, "__esModule", { value: !0 });
        })(t);
      })(0, Qr);
      var $r = Qr;
      function ea(e) {
        var t = e.changedTouches ? e.changedTouches[0] : e;
        return { x: t.clientX, y: t.clientY };
      }
      function ta(e) {
        var t,
          n =
            arguments.length > 1 && void 0 !== arguments[1]
              ? arguments[1]
              : 200;
        return function () {
          for (
            var i = this, r = arguments.length, a = new Array(r), o = 0;
            o < r;
            o++
          )
            a[o] = arguments[o];
          clearTimeout(t),
            (t = setTimeout(function () {
              e.apply(i, a);
            }, n));
        };
      }
      function na() {
        var e,
          t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
        Yr.enablePane &&
          ((!t && Yr.isHiddenPane) ||
            ((Yr.isHiddenPane = !0),
            (null === (e = Yr.pane) || void 0 === e
              ? void 0
              : e.element.parentElement) &&
              (Yr.pane.element.parentElement.style.visibility = "hidden")));
      }
      var ia = ta(function () {
          Yr.enablePane && Yr.pane.refresh();
        }),
        ra = navigator.userAgent,
        aa = navigator.platform,
        oa = /Edg/.test(ra),
        sa = /Chrome/.test(ra),
        la = /CriOS/.test(ra),
        ua = !oa && !sa && /Safari/.test(ra),
        ca =
          (/Win/.test(aa),
          /iPad/.test(ra) ||
            (/Macintosh/.test(ra) && "ontouchend" in document)),
        ha = /iPhone|iPod/.test(ra) || ca,
        da = /Android/i.test(ra),
        pa = ha || da;
      ca || (da && ra.match(/Android.+Mobile/));
      var fa = !1;
      try {
        var va = Object.defineProperty({}, "passive", {
          get: function () {
            fa = !0;
          }
        });
        window.addEventListener("testPassive", null, va),
          window.removeEventListener("testPassive", null, va);
      } catch (e) {
        fa = !1;
      }
      var ma,
        ga = !!fa && { passive: !0 },
        _a = (window._GLOBAL_.listenersScroll =
          window._GLOBAL_.listenersScroll || []),
        ya = (function (e) {
          var t,
            n =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 200,
            i = 0;
          return function () {
            var r = arguments,
              a = this,
              o = performance.now() - i,
              s = function () {
                e.apply(a, r), (i = performance.now());
              };
            t || s(),
              t && clearTimeout(t),
              o > n ? s() : (t = setTimeout(s, n));
          };
        })(function () {
          var e = window.scrollY;
          ma = _a.length;
          for (var t = 0; t < ma; t++) _a[t](e);
        }, 100),
        ba = window.matchMedia(
          "screen and (max-width: ".concat(Yr.breakpoint - 1, "px)")
        ),
        xa = window.matchMedia(
          "screen and (min-width: "
            .concat(Yr.breakpoint, "px) and (max-width: ")
            .concat(Yr.baseWidthMinPc - 1, "px)")
        ),
        wa = window.matchMedia(
          "screen and (min-width: ".concat(
            Yr.breakpoint,
            "px) and (orientation: portrait)"
          )
        ),
        Sa = window.matchMedia("screen and (orientation: portrait)"),
        Ma = (window._GLOBAL_.media =
          window._GLOBAL_.media ||
          (function () {
            var e = {};
            return (
              Object.defineProperty(e, "isSp", {
                get: function () {
                  return ba.matches;
                }
              }),
              Object.defineProperty(e, "isTb", {
                get: function () {
                  return xa.matches;
                }
              }),
              Object.defineProperty(e, "isTbPortrait", {
                get: function () {
                  return wa.matches;
                }
              }),
              Object.defineProperty(e, "isPortrait", {
                get: function () {
                  return Sa.matches;
                }
              }),
              e
            );
          })()),
        Ta = (window._GLOBAL_.listenersResize =
          window._GLOBAL_.listenersResize || []),
        ka = (window._GLOBAL_.listenersResizeAlways =
          window._GLOBAL_.listenersResizeAlways || []),
        Ea = (window._GLOBAL_.listenersResetSize =
          window._GLOBAL_.listenersResetSize || []),
        Ca = (window._GLOBAL_.listenersOrientationchange =
          window._GLOBAL_.listenersOrientationchange || []);
      function Da(e) {
        arguments.length > 1 &&
          void 0 !== arguments[1] &&
          arguments[1] &&
          requestAnimationFrame(function () {
            var t = Ua();
            e(r(r({}, t), {}, { isForce: !1 }));
          }),
          Ta.push(e);
      }
      function Aa(e) {
        Ta.some(function (t, n) {
          return t === e && (Ta.splice(n, 1), !0);
        });
      }
      function Pa(e) {
        arguments.length > 1 &&
          void 0 !== arguments[1] &&
          arguments[1] &&
          requestAnimationFrame(function () {
            var t = Ua();
            e(r(r({}, t), {}, { isForce: !1 }));
          }),
          ka.push(e);
      }
      function La(e) {
        ka.some(function (t, n) {
          return t === e && (ka.splice(n, 1), !0);
        });
      }
      function Ra(e) {
        arguments.length > 1 &&
          void 0 !== arguments[1] &&
          arguments[1] &&
          requestAnimationFrame(function () {
            var t = Ua();
            e(r(r({}, t), {}, { isForce: !1 }));
          }),
          Ea.push(e);
      }
      function Ia(e) {
        Ea.some(function (t, n) {
          return t === e && (Ea.splice(n, 1), !0);
        });
      }
      function Oa(e) {
        arguments.length > 1 &&
          void 0 !== arguments[1] &&
          arguments[1] &&
          requestAnimationFrame(function () {
            var t = 0 !== window.orientation;
            e(t);
          }),
          Ca.push(e);
      }
      function Na(e) {
        Ca.some(function (t, n) {
          return t === e && (Ca.splice(n, 1), !0);
        });
      }
      var Fa = ta(function () {
        var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
          t = Ua(),
          n = t.windowWidth,
          i = { windowWidth: n, windowHeight: t.windowHeight, isForce: e };
        Ba();
        for (var r = 0; r < ka.length; r++) ka[r](i);
        if (e || !pa || Yr.windowWidth !== n) {
          (Yr.windowWidth = n), za();
          for (var a = 0; a < Ea.length; a++) Ea[a](i);
          for (var o = 0; o < Ta.length; o++) Ta[o](i);
          ya();
        }
      }, 100);
      function Ua() {
        return {
          windowWidth: (Yr.windowWidth = window.innerWidth),
          windowHeight: (Yr.windowHeight = window.innerHeight)
        };
      }
      function Ba() {
        var e = 0;
        if (Ma.isSp) {
          if (la) e = 68;
          else if (ha && ua) {
            var t = window.screen;
            e = t.width / t.height > 0.5 ? 42 : 100;
          } else e = da ? 72 : 100;
        } else ca && ua && (e = 39);
        (Yr.statusBarHeight = e),
          document.documentElement.style.setProperty("--sbh", e + "px");
      }
      function za() {
        var e = 0.01 * window.innerHeight;
        document.documentElement.style.setProperty("--vh", "".concat(e, "px"));
      }
      var Va = Object.freeze(
          Object.defineProperty(
            {
              __proto__: null,
              emitResize: Fa,
              getStatusBarHeight: Ba,
              getVh: za,
              getWindowSize: Ua,
              init: function () {
                window.addEventListener("resize", function () {
                  requestAnimationFrame(function () {
                    Fa();
                  });
                }),
                  window.addEventListener("orientationchange", function () {
                    for (
                      var e = 0 !== window.orientation, t = 0;
                      t < Ca.length;
                      t++
                    )
                      Ca[t](e);
                  });
              },
              offOrientationchange: Na,
              offResetSize: Ia,
              offResize: Aa,
              offResizeAlways: La,
              onOrientationchange: Oa,
              onResetSize: Ra,
              onResize: Da,
              onResizeAlways: Pa
            },
            Symbol.toStringTag,
            { value: "Module" }
          )
        ),
        Ha = (window._GLOBAL_.eventBus = window._GLOBAL_.eventBus || {
          _listeners: {},
          emit: function (e) {
            if (this._listeners[e]) {
              for (
                var t = this._listeners[e].slice(),
                  n = arguments.length,
                  i = new Array(n > 1 ? n - 1 : 0),
                  r = 1;
                r < n;
                r++
              )
                i[r - 1] = arguments[r];
              for (var a = 0; a < t.length; a++) t[a].apply(t, i);
            }
          },
          on: function (e, t) {
            this._listeners[e] || (this._listeners[e] = []),
              this._listeners[e].push(t);
          },
          once: function (e, t) {
            var n = this;
            this._listeners[e] || (this._listeners[e] = []);
            var i = function () {
              n.off(e, i), t.apply(void 0, arguments);
            };
            this._listeners[e].push(i);
          },
          off: function (e, t) {
            var n = this._listeners[e];
            !n ||
              0 === n.length ||
              (n.some(function (e, i) {
                return e === t && (n.splice(i, 1), !0);
              }),
              0 === n.length && delete this._listeners[e]);
          }
        }),
        Ga = { exports: {} };
      function Wa() {}
      (Wa.prototype = {
        on: function (e, t, n) {
          var i = this.e || (this.e = {});
          return (i[e] || (i[e] = [])).push({ fn: t, ctx: n }), this;
        },
        once: function (e, t, n) {
          var i = this;
          function r() {
            i.off(e, r), t.apply(n, arguments);
          }
          return (r._ = t), this.on(e, r, n);
        },
        emit: function (e) {
          for (
            var t = [].slice.call(arguments, 1),
              n = ((this.e || (this.e = {}))[e] || []).slice(),
              i = 0,
              r = n.length;
            i < r;
            i++
          )
            n[i].fn.apply(n[i].ctx, t);
          return this;
        },
        off: function (e, t) {
          var n = this.e || (this.e = {}),
            i = n[e],
            r = [];
          if (i && t)
            for (var a = 0, o = i.length; a < o; a++)
              i[a].fn !== t && i[a].fn._ !== t && r.push(i[a]);
          return r.length ? (n[e] = r) : delete n[e], this;
        }
      }),
        (Ga.exports = Wa),
        (Ga.exports.TinyEmitter = Wa);
      var ja = H(Ga.exports),
        qa = (function () {
          return w(
            function e(t) {
              b(this, e),
                (this.wrap = document.querySelector("[data-router-wrapper]")),
                (this.properties = t),
                (this.Transition = t.transition
                  ? new t.transition.class(this.wrap, t.transition.name)
                  : null);
            },
            [
              {
                key: "setup",
                value: function () {
                  this.onEnter && this.onEnter(),
                    this.onEnterCompleted && this.onEnterCompleted();
                }
              },
              {
                key: "add",
                value: function () {
                  this.wrap.insertAdjacentHTML(
                    "beforeend",
                    this.properties.view.outerHTML
                  );
                }
              },
              {
                key: "update",
                value: function () {
                  document.title = this.properties.page.title;
                }
              },
              {
                key: "show",
                value: function (t) {
                  var i = this;
                  return new Promise(
                    (function () {
                      var r = n(
                        e().mark(function n(r) {
                          return e().wrap(function (e) {
                            for (;;)
                              switch ((e.prev = e.next)) {
                                case 0:
                                  if (
                                    (i.update(),
                                    i.onEnter && i.onEnter(),
                                    (e.t0 = i.Transition),
                                    !e.t0)
                                  ) {
                                    e.next = 6;
                                    break;
                                  }
                                  return (e.next = 6), i.Transition.show(t);
                                case 6:
                                  i.onEnterCompleted && i.onEnterCompleted(),
                                    r();
                                case 8:
                                case "end":
                                  return e.stop();
                              }
                          }, n);
                        })
                      );
                      return function (e) {
                        return r.apply(this, arguments);
                      };
                    })()
                  );
                }
              },
              {
                key: "hide",
                value: function (t) {
                  var i = this;
                  return new Promise(
                    (function () {
                      var r = n(
                        e().mark(function n(r) {
                          return e().wrap(function (e) {
                            for (;;)
                              switch ((e.prev = e.next)) {
                                case 0:
                                  if (
                                    (i.onLeave && i.onLeave(),
                                    (e.t0 = i.Transition),
                                    !e.t0)
                                  ) {
                                    e.next = 5;
                                    break;
                                  }
                                  return (e.next = 5), i.Transition.hide(t);
                                case 5:
                                  i.onLeaveCompleted && i.onLeaveCompleted(),
                                    r();
                                case 7:
                                case "end":
                                  return e.stop();
                              }
                          }, n);
                        })
                      );
                      return function (e) {
                        return r.apply(this, arguments);
                      };
                    })()
                  );
                }
              }
            ]
          );
        })(),
        Ka = new window.DOMParser(),
        Xa = (function () {
          return w(
            function e(t, n) {
              b(this, e), (this.renderers = t), (this.transitions = n);
            },
            [
              {
                key: "getOrigin",
                value: function (e) {
                  var t = e.match(/(https?:\/\/[\w\-.]+)/);
                  return t ? t[1].replace(/https?:\/\//, "") : null;
                }
              },
              {
                key: "getPathname",
                value: function (e) {
                  var t = e.match(/https?:\/\/.*?(\/[\w_\-./]+)/);
                  return t ? t[1] : "/";
                }
              },
              {
                key: "getAnchor",
                value: function (e) {
                  var t = e.match(/(#.*)$/);
                  return t ? t[1] : null;
                }
              },
              {
                key: "getParams",
                value: function (e) {
                  var t = e.match(/\?([\w_\-.=&]+)/);
                  if (!t) return null;
                  for (
                    var n = t[1].split("&"), i = {}, r = 0;
                    r < n.length;
                    r++
                  ) {
                    var a = n[r].split("="),
                      o = a[0],
                      s = a[1];
                    i[o] = s;
                  }
                  return i;
                }
              },
              {
                key: "getDOM",
                value: function (e) {
                  return "string" == typeof e
                    ? Ka.parseFromString(e, "text/html")
                    : e;
                }
              },
              {
                key: "getView",
                value: function (e) {
                  return e.querySelector("[data-router-view]");
                }
              },
              {
                key: "getSlug",
                value: function (e) {
                  return e.getAttribute("data-router-view");
                }
              },
              {
                key: "getRenderer",
                value: function (e) {
                  if (!this.renderers) return Promise.resolve(qa);
                  if (e in this.renderers) {
                    var t = this.renderers[e];
                    return "function" != typeof t || qa.isPrototypeOf(t)
                      ? "function" == typeof t.then
                        ? Promise.resolve(t).then(function (e) {
                            return e.default;
                          })
                        : Promise.resolve(t)
                      : Promise.resolve(t()).then(function (e) {
                          return e.default;
                        });
                  }
                  return Promise.resolve(qa);
                }
              },
              {
                key: "getTransition",
                value: function (e) {
                  return this.transitions
                    ? e in this.transitions
                      ? { class: this.transitions[e], name: e }
                      : "default" in this.transitions
                      ? { class: this.transitions.default, name: "default" }
                      : null
                    : null;
                }
              },
              {
                key: "getProperties",
                value: function (e) {
                  var t = this.getDOM(e),
                    n = this.getView(t),
                    i = this.getSlug(n);
                  return {
                    page: t,
                    view: n,
                    slug: i,
                    renderer: this.getRenderer(i, this.renderers),
                    transition: this.getTransition(i, this.transitions)
                  };
                }
              },
              {
                key: "getLocation",
                value: function (e) {
                  return {
                    href: e,
                    anchor: this.getAnchor(e),
                    origin: this.getOrigin(e),
                    params: this.getParams(e),
                    pathname: this.getPathname(e)
                  };
                }
              }
            ]
          );
        })(),
        Ya = (function (t) {
          function i() {
            var e,
              t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : {},
              n = t.renderers,
              r = t.transitions;
            return (
              b(this, i),
              ((e = h(this, i)).Helpers = new Xa(n, r)),
              (e.Transitions = r),
              (e.Contextual = !1),
              (e.location = e.Helpers.getLocation(window.location.href)),
              (e.properties = e.Helpers.getProperties(document.cloneNode(!0))),
              (e.popping = !1),
              (e.running = !1),
              (e.trigger = null),
              (e.direction = null),
              (e.historyCount =
                Number(sessionStorage.getItem("historyCount")) || 0),
              (e.prevHistoryCount = e.historyCount),
              (e.cache = new Map()),
              (e.cacheFetch = new Map()),
              (e.cacheIntersectionObserver = new Map()),
              setTimeout(function () {
                e.fetchPage(e.location.pathname);
              }, 500),
              e.properties.renderer.then(function (t) {
                (e.From = new t(e.properties)), e.From.setup();
              }),
              (e._navigate = e.navigate.bind(d(e))),
              window.addEventListener("popstate", e.popState.bind(d(e))),
              (e.detach = e.attach(
                document.querySelectorAll(e.getSelectorLink())
              )),
              window.addEventListener("pagehide", function () {
                sessionStorage.setItem("historyCount", e.historyCount);
              }),
              e
            );
          }
          return (
            v(i, t),
            w(i, [
              {
                key: "attachAll",
                value: function () {
                  var e = (
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : document
                  ).querySelectorAll(this.getSelectorLink());
                  return { links: e, detach: this.attach(e) };
                }
              },
              {
                key: "attach",
                value: function (e) {
                  var t = this,
                    n = u(e).map(function (e) {
                      e.addEventListener("click", t._navigate);
                      var n = t.listenPrefetch(e);
                      return function () {
                        e.removeEventListener("click", t._navigate), n();
                      };
                    });
                  return function () {
                    n.forEach(function (e) {
                      e();
                    });
                  };
                }
              },
              {
                key: "navigate",
                value: function (e) {
                  if (!e.metaKey && !e.ctrlKey) {
                    e.preventDefault();
                    var t =
                      !!e.currentTarget.hasAttribute("data-transition") &&
                      e.currentTarget.dataset.transition;
                    this.redirect(e.currentTarget.href, t, e.currentTarget);
                  }
                }
              },
              {
                key: "redirect",
                value: function (e) {
                  var t =
                      arguments.length > 1 &&
                      void 0 !== arguments[1] &&
                      arguments[1],
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : "script";
                  if (
                    ((this.trigger = n),
                    !this.running && e !== this.location.href)
                  ) {
                    var i = this.Helpers.getLocation(e);
                    (this.Contextual = !1),
                      t &&
                        ((this.Contextual =
                          this.Transitions.contextual[t].prototype),
                        (this.Contextual.name = t)),
                      i.origin !== this.location.origin ||
                      (i.anchor && i.pathname === this.location.pathname)
                        ? (window.location.href = e)
                        : ((this.location = i), this.beforeFetch());
                  }
                }
              },
              {
                key: "popState",
                value: function (e) {
                  var t, n;
                  (this.trigger = "popstate"),
                    (null === (t = e.state) || void 0 === t
                      ? void 0
                      : t.count) > this.historyCount
                      ? (this.direction = "forward")
                      : (this.direction = "back"),
                    (this.historyCount =
                      (null === (n = e.state) || void 0 === n
                        ? void 0
                        : n.count) || 0),
                    (this.Contextual = !1);
                  var i = this.Helpers.getLocation(window.location.href);
                  this.location.pathname !== i.pathname ||
                  (!this.location.anchor && !i.anchor)
                    ? ((this.popping = !0),
                      (this.location = i),
                      this.beforeFetch())
                    : (this.location = i);
                }
              },
              {
                key: "pushState",
                value: function () {
                  this.popping ||
                    window.history.pushState(
                      { count: ++this.historyCount },
                      "",
                      this.location.href
                    );
                }
              },
              {
                key: "fetch",
                value: (function (e) {
                  function t(t) {
                    return e.apply(this, arguments);
                  }
                  return (
                    (t.toString = function () {
                      return e.toString();
                    }),
                    t
                  );
                })(
                  (function () {
                    var t = n(
                      e().mark(function t(n) {
                        var i,
                          r,
                          a = arguments;
                        return e().wrap(
                          function (e) {
                            for (;;)
                              switch ((e.prev = e.next)) {
                                case 0:
                                  if (
                                    ((i =
                                      a.length > 1 && void 0 !== a[1] && a[1]),
                                    !this.cacheFetch.has(n))
                                  ) {
                                    e.next = 3;
                                    break;
                                  }
                                  return e.abrupt(
                                    "return",
                                    this.cacheFetch.get(n)
                                  );
                                case 3:
                                  return (
                                    (e.next = 5),
                                    fetch(n, {
                                      mode: "same-origin",
                                      method: "GET",
                                      headers: {
                                        "X-Requested-With": "Highway"
                                      },
                                      credentials: "same-origin"
                                    })
                                  );
                                case 5:
                                  if (
                                    !(
                                      (r = e.sent).status >= 200 &&
                                      r.status < 300
                                    )
                                  ) {
                                    e.next = 8;
                                    break;
                                  }
                                  return e.abrupt(
                                    "return",
                                    (this.cacheFetch.set(n, r), r)
                                  );
                                case 8:
                                  if (!i) {
                                    e.next = 12;
                                    break;
                                  }
                                  (window.location.href = n), (e.next = 13);
                                  break;
                                case 12:
                                  return e.abrupt(
                                    "return",
                                    (this.cacheFetch.set(n, null), null)
                                  );
                                case 13:
                                case "end":
                                  return e.stop();
                              }
                          },
                          t,
                          this
                        );
                      })
                    );
                    return function (e) {
                      return t.apply(this, arguments);
                    };
                  })()
                )
              },
              {
                key: "fetchPage",
                value:
                  ((o = n(
                    e().mark(function t(i) {
                      var r,
                        a,
                        o = this,
                        s = arguments;
                      return e().wrap(
                        function (t) {
                          for (;;)
                            switch ((t.prev = t.next)) {
                              case 0:
                                if (
                                  ((r =
                                    s.length > 1 && void 0 !== s[1] && s[1]),
                                  !this.cache.has(i))
                                ) {
                                  t.next = 3;
                                  break;
                                }
                                return t.abrupt("return", this.cache.get(i));
                              case 3:
                                return (
                                  (a = n(
                                    e().mark(function t() {
                                      var n, a;
                                      return e().wrap(function (e) {
                                        for (;;)
                                          switch ((e.prev = e.next)) {
                                            case 0:
                                              return (
                                                (e.next = 2), o.fetch(i, r)
                                              );
                                            case 2:
                                              if ((n = e.sent)) {
                                                e.next = 5;
                                                break;
                                              }
                                              return e.abrupt(
                                                "return",
                                                (o.cache.set(i, n), null)
                                              );
                                            case 5:
                                              return (
                                                (e.t0 = o.Helpers),
                                                (e.next = 8),
                                                n.text()
                                              );
                                            case 8:
                                              return (
                                                (e.t1 = e.sent),
                                                (a = e.t0.getProperties.call(
                                                  e.t0,
                                                  e.t1
                                                )),
                                                e.abrupt(
                                                  "return",
                                                  (o.cache.set(i, a), a)
                                                )
                                              );
                                            case 11:
                                            case "end":
                                              return e.stop();
                                          }
                                      }, t);
                                    })
                                  )()),
                                  t.abrupt("return", (this.cache.set(i, a), a))
                                );
                              case 5:
                              case "end":
                                return t.stop();
                            }
                        },
                        t,
                        this
                      );
                    })
                  )),
                  function (e) {
                    return o.apply(this, arguments);
                  })
              },
              {
                key: "listenPrefetch",
                value: function (e) {
                  var t = this;
                  if (this.cache.has(e.pathname)) return function () {};
                  if ("routerDisablePrefetch" in e.dataset) {
                    var n = function () {
                      t.fetchPage(e.pathname);
                    };
                    return (
                      e.addEventListener("mouseenter", n, { once: !0 }),
                      function () {
                        e.removeEventListener("mouseenter", n, { once: !0 });
                      }
                    );
                  }
                  var i = this.getIntersectionObserver();
                  return (
                    i.observe(e),
                    function () {
                      i.unobserve(e);
                    }
                  );
                }
              },
              {
                key: "getIntersectionObserver",
                value: function () {
                  var e,
                    t = this,
                    n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0;
                  return (
                    this.cacheIntersectionObserver.has(n)
                      ? (e = this.cacheIntersectionObserver.get(n))
                      : ((e = new IntersectionObserver(
                          function (n) {
                            n.forEach(function (n) {
                              if (n.isIntersecting) {
                                var i = n.target;
                                t.fetchPage(i.pathname), e.unobserve(i);
                              }
                            });
                          },
                          { threshold: n }
                        )),
                        this.cacheIntersectionObserver.set(n, e)),
                    e
                  );
                }
              },
              {
                key: "beforeFetch",
                value:
                  ((a = n(
                    e().mark(function t() {
                      var n, i;
                      return e().wrap(
                        function (e) {
                          for (;;)
                            switch ((e.prev = e.next)) {
                              case 0:
                                return (
                                  this.pushState(),
                                  (this.running = !0),
                                  this.emit("NAVIGATE_OUT", {
                                    from: {
                                      page: this.From.properties.page,
                                      view: this.From.properties.view
                                    },
                                    trigger: this.trigger,
                                    direction: this.direction,
                                    historyCount: this.historyCount,
                                    prevHistoryCount: this.prevHistoryCount,
                                    location: this.location
                                  }),
                                  (n = {
                                    trigger: this.trigger,
                                    direction: this.direction,
                                    historyCount: this.historyCount,
                                    prevHistoryCount: this.prevHistoryCount,
                                    contextual: this.Contextual
                                  }),
                                  (e.next = 4),
                                  Promise.all([
                                    this.fetchPage(this.location.pathname, !0),
                                    this.From.hide(n)
                                  ])
                                );
                              case 4:
                                (i = e.sent),
                                  (this.properties = i[0]),
                                  this.afterFetch();
                              case 6:
                              case "end":
                                return e.stop();
                            }
                        },
                        t,
                        this
                      );
                    })
                  )),
                  function () {
                    return a.apply(this, arguments);
                  })
              },
              {
                key: "afterFetch",
                value:
                  ((r = n(
                    e().mark(function t() {
                      var n;
                      return e().wrap(
                        function (e) {
                          for (;;)
                            switch ((e.prev = e.next)) {
                              case 0:
                                return (e.next = 2), this.properties.renderer;
                              case 2:
                                return (
                                  (n = e.sent),
                                  (this.To = new n(this.properties)),
                                  this.To.add(),
                                  this.emit("NAVIGATE_IN", {
                                    to: {
                                      page: this.To.properties.page,
                                      view: this.To.wrap.lastElementChild
                                    },
                                    trigger: this.trigger,
                                    direction: this.direction,
                                    historyCount: this.historyCount,
                                    prevHistoryCount: this.prevHistoryCount,
                                    location: this.location
                                  }),
                                  (e.next = 8),
                                  this.To.show({
                                    trigger: this.trigger,
                                    direction: this.direction,
                                    historyCount: this.historyCount,
                                    prevHistoryCount: this.prevHistoryCount,
                                    contextual: this.Contextual
                                  })
                                );
                              case 8:
                                (this.popping = !1),
                                  (this.running = !1),
                                  this.detach(),
                                  (this.detach = this.attach(
                                    document.querySelectorAll(
                                      this.getSelectorLink()
                                    )
                                  )),
                                  this.emit("NAVIGATE_END", {
                                    to: {
                                      page: this.To.properties.page,
                                      view: this.To.wrap.lastElementChild
                                    },
                                    from: {
                                      page: this.From.properties.page,
                                      view: this.From.properties.view
                                    },
                                    trigger: this.trigger,
                                    direction: this.direction,
                                    historyCount: this.historyCount,
                                    prevHistoryCount: this.prevHistoryCount,
                                    location: this.location
                                  }),
                                  (this.From = this.To),
                                  (this.trigger = null),
                                  (this.direction = null),
                                  (this.prevHistoryCount = this.historyCount);
                              case 17:
                              case "end":
                                return e.stop();
                            }
                        },
                        t,
                        this
                      );
                    })
                  )),
                  function () {
                    return r.apply(this, arguments);
                  })
              },
              {
                key: "getSelectorLink",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : window.location.pathname;
                  return 'a[href]:not([href^="#"]):not([href^="'.concat(
                    e,
                    '#"]):not([target]):not([download]):not([data-router-disabled])'
                  );
                }
              }
            ])
          );
          var r, a, o;
        })(ja),
        Za = (function () {
          return w(
            function e(t, n) {
              b(this, e), (this.wrap = t), (this.name = n);
            },
            [
              {
                key: "show",
                value: function (e) {
                  var t = this,
                    n = e.trigger,
                    i = e.contextual,
                    r = this.wrap.lastElementChild,
                    a = this.wrap.firstElementChild;
                  return new Promise(function (e) {
                    i
                      ? (r.setAttribute("data-transition-in", i.name),
                        r.removeAttribute("data-transition-out", i.name),
                        i.in && i.in({ to: r, from: a, trigger: n, done: e }))
                      : (r.setAttribute("data-transition-in", t.name),
                        r.removeAttribute("data-transition-out", t.name),
                        t.in && t.in({ to: r, from: a, trigger: n, done: e }));
                  });
                }
              },
              {
                key: "hide",
                value: function (e) {
                  var t = this,
                    n = e.trigger,
                    i = e.contextual,
                    r = this.wrap.firstElementChild;
                  return new Promise(function (e) {
                    i
                      ? (r.setAttribute("data-transition-out", i.name),
                        r.removeAttribute("data-transition-in", i.name),
                        i.out && i.out({ from: r, trigger: n, done: e }))
                      : (r.setAttribute("data-transition-out", t.name),
                        r.removeAttribute("data-transition-in", t.name),
                        t.out && t.out({ from: r, trigger: n, done: e }));
                  });
                }
              }
            ]
          );
        })(),
        Ja = { Core: Ya, Helpers: Xa, Renderer: qa, Transition: Za },
        Qa = (window._GLOBAL_.cacheLoadImage =
          window._GLOBAL_.cacheLoadImage || {});
      function $a() {
        return (
          eo() -
          (document.scrollingElement || document.documentElement).offsetWidth
        );
      }
      function eo() {
        return pa
          ? Math.min(window.innerWidth, window.outerWidth)
          : window.innerWidth;
      }
      function to() {
        return pa
          ? Math.min(window.innerHeight, window.outerHeight)
          : window.innerHeight;
      }
      function no() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
          t = Ma.isSp ? Yr.designWidthSp : Yr.designWidthPc,
          n = Ma.isSp ? Yr.designHeightSp : Yr.designHeightPc;
        return (
          (e * (Yr.isHorizontalScroll ? to() : eo())) /
          (Yr.isHorizontalScroll ? n : t)
        );
      }
      function io() {
        (Yr.variableSizeRate = no()),
          document.documentElement.style.setProperty(
            "--variable-size-rate",
            "".concat(Yr.variableSizeRate)
          );
      }
      window._GLOBAL_.listenersLeave = window._GLOBAL_.listenersLeave || [];
      var ro = (window._GLOBAL_.listenersLeaveCompleted =
        window._GLOBAL_.listenersLeaveCompleted || []);
      window._GLOBAL_.listenersEnter = window._GLOBAL_.listenersEnter || [];
      var ao = (window._GLOBAL_.listenersEnterReady =
          window._GLOBAL_.listenersEnterReady || []),
        oo = (window._GLOBAL_.listenersEnterShow =
          window._GLOBAL_.listenersEnterShow || []);
      (window._GLOBAL_.listenersEnterCompleted =
        window._GLOBAL_.listenersEnterCompleted || []),
        (window._GLOBAL_.listenersLeaveCancelled =
          window._GLOBAL_.listenersLeaveCancelled || []),
        (window._GLOBAL_.listenersEnterCancelled =
          window._GLOBAL_.listenersEnterCancelled || []);
      var so = (window._GLOBAL_.pageState = window._GLOBAL_.pageState || {
        highway: null,
        documentTo: null,
        isDisable: !0,
        isEnter: !1,
        stylesRemoveFrom: []
      });
      function lo(e) {
        return uo.apply(this, arguments);
      }
      function uo() {
        return (
          (uo = n(
            e().mark(function t(n) {
              return e().wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      if (so.isDisable) {
                        e.next = 2;
                        break;
                      }
                      return e.abrupt(
                        "return",
                        Yr.isInitializedAsynchronousTransition
                          ? n()
                          : new Promise(function (e) {
                              Ha.once(
                                "initializedAsynchronousTransition",
                                function () {
                                  e(n());
                                }
                              );
                            })
                      );
                    case 2:
                    case "end":
                      return e.stop();
                  }
              }, t);
            })
          )),
          uo.apply(this, arguments)
        );
      }
      function co() {
        var e =
          arguments.length > 0 && void 0 !== arguments[0]
            ? arguments[0]
            : Yr.pageIdPrev;
        Ha.emit("destroyCompletely", e);
      }
      function ho() {
        so.stylesRemoveFrom.forEach(function (e) {
          e && e.remove();
        }),
          (so.stylesRemoveFrom = []);
      }
      function po() {
        return fo.apply(this, arguments);
      }
      function fo() {
        return (
          (fo = n(
            e().mark(function t() {
              var n,
                i = arguments;
              return e().wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      return (
                        (n = i.length > 0 && void 0 !== i[0] ? i[0] : document),
                        e.abrupt(
                          "return",
                          so.isDisable
                            ? void 0
                            : lo(function () {
                                return so.highway.attachAll(n);
                              })
                        )
                      );
                    case 2:
                    case "end":
                      return e.stop();
                  }
              }, t);
            })
          )),
          fo.apply(this, arguments)
        );
      }
      function vo() {
        return Yr.isPopstate
          ? Yr.cScroll.scrollToPrevPagePosition()
          : Yr.cScroll.scrollToAnchor({ immediate: !0 });
      }
      function mo() {
        Ha.emit("leaveCompleted", Yr.pageId, Yr.pageIdPrev),
          ro.forEach(function (e) {
            e(Yr.pageId, Yr.pageIdPrev);
          });
      }
      function go() {
        Ha.emit("enterShow", Yr.pageId, Yr.pageIdPrev),
          oo.forEach(function (e) {
            e(Yr.pageId, Yr.pageIdPrev);
          });
      }
      var _o = {
        components: [],
        componentsLocal: {},
        componentsPermanent: [],
        elsPermanent: null
      };
      function yo(e) {
        var t,
          n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
          i = n.delay,
          r = void 0 === i ? 0 : i,
          a = n.priority,
          o = void 0 === a ? 0 : a,
          s = n.isLocal;
        void 0 !== s && s
          ? (t = _o.componentsLocal[Yr.pageId]) ||
            (t = _o.componentsLocal[Yr.pageId] = [])
          : (t = _o.components),
          t[o] || (t[o] = []),
          t[o].push(e),
          r
            ? setTimeout(function () {
                xo(e);
              }, r)
            : xo(e);
      }
      function bo() {
        var e,
          t =
            arguments.length > 0 && void 0 !== arguments[0]
              ? arguments[0]
              : document,
          n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        n
          ? _o.components.forEach(function (e) {
              null == e ||
                e.forEach(function (e) {
                  e.createAll(t, { isPermanent: n });
                });
            })
          : (_o.components.forEach(function (e) {
              null == e ||
                e.forEach(function (e) {
                  e.createAll(t);
                });
            }),
            null === (e = _o.componentsLocal[Yr.pageId]) ||
              void 0 === e ||
              e.forEach(function (e) {
                null == e ||
                  e.forEach(function (e) {
                    e.createAll(t);
                  });
              }));
      }
      function xo(e) {
        (arguments.length > 1 && void 0 !== arguments[1] && arguments[1]) ||
          e.createAll(Yr.view),
          _o.elsPermanent.forEach(function (t) {
            e.createAll(t, { isPermanent: !0 });
          });
      }
      var wo = (window._GLOBAL_.pageComponents =
        window._GLOBAL_.pageComponents || {});
      function So() {
        return Yr.pageId;
      }
      function Mo() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0]
              ? arguments[0]
              : document,
          t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        bo(e),
          (function (e) {
            var t = e.querySelector("[data-fixed-local]");
            t &&
              ((document.querySelector(
                "[data-fixed-local-container]"
              ).innerHTML = ""),
              document
                .querySelector("[data-fixed-local-container]")
                .appendChild(t));
          })(e);
        var n = wo[So()],
          i = function (e) {
            new e(), Ha.emit("initPageJs"), t && Ha.emit("loadedStyles");
          };
        n
          ? i(n)
          : Ha.once("readyPage", function () {
              i(wo[So()]);
            });
      }
      pa && document.documentElement.classList.add("bMobile");
      var To = {
        id: "",
        modalOpened: null,
        targetFixedFull: null,
        scrollY: 0,
        overflowY: "",
        height: "",
        padding: 0
      };
      function ko() {
        if (
          (To.modalOpened && To.modalOpened.el.scrollTo(0, 0),
          (To.targetFixedFull = document.querySelectorAll(
            "body, [data-fixed], .tp-dfwv"
          )),
          (To.padding = $a()),
          To.padding)
        ) {
          var e = "".concat(To.padding, "px");
          To.targetFixedFull.forEach(function (t) {
            t.style.paddingRight = e;
          });
        }
        (To.scrollY = window.pageYOffset),
          (To.height = document.body.style.height),
          (To.overflowY = document.documentElement.style.overflowY),
          (document.documentElement.style.overflowY = "hidden");
        var t = document.body.style;
        (t.position = "fixed"),
          (t.top = "-".concat(To.scrollY, "px")),
          (t.width = "100%"),
          (t.height = "100%");
      }
      function Eo() {
        document.documentElement.style.overflowY = To.overflowY;
        var e = document.body.style;
        (e.position = ""),
          (e.top = ""),
          (e.width = ""),
          (e.height = To.height),
          window.scrollTo(0, To.scrollY),
          To.padding &&
            To.targetFixedFull.forEach(function (e) {
              e.style.paddingRight = "";
            });
      }
      Ha.on("openModal", function (e) {
        (Yr.isOpenModal = !0),
          (To.id = e),
          Ha.emit("beforeSetModalStyle", To.id),
          (To.modalOpened = Yr.modals[To.id]),
          ko(),
          Ha.emit("startOpenModal", To.id),
          To.modalOpened.open(function () {
            Ha.emit("completeOpenModal", To.id);
          });
      }),
        Ha.on("closeModal", function (e) {
          var t =
            arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
          To.modalOpened &&
            (Ha.emit("beforeResetModalStyle", To.id),
            Eo(),
            (Yr.isOpenModal = !1),
            Ha.emit("startCloseModal", To.id),
            To.modalOpened.close(function () {
              (To.modalOpened = null), Ha.emit("completeCloseModal", To.id);
            }, t));
        });
      var Co = { root: null, rootMargin: "0px 0px 0px 0px", threshold: [0] },
        Do = (function () {
          return w(
            function e() {
              var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : {};
              b(this, e),
                V(this, "options", void 0),
                V(this, "targetSelector", void 0),
                V(this, "defaultOption", void 0),
                V(this, "observerSets", []),
                V(this, "id", 0),
                (this.options = t),
                (this.targetSelector = t.targetSelector || "[data-view]"),
                (this.defaultOption = t.defaultOption || Co);
            },
            [
              {
                key: "add",
                value: function (e) {
                  var t = this,
                    n = e.el,
                    i = e.callback,
                    r = e.param,
                    a = void 0 === r ? {} : r,
                    o = e.once,
                    s = void 0 !== o && o,
                    l = this.getData({ el: n, callback: i, param: a, once: s });
                  if (l)
                    return (
                      this.setObserve(l),
                      {
                        destroy: function () {
                          t.remove(l);
                        }
                      }
                    );
                }
              },
              {
                key: "remove",
                value: function (e) {
                  if (e) {
                    var t = e.observerSet,
                      n = void 0 === t ? {} : t,
                      i = n.observer,
                      r = n.listeners,
                      a = e.el;
                    null != i && i.unobserve(a),
                      null == r || r.splice(r.indexOf(e), 1);
                  }
                }
              },
              {
                key: "setObserve",
                value: function (e) {
                  for (
                    var t,
                      n = this,
                      i = e.param,
                      r = i.root,
                      a = i.rootMargin,
                      o = i.threshold,
                      s = function () {
                        var t = n.observerSets[l],
                          i = t.param;
                        if (
                          r === i.root &&
                          a === i.rootMargin &&
                          o.every(function (e, t) {
                            return e === i.threshold[t];
                          })
                        ) {
                          var s = t.observer,
                            u = t.listeners;
                          return (
                            s.observe(e.el),
                            (e.observerSet = t),
                            u.push(e),
                            { v: void 0 }
                          );
                        }
                      },
                      l = 0;
                    l < this.observerSets.length;
                    l = (l + 1) | 0
                  )
                    if ((t = s())) return t.v;
                  var u = [e],
                    c = new IntersectionObserver(function (e, t) {
                      n.checkView(e, t, u);
                    }, e.param);
                  c.observe(e.el);
                  var h = { observer: c, param: e.param, listeners: u };
                  (e.observerSet = h), this.observerSets.push(h);
                }
              },
              {
                key: "checkView",
                value: function (e, t, n) {
                  for (var i = 0; i < e.length; i = (i + 1) | 0)
                    for (var r = e[i], a = 0; a < n.length; a = (a + 1) | 0) {
                      var o = n[a];
                      o.el === r.target &&
                        (o.callback(r),
                        o.once &&
                          r.isIntersecting &&
                          (t.unobserve(o.el), n.splice(n.indexOf(o), 1)));
                    }
                }
              },
              {
                key: "getData",
                value: function (e) {
                  var t = e.el,
                    n = e.callback,
                    i = e.param,
                    r = e.once;
                  if (t) {
                    if ("string" == typeof t) {
                      var a = t;
                      if (!(t = document.querySelector(a)))
                        return void console.error(
                          'No matching element found for the given selector "'.concat(
                            a,
                            '".'
                          )
                        );
                    }
                    return {
                      el: t,
                      name: "view" + this.id++,
                      param: {
                        root:
                          (t.dataset.viewRoot &&
                            document.querySelector(t.dataset.viewRoot)) ||
                          i.root ||
                          this.defaultOption.root,
                        rootMargin:
                          t.dataset.viewMargin ||
                          i.rootMargin ||
                          this.defaultOption.rootMargin,
                        threshold: t.dataset.viewThreshold
                          ? t.dataset.viewThreshold
                              .split(",")
                              .map(function (e) {
                                return Number(e);
                              })
                          : Array.isArray(i.threshold)
                          ? i.threshold
                          : i.threshold
                          ? [i.threshold]
                          : this.defaultOption.threshold
                      },
                      once: "viewOnce" in t.dataset || r,
                      callback: n
                    };
                  }
                }
              }
            ]
          );
        })();
      function Ao() {
        document.documentElement.style.setProperty(
          "--scroll-bar-width",
          $a() + "px"
        );
      }
      function Po(e) {
        return (function (e) {
          return String(e).padStart(2, "0");
        })(e);
      }
      var Lo = [
        "autoCSS",
        "callbackScope",
        "delay",
        "duration",
        "ease",
        "immediateRender",
        "lazy",
        "onComplete",
        "onCompleteParams",
        "onCompleteScope",
        "onStart",
        "onStartParams",
        "onStartScope",
        "onOverwrite",
        "onRepeat",
        "onRepeatParams",
        "onRepeatScope",
        "onReverseComplete",
        "onReverseCompleteParams",
        "onReverseCompleteScope",
        "onUpdate",
        "onUpdateParams",
        "onUpdateScope",
        "overwrite",
        "paused",
        "repeat",
        "repeatDelay",
        "startAt",
        "useFrames",
        "yoyo",
        "yoyoEase",
        "clearProps"
      ];
      function Ro(e, t) {
        var n = (function (e) {
          var t = {};
          return (
            Object.keys(e).forEach(function (e) {
              Lo.some(function (t) {
                return e === t;
              }) || (t[e] = !0);
            }),
            t
          );
        })(t);
        return gsap.killTweensOf(e, n), n;
      }
      var Io = (window._GLOBAL_.cacheTimeline =
          window._GLOBAL_.cacheTimeline || {}),
        Oo = function (e, t) {
          return e && 0 !== e.length
            ? Array.isArray(t)
              ? Promise.all(
                  t.map(function (t) {
                    return Ro(e, t), gsap.to(e, t);
                  })
                )
              : (Ro(e, t), gsap.to(e, t))
            : Promise.resolve();
        },
        No = function (e, t, n) {
          return e && 0 !== e.length
            ? Array.isArray(t)
              ? Promise.all(
                  t.map(function (t) {
                    var n = g(t, 2),
                      i = n[0],
                      r = n[1];
                    return Ro(e, r), gsap.fromTo(e, i, r);
                  })
                )
              : (Ro(e, n), gsap.fromTo(e, t, n))
            : Promise.resolve();
        },
        Fo = function (e, t) {
          return e && 0 !== e.length
            ? (Ro(e, t), gsap.set(e, t))
            : Promise.resolve();
        },
        Uo = function (e, t) {
          return (
            t && t in Io && Io[t].pause().kill(), (Io[t] = gsap.timeline(e))
          );
        },
        Bo = function (e, t) {
          return e && 0 !== e.length
            ? (t.duration || (t.duration = 0.05),
              t.ease || (t.ease = "expo.out"),
              "overwrite" in t || (t.overwrite = !0),
              gsap.to(e, t))
            : Promise.resolve();
        };
      function zo(e) {
        return new Promise(function (t) {
          setTimeout(t, 1e3 * e);
        });
      }
      var Vo = { isPullAddressBar: !1 },
        Ho = !1,
        Go = (function (t) {
          function i() {
            return b(this, i), h(this, i, arguments);
          }
          return (
            v(i, t),
            w(i, [
              {
                key: "out",
                value:
                  ((r = n(
                    e().mark(function t(n) {
                      var i, r, a, o;
                      return e().wrap(function (e) {
                        for (;;)
                          switch ((e.prev = e.next)) {
                            case 0:
                              (i = n.from),
                                (r = n.done),
                                pa
                                  ? (i.classList.add(
                                      "-show",
                                      "-out",
                                      "-immediate"
                                    ),
                                    co())
                                  : ((Ho = "back" === Yr.popDirection),
                                    gsap.set(i.parentElement, {
                                      height: i.offsetHeight
                                    }),
                                    i.style.setProperty(
                                      "--view-y",
                                      "".concat(-Yr.scrollY, "px")
                                    ),
                                    (o = ["-show", "-out"]),
                                    Ho && o.push("-back"),
                                    i.classList.remove("-in", "-back"),
                                    (a = i.classList).add.apply(a, o),
                                    Oo(i, [
                                      {
                                        opacity: 0,
                                        duration: (Ma.isSp, 0.1),
                                        ease: "power2.in"
                                      }
                                    ]).then(function () {
                                      co();
                                    })),
                                (Vo.isPullAddressBar =
                                  pa &&
                                  !Yr.isOpenModal &&
                                  window.innerHeight > Yr.windowHeightInitial),
                                Vo.isPullAddressBar
                                  ? (ko(), requestAnimationFrame(r))
                                  : r();
                            case 3:
                            case "end":
                              return e.stop();
                          }
                      }, t);
                    })
                  )),
                  function (e) {
                    return r.apply(this, arguments);
                  })
              },
              {
                key: "in",
                value: function (t) {
                  var i = t.from,
                    r = t.to,
                    a = t.done;
                  new Promise(function (e) {
                    Vo.isPullAddressBar
                      ? requestAnimationFrame(function () {
                          Eo(), e();
                        })
                      : e();
                  })
                    .then(function () {
                      new Promise(function (e) {
                        Ha.once("initPageJs", e);
                      });
                      var e = (function () {
                          for (
                            var e = document.querySelector("#main-style"),
                              t =
                                'head > :is(style:not([data-tp-style]), link[rel="stylesheet"], link[rel="preload"]):not([data-no-reload])',
                              n = document.querySelectorAll(t),
                              i = u(n),
                              r = so.documentTo.querySelectorAll(t),
                              a = u(r),
                              o = 0;
                            o < n.length;
                            o++
                          )
                            for (var s = n[o], c = 0; c < r.length; c++) {
                              var h = r[c];
                              if (s.outerHTML === h.outerHTML) {
                                (i[o] = null), (a[c] = null);
                                break;
                              }
                            }
                          so.stylesRemoveFrom = i.map(function (e, t) {
                            return e && n[t];
                          });
                          var d,
                            p = [],
                            f = l(a);
                          try {
                            var v = function () {
                              var t = d.value;
                              if (!t) return 1;
                              for (
                                var n = document.createElement(t.tagName),
                                  i = 0;
                                i < t.attributes.length;
                                i++
                              ) {
                                var r = t.attributes[i];
                                n.setAttribute(r.nodeName, r.nodeValue);
                              }
                              "STYLE" === t.tagName &&
                                t.innerHTML &&
                                (n.innerHTML = t.innerHTML),
                                p.push(
                                  new Promise(function (e) {
                                    n.onload = function () {
                                      e();
                                    };
                                  })
                                );
                              var a = t.parentNode.tagName;
                              "HEAD" === a && document.head.insertBefore(n, e),
                                "BODY" === a && document.body.appendChild(n);
                            };
                            for (f.s(); !(d = f.n()).done; ) v();
                          } catch (e) {
                            f.e(e);
                          } finally {
                            f.f();
                          }
                          return Promise.all(p).then(function () {
                            (Yr.isLoadedStyles = !0), Ha.emit("loadedStyles");
                          });
                        })(),
                        t = (function () {
                          for (
                            var e = document.querySelector("#main-script"),
                              t = "head > script:not([data-no-reload])",
                              n = u(so.documentTo.querySelectorAll(t)),
                              i = u(document.querySelectorAll(t)),
                              r = 0;
                            r < i.length;
                            r++
                          )
                            for (var a = i[r], s = 0; s < n.length; s++) {
                              var c = n[s];
                              if (a.outerHTML === c.outerHTML) {
                                for (
                                  var h = document.createElement(a.tagName),
                                    d = 0;
                                  d < a.attributes.length;
                                  d++
                                ) {
                                  var p = a.attributes[d];
                                  h.setAttribute(p.nodeName, p.nodeValue);
                                }
                                a.innerHTML && (h.innerHTML = a.innerHTML),
                                  a.parentNode.replaceChild(h, a),
                                  i.splice(r, 1),
                                  n.splice(s, 1);
                                break;
                              }
                            }
                          var f,
                            v = l(i);
                          try {
                            for (v.s(); !(f = v.n()).done; ) {
                              var m = f.value;
                              m.parentNode.removeChild(m);
                            }
                          } catch (e) {
                            v.e(e);
                          } finally {
                            v.f();
                          }
                          var g,
                            _ = [],
                            y = l(n);
                          try {
                            var b = function () {
                              for (
                                var t = g.value,
                                  n = document.createElement(t.tagName),
                                  i = 0;
                                i < t.attributes.length;
                                i++
                              ) {
                                var r = t.attributes[i];
                                n.setAttribute(r.nodeName, r.nodeValue);
                              }
                              t.innerHTML && (n.innerHTML = t.innerHTML);
                              var a = t.getAttribute("src");
                              "module" === t.getAttribute("type") &&
                                a &&
                                q(function () {
                                  return o(761)(a);
                                }, []),
                                _.push(
                                  new Promise(function (e) {
                                    n.onload = function () {
                                      e();
                                    };
                                  })
                                );
                              var s = t.parentNode.tagName;
                              "HEAD" === s && document.head.appendChild(n),
                                "BODY" === s &&
                                  document.body.insertBefore(n, e);
                            };
                            for (y.s(); !(g = y.n()).done; ) b();
                          } catch (e) {
                            y.e(e);
                          } finally {
                            y.f();
                          }
                          return Promise.all(_).then(function () {
                            (Yr.isLoadedStyles = !0), Ha.emit("loadedStyles");
                          });
                        })().then(function () {
                          Mo(r);
                        }),
                        n = (function (e) {
                          var t =
                              arguments.length > 1 &&
                              void 0 !== arguments[1] &&
                              arguments[1],
                            n =
                              "object" == M(e) &&
                              "Array" === e.constructor.name,
                            i = [];
                          return (
                            (n ? e : [e]).forEach(function (e) {
                              var n = Qa[e];
                              if (n) i.push(Promise.resolve(n));
                              else {
                                var r = document.createElement("img");
                                t && (r.crossOrigin = "anonymous"), (r.src = e);
                                var a = (function (e) {
                                  return new Promise(function (t) {
                                    e.complete
                                      ? t(e)
                                      : e.addEventListener("load", function () {
                                          t(e);
                                        });
                                  });
                                })(r);
                                a.then(function () {
                                  Qa[e] = r;
                                }),
                                  i.push(a);
                              }
                            }),
                            n ? Promise.all(i) : i[0]
                          );
                        })(
                          (function () {
                            return u(
                              (arguments.length > 0 && void 0 !== arguments[0]
                                ? arguments[0]
                                : document
                              ).querySelectorAll(
                                'link[rel="preload"][as="image"]'.concat(
                                  Ma.isSp
                                    ? ":not([data-preload-pc])"
                                    : ":not([data-preload-sp])"
                                )
                              )
                            ).map(function (e) {
                              return e.href;
                            });
                          })(so.documentTo)
                        );
                      return Promise.all([e, t, n]);
                    })
                    .then(
                      n(
                        e().mark(function t() {
                          var n, a;
                          return e().wrap(function (e) {
                            for (;;)
                              switch ((e.prev = e.next)) {
                                case 0:
                                  if (
                                    (Ha.emit(
                                      "enterReady",
                                      Yr.pageId,
                                      Yr.pageIdPrev
                                    ),
                                    ao.forEach(function (e) {
                                      e(Yr.pageId, Yr.pageIdPrev);
                                    }),
                                    !pa)
                                  ) {
                                    e.next = 15;
                                    break;
                                  }
                                  return (
                                    r.classList.remove("-out"),
                                    r.classList.add(
                                      "-show",
                                      "-in",
                                      "-immediate"
                                    ),
                                    (e.next = 5),
                                    zo(0)
                                  );
                                case 5:
                                  return (e.next = 7), vo();
                                case 7:
                                  go(),
                                    mo(),
                                    i.remove(),
                                    ho(),
                                    r.classList.remove("-in"),
                                    Yr.cScroll.update(),
                                    (e.next = 23);
                                  break;
                                case 15:
                                  return (
                                    r.style.setProperty(
                                      "--view-y",
                                      "".concat(
                                        (((Yr.isPopstate
                                          ? Yr.cScroll.getStorageScrollY()
                                          : 0) +
                                          0.5 * window.innerHeight) /
                                          r.offsetHeight) *
                                          100,
                                        "%"
                                      )
                                    ),
                                    (a = ["-show", "-in"]),
                                    Ho && a.push("-back"),
                                    r.classList.remove("-out", "-back"),
                                    (n = r.classList).add.apply(n, a),
                                    (e.next = 22),
                                    vo()
                                  );
                                case 22:
                                  return e.abrupt(
                                    "return",
                                    No(
                                      r,
                                      { opacity: 0 },
                                      {
                                        opacity: 1,
                                        duration: (Ma.isSp, 0.3),
                                        ease: "power2.out",
                                        delay: 0,
                                        onStart: function () {
                                          go();
                                        },
                                        onComplete: function () {
                                          mo(),
                                            i.remove(),
                                            ho(),
                                            (r.parentElement.style.height = ""),
                                            r.classList.remove("-in", "-back"),
                                            Yr.cScroll.update(),
                                            gsap.set([r], { clearProps: !0 });
                                        }
                                      }
                                    )
                                  );
                                case 23:
                                case "end":
                                  return e.stop();
                              }
                          }, t);
                        })
                      )
                    )
                    .then(a);
                }
              }
            ])
          );
          var r;
        })(Ja.Transition);
      function Wo() {
        return (
          (Wo = Object.assign
            ? Object.assign.bind()
            : function (e) {
                for (var t = 1; t < arguments.length; t++) {
                  var n = arguments[t];
                  for (var i in n)
                    Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]);
                }
                return e;
              }),
          Wo.apply(this, arguments)
        );
      }
      function jo(e, t, n) {
        return Math.max(e, Math.min(t, n));
      }
      var qo = (function () {
        return w(
          function e() {
            b(this, e);
          },
          [
            {
              key: "advance",
              value: function (e) {
                var t;
                if (this.isRunning) {
                  var n,
                    i = !1;
                  if (this.lerp)
                    (this.value =
                      (1 - (n = this.lerp)) * this.value + n * this.to),
                      Math.round(this.value) === this.to &&
                        ((this.value = this.to), (i = !0));
                  else {
                    this.currentTime += e;
                    var r = jo(0, this.currentTime / this.duration, 1),
                      a = (i = r >= 1) ? 1 : this.easing(r);
                    this.value = this.from + (this.to - this.from) * a;
                  }
                  null == (t = this.onUpdate) ||
                    t.call(this, this.value, { completed: i }),
                    i && this.stop();
                }
              }
            },
            {
              key: "stop",
              value: function () {
                this.isRunning = !1;
              }
            },
            {
              key: "fromTo",
              value: function (e, t, n) {
                var i = n.lerp,
                  r = void 0 === i ? 0.1 : i,
                  a = n.duration,
                  o = void 0 === a ? 1 : a,
                  s = n.easing,
                  l =
                    void 0 === s
                      ? function (e) {
                          return e;
                        }
                      : s,
                  u = n.onUpdate;
                (this.from = this.value = e),
                  (this.to = t),
                  (this.lerp = r),
                  (this.duration = o),
                  (this.easing = l),
                  (this.currentTime = 0),
                  (this.isRunning = !0),
                  (this.onUpdate = u);
              }
            }
          ]
        );
      })();
      function Ko(e, t) {
        var n;
        return function () {
          var i = arguments,
            r = this;
          clearTimeout(n),
            (n = setTimeout(function () {
              e.apply(r, i);
            }, t));
        };
      }
      var Xo,
        Yo,
        Zo,
        Jo,
        Qo,
        $o,
        es,
        ts,
        ns = (function () {
          return w(
            function e(t, n) {
              var i = this;
              b(this, e),
                (this.onWindowResize = function () {
                  (i.width = window.innerWidth),
                    (i.height = window.innerHeight);
                }),
                (this.onWrapperResize = function () {
                  (i.width = i.wrapper.clientWidth),
                    (i.height = i.wrapper.clientHeight);
                }),
                (this.onContentResize = function () {
                  var e =
                    i.wrapper === window ? document.documentElement : i.wrapper;
                  (i.scrollHeight = e.scrollHeight),
                    (i.scrollWidth = e.scrollWidth);
                }),
                (this.wrapper = t),
                (this.content = n),
                this.wrapper === window
                  ? (window.addEventListener("resize", this.onWindowResize, !1),
                    this.onWindowResize())
                  : ((this.wrapperResizeObserver = new ResizeObserver(
                      Ko(this.onWrapperResize, 100)
                    )),
                    this.wrapperResizeObserver.observe(this.wrapper),
                    this.onWrapperResize()),
                (this.contentResizeObserver = new ResizeObserver(
                  Ko(this.onContentResize, 100)
                )),
                this.contentResizeObserver.observe(this.content),
                this.onContentResize();
            },
            [
              {
                key: "destroy",
                value: function () {
                  var e, t;
                  window.removeEventListener("resize", this.onWindowResize, !1),
                    null == (e = this.wrapperResizeObserver) || e.disconnect(),
                    null == (t = this.contentResizeObserver) || t.disconnect();
                }
              },
              {
                key: "limit",
                get: function () {
                  return {
                    x: this.scrollWidth - this.width,
                    y: this.scrollHeight - this.height
                  };
                }
              }
            ]
          );
        })(),
        is = function () {
          return {
            events: {},
            emit: function (e) {
              for (
                var t = this.events[e] || [],
                  n = arguments.length,
                  i = new Array(n > 1 ? n - 1 : 0),
                  r = 1;
                r < n;
                r++
              )
                i[r - 1] = arguments[r];
              for (var a = 0, o = t.length; a < o; a++) t[a].apply(t, i);
            },
            on: function (e, t) {
              var n,
                i = this;
              return (
                (null != (n = this.events[e]) && n.push(t)) ||
                  (this.events[e] = [t]),
                function () {
                  var n;
                  i.events[e] =
                    null == (n = i.events[e])
                      ? void 0
                      : n.filter(function (e) {
                          return t !== e;
                        });
                }
              );
            }
          };
        },
        rs = (function () {
          return w(
            function e(t, n) {
              var i = this,
                r = n.wheelMultiplier,
                a = void 0 === r ? 1 : r,
                o = n.touchMultiplier,
                s = void 0 === o ? 2 : o,
                l = n.normalizeWheel,
                u = void 0 !== l && l;
              b(this, e),
                (this.onTouchStart = function (e) {
                  var t = e.targetTouches ? e.targetTouches[0] : e,
                    n = t.clientX,
                    r = t.clientY;
                  (i.touchStart.x = n),
                    (i.touchStart.y = r),
                    (i.lastDelta = { x: 0, y: 0 });
                }),
                (this.onTouchMove = function (e) {
                  var t = e.targetTouches ? e.targetTouches[0] : e,
                    n = t.clientX,
                    r = t.clientY,
                    a = -(n - i.touchStart.x) * i.touchMultiplier,
                    o = -(r - i.touchStart.y) * i.touchMultiplier;
                  (i.touchStart.x = n),
                    (i.touchStart.y = r),
                    (i.lastDelta = { x: a, y: o }),
                    i.emitter.emit("scroll", {
                      type: "touch",
                      deltaX: a,
                      deltaY: o,
                      event: e
                    });
                }),
                (this.onTouchEnd = function (e) {
                  i.emitter.emit("scroll", {
                    type: "touch",
                    inertia: !0,
                    deltaX: i.lastDelta.x,
                    deltaY: i.lastDelta.y,
                    event: e
                  });
                }),
                (this.onWheel = function (e) {
                  var t = e.deltaX,
                    n = e.deltaY;
                  i.normalizeWheel &&
                    ((t = jo(-100, t, 100)), (n = jo(-100, n, 100))),
                    (t *= i.wheelMultiplier),
                    (n *= i.wheelMultiplier),
                    i.emitter.emit("scroll", {
                      type: "wheel",
                      deltaX: t,
                      deltaY: n,
                      event: e
                    });
                }),
                (this.element = t),
                (this.wheelMultiplier = a),
                (this.touchMultiplier = s),
                (this.normalizeWheel = u),
                (this.touchStart = { x: null, y: null }),
                (this.emitter = is()),
                this.element.addEventListener("wheel", this.onWheel, {
                  passive: !1
                }),
                this.element.addEventListener("touchstart", this.onTouchStart, {
                  passive: !1
                }),
                this.element.addEventListener("touchmove", this.onTouchMove, {
                  passive: !1
                }),
                this.element.addEventListener("touchend", this.onTouchEnd, {
                  passive: !1
                });
            },
            [
              {
                key: "on",
                value: function (e, t) {
                  return this.emitter.on(e, t);
                }
              },
              {
                key: "destroy",
                value: function () {
                  (this.emitter.events = {}),
                    this.element.removeEventListener("wheel", this.onWheel, {
                      passive: !1
                    }),
                    this.element.removeEventListener(
                      "touchstart",
                      this.onTouchStart,
                      { passive: !1 }
                    ),
                    this.element.removeEventListener(
                      "touchmove",
                      this.onTouchMove,
                      { passive: !1 }
                    ),
                    this.element.removeEventListener(
                      "touchend",
                      this.onTouchEnd,
                      { passive: !1 }
                    );
                }
              }
            ]
          );
        })(),
        as = (function () {
          return w(
            function e() {
              var t = this,
                n =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                i = n.direction,
                r = n.gestureDirection,
                a = n.mouseMultiplier,
                o = n.smooth,
                s = n.wrapper,
                l = void 0 === s ? window : s,
                u = n.content,
                c = void 0 === u ? document.documentElement : u,
                h = n.wheelEventsTarget,
                d = void 0 === h ? l : h,
                p = n.smoothWheel,
                f = void 0 === p ? null == o || o : p,
                v = n.smoothTouch,
                m = void 0 !== v && v,
                g = n.syncTouch,
                _ = void 0 !== g && g,
                y = n.syncTouchLerp,
                x = void 0 === y ? 0.1 : y,
                w = n.touchInertiaMultiplier,
                S = void 0 === w ? 35 : w,
                M = n.duration,
                T = n.easing,
                k =
                  void 0 === T
                    ? function (e) {
                        return Math.min(1, 1.001 - Math.pow(2, -10 * e));
                      }
                    : T,
                E = n.lerp,
                C = void 0 === E ? (M ? null : 0.1) : E,
                D = n.infinite,
                A = void 0 !== D && D,
                P = n.orientation,
                L = void 0 === P ? (null != i ? i : "vertical") : P,
                R = n.gestureOrientation,
                I = void 0 === R ? (null != r ? r : "vertical") : R,
                O = n.touchMultiplier,
                N = void 0 === O ? 1 : O,
                F = n.wheelMultiplier,
                U = void 0 === F ? (null != a ? a : 1) : F,
                B = n.normalizeWheel,
                z = void 0 !== B && B;
              b(this, e),
                (this.onVirtualScroll = function (e) {
                  var n = e.type,
                    i = e.inertia,
                    r = e.deltaX,
                    a = e.deltaY,
                    o = e.event;
                  if (!o.ctrlKey) {
                    var s = "touch" === n,
                      l = "wheel" === n;
                    if (
                      !(
                        ("vertical" === t.options.gestureOrientation &&
                          0 === a) ||
                        ("horizontal" === t.options.gestureOrientation &&
                          0 === r) ||
                        (s &&
                          "vertical" === t.options.gestureOrientation &&
                          0 === t.scroll &&
                          !t.options.infinite &&
                          a <= 0) ||
                        o.composedPath().find(function (e) {
                          return null == e || null == e.hasAttribute
                            ? void 0
                            : e.hasAttribute("data-lenis-prevent");
                        })
                      )
                    )
                      if (t.isStopped || t.isLocked) o.preventDefault();
                      else {
                        if (
                          ((t.isSmooth =
                            ((t.options.smoothTouch || t.options.syncTouch) &&
                              s) ||
                            (t.options.smoothWheel && l)),
                          !t.isSmooth)
                        )
                          return (t.isScrolling = !1), void t.animate.stop();
                        o.preventDefault();
                        var u = a;
                        "both" === t.options.gestureOrientation
                          ? (u = Math.abs(a) > Math.abs(r) ? a : r)
                          : "horizontal" === t.options.gestureOrientation &&
                            (u = r);
                        var c = s && t.options.syncTouch,
                          h = s && i && Math.abs(u) > 1;
                        h &&
                          (u = t.velocity * t.options.touchInertiaMultiplier),
                          t.scrollTo(
                            t.targetScroll + u,
                            Wo(
                              { programmatic: !1 },
                              c && { lerp: h ? t.syncTouchLerp : 0.4 }
                            )
                          );
                      }
                  }
                }),
                (this.onScroll = function () {
                  if (!t.isScrolling) {
                    var e = t.animatedScroll;
                    (t.animatedScroll = t.targetScroll = t.actualScroll),
                      (t.velocity = 0),
                      (t.direction = Math.sign(t.animatedScroll - e)),
                      t.emit();
                  }
                }),
                i &&
                  console.warn(
                    "Lenis: `direction` option is deprecated, use `orientation` instead"
                  ),
                r &&
                  console.warn(
                    "Lenis: `gestureDirection` option is deprecated, use `gestureOrientation` instead"
                  ),
                a &&
                  console.warn(
                    "Lenis: `mouseMultiplier` option is deprecated, use `wheelMultiplier` instead"
                  ),
                o &&
                  console.warn(
                    "Lenis: `smooth` option is deprecated, use `smoothWheel` instead"
                  ),
                (window.lenisVersion = "1.0.10"),
                (l !== document.documentElement && l !== document.body) ||
                  (l = window),
                (this.options = {
                  wrapper: l,
                  content: c,
                  wheelEventsTarget: d,
                  smoothWheel: f,
                  smoothTouch: m,
                  syncTouch: _,
                  syncTouchLerp: x,
                  touchInertiaMultiplier: S,
                  duration: M,
                  easing: k,
                  lerp: C,
                  infinite: A,
                  gestureOrientation: I,
                  orientation: L,
                  touchMultiplier: N,
                  wheelMultiplier: U,
                  normalizeWheel: z
                }),
                (this.dimensions = new ns(l, c)),
                this.rootElement.classList.add("lenis"),
                (this.velocity = 0),
                (this.isStopped = !1),
                (this.isSmooth = f || m),
                (this.isScrolling = !1),
                (this.targetScroll = this.animatedScroll = this.actualScroll),
                (this.animate = new qo()),
                (this.emitter = is()),
                this.options.wrapper.addEventListener("scroll", this.onScroll, {
                  passive: !1
                }),
                (this.virtualScroll = new rs(d, {
                  touchMultiplier: N,
                  wheelMultiplier: U,
                  normalizeWheel: z
                })),
                this.virtualScroll.on("scroll", this.onVirtualScroll);
            },
            [
              {
                key: "destroy",
                value: function () {
                  (this.emitter.events = {}),
                    this.options.wrapper.removeEventListener(
                      "scroll",
                      this.onScroll,
                      { passive: !1 }
                    ),
                    this.virtualScroll.destroy();
                }
              },
              {
                key: "on",
                value: function (e, t) {
                  return this.emitter.on(e, t);
                }
              },
              {
                key: "off",
                value: function (e, t) {
                  var n;
                  this.emitter.events[e] =
                    null == (n = this.emitter.events[e])
                      ? void 0
                      : n.filter(function (e) {
                          return t !== e;
                        });
                }
              },
              {
                key: "setScroll",
                value: function (e) {
                  this.isHorizontal
                    ? (this.rootElement.scrollLeft = e)
                    : (this.rootElement.scrollTop = e);
                }
              },
              {
                key: "emit",
                value: function () {
                  this.emitter.emit("scroll", this);
                }
              },
              {
                key: "reset",
                value: function () {
                  (this.isLocked = !1),
                    (this.isScrolling = !1),
                    (this.velocity = 0),
                    this.animate.stop();
                }
              },
              {
                key: "start",
                value: function () {
                  (this.isStopped = !1), this.reset();
                }
              },
              {
                key: "stop",
                value: function () {
                  (this.isStopped = !0), this.animate.stop(), this.reset();
                }
              },
              {
                key: "raf",
                value: function (e) {
                  var t = e - (this.time || e);
                  (this.time = e), this.animate.advance(0.001 * t);
                }
              },
              {
                key: "scrollTo",
                value: function (e) {
                  var t = this,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {},
                    i = n.offset,
                    r = void 0 === i ? 0 : i,
                    a = n.immediate,
                    o = void 0 !== a && a,
                    s = n.lock,
                    l = void 0 !== s && s,
                    u = n.duration,
                    c = void 0 === u ? this.options.duration : u,
                    h = n.easing,
                    d = void 0 === h ? this.options.easing : h,
                    p = n.lerp,
                    f = void 0 === p ? !c && this.options.lerp : p,
                    v = n.onComplete,
                    m = void 0 === v ? null : v,
                    g = n.force,
                    _ = void 0 !== g && g,
                    y = n.programmatic,
                    b = void 0 === y || y;
                  if (!this.isStopped || _) {
                    if (["top", "left", "start"].includes(e)) e = 0;
                    else if (["bottom", "right", "end"].includes(e))
                      e = this.limit;
                    else {
                      var x, w;
                      if (
                        ("string" == typeof e
                          ? (w = document.querySelector(e))
                          : null != (x = e) && x.nodeType && (w = e),
                        w)
                      ) {
                        if (this.options.wrapper !== window) {
                          var S = this.options.wrapper.getBoundingClientRect();
                          r -= this.isHorizontal ? S.left : S.top;
                        }
                        var M = w.getBoundingClientRect();
                        e =
                          (this.isHorizontal ? M.left : M.top) +
                          this.animatedScroll;
                      }
                    }
                    if ("number" == typeof e) {
                      if (
                        ((e += r),
                        this.options.infinite
                          ? b &&
                            (this.targetScroll = this.animatedScroll =
                              this.scroll)
                          : (e = jo(0, e, this.limit)),
                        o)
                      )
                        return (
                          (this.animatedScroll = this.targetScroll = e),
                          this.setScroll(this.scroll),
                          this.reset(),
                          this.emit(),
                          void (null == m || m())
                        );
                      if (!b) {
                        if (e === this.targetScroll) return;
                        this.targetScroll = e;
                      }
                      this.animate.fromTo(this.animatedScroll, e, {
                        duration: c,
                        easing: d,
                        lerp: f,
                        onUpdate: function (e, n) {
                          var i = n.completed;
                          l && (t.isLocked = !0),
                            (t.isScrolling = !0),
                            (t.velocity = e - t.animatedScroll),
                            (t.direction = Math.sign(t.velocity)),
                            (t.animatedScroll = e),
                            t.setScroll(t.scroll),
                            b && (t.targetScroll = e),
                            i &&
                              (l && (t.isLocked = !1),
                              requestAnimationFrame(function () {
                                t.isScrolling = !1;
                              }),
                              (t.velocity = 0),
                              null != m && m()),
                            t.emit();
                        }
                      });
                    }
                  }
                }
              },
              {
                key: "rootElement",
                get: function () {
                  return this.options.wrapper === window
                    ? this.options.content
                    : this.options.wrapper;
                }
              },
              {
                key: "limit",
                get: function () {
                  return this.isHorizontal
                    ? this.dimensions.limit.x
                    : this.dimensions.limit.y;
                }
              },
              {
                key: "isHorizontal",
                get: function () {
                  return "horizontal" === this.options.orientation;
                }
              },
              {
                key: "actualScroll",
                get: function () {
                  return this.isHorizontal
                    ? this.rootElement.scrollLeft
                    : this.rootElement.scrollTop;
                }
              },
              {
                key: "scroll",
                get: function () {
                  return this.options.infinite
                    ? (function (e, t) {
                        var n = e % t;
                        return (
                          ((t > 0 && n < 0) || (t < 0 && n > 0)) && (n += t), n
                        );
                      })(this.animatedScroll, this.limit)
                    : this.animatedScroll;
                }
              },
              {
                key: "progress",
                get: function () {
                  return 0 === this.limit ? 1 : this.scroll / this.limit;
                }
              },
              {
                key: "isSmooth",
                get: function () {
                  return this.__isSmooth;
                },
                set: function (e) {
                  this.__isSmooth !== e &&
                    (this.rootElement.classList.toggle("lenis-smooth", e),
                    (this.__isSmooth = e));
                }
              },
              {
                key: "isScrolling",
                get: function () {
                  return this.__isScrolling;
                },
                set: function (e) {
                  this.__isScrolling !== e &&
                    (this.rootElement.classList.toggle("lenis-scrolling", e),
                    (this.__isScrolling = e));
                }
              },
              {
                key: "isStopped",
                get: function () {
                  return this.__isStopped;
                },
                set: function (e) {
                  this.__isStopped !== e &&
                    (this.rootElement.classList.toggle("lenis-stopped", e),
                    (this.__isStopped = e));
                }
              }
            ]
          );
        })(),
        os = function () {
          return ("undefined" == typeof window ? "undefined" : M(window)) < "u";
        },
        ss = function () {
          return Xo || (os() && (Xo = window.gsap) && Xo.registerPlugin && Xo);
        },
        ls = function (e) {
          return "string" == typeof e;
        },
        us = function (e) {
          return "function" == typeof e;
        },
        cs = function (e, t) {
          var n = "x" === t ? "Width" : "Height",
            i = "scroll" + n,
            r = "client" + n;
          return e === Zo || e === Jo || e === Qo
            ? Math.max(Jo[i], Qo[i]) - (Zo["inner" + n] || Jo[r] || Qo[r])
            : e[i] - e["offset" + n];
        },
        hs = function (e, t) {
          var n = "scroll" + ("x" === t ? "Left" : "Top");
          return (
            e === Zo &&
              (null != e.pageXOffset
                ? (n = "page" + t.toUpperCase() + "Offset")
                : (e = null != Jo[n] ? Jo : Qo)),
            function () {
              return e[n];
            }
          );
        },
        ds = function (e, t) {
          if (!(e = $o(e)[0]) || !e.getBoundingClientRect)
            return (
              console.warn("scrollTo target doesn't exist. Using 0") || {
                x: 0,
                y: 0
              }
            );
          var n = e.getBoundingClientRect(),
            i = !t || t === Zo || t === Qo,
            r = i
              ? {
                  top:
                    Jo.clientTop -
                    (Zo.pageYOffset || Jo.scrollTop || Qo.scrollTop || 0),
                  left:
                    Jo.clientLeft -
                    (Zo.pageXOffset || Jo.scrollLeft || Qo.scrollLeft || 0)
                }
              : t.getBoundingClientRect(),
            a = { x: n.left - r.left, y: n.top - r.top };
          return !i && t && ((a.x += hs(t, "x")()), (a.y += hs(t, "y")())), a;
        },
        ps = function (e, t, n, i, r) {
          return isNaN(e) || "object" == M(e)
            ? ls(e) && "=" === e.charAt(1)
              ? parseFloat(e.substr(2)) * ("-" === e.charAt(0) ? -1 : 1) + i - r
              : "max" === e
              ? cs(t, n) - r
              : Math.min(cs(t, n), ds(e, t)[n] - r)
            : parseFloat(e) - r;
        },
        fs = function () {
          (Xo = ss()),
            os() &&
              Xo &&
              ("undefined" == typeof document ? "undefined" : M(document)) <
                "u" &&
              document.body &&
              ((Zo = window),
              (Qo = document.body),
              (Jo = document.documentElement),
              ($o = Xo.utils.toArray),
              Xo.config({ autoKillThreshold: 7 }),
              (es = Xo.config()),
              (Yo = 1));
        },
        vs = {
          version: "3.11.4",
          name: "scrollTo",
          rawVars: 1,
          register: function (e) {
            (Xo = e), fs();
          },
          init: function (e, t, n, i, r) {
            Yo || fs();
            var a = this,
              o = Xo.getProperty(e, "scrollSnapType");
            (a.isWin = e === Zo),
              (a.target = e),
              (a.tween = n),
              (t = (function (e, t, n, i) {
                if ((us(e) && (e = e(t, n, i)), "object" != M(e)))
                  return ls(e) && "max" !== e && "=" !== e.charAt(1)
                    ? { x: e, y: e }
                    : { y: e };
                if (e.nodeType) return { y: e, x: e };
                var r,
                  a = {};
                for (r in e)
                  a[r] = "onAutoKill" !== r && us(e[r]) ? e[r](t, n, i) : e[r];
                return a;
              })(t, i, e, r)),
              (a.vars = t),
              (a.autoKill = !!t.autoKill),
              (a.getX = hs(e, "x")),
              (a.getY = hs(e, "y")),
              (a.x = a.xPrev = a.getX()),
              (a.y = a.yPrev = a.getY()),
              ts || (ts = Xo.core.globals().ScrollTrigger),
              "smooth" === Xo.getProperty(e, "scrollBehavior") &&
                Xo.set(e, { scrollBehavior: "auto" }),
              o &&
                "none" !== o &&
                ((a.snap = 1),
                (a.snapInline = e.style.scrollSnapType),
                (e.style.scrollSnapType = "none")),
              null != t.x
                ? (a.add(
                    a,
                    "x",
                    a.x,
                    ps(t.x, e, "x", a.x, t.offsetX || 0),
                    i,
                    r
                  ),
                  a._props.push("scrollTo_x"))
                : (a.skipX = 1),
              null != t.y
                ? (a.add(
                    a,
                    "y",
                    a.y,
                    ps(t.y, e, "y", a.y, t.offsetY || 0),
                    i,
                    r
                  ),
                  a._props.push("scrollTo_y"))
                : (a.skipY = 1);
          },
          render: function (e, t) {
            for (
              var n,
                i,
                r,
                a,
                o,
                s = t._pt,
                l = t.target,
                u = t.tween,
                c = t.autoKill,
                h = t.xPrev,
                d = t.yPrev,
                p = t.isWin,
                f = t.snap,
                v = t.snapInline;
              s;

            )
              s.r(e, s.d), (s = s._next);
            (n = p || !t.skipX ? t.getX() : h),
              (r = (i = p || !t.skipY ? t.getY() : d) - d),
              (a = n - h),
              (o = es.autoKillThreshold),
              t.x < 0 && (t.x = 0),
              t.y < 0 && (t.y = 0),
              c &&
                (!t.skipX &&
                  (a > o || a < -o) &&
                  n < cs(l, "x") &&
                  (t.skipX = 1),
                !t.skipY &&
                  (r > o || r < -o) &&
                  i < cs(l, "y") &&
                  (t.skipY = 1),
                t.skipX &&
                  t.skipY &&
                  (u.kill(),
                  t.vars.onAutoKill &&
                    t.vars.onAutoKill.apply(u, t.vars.onAutoKillParams || []))),
              p
                ? Zo.scrollTo(t.skipX ? n : t.x, t.skipY ? i : t.y)
                : (t.skipY || (l.scrollTop = t.y),
                  t.skipX || (l.scrollLeft = t.x)),
              f &&
                (1 === e || 0 === e) &&
                ((i = l.scrollTop),
                (n = l.scrollLeft),
                v
                  ? (l.style.scrollSnapType = v)
                  : l.style.removeProperty("scroll-snap-type"),
                (l.scrollTop = i + 1),
                (l.scrollLeft = n + 1),
                (l.scrollTop = i),
                (l.scrollLeft = n)),
              (t.xPrev = t.x),
              (t.yPrev = t.y),
              ts && ts.update();
          },
          kill: function (e) {
            var t = "scrollTo" === e;
            (t || "scrollTo_x" === e) && (this.skipX = 1),
              (t || "scrollTo_y" === e) && (this.skipY = 1);
          }
        };
      (vs.max = cs),
        (vs.getOffset = ds),
        (vs.buildGetter = hs),
        ss() && Xo.registerPlugin(vs);
      var ms,
        gs,
        _s,
        ys = (window._GLOBAL_.listenersMousedown =
          window._GLOBAL_.listenersMousedown || []),
        bs = (window._GLOBAL_.listenersMousemove =
          window._GLOBAL_.listenersMousemove || []),
        xs = (window._GLOBAL_.listenersMouseup =
          window._GLOBAL_.listenersMouseup || []);
      function ws(e) {
        ys.push(e);
      }
      function Ss(e) {
        ys.some(function (t, n) {
          return t === e && (ys.splice(n, 1), !0);
        });
      }
      function Ms(e) {
        bs.push(e);
      }
      function Ts(e) {
        bs.some(function (t, n) {
          return t === e && (bs.splice(n, 1), !0);
        });
      }
      function ks(e) {
        xs.push(e);
      }
      function Es(e) {
        xs.some(function (t, n) {
          return t === e && (xs.splice(n, 1), !0);
        });
      }
      var Cs = Object.freeze(
        Object.defineProperty(
          {
            __proto__: null,
            init: function () {
              document.addEventListener(
                "mousedown",
                function (e) {
                  var t = e.clientX,
                    n = e.clientY;
                  ms = ys.length;
                  for (var i = 0; i < ms; i++) ys[i](t, n);
                },
                ga
              ),
                document.addEventListener(
                  "mousemove",
                  function (e) {
                    var t = e.clientX,
                      n = e.clientY;
                    gs = bs.length;
                    for (var i = 0; i < gs; i++) bs[i](t, n);
                  },
                  ga
                ),
                document.addEventListener(
                  "mouseup",
                  function (e) {
                    var t = e.clientX,
                      n = e.clientY;
                    _s = xs.length;
                    for (var i = 0; i < _s; i++) xs[i](t, n);
                  },
                  ga
                );
            },
            offMousedown: Ss,
            offMousemove: Ts,
            offMouseup: Es,
            onMousedown: ws,
            onMousemove: Ms,
            onMouseup: ks
          },
          Symbol.toStringTag,
          { value: "Module" }
        )
      );
      function Ds() {
        return !!Ma.isSp || "touch" === W.ask("intent");
      }
      function As(e, t) {
        var n = function (e) {
          Ds() || t(e);
        };
        return e.addEventListener("mouseenter", n, ga), n;
      }
      function Ps(e, t) {
        var n = function (e) {
          Ds() || t(e);
        };
        return e.addEventListener("mouseleave", n, ga), n;
      }
      function Ls(e, t) {
        e.removeEventListener("mouseenter", t);
      }
      function Rs(e, t) {
        e.removeEventListener("mouseleave", t);
      }
      var Is = {
          pageTop: 35,
          pageWhyUse: 1,
          pageSmbService: 2,
          pageAbout: 1,
          pageCareers: 0,
          page404: 1
        },
        Os = (window._GLOBAL_.listenersLoadProgress =
          window._GLOBAL_.listenersLoadProgress || []),
        Ns = (window._GLOBAL_.listenersLoadDone =
          window._GLOBAL_.listenersLoadDone || []);
      function Fs() {
        return (Fs = n(
          e().mark(function t() {
            return e().wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    if (Yr.loadingCountList[Yr.pageId]) {
                      e.next = 3;
                      break;
                    }
                    return (
                      Yr.view.classList.add("-show"), Gs(), e.abrupt("return")
                    );
                  case 3:
                    Us(),
                      Ha.on("leave", function () {
                        (Yr.loadingCountList[Yr.pageId] = []),
                          (Yr.isLoadStart[Yr.pageId] = !1);
                      });
                  case 4:
                  case "end":
                    return e.stop();
                }
            }, t);
          })
        )).apply(this, arguments);
      }
      function Us() {
        var e = Yr.loadingCountList[Yr.pageId];
        if (!(!e || e.length < Is[Yr.pageId] || Yr.isLoadStart[Yr.pageId])) {
          Yr.isLoadStart[Yr.pageId] = !0;
          var t = 100 / e.length,
            n = 0;
          Promise.all(
            e.map(function (e) {
              return (
                null != e &&
                  e.then(function () {
                    n += t;
                    for (
                      var e = Math.round(n), i = 0;
                      i < Os.length;
                      i = (i + 1) | 0
                    )
                      Os[i](e);
                  }),
                e
              );
            })
          ).then(function () {
            Gs();
          }),
            Yr.view.classList.add("-show");
        }
      }
      function Bs(e) {
        Os.push(e);
      }
      function zs(e) {
        Os.some(function (t, n) {
          return t === e && (Os.splice(n, 1), !0);
        });
      }
      function Vs(e) {
        Ns.push(e);
      }
      function Hs(e) {
        Ns.some(function (t, n) {
          return t === e && (Ns.splice(n, 1), !0);
        });
      }
      function Gs() {
        (Yr.isLoadDone[Yr.pageId] = !0),
          Ns.forEach(function (e) {
            e();
          });
      }
      var Ws = Object.freeze(
          Object.defineProperty(
            {
              __proto__: null,
              detectStartLoading: Us,
              init: function () {
                return Fs.apply(this, arguments);
              },
              offLoadDone: Hs,
              offLoadProgress: zs,
              onLoadDone: Vs,
              onLoadProgress: Bs
            },
            Symbol.toStringTag,
            { value: "Module" }
          )
        ),
        js = (function () {
          return w(
            function e(t, n) {
              var i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : {};
              b(this, e);
              var r = i.threshold,
                a = void 0 === r ? 0 : r,
                o = i.reset,
                s = i.isPreventDefault,
                l = void 0 !== s && s;
              (this.el = t),
                (this._callback = n),
                (this._threshold = a),
                (this.reset = o),
                (this._type = "wheel"),
                (this._isPreventDefault = l),
                (this._handler = this._onWheel.bind(this)),
                this.el.addEventListener("wheel", this._handler, {
                  passive: !this._isPreventDefault && !ua
                });
            },
            [
              {
                key: "_onWheel",
                value: function (e) {
                  var t;
                  this._isPreventDefault && e.preventDefault();
                  var n = e.deltaX,
                    i = e.deltaY;
                  if (Math.abs(i) >= Math.abs(n)) {
                    if (i > this._threshold) t = "Down";
                    else if (i < -this._threshold) t = "Up";
                    else if (this.reset) return void this.reset(i, this._type);
                  } else if (n > this._threshold) t = "Right";
                  else if (n < -this._threshold) t = "Left";
                  else if (this.reset) return void this.reset(n, this._type);
                  this._callback({
                    e,
                    diff: { y: i, x: n },
                    direction: t,
                    type: this._type
                  });
                }
              },
              {
                key: "destroy",
                value: function () {
                  this.el.removeEventListener("wheel", this._handler, ga);
                }
              }
            ]
          );
        })(),
        qs = (function () {
          return w(
            function e(t, n) {
              var i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : {};
              b(this, e);
              var r = i.threshold,
                a = void 0 === r ? 120 : r,
                o = i.isDetectOnStart,
                s = void 0 !== o && o,
                l = i.isPreventDefault,
                u = void 0 !== l && l,
                c = i.onStart,
                h = i.onUpdate,
                d = i.reset;
              (this.el = t),
                (this._callback = n),
                (this._threshold = a),
                (this._isPreventDefault = u),
                (this._onStart = c),
                (this._onUpdate = s ? n : h),
                (this.reset = d),
                (this._type = "drag"),
                (this._isStart = !1),
                (this._mousedownHandler = this._onMousedown.bind(this)),
                this.el.addEventListener(
                  "mousedown",
                  this._mousedownHandler,
                  ga
                ),
                (this._mousemoveHandler = this._onMousemove.bind(this)),
                this.el.addEventListener(
                  "mousemove",
                  this._mousemoveHandler,
                  !this._isPreventDefault && ga
                ),
                (this._mouseupHandler = this._onMouseup.bind(this)),
                this.el.addEventListener("mouseup", this._mouseupHandler, ga);
            },
            [
              {
                key: "_onMousedown",
                value: function (e) {
                  (this._isStart = !0),
                    (this._startPosition = ea(e)),
                    this._onStart &&
                      this._onStart(this._startPosition, this._type);
                }
              },
              {
                key: "_onMousemove",
                value: function (e) {
                  if (
                    this._isStart &&
                    (this._isPreventDefault && e.preventDefault(),
                    this._onUpdate)
                  ) {
                    var t,
                      n = ea(e),
                      i = n.y - this._startPosition.y,
                      r = n.x - this._startPosition.x;
                    Math.abs(i) >= Math.abs(r)
                      ? i < 0
                        ? (t = "Down")
                        : i > 0 && (t = "Up")
                      : r < 0
                      ? (t = "Right")
                      : r > 0 && (t = "Left"),
                      this._onUpdate({
                        e,
                        diff: { y: i, x: r },
                        direction: t,
                        type: this._type
                      });
                  }
                }
              },
              {
                key: "_onMouseup",
                value: function (e) {
                  if (this._isStart) {
                    var t,
                      n = ea(e),
                      i = n.y - this._startPosition.y,
                      r = n.x - this._startPosition.x;
                    if (Math.abs(i) >= Math.abs(r)) {
                      if (i < -this._threshold) t = "Down";
                      else if (i > this._threshold) t = "Up";
                      else if (this.reset)
                        return (
                          this.reset(i, this._type), void (this._isStart = !1)
                        );
                    } else if (r < -this._threshold) t = "Right";
                    else if (r > this._threshold) t = "Left";
                    else if (this.reset)
                      return (
                        this.reset(r, this._type), void (this._isStart = !1)
                      );
                    this._callback({
                      e,
                      diff: { y: i, x: r },
                      direction: t,
                      type: this._type
                    }),
                      (this._isStart = !1);
                  }
                }
              },
              {
                key: "destroy",
                value: function () {
                  this.el.removeEventListener(
                    "mousedown",
                    this._mousedownHandler,
                    ga
                  ),
                    this.el.removeEventListener(
                      "mousemove",
                      this._mousemoveHandler,
                      !this._isPreventDefault && ga
                    ),
                    this.el.removeEventListener(
                      "mouseup",
                      this._mouseupHandler,
                      ga
                    );
                }
              }
            ]
          );
        })(),
        Ks = (function () {
          return w(
            function e(t, n) {
              var i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : {};
              b(this, e);
              var r = i.threshold,
                a = void 0 === r ? 50 : r,
                o = i.isDetectOnStart,
                s = void 0 !== o && o,
                l = i.isPreventDefault,
                u = void 0 !== l && l,
                c = i.onStart,
                h = i.onUpdate,
                d = i.reset;
              (this.el = t),
                (this._callback = n),
                (this._threshold = a),
                (this._isPreventDefault = u),
                (this._onStart = c),
                (this._onUpdate = s ? n : h),
                (this.reset = d),
                (this._type = "swipe"),
                (this._isStart = !1),
                (this._touchstartHandler = this._onTouchstart.bind(this)),
                this.el.addEventListener(
                  "touchstart",
                  this._touchstartHandler,
                  ga
                ),
                (this._touchmoveHandler = this._onTouchmove.bind(this)),
                this.el.addEventListener(
                  "touchmove",
                  this._touchmoveHandler,
                  !this._isPreventDefault && ga
                ),
                (this._touchendHandler = this._onTouchend.bind(this)),
                this.el.addEventListener("touchend", this._touchendHandler, ga);
            },
            [
              {
                key: "_onTouchstart",
                value: function (e) {
                  (this._isStart = !0),
                    (this._startPosition = ea(e)),
                    this._onStart &&
                      this._onStart(this._startPosition, this._type);
                }
              },
              {
                key: "_onTouchmove",
                value: function (e) {
                  if (
                    this._isStart &&
                    (this._isPreventDefault && e.preventDefault(),
                    this._onUpdate)
                  ) {
                    var t,
                      n = ea(e),
                      i = n.y - this._startPosition.y,
                      r = n.x - this._startPosition.x;
                    Math.abs(i) >= Math.abs(r)
                      ? i < 0
                        ? (t = "Down")
                        : i > 0 && (t = "Up")
                      : r < 0
                      ? (t = "Right")
                      : r > 0 && (t = "Left"),
                      this._onUpdate({
                        e,
                        diff: { y: i, x: r },
                        direction: t,
                        type: this._type
                      });
                  }
                }
              },
              {
                key: "_onTouchend",
                value: function (e) {
                  if (this._isStart) {
                    var t,
                      n = ea(e),
                      i = n.y - this._startPosition.y,
                      r = n.x - this._startPosition.x;
                    if (Math.abs(i) >= Math.abs(r)) {
                      if (i < -this._threshold) t = "Down";
                      else if (i > this._threshold) t = "Up";
                      else if (this.reset)
                        return (
                          this.reset(i, this._type), void (this._isStart = !1)
                        );
                    } else if (r < -this._threshold) t = "Right";
                    else if (r > this._threshold) t = "Left";
                    else if (this.reset)
                      return (
                        this.reset(r, this._type), void (this._isStart = !1)
                      );
                    this._callback({
                      e,
                      diff: { y: i, x: r },
                      direction: t,
                      type: this._type
                    }),
                      (this._isStart = !1);
                  }
                }
              },
              {
                key: "destroy",
                value: function () {
                  this.el.removeEventListener(
                    "touchstart",
                    this._touchstartHandler,
                    ga
                  ),
                    this.el.removeEventListener(
                      "touchmove",
                      this._touchmoveHandler,
                      !this._isPreventDefault && ga
                    ),
                    this.el.removeEventListener(
                      "touchend",
                      this._touchendHandler,
                      ga
                    );
                }
              }
            ]
          );
        })(),
        Xs = (function () {
          return w(
            function e(t) {
              b(this, e),
                (this._callback = t),
                (this._type = "keyboard"),
                (this._handlerKeydown = this._onKeydown.bind(this)),
                document.addEventListener("keydown", this._handlerKeydown),
                (this._handlerKeyup = this._onKeyup.bind(this)),
                document.addEventListener("keyup", this._handlerKeyup);
            },
            [
              {
                key: "_onKeydown",
                value: function (e) {
                  var t = e.key;
                  if (!this._downedKey || t === this._downedKey) {
                    var n;
                    switch (((this._downedKey = t), t)) {
                      case "ArrowDown":
                      case "PageDown":
                      case "Down":
                        n = "Down";
                        break;
                      case "ArrowUp":
                      case "PageUp":
                      case "Up":
                        n = "Up";
                        break;
                      case "ArrowLeft":
                      case "Left":
                        n = "Left";
                        break;
                      case "ArrowRight":
                      case "Right":
                        n = "Right";
                        break;
                      case "Escape":
                      case "Esc":
                        n = "Escape";
                    }
                    this._callback({
                      e,
                      diff: { y: 0, x: 0 },
                      direction: n,
                      type: this._type
                    });
                  }
                }
              },
              {
                key: "_onKeyup",
                value: function (e) {
                  e.key, (this._downedKey = null);
                }
              },
              {
                key: "destroy",
                value: function () {
                  document.removeEventListener("keydown", this._handlerKeydown),
                    document.removeEventListener("keyup", this._handlerKeyup);
                }
              }
            ]
          );
        })(),
        Ys = (function () {
          return w(
            function e(t, n) {
              var i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : {};
              b(this, e);
              var r = i.thresholdWheel,
                a = i.thresholdDrag,
                o = i.thresholdSwipe,
                s = i.isDetectOnStart,
                l = void 0 !== s && s,
                u = i.isPreventDefault,
                c = i.onStart,
                h = i.onUpdate,
                d = i.reset,
                p = i.disableWheel,
                f = void 0 !== p && p,
                v = i.disableDrag,
                m = void 0 !== v && v,
                g = i.disableSwipe,
                _ = void 0 !== g && g,
                y = i.disableKeyboard,
                x = void 0 !== y && y;
              f ||
                (this.wheel = new js(t, n, {
                  threshold: r,
                  reset: d,
                  isPreventDefault: u
                })),
                m ||
                  (this.drag = new qs(t, n, {
                    threshold: a,
                    isDetectOnStart: l,
                    isPreventDefault: u,
                    onStart: c,
                    onUpdate: h,
                    reset: d
                  })),
                _ ||
                  (this.swipe = new Ks(t, n, {
                    threshold: o,
                    isDetectOnStart: l,
                    isPreventDefault: u,
                    onStart: c,
                    onUpdate: h,
                    reset: d
                  })),
                x || (this.keyboard = new Xs(n));
            },
            [
              {
                key: "destroy",
                value: function () {
                  this.wheel && this.wheel.destroy(),
                    this.drag && this.drag.destroy(),
                    this.swipe && this.swipe.destroy(),
                    this.keyboard && this.keyboard.destroy();
                }
              }
            ]
          );
        })(),
        Zs = (function () {
          return w(
            function e() {
              var t,
                n = this,
                i =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {};
              b(this, e),
                V(this, "el", void 0),
                V(this, "refs", {}),
                V(this, "isDisableAutoPlayScroll", void 0),
                V(this, "isDisableAutoResize", void 0),
                V(this, "isAutoPlayTick", void 0),
                V(this, "isPermanent", void 0),
                V(this, "cacheValue", void 0),
                V(this, "option", void 0),
                V(this, "isManual", void 0),
                V(this, "isManualInit", void 0),
                V(this, "isPage", void 0),
                V(this, "isPlayTick", !1),
                V(this, "isPlayScroll", !1),
                V(this, "isDestroyed", !1),
                V(this, "listeners", {}),
                V(this, "_intersectionObservers", []),
                V(this, "_pageId", void 0),
                V(this, "_onInit", void 0),
                V(this, "_destroy", void 0),
                V(this, "_destroyCompletely", void 0),
                V(this, "_onScrollNative", void 0),
                V(this, "_wheel", void 0),
                V(this, "_drag", void 0),
                V(this, "_swipe", void 0),
                V(this, "_keyboard", void 0),
                V(this, "_gesture", void 0),
                V(this, "_initComponentsOnMutation", void 0);
              var r = this.constructor,
                a = r.componentName,
                o = r.selectorRoot,
                s = i.el,
                l = i.context,
                c = void 0 === l ? document : l,
                h = i.isAutoPlayTick,
                d = void 0 === h ? r.isAutoPlayTick || !1 : h,
                p = i.isDisableAutoPlayScroll,
                f = void 0 === p ? r.isDisableAutoPlayScroll || !1 : p,
                v = i.isDisableAutoResize,
                m = void 0 === v ? r.isDisableAutoResize || !1 : v,
                g = i.isPermanent,
                _ = void 0 === g ? r.isPermanent || !1 : g,
                y = i.isManual,
                x = void 0 === y ? r.isManual || !1 : y,
                w = i.isManualInit,
                S = void 0 === w ? r.isManualInit || !1 : w,
                M = i.isPage,
                T = void 0 === M ? r.isPage || !1 : M,
                k = i.cacheValue,
                E = void 0 === k ? a || o || r.name : k;
              (this.isDisableAutoPlayScroll = f),
                (this.isDisableAutoResize = m),
                (this.isAutoPlayTick = d),
                (this.isPermanent = _),
                (this.isManual = x),
                (this.isManualInit = S),
                (this.isPage = T),
                (this.cacheValue = E),
                (this.option = i),
                s
                  ? (this.el = s)
                  : (!o &&
                      a &&
                      (o = ".".concat(a, ', [data-el="').concat(a, '"]')),
                    (this.el = c.querySelector(o)));
              var C =
                null === (t = this.el) ||
                void 0 === t ||
                null === (t = t.classList.value) ||
                void 0 === t ||
                null === (t = t.match(/astro-\w+/g)) ||
                void 0 === t
                  ? void 0
                  : t.slice(-1)[0];
              if (
                (this.el &&
                  (this.isManual =
                    "manual" in this.el.dataset || this.isManual),
                this.el && (a || C))
              ) {
                var D = a && "".concat(a, "-");
                this.el
                  .querySelectorAll(
                    ""
                      .concat(
                        C ? ".".concat(C, "[data-ref], ") : "",
                        '[data-ref][class*="'
                      )
                      .concat(D, '"], [data-ref^="')
                      .concat(D, '"]')
                  )
                  .forEach(function (e) {
                    var t,
                      i =
                        (null === (t = e.dataset) || void 0 === t
                          ? void 0
                          : t.ref) ||
                        u(e.classList).find(function (e) {
                          return e.startsWith(D);
                        }) ||
                        e.classList[0];
                    i = i.replace(D, "");
                    var r = n.refs[i];
                    r
                      ? Array.isArray(r)
                        ? r.push(e)
                        : r && (n.refs[i] = [r, e])
                      : (n.refs[i] = e);
                  });
              }
              if (
                (this.onMount && this.onMount(),
                this.onResizeFirst &&
                  ((this.onResizeFirst = this.onResizeFirst.bind(this)),
                  Ha.on("resizeFirst", this.onResizeFirst)),
                this.onResetSize &&
                  ((this.onResetSize = this.onResetSize.bind(this)),
                  Ra(this.onResetSize, !0)),
                this.onResizeNative &&
                  ((this.onResizeNative = this.onResizeNative.bind(this)),
                  Da(this.onResizeNative, !0)),
                this.onResizeAlways &&
                  ((this.onResizeAlways = this.onResizeAlways.bind(this)),
                  Pa(this.onResizeAlways, !0)),
                this.onOrientationchange &&
                  ((this.onOrientationchange =
                    this.onOrientationchange.bind(this)),
                  Oa(this.onOrientationchange, !0)),
                this.onTick &&
                  ((this.onTick = this.onTick.bind(this)),
                  this.isAutoPlayTick &&
                    requestAnimationFrame(function () {
                      n.playTick();
                    })),
                this.el)
              ) {
                var A = Yr.componentCache.get(this.el);
                A ? A.push(E) : Yr.componentCache.set(this.el, [E]),
                  this.onClick &&
                    ((this.onClick = this.onClick.bind(this)),
                    this.el.addEventListener("click", this.onClick)),
                  this.onMouseenter &&
                    (this.onMouseenter = As(
                      this.el,
                      this.onMouseenter.bind(this)
                    )),
                  this.onMousemove &&
                    (this.onMousemove = (function (e, t) {
                      var n = function (e) {
                        Ds() || t(e);
                      };
                      return e.addEventListener("mousemove", n, ga), n;
                    })(this.el, this.onMousemove.bind(this))),
                  this.onMouseleave &&
                    (this.onMouseleave = Ps(
                      this.el,
                      this.onMouseleave.bind(this)
                    )),
                  this.onWheel &&
                    ((this.onWheel = this.onWheel.bind(this)),
                    (this._wheel = new js(
                      this.el,
                      this.onWheel,
                      this.option.wheelOptions || r.wheelOptions
                    ))),
                  this.onDrag &&
                    ((this.onDrag = this.onDrag.bind(this)),
                    (this._drag = new qs(
                      this.el,
                      this.onDrag,
                      this.option.dragOptions || r.dragOptions
                    ))),
                  this.onSwipe &&
                    ((this.onSwipe = this.onSwipe.bind(this)),
                    (this._swipe = new Ks(
                      this.el,
                      this.onSwipe,
                      this.option.swipeOptions || r.swipeOptions
                    ))),
                  this.onKeyboard &&
                    ((this.onKeyboard = this.onKeyboard.bind(this)),
                    (this._keyboard = new Xs(this.onKeyboard))),
                  this.onGesture &&
                    ((this.onGesture = this.onGesture.bind(this)),
                    (this._gesture = new Ys(
                      this.el,
                      this.onGesture,
                      this.option.gestureOptions || r.gestureOptions
                    )));
              }
              this.onMousedownDocument &&
                ((this.onMousedownDocument =
                  this.onMousedownDocument.bind(this)),
                ws(this.onMousedownDocument)),
                this.onMousemoveDocument &&
                  ((this.onMousemoveDocument =
                    this.onMousemoveDocument.bind(this)),
                  Ms(this.onMousemoveDocument)),
                this.onMouseupDocument &&
                  ((this.onMouseupDocument = this.onMouseupDocument.bind(this)),
                  ks(this.onMouseupDocument)),
                this.onBeforeResetModalStyle &&
                  ((this.onBeforeResetModalStyle =
                    this.onBeforeResetModalStyle.bind(this)),
                  Ha.on("beforeResetModalStyle", this.onBeforeResetModalStyle)),
                this.onOpenModal &&
                  ((this.onOpenModal = this.onOpenModal.bind(this)),
                  Ha.on("openModal", this.onOpenModal)),
                this.onStartOpenModal &&
                  ((this.onStartOpenModal = this.onStartOpenModal.bind(this)),
                  Ha.on("startOpenModal", this.onStartOpenModal)),
                this.onCompleteOpenModal &&
                  ((this.onCompleteOpenModal =
                    this.onCompleteOpenModal.bind(this)),
                  Ha.on("completeOpenModal", this.onCompleteOpenModal)),
                this.onCloseModal &&
                  ((this.onCloseModal = this.onCloseModal.bind(this)),
                  Ha.on("closeModal", this.onCloseModal)),
                this.onStartCloseModal &&
                  ((this.onStartCloseModal = this.onStartCloseModal.bind(this)),
                  Ha.on("startCloseModal", this.onStartCloseModal)),
                this.onCompleteCloseModal &&
                  ((this.onCompleteCloseModal =
                    this.onCompleteCloseModal.bind(this)),
                  Ha.on("completeCloseModal", this.onCompleteCloseModal)),
                this.onLoadProgress &&
                  ((this.onLoadProgress = this.onLoadProgress.bind(this)),
                  Bs(this.onLoadProgress)),
                this.onLoadDone &&
                  ((this.onLoadDone = this.onLoadDone.bind(this)),
                  Vs(this.onLoadDone)),
                Yr.cScroll
                  ? this.initScroll()
                  : Ha.once("initPageJs", function () {
                      n.initScroll();
                    }),
                (this._onInit = function () {
                  !n.isManual &&
                    n.onIntersect &&
                    n.el &&
                    ((n.onIntersect = n.onIntersect.bind(n)),
                    n.addIntersectionObserver({
                      el: n.el,
                      callback: n.onIntersect,
                      param: n.option.intersectOptions || r.intersectOptions,
                      once: n.option.intersectOnce || r.intersectOnce
                    })),
                    n.onInit && n.onInit();
                }),
                this.isPermanent ||
                  ((this._destroy = function (e) {
                    (!n.isPage && n._pageId !== e) || n.destroySelf();
                  }),
                  Ha.on("destroy", this._destroy),
                  (this._destroyCompletely = function (e) {
                    (!n.isPage && n._pageId !== e) || n.destroyCompletely();
                  }),
                  Ha.on("destroyCompletely", this._destroyCompletely));
            },
            [
              {
                key: "initScroll",
                value: function () {
                  var e = this;
                  this.onScrollNative &&
                    ((this._onScrollNative = function () {
                      e.onScrollNative(window.scrollY);
                    }),
                    window.addEventListener(
                      "scroll",
                      this._onScrollNative,
                      ga
                    )),
                    this.onScrollThrottle &&
                      ((this.onScrollThrottle =
                        this.onScrollThrottle.bind(this)),
                      (function (e) {
                        arguments.length > 1 &&
                          void 0 !== arguments[1] &&
                          arguments[1] &&
                          setTimeout(function () {
                            e(window.scrollY);
                          }),
                          _a.push(e);
                      })(this.onScrollThrottle)),
                    this.onScroll &&
                      ((this.onScroll = this.onScroll.bind(this)),
                      this.isDisableAutoPlayScroll ||
                        requestAnimationFrame(function () {
                          e.playScroll();
                        })),
                    this.onVirtualScroll &&
                      ((this.onVirtualScroll = this.onVirtualScroll.bind(this)),
                      Yr.cScroll.onVirtualScroll(this.onVirtualScroll)),
                    this.onResize &&
                      ((this.onResize = this.onResize.bind(this)),
                      Yr.cScroll.onResize(this.onResize));
                }
              },
              {
                key: "isPc",
                get: function () {
                  return !Ma.isSp;
                }
              },
              {
                key: "isSp",
                get: function () {
                  return Ma.isSp;
                }
              },
              {
                key: "isTb",
                get: function () {
                  return Ma.isTb;
                }
              },
              {
                key: "isTbPortrait",
                get: function () {
                  return Ma.isTbPortrait;
                }
              },
              {
                key: "isPortrait",
                get: function () {
                  return Ma.isPortrait;
                }
              },
              {
                key: "scrollY",
                get: function () {
                  return Yr.scrollY;
                }
              },
              {
                key: "scrollYSmooth",
                get: function () {
                  return Yr.scrollYSmooth;
                }
              },
              {
                key: "scrollYNative",
                get: function () {
                  return Yr.scrollYNative;
                }
              },
              {
                key: "emit",
                value: function (e) {
                  for (
                    var t = arguments.length,
                      n = new Array(t > 1 ? t - 1 : 0),
                      i = 1;
                    i < t;
                    i++
                  )
                    n[i - 1] = arguments[i];
                  Ha.emit.apply(Ha, [e].concat(n));
                }
              },
              {
                key: "on",
                value: function (e, t) {
                  (this.listeners[e] = t), Ha.on(e, t);
                }
              },
              {
                key: "once",
                value: function (e, t) {
                  (this.listeners[e] = t), Ha.once(e, t);
                }
              },
              {
                key: "off",
                value: function (e, t) {
                  Ha.off(e, t);
                }
              },
              {
                key: "emitResize",
                value: function () {
                  var e = Ua();
                  (e.isForce = !0),
                    this.onResetSize && this.onResetSize(e),
                    this.onResizeNative && this.onResizeNative(e),
                    this.onResizeAlways && this.onResizeAlways(e);
                }
              },
              {
                key: "emitResizeAll",
                value: function () {
                  Yr.cScroll.update();
                }
              },
              {
                key: "emitSelfResize",
                value: function () {
                  this.onResize && this.onResize(Ua());
                }
              },
              {
                key: "addIntersectionObserver",
                value: function (e) {
                  var t = e.el,
                    n = e.callback,
                    i = e.param,
                    r = e.once,
                    a = Yr.cIntersecting.add({
                      el: t,
                      callback: function (e) {
                        n(e, Yr.scrollDirection);
                      },
                      param: i,
                      once: r
                    });
                  return a && this._intersectionObservers.push(a), a;
                }
              },
              {
                key: "playTick",
                value: function () {
                  !this.onTick ||
                    this.isPlayTick ||
                    this.isDestroyed ||
                    ((this.isPlayTick = !0), Dr.ticker.add(this.onTick));
                }
              },
              {
                key: "pauseTick",
                value: function () {
                  !this.onTick ||
                    !this.isPlayTick ||
                    ((this.isPlayTick = !1), Dr.ticker.remove(this.onTick));
                }
              },
              {
                key: "playScroll",
                value: function () {
                  !this.onScroll ||
                    this.isPlayScroll ||
                    this.isDestroyed ||
                    ((this.isPlayScroll = !0),
                    Yr.cScroll.onAnimateScroll(this.onScroll));
                }
              },
              {
                key: "pauseScroll",
                value: function () {
                  !this.onScroll ||
                    !this.isPlayScroll ||
                    ((this.isPlayScroll = !1),
                    Yr.cScroll.offAnimateScroll(this.onScroll));
                }
              },
              {
                key: "scrollTo",
                value: function () {
                  var e;
                  return (e = Yr.cScroll).scrollTo.apply(e, arguments);
                }
              },
              {
                key: "isSmoothScroll",
                get: function () {
                  return Yr.cScroll.isSmooth;
                }
              },
              {
                key: "initComponentsOnMutation",
                value: function () {
                  var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : this.el;
                  this._initComponentsOnMutation = (function (t) {
                    var i,
                      r = new MutationObserver(
                        (function () {
                          var r = n(
                            e().mark(function n(r) {
                              return e().wrap(function (e) {
                                for (;;)
                                  switch ((e.prev = e.next)) {
                                    case 0:
                                      if (
                                        ((e.t0 = r.some(function (e) {
                                          return e.target === t;
                                        })),
                                        !e.t0)
                                      ) {
                                        e.next = 7;
                                        break;
                                      }
                                      return (
                                        bo(t),
                                        i && i.detach(),
                                        (e.next = 6),
                                        po(t)
                                      );
                                    case 6:
                                      i = e.sent;
                                    case 7:
                                    case "end":
                                      return e.stop();
                                  }
                              }, n);
                            })
                          );
                          return function (e) {
                            return r.apply(this, arguments);
                          };
                        })()
                      );
                    return (
                      r.observe(t, { childList: !0 }),
                      {
                        destroy: function () {
                          r.disconnect(), i && i.detach();
                        }
                      }
                    );
                  })(t);
                }
              },
              {
                key: "destroySelf",
                value: function () {
                  this._onDestroy(), Ha.off("destroy", this._destroy);
                }
              },
              {
                key: "_onDestroy",
                value: function () {
                  var e = this;
                  (this.isDestroyed = !0),
                    this.onResizeFirst &&
                      (Ha.off("resizeFirst", this.onResizeFirst),
                      (this.onResizeFirst = void 0)),
                    this.onResetSize &&
                      (Ia(this.onResetSize), (this.onResetSize = void 0)),
                    this.onResizeNative &&
                      (Aa(this.onResizeNative), (this.onResizeNative = void 0)),
                    this.onResizeAlways &&
                      (La(this.onResizeAlways), (this.onResizeAlways = void 0)),
                    this.onOrientationchange &&
                      (Na(this.onOrientationchange),
                      (this.onOrientationchange = void 0)),
                    this.onTick && (this.pauseTick(), (this.onTick = void 0)),
                    this.el &&
                      (Yr.componentCache.set(
                        this.el,
                        Yr.componentCache.get(this.el).filter(function (t) {
                          return t !== e.cacheValue;
                        })
                      ),
                      this.onClick &&
                        this.el.removeEventListener("click", this.onClick),
                      this.onMouseenter &&
                        (Ls(this.el, this.onMouseenter),
                        (this.onMouseenter = void 0)),
                      this.onMousemove &&
                        ((function (e, t) {
                          e.removeEventListener("mousemove", t);
                        })(this.el, this.onMousemove),
                        (this.onMousemove = void 0)),
                      this.onMouseleave &&
                        (Rs(this.el, this.onMouseleave),
                        (this.onMouseleave = void 0)),
                      this._wheel &&
                        (this._wheel.destroy(),
                        (this._wheel = void 0),
                        (this.onWheel = void 0)),
                      this._drag &&
                        (this._drag.destroy(),
                        (this._drag = void 0),
                        (this.onDrag = void 0)),
                      this._swipe &&
                        (this._swipe.destroy(),
                        (this._swipe = void 0),
                        (this.onSwipe = void 0)),
                      this._keyboard &&
                        (this._keyboard.destroy(),
                        (this._keyboard = void 0),
                        (this.onKeyboard = void 0)),
                      this._gesture &&
                        (this._gesture.destroy(),
                        (this._gesture = void 0),
                        (this.onGesture = void 0))),
                    this.onMousedownDocument &&
                      (Ss(this.onMousedownDocument),
                      (this.onMousedownDocument = void 0)),
                    this.onMousemoveDocument &&
                      (Ts(this.onMousemoveDocument),
                      (this.onMousemoveDocument = void 0)),
                    this.onMouseupDocument &&
                      (Es(this.onMouseupDocument),
                      (this.onMouseupDocument = void 0)),
                    this.onBeforeResetModalStyle &&
                      (Ha.off(
                        "beforeResetModalStyle",
                        this.onBeforeResetModalStyle
                      ),
                      (this.onBeforeResetModalStyle = void 0)),
                    this.onOpenModal &&
                      (Ha.off("openModal", this.onOpenModal),
                      (this.onOpenModal = void 0)),
                    this.onStartOpenModal &&
                      (Ha.off("startOpenModal", this.onStartOpenModal),
                      (this.onStartOpenModal = void 0)),
                    this.onCompleteOpenModal &&
                      (Ha.off("completeOpenModal", this.onCompleteOpenModal),
                      (this.onCompleteOpenModal = void 0)),
                    this.onCloseModal &&
                      (Ha.off("closeModal", this.onCloseModal),
                      (this.onCloseModal = void 0)),
                    this.onStartCloseModal &&
                      (Ha.off("startCloseModal", this.onStartCloseModal),
                      (this.onStartCloseModal = void 0)),
                    this.onCompleteCloseModal &&
                      (Ha.off("completeCloseModal", this.onCompleteCloseModal),
                      (this.onCompleteCloseModal = void 0)),
                    this.onLoadProgress &&
                      (zs(this.onLoadProgress), (this.onLoadProgress = void 0)),
                    this.onLoadDone &&
                      (Hs(this.onLoadDone), (this.onLoadDone = void 0)),
                    this._onScrollNative &&
                      window.removeEventListener(
                        "scroll",
                        this._onScrollNative
                      ),
                    this.onScrollThrottle &&
                      ((function (e) {
                        _a.some(function (t, n) {
                          return t === e && (_a.splice(n, 1), !0);
                        });
                      })(this.onScrollThrottle),
                      (this.onScrollThrottle = void 0)),
                    this.onScroll &&
                      (this.pauseScroll(), (this.onScroll = void 0)),
                    this.onVirtualScroll &&
                      (Yr.cScroll.offVirtualScroll(this.onVirtualScroll),
                      (this.onVirtualScroll = void 0)),
                    this.onResize &&
                      (Yr.cScroll.offResize(this.onResize),
                      (this.onResize = void 0)),
                    this._intersectionObservers.forEach(function (e) {
                      null == e || e.destroy();
                    }),
                    (this._intersectionObservers = []),
                    this.onIntersect && (this.onIntersect = void 0),
                    this._initComponentsOnMutation &&
                      this._initComponentsOnMutation.destroy(),
                    Object.keys(this.listeners).forEach(function (t) {
                      Ha.off(t, e.listeners[t]);
                    });
                }
              },
              {
                key: "destroyCompletely",
                value: function () {
                  this.onDestroy &&
                    (this.onDestroy(), (this.onDestroy = void 0)),
                    Ha.off("destroyCompletely", this._destroyCompletely),
                    (this.el = void 0);
                }
              },
              {
                key: "destroy",
                value: function () {
                  this.destroySelf(), this.destroyCompletely();
                }
              }
            ],
            [
              {
                key: "create",
                value: function (e) {
                  var t,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {},
                    i =
                      (arguments.length > 2 ? arguments[2] : void 0) ||
                      this.componentName ||
                      this.selectorRoot ||
                      this.name;
                  if (
                    n.isForce ||
                    null === (t = Yr.componentCache.get(e)) ||
                    void 0 === t ||
                    !t.some(function (e) {
                      return e === i;
                    })
                  ) {
                    n.cacheValue = i;
                    var a = new this(r({ el: e }, n));
                    if (((a._pageId = Yr.pageId), !a.isManualInit)) {
                      var o = function () {
                        a._onInit();
                      };
                      Yr.isTransitioned && !Yr.isLoadedStyles
                        ? Ha.once("loadedStyles", o)
                        : o();
                    }
                    return a;
                  }
                }
              },
              {
                key: "createAll",
                value: function () {
                  var e = this,
                    t =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : document,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : {};
                  !this.selectorRoot &&
                    this.componentName &&
                    (this.selectorRoot = "."
                      .concat(this.componentName, ', [data-el="')
                      .concat(this.componentName, '"]'));
                  var i = n.selector,
                    r = void 0 === i ? this.selectorRoot : i;
                  return Array.prototype.map.call(
                    t.querySelectorAll(r),
                    function (t) {
                      return e.create(t, n);
                    }
                  );
                }
              },
              {
                key: "register",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : {},
                    t = e.delay,
                    n = e.priority,
                    i = e.isLocal;
                  this.isPermanent
                    ? (function (e) {
                        var t =
                            arguments.length > 1 && void 0 !== arguments[1]
                              ? arguments[1]
                              : {},
                          n = t.delay,
                          i = void 0 === n ? 0 : n,
                          r = t.priority,
                          a = void 0 === r ? 0 : r;
                        _o.componentsPermanent[a] ||
                          (_o.componentsPermanent[a] = []),
                          _o.componentsPermanent[a].push(e),
                          i
                            ? setTimeout(function () {
                                xo(e, !0);
                              }, i)
                            : xo(e, !0);
                      })(this, { delay: t, priority: n })
                    : i || this.isLocal
                    ? yo(this, { delay: t, priority: n, isLocal: !0 })
                    : yo(this, { delay: t, priority: n });
                }
              }
            ]
          );
        })();
      V(Zs, "isPermanent", void 0),
        V(Zs, "isLocal", void 0),
        V(Zs, "isManual", void 0),
        V(Zs, "isManualInit", void 0),
        V(Zs, "isPage", void 0),
        V(Zs, "isAutoPlayTick", void 0),
        V(Zs, "isDisableAutoPlayScroll", void 0),
        V(Zs, "isDisableAutoResize", void 0),
        V(Zs, "componentName", void 0),
        V(Zs, "selectorRoot", void 0),
        V(Zs, "intersectOptions", void 0),
        V(Zs, "intersectOnce", void 0),
        V(Zs, "wheelOptions", void 0),
        V(Zs, "dragOptions", void 0),
        V(Zs, "swipeOptions", void 0),
        V(Zs, "gestureOptions", void 0);
      var Js = function (e) {
          e.preventDefault();
        },
        Qs = { passive: !1 },
        $s = {
          smoothWheel: !0,
          duration: 1.2,
          easing: function (e) {
            return Math.min(1, 1.001 - Math.pow(2, -10 * e));
          },
          wheelMultiplier: 1,
          touchMultiplier: 2,
          ease: [0.25, 0, 0.35, 1],
          durationScrollTo: 1
        };
      Dr.registerPlugin(vs);
      var el = (function () {
        return w(
          function e() {
            var t = this,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : document.body;
            b(this, e),
              V(this, "isPermanent", !0),
              V(this, "el", void 0),
              V(this, "_scroll", void 0),
              V(this, "scrollYSmoothOwn", 0),
              V(this, "isHorizontal", !1),
              V(this, "isSmooth", !1),
              V(this, "_isMousemove", !1),
              V(this, "_callbackScroll", void 0),
              V(this, "listenersResizeSelf", []),
              V(this, "listenersVirtualScroll", []),
              V(this, "_callbackListCall", []),
              V(this, "_isInitVirtualScroll", !1),
              V(this, "_onTick", void 0),
              V(this, "_onLeave", void 0),
              V(this, "_onDestroy", void 0),
              V(this, "handleResize", void 0);
            var i = $s.smoothWheel,
              r = $s.duration,
              a = $s.easing,
              o = $s.wheelMultiplier,
              s = $s.touchMultiplier;
            (this.el = n),
              (this.isPermanent = this.constructor.isPermanent),
              (this._onTick = this.onTick.bind(this)),
              (this._onLeave = this.onLeave.bind(this)),
              (this._onDestroy = this.onDestroy.bind(this));
            var l = this.el.dataset.scrollDirection || "vertical";
            this.isHorizontal = "horizontal" === l;
            var u = this.isHorizontal ? "both" : "vertical";
            (this._scroll =
              new as({
                duration: r,
                easing: a,
                orientation: l,
                gestureOrientation: u,
                smoothWheel: i,
                wheelMultiplier: o,
                smoothTouch: !1,
                touchMultiplier: s,
                infinite: !1
              }) || null),
              this._updateIsSmooth(),
              this._addEventListener(),
              (this.handleResize = ta(function () {
                Yr.isOpenModal || t.updateResize();
              })),
              Ha.emit("initCScroll"),
              Dr.ticker.add(this._onTick);
          },
          [
            {
              key: "scrollTo",
              value: function () {
                var e = this,
                  t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0,
                  n = arguments.length > 1 ? arguments[1] : void 0;
                if (this._scroll) {
                  Yr.isScrollAnimating = !0;
                  var i = n || {},
                    r = i.immediate,
                    a = void 0 !== r && r,
                    o = i.disableOffset,
                    s = void 0 !== o && o,
                    l = i.onComplete;
                  return (
                    (n.offset = s ? 0 : this._getOffsetY()),
                    (n.duration = a
                      ? void 0
                      : "duration" in n
                      ? n.duration
                      : $s.durationScrollTo),
                    (n.easing = a
                      ? void 0
                      : "easing" in n
                      ? n.easing
                      : $s.easing),
                    new Promise(function (i) {
                      (n.onComplete = function () {
                        (Yr.isScrollAnimating = !1),
                          (e.scrollYSmoothOwn = Yr.scrollY = e._scroll.scroll),
                          l && null != l && l(),
                          i();
                      }),
                        e._scroll.scrollTo(t, n);
                    })
                  );
                }
              }
            },
            {
              key: "scrollToId",
              value: function (e, t) {
                var n = "top" === e ? 0 : "#".concat(e);
                return this.scrollTo(n, t);
              }
            },
            {
              key: "scrollToImmediate",
              value: function (e) {
                var t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {};
                return (t.immediate = !0), this.scrollTo(e, t);
              }
            },
            {
              key: "scrollToAnchor",
              value: function (e) {
                if (location.hash) {
                  var t = location.hash.slice(1, location.hash.length),
                    n = document.getElementById(t);
                  return this.scrollTo(n || 0, e);
                }
                return this.scrollTo(0, e);
              }
            },
            {
              key: "scrollToPrevPagePosition",
              value: function () {
                var e =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {};
                return (
                  (e.disableOffset = !0),
                  this.scrollToImmediate(this.getStorageScrollY(), e)
                );
              }
            },
            {
              key: "onAnimateScroll",
              value: function (e) {
                this._scroll.on("scroll", e), Ha.on("updateScroll", e);
              }
            },
            {
              key: "offAnimateScroll",
              value: function (e) {
                this._scroll.off("scroll", e), Ha.off("updateScroll", e);
              }
            },
            {
              key: "_initVirtualScroll",
              value: function () {
                var e = this;
                this._isInitVirtualScroll ||
                  ((this._isInitVirtualScroll = !0),
                  this._scroll.virtualScroll.on("scroll", function (t) {
                    for (
                      var n = 0;
                      n < e.listenersVirtualScroll.length;
                      n = (n + 1) | 0
                    )
                      e.listenersVirtualScroll[n](t);
                  }));
              }
            },
            {
              key: "onVirtualScroll",
              value: function (e) {
                this._isInitVirtualScroll || this._initVirtualScroll(),
                  this.listenersVirtualScroll.push(e);
              }
            },
            {
              key: "onceVirtualScroll",
              value: function (e) {
                var t = this,
                  n = (function (e) {
                    function t(t) {
                      return e.apply(this, arguments);
                    }
                    return (
                      (t.toString = function () {
                        return e.toString();
                      }),
                      t
                    );
                  })(function (i) {
                    t.offVirtualScroll(n), e(i);
                  });
                this.onVirtualScroll(n);
              }
            },
            {
              key: "offVirtualScroll",
              value: function (e) {
                var t = this;
                this.listenersVirtualScroll.some(function (n, i) {
                  return n === e && (t.listenersVirtualScroll.splice(i, 1), !0);
                });
              }
            },
            {
              key: "start",
              value: function () {
                this._scroll &&
                  (this._scroll.start(),
                  window.removeEventListener("touchmove", Js, Qs),
                  window.removeEventListener("wheel", Js, Qs));
              }
            },
            {
              key: "stop",
              value: function () {
                this._scroll &&
                  (this._scroll.stop(),
                  window.addEventListener("touchmove", Js, Qs),
                  window.addEventListener("wheel", Js, Qs));
              }
            },
            {
              key: "enable",
              value: function () {
                this._scroll && (Dr.ticker.add(this._onTick), this.start());
              }
            },
            {
              key: "disable",
              value: function () {
                this._scroll && (this.stop(), Dr.ticker.remove(this._onTick));
              }
            },
            {
              key: "update",
              value: function () {
                this._scroll && (this._scroll.emit(), this.handleResize());
              }
            },
            {
              key: "_updateIsSmooth",
              value: function () {
                this._scroll &&
                  ((this.isSmooth = this._scroll.isSmooth),
                  document.documentElement.classList[
                    this.isSmooth ? "remove" : "add"
                  ]("sDisableSmoothScroll"));
              }
            },
            {
              key: "onResize",
              value: function (e) {
                this.listenersResizeSelf.push(e);
              }
            },
            {
              key: "onceResize",
              value: function (e) {
                var t = this,
                  n = (function (e) {
                    function t(t) {
                      return e.apply(this, arguments);
                    }
                    return (
                      (t.toString = function () {
                        return e.toString();
                      }),
                      t
                    );
                  })(function (i) {
                    t.offResize(n), e(i);
                  });
                this.onResize(n);
              }
            },
            {
              key: "offResize",
              value: function (e) {
                var t = this;
                this.listenersResizeSelf.some(function (n, i) {
                  return n === e && (t.listenersResizeSelf.splice(i, 1), !0);
                });
              }
            },
            {
              key: "setResizeObserver",
              value: function () {
                var e = this,
                  t = this.el;
                new ResizeObserver(function (n) {
                  var i,
                    r = l(n);
                  try {
                    for (r.s(); !(i = r.n()).done; )
                      i.value.target === t && e.handleResize();
                  } catch (e) {
                    r.e(e);
                  } finally {
                    r.f();
                  }
                }).observe(t);
              }
            },
            {
              key: "updateResize",
              value: function () {
                for (
                  var e = Ua(), t = 0;
                  t < this.listenersResizeSelf.length;
                  t = (t + 1) | 0
                )
                  this.listenersResizeSelf[t](e);
                Ha.emit("updateScroll", this._scroll);
              }
            },
            {
              key: "_getOffsetY",
              value: function () {
                var e = document.querySelector(
                  '[data-anchor-offset="'.concat(Ma.isSp ? "sp" : "pc", '"]')
                );
                return e ? -e.getBoundingClientRect().bottom : 0;
              }
            },
            {
              key: "onMousemove",
              value: function () {
                this._isMousemove = !0;
              }
            },
            {
              key: "onMouseleave",
              value: function () {
                this._isMousemove = !1;
              }
            },
            {
              key: "_addEventListener",
              value: function () {
                var e = this;
                (this._callbackScroll = function (t) {
                  (e.scrollYSmoothOwn = Yr.scrollY = t.scroll),
                    pa && e._isMousemove && (Yr.scrollDirection = t.direction);
                }),
                  this._scroll.on("scroll", this._callbackScroll),
                  window.addEventListener("pagehide", function () {
                    e.setStorageScrollY();
                  }),
                  Ha.on("leave", this._onLeave),
                  this.isPermanent ||
                    Ha.on("destroyCompletely", this._onDestroy),
                  !this.isSmooth &&
                    this.isHorizontal &&
                    this.el.addEventListener(
                      "wheel",
                      function (t) {
                        var n = t.deltaY;
                        e.el.scrollBy(n, 0);
                      },
                      ga
                    );
              }
            },
            {
              key: "setStorageScrollY",
              value: function () {
                var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : Yr.historyCount,
                  t = JSON.parse(
                    sessionStorage.getItem("historyScrollPosition") || "{}"
                  );
                (t[e] = this.scrollYSmoothOwn),
                  sessionStorage.setItem(
                    "historyScrollPosition",
                    JSON.stringify(t)
                  );
              }
            },
            {
              key: "getStorageScrollY",
              value: function () {
                var e = JSON.parse(
                  sessionStorage.getItem("historyScrollPosition") || "{}"
                );
                return Number(e[Yr.historyCount]) || location.hash || 0;
              }
            },
            {
              key: "limit",
              get: function () {
                var e;
                return null === (e = this._scroll) || void 0 === e
                  ? void 0
                  : e.limit;
              }
            },
            {
              key: "checkScroll",
              value: function () {
                this._scroll.scroll.checkScroll(!0);
              }
            },
            {
              key: "onTick",
              value: function (e) {
                this._scroll.raf(1e3 * e);
              }
            },
            {
              key: "onLeave",
              value: function () {
                this.setStorageScrollY(Yr.prevHistoryCount);
              }
            },
            {
              key: "onDestroy",
              value: function () {
                this._scroll.off("scroll", this._callbackScroll),
                  this._scroll.destroy();
              }
            }
          ]
        );
      })();
      V(el, "isPermanent", !0),
        (function (e) {
          var t = e.Scroll,
            n = e.onDoneInit;
          io(),
            Ao(),
            q(function () {
              return Promise.resolve().then(function () {
                return Ws;
              });
            }, void 0).then(function (e) {
              return (0, e.init)();
            }),
            q(function () {
              return Promise.resolve().then(function () {
                return Va;
              });
            }, void 0).then(function (e) {
              return (0, e.init)();
            }),
            q(function () {
              return Promise.resolve().then(function () {
                return Cs;
              });
            }, void 0).then(function (e) {
              return (0, e.init)();
            }),
            (function () {
              var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : document;
              Yr.pageIdPrev = sessionStorage.getItem("pageId") || "";
              var t = (Yr.pageId = e.body.id);
              sessionStorage.setItem("pageId", t);
            })();
          var i = (Yr.view = document.querySelector("[data-router-view]"));
          Yr.cIntersecting = new Do();
          var r = document.querySelector("[data-100vh]");
          (function e() {
            var a, o;
            !r || (r && r.clientHeight > 0)
              ? ((function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : "[data-permanent]";
                  _o.elsPermanent = document.querySelectorAll(e);
                })(),
                (Yr.cScroll = new t(document.body)),
                _o.componentsPermanent.forEach(function (e) {
                  null == e ||
                    e.forEach(function (e) {
                      e.createAll();
                    });
                }),
                Mo(i, !0),
                null !== (a = Yr.cScroll) &&
                  void 0 !== a &&
                  a.fireViewSelf &&
                  null !== (o = Yr.cScroll) &&
                  void 0 !== o &&
                  o.fireViewSelf(),
                n && n(),
                Yr.cScroll.onResize(function () {
                  io(), Ao(), Fa(!0);
                }),
                Yr.cScroll.onceResize(function () {
                  Yr.cScroll.update(), Ha.emit("resizeFirst");
                }),
                (function (e) {
                  "complete" === document.readyState
                    ? e()
                    : window.addEventListener("load", e);
                })(function () {
                  Fa(!0), Yr.cScroll.setResizeObserver(), Ha.emit("loaded");
                }),
                (function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : function () {},
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : t;
                  e.addListener(function (e) {
                    e.matches ? t(e) : n(e);
                  });
                })(
                  ba,
                  function () {
                    location.reload();
                  },
                  function () {
                    location.reload();
                  }
                ))
              : requestAnimationFrame(function () {
                  e();
                });
          })(),
            (function () {
              if (Yr.enablePane) {
                var e =
                  Yr.pane ||
                  (Yr.pane = new $r.Pane({ title: "Control", expanded: !0 }));
                (e.hidden = !1), Yr.isHiddenPane && na(!0);
                var t = e.containerElem_.children[0];
                t.addEventListener("wheel", function (e) {
                  e.stopPropagation();
                }),
                  t.addEventListener("touchmove", function (e) {
                    e.stopPropagation();
                  }),
                  document.addEventListener("keydown", function (e) {
                    var t;
                    "h" === e.key &&
                      (Yr.isHiddenPane
                        ? Yr.enablePane &&
                          Yr.isHiddenPane &&
                          ((Yr.isHiddenPane = !1),
                          (null === (t = Yr.pane) || void 0 === t
                            ? void 0
                            : t.element.parentElement) &&
                            (Yr.pane.element.parentElement.style.visibility =
                              ""))
                        : na());
                  }),
                  e.addButton({ title: "Refresh" }).on("click", function () {
                    ia();
                  });
              }
            })();
        })({ Scroll: el, transitions: { default: Go } });
      var tl = (function (e) {
        function t() {
          var e,
            n =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : {};
          b(this, t);
          var i = n.el,
            a = void 0 === i ? Yr.view || document.body : i;
          return (
            (n.isManual = !0),
            (e = h(this, t, [r({ el: a }, n)])).onInit &&
              (Yr.isLoadedStyles
                ? e.onInit()
                : Ha.once("loadedStyles", function () {
                    e.onInit();
                  })),
            e
          );
        }
        return (
          v(t, e),
          w(t, null, [
            {
              key: "register",
              value: function () {
                (function (e) {
                  var t = So();
                  t in wo || (wo[t] = e);
                })(this),
                  Ha.emit("readyPage");
              }
            }
          ])
        );
      })(Zs);
      V(tl, "isPage", !0),
        ((T = (function (e) {
          function t() {
            return b(this, t), h(this, t, arguments);
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  (this.arrowDefault = this.refs["arrow-default"]),
                    (this.arrowHover = this.refs["arrow-hover"]),
                    this.el.dataset.container
                      ? (this.mouseEventTarget = this.el.closest(
                          "." + this.el.dataset.container
                        ))
                      : (this.mouseEventTarget = this.el),
                    (this.onMouseenter = As(
                      this.mouseEventTarget,
                      this.mouseenterHandler.bind(this)
                    )),
                    (this.onMouseenter = Ps(
                      this.mouseEventTarget,
                      this.mouseleaveHandler.bind(this)
                    ));
                }
              },
              {
                key: "mouseenterHandler",
                value: function () {
                  var e = this;
                  this.mouseEventTarget.classList.remove(
                    "-hoverButton",
                    "-hoverButtonComplete",
                    "-blurButton"
                  ),
                    setTimeout(function () {
                      return e.mouseEventTarget.classList.add("-hoverButton");
                    }, 100),
                    this.hoverTween && this.hoverTween.kill(),
                    (this.hoverTween = Oo(this.el, {
                      duration: 0.8,
                      onComplete: function () {
                        e.mouseEventTarget.classList.add(
                          "-hoverButtonComplete"
                        );
                      }
                    }));
                }
              },
              {
                key: "mouseleaveHandler",
                value: function () {
                  var e = this;
                  this.mouseEventTarget.classList.remove("-hoverButton"),
                    this.mouseEventTarget.classList.add("-hoverButtonComplete"),
                    setTimeout(function () {
                      return e.mouseEventTarget.classList.add("-blurButton");
                    }, 100),
                    this.hoverTween && this.hoverTween.kill(),
                    (this.hoverTween = Oo(this.el, {
                      duration: 0.8,
                      onComplete: function () {
                        e.mouseEventTarget.classList.remove(
                          "-hoverButton",
                          "-hoverButtonComplete",
                          "-blurButton"
                        );
                      }
                    }));
                }
              },
              {
                key: "onDestroy",
                value: function () {
                  this.hoverTween &&
                    (this.hoverTween.kill(), (this.hoverTween = void 0));
                }
              }
            ])
          );
        })(Zs)),
        V(T, "componentName", "Button"),
        T).register();
      var nl =
        /([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;
      function il(e) {
        var t = e.nodeType,
          n = "";
        if (1 === t || 9 === t || 11 === t) {
          if ("string" == typeof e.textContent) return e.textContent;
          for (e = e.firstChild; e; e = e.nextSibling) n += il(e);
        } else if (3 === t || 4 === t) return e.nodeValue;
        return n;
      }
      var rl,
        al,
        ol,
        sl,
        ll,
        ul,
        cl = /(?:\r|\n|\t\t)/g,
        hl = /(?:\s\s+)/g,
        dl = function (e) {
          (rl = document),
            (al = window),
            (sl =
              sl ||
              e ||
              al.gsap ||
              console.warn("Please gsap.registerPlugin(SplitText)")) &&
              ((ul = sl.utils.toArray),
              (ll = sl.core.context || function () {}),
              (ol = 1));
        },
        pl = function (e) {
          return al.getComputedStyle(e);
        },
        fl = function (e) {
          return "absolute" === e.position || !0 === e.absolute;
        },
        vl = function (e, t) {
          for (var n, i = t.length; --i > -1; )
            if (((n = t[i]), e.substr(0, n.length) === n)) return n.length;
        },
        ml = function (e, t) {
          void 0 === e && (e = "");
          var n = ~e.indexOf("++"),
            i = 1;
          return (
            n && (e = e.split("++").join("")),
            function () {
              return (
                "<" +
                t +
                " style='position:relative;display:inline-block;'" +
                (e ? " class='" + e + (n ? i++ : "") + "'>" : ">")
              );
            }
          );
        },
        gl = function e(t, n, i) {
          var r = t.nodeType;
          if (1 === r || 9 === r || 11 === r)
            for (t = t.firstChild; t; t = t.nextSibling) e(t, n, i);
          else
            (3 === r || 4 === r) &&
              (t.nodeValue = t.nodeValue.split(n).join(i));
        },
        _l = function (e, t) {
          for (var n = t.length; --n > -1; ) e.push(t[n]);
        },
        yl = function (e, t, n) {
          for (var i; e && e !== t; ) {
            if ((i = e._next || e.nextSibling))
              return i.textContent.charAt(0) === n;
            e = e.parentNode || e._parent;
          }
        },
        bl = function e(t) {
          var n,
            i,
            r = ul(t.childNodes),
            a = r.length;
          for (n = 0; n < a; n++)
            (i = r[n])._isSplit
              ? e(i)
              : n && i.previousSibling && 3 === i.previousSibling.nodeType
              ? ((i.previousSibling.nodeValue +=
                  3 === i.nodeType ? i.nodeValue : i.firstChild.nodeValue),
                t.removeChild(i))
              : 3 !== i.nodeType &&
                (t.insertBefore(i.firstChild, i), t.removeChild(i));
        },
        xl = function (e, t) {
          return parseFloat(t[e]) || 0;
        },
        wl = function (e, t, n, i, r, a, o) {
          var s,
            l,
            u,
            c,
            h,
            d,
            p,
            f,
            v,
            m,
            g,
            _,
            y = pl(e),
            b = xl("paddingLeft", y),
            x = -999,
            w = xl("borderBottomWidth", y) + xl("borderTopWidth", y),
            S = xl("borderLeftWidth", y) + xl("borderRightWidth", y),
            M = xl("paddingTop", y) + xl("paddingBottom", y),
            T = xl("paddingLeft", y) + xl("paddingRight", y),
            k = xl("fontSize", y) * (t.lineThreshold || 0.2),
            E = y.textAlign,
            C = [],
            D = [],
            A = [],
            P = t.wordDelimiter || " ",
            L = t.tag ? t.tag : t.span ? "span" : "div",
            R = t.type || t.split || "chars,words,lines",
            I = r && ~R.indexOf("lines") ? [] : null,
            O = ~R.indexOf("words"),
            N = ~R.indexOf("chars"),
            F = fl(t),
            U = t.linesClass,
            B = ~(U || "").indexOf("++"),
            z = [],
            V = "flex" === y.display,
            H = e.style.display;
          for (
            B && (U = U.split("++").join("")),
              V && (e.style.display = "block"),
              u = (l = e.getElementsByTagName("*")).length,
              h = [],
              s = 0;
            s < u;
            s++
          )
            h[s] = l[s];
          if (I || F)
            for (s = 0; s < u; s++)
              ((d = (c = h[s]).parentNode === e) || F || (N && !O)) &&
                ((_ = c.offsetTop),
                I &&
                  d &&
                  Math.abs(_ - x) > k &&
                  ("BR" !== c.nodeName || 0 === s) &&
                  ((p = []), I.push(p), (x = _)),
                F &&
                  ((c._x = c.offsetLeft),
                  (c._y = _),
                  (c._w = c.offsetWidth),
                  (c._h = c.offsetHeight)),
                I &&
                  (((c._isSplit && d) ||
                    (!N && d) ||
                    (O && d) ||
                    (!O &&
                      c.parentNode.parentNode === e &&
                      !c.parentNode._isSplit)) &&
                    (p.push(c), (c._x -= b), yl(c, e, P) && (c._wordEnd = !0)),
                  "BR" === c.nodeName &&
                    ((c.nextSibling && "BR" === c.nextSibling.nodeName) ||
                      0 === s) &&
                    I.push([])));
          for (s = 0; s < u; s++)
            if (((d = (c = h[s]).parentNode === e), "BR" !== c.nodeName)) {
              if (
                (F &&
                  ((v = c.style),
                  !O &&
                    !d &&
                    ((c._x += c.parentNode._x), (c._y += c.parentNode._y)),
                  (v.left = c._x + "px"),
                  (v.top = c._y + "px"),
                  (v.position = "absolute"),
                  (v.display = "block"),
                  (v.width = c._w + 1 + "px"),
                  (v.height = c._h + "px")),
                !O && N)
              ) {
                if (c._isSplit)
                  for (
                    c._next = l = c.nextSibling, c.parentNode.appendChild(c);
                    l && 3 === l.nodeType && " " === l.textContent;

                  )
                    (c._next = l.nextSibling),
                      c.parentNode.appendChild(l),
                      (l = l.nextSibling);
                else
                  c.parentNode._isSplit
                    ? ((c._parent = c.parentNode),
                      !c.previousSibling &&
                        c.firstChild &&
                        (c.firstChild._isFirst = !0),
                      c.nextSibling &&
                        " " === c.nextSibling.textContent &&
                        !c.nextSibling.nextSibling &&
                        z.push(c.nextSibling),
                      (c._next =
                        c.nextSibling && c.nextSibling._isFirst
                          ? null
                          : c.nextSibling),
                      c.parentNode.removeChild(c),
                      h.splice(s--, 1),
                      u--)
                    : d ||
                      ((_ = !c.nextSibling && yl(c.parentNode, e, P)),
                      c.parentNode._parent &&
                        c.parentNode._parent.appendChild(c),
                      _ && c.parentNode.appendChild(rl.createTextNode(" ")),
                      "span" === L && (c.style.display = "inline"),
                      C.push(c));
              } else
                c.parentNode._isSplit && !c._isSplit && "" !== c.innerHTML
                  ? D.push(c)
                  : N &&
                    !c._isSplit &&
                    ("span" === L && (c.style.display = "inline"), C.push(c));
            } else
              I || F
                ? (c.parentNode && c.parentNode.removeChild(c),
                  h.splice(s--, 1),
                  u--)
                : O || e.appendChild(c);
          for (s = z.length; --s > -1; ) z[s].parentNode.removeChild(z[s]);
          if (I) {
            for (
              F &&
                ((m = rl.createElement(L)),
                e.appendChild(m),
                (g = m.offsetWidth + "px"),
                (_ = m.offsetParent === e ? 0 : e.offsetLeft),
                e.removeChild(m)),
                v = e.style.cssText,
                e.style.cssText = "display:none;";
              e.firstChild;

            )
              e.removeChild(e.firstChild);
            for (
              f = " " === P && (!F || (!O && !N)), s = 0;
              s < I.length;
              s++
            ) {
              for (
                p = I[s],
                  (m = rl.createElement(L)).style.cssText =
                    "display:block;text-align:" +
                    E +
                    ";position:" +
                    (F ? "absolute;" : "relative;"),
                  U && (m.className = U + (B ? s + 1 : "")),
                  A.push(m),
                  u = p.length,
                  l = 0;
                l < u;
                l++
              )
                "BR" !== p[l].nodeName &&
                  ((c = p[l]),
                  m.appendChild(c),
                  f && c._wordEnd && m.appendChild(rl.createTextNode(" ")),
                  F &&
                    (0 === l &&
                      ((m.style.top = c._y + "px"),
                      (m.style.left = b + _ + "px")),
                    (c.style.top = "0px"),
                    _ && (c.style.left = c._x - _ + "px")));
              0 === u
                ? (m.innerHTML = "&nbsp;")
                : !O && !N && (bl(m), gl(m, String.fromCharCode(160), " ")),
                F && ((m.style.width = g), (m.style.height = c._h + "px")),
                e.appendChild(m);
            }
            e.style.cssText = v;
          }
          F &&
            (o > e.clientHeight &&
              ((e.style.height = o - M + "px"),
              e.clientHeight < o && (e.style.height = o + w + "px")),
            a > e.clientWidth &&
              ((e.style.width = a - T + "px"),
              e.clientWidth < a && (e.style.width = a + S + "px"))),
            V &&
              (H ? (e.style.display = H) : e.style.removeProperty("display")),
            _l(n, C),
            O && _l(i, D),
            _l(r, A);
        },
        Sl = function (e, t, n, i) {
          var r,
            a,
            o,
            s,
            l,
            u,
            c,
            h,
            d = t.tag ? t.tag : t.span ? "span" : "div",
            p = ~(t.type || t.split || "chars,words,lines").indexOf("chars"),
            f = fl(t),
            v = t.wordDelimiter || " ",
            m = " " !== v ? "" : f ? "&#173; " : " ",
            g = "</" + d + ">",
            _ = 1,
            y = t.specialChars
              ? "function" == typeof t.specialChars
                ? t.specialChars
                : vl
              : null,
            b = rl.createElement("div"),
            x = e.parentNode;
          for (
            x.insertBefore(b, e),
              b.textContent = e.nodeValue,
              x.removeChild(e),
              c = -1 !== (r = il((e = b))).indexOf("<"),
              !1 !== t.reduceWhiteSpace &&
                (r = r.replace(hl, " ").replace(cl, "")),
              c && (r = r.split("<").join("{{LT}}")),
              l = r.length,
              a = (" " === r.charAt(0) ? m : "") + n(),
              o = 0;
            o < l;
            o++
          )
            if (((u = r.charAt(o)), y && (h = y(r.substr(o), t.specialChars))))
              (u = r.substr(o, h || 1)),
                (a += p && " " !== u ? i() + u + "</" + d + ">" : u),
                (o += h - 1);
            else if (u === v && r.charAt(o - 1) !== v && o) {
              for (a += _ ? g : "", _ = 0; r.charAt(o + 1) === v; )
                (a += m), o++;
              o === l - 1
                ? (a += m)
                : ")" !== r.charAt(o + 1) && ((a += m + n()), (_ = 1));
            } else
              "{" === u && "{{LT}}" === r.substr(o, 6)
                ? ((a += p ? i() + "{{LT}}</" + d + ">" : "{{LT}}"), (o += 5))
                : (u.charCodeAt(0) >= 55296 && u.charCodeAt(0) <= 56319) ||
                  (r.charCodeAt(o + 1) >= 65024 && r.charCodeAt(o + 1) <= 65039)
                ? ((s =
                    ((r.substr(o, 12).split(nl) || [])[1] || "").length || 2),
                  (a +=
                    p && " " !== u
                      ? i() + r.substr(o, s) + "</" + d + ">"
                      : r.substr(o, s)),
                  (o += s - 1))
                : (a += p && " " !== u ? i() + u + "</" + d + ">" : u);
          (e.outerHTML = a + (_ ? g : "")), c && gl(x, "{{LT}}", "<");
        },
        Ml = function e(t, n, i, r) {
          var a,
            o,
            s = ul(t.childNodes),
            l = s.length,
            u = fl(n);
          if (3 !== t.nodeType || l > 1) {
            for (n.absolute = !1, a = 0; a < l; a++)
              ((o = s[a])._next = o._isFirst = o._parent = o._wordEnd = null),
                (3 !== o.nodeType || /\S+/.test(o.nodeValue)) &&
                  (u &&
                    3 !== o.nodeType &&
                    "inline" === pl(o).display &&
                    ((o.style.display = "inline-block"),
                    (o.style.position = "relative")),
                  (o._isSplit = !0),
                  e(o, n, i, r));
            return (n.absolute = u), void (t._isSplit = !0);
          }
          Sl(t, n, i, r);
        },
        Tl = (function () {
          function e(e, t) {
            ol || dl(),
              (this.elements = ul(e)),
              (this.chars = []),
              (this.words = []),
              (this.lines = []),
              (this._originals = []),
              (this.vars = t || {}),
              ll(this),
              this.split(t);
          }
          var t = e.prototype;
          return (
            (t.split = function (e) {
              this.isSplit && this.revert(),
                (this.vars = e = e || this.vars),
                (this._originals.length =
                  this.chars.length =
                  this.words.length =
                  this.lines.length =
                    0);
              for (
                var t,
                  n,
                  i,
                  r = this.elements.length,
                  a = e.tag ? e.tag : e.span ? "span" : "div",
                  o = ml(e.wordsClass, a),
                  s = ml(e.charsClass, a);
                --r > -1;

              )
                (i = this.elements[r]),
                  (this._originals[r] = i.innerHTML),
                  (t = i.clientHeight),
                  (n = i.clientWidth),
                  Ml(i, e, o, s),
                  wl(i, e, this.chars, this.words, this.lines, n, t);
              return (
                this.chars.reverse(),
                this.words.reverse(),
                this.lines.reverse(),
                (this.isSplit = !0),
                this
              );
            }),
            (t.revert = function () {
              var e = this._originals;
              if (!e) throw "revert() call wasn't scoped properly.";
              return (
                this.elements.forEach(function (t, n) {
                  return (t.innerHTML = e[n]);
                }),
                (this.chars = []),
                (this.words = []),
                (this.lines = []),
                (this.isSplit = !1),
                this
              );
            }),
            (e.create = function (t, n) {
              return new e(t, n);
            }),
            e
          );
        })();
      function kl(e, t, n) {
        return e * (1 - n) + t * n;
      }
      function El(e, t) {
        return (e + t) % t;
      }
      (Tl.version = "3.11.4"), (Tl.register = dl);
      var Cl = function (e) {
          return (
            (function (e) {
              return !!e && "object" == M(e);
            })(e) &&
            !(function (e) {
              var t = Object.prototype.toString.call(e);
              return (
                "[object RegExp]" === t ||
                "[object Date]" === t ||
                (function (e) {
                  return e.$$typeof === Dl;
                })(e)
              );
            })(e)
          );
        },
        Dl =
          "function" == typeof Symbol && Symbol.for
            ? Symbol.for("react.element")
            : 60103;
      function Al(e, t) {
        return !1 !== t.clone && t.isMergeableObject(e)
          ? Il(
              (function (e) {
                return Array.isArray(e) ? [] : {};
              })(e),
              e,
              t
            )
          : e;
      }
      function Pl(e, t, n) {
        return e.concat(t).map(function (e) {
          return Al(e, n);
        });
      }
      function Ll(e) {
        return Object.keys(e).concat(
          (function (e) {
            return Object.getOwnPropertySymbols
              ? Object.getOwnPropertySymbols(e).filter(function (t) {
                  return Object.propertyIsEnumerable.call(e, t);
                })
              : [];
          })(e)
        );
      }
      function Rl(e, t) {
        try {
          return t in e;
        } catch (e) {
          return !1;
        }
      }
      function Il(e, t, n) {
        ((n = n || {}).arrayMerge = n.arrayMerge || Pl),
          (n.isMergeableObject = n.isMergeableObject || Cl),
          (n.cloneUnlessOtherwiseSpecified = Al);
        var i = Array.isArray(t);
        return i === Array.isArray(e)
          ? i
            ? n.arrayMerge(e, t, n)
            : (function (e, t, n) {
                var i = {};
                return (
                  n.isMergeableObject(e) &&
                    Ll(e).forEach(function (t) {
                      i[t] = Al(e[t], n);
                    }),
                  Ll(t).forEach(function (r) {
                    (function (e, t) {
                      return (
                        Rl(e, t) &&
                        !(
                          Object.hasOwnProperty.call(e, t) &&
                          Object.propertyIsEnumerable.call(e, t)
                        )
                      );
                    })(e, r) ||
                      (Rl(e, r) && n.isMergeableObject(t[r])
                        ? (i[r] = (function (e, t) {
                            if (!t.customMerge) return Il;
                            var n = t.customMerge(e);
                            return "function" == typeof n ? n : Il;
                          })(r, n)(e[r], t[r], n))
                        : (i[r] = Al(t[r], n)));
                  }),
                  i
                );
              })(e, t, n)
          : Al(t, n);
      }
      Il.all = function (e, t) {
        if (!Array.isArray(e))
          throw new Error("first argument should be an array");
        return e.reduce(function (e, n) {
          return Il(e, n, t);
        }, {});
      };
      var Ol = H(Il),
        Nl = (function () {
          return w(
            function t(i) {
              var r = this,
                a =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {},
                o = a.thumbnailTime,
                s = void 0 === o ? 0 : o,
                l = a.loop,
                u = void 0 !== l && l,
                c = a.preload,
                h = void 0 !== c && c,
                d = a.isCrossOrigin,
                p = void 0 !== d && d,
                f = a.isAddToLoadingWait,
                v = void 0 !== f && f;
              if (
                (b(this, t),
                V(this, "el", void 0),
                V(this, "thumbnailTime", 0),
                V(this, "_promise", void 0),
                V(this, "isPlay", !1),
                V(this, "isLoaded", !1),
                Array.isArray(i))
              ) {
                var m = document.createElement("video");
                p && (m.crossOrigin = "anonymous"),
                  m.setAttribute("muted", ""),
                  m.setAttribute("playsinline", ""),
                  u && m.setAttribute("loop", ""),
                  h || m.setAttribute("preload", "none"),
                  (this.el = m),
                  i.forEach(function (e) {
                    var t = document.createElement("source");
                    (t.type = e.endsWith(".mov")
                      ? "video/quicktime"
                      : e.endsWith(".webm")
                      ? "video/webm"
                      : e.endsWith(".mp4")
                      ? "video/mp4"
                      : ""),
                      (t.src = e),
                      m.appendChild(t);
                  });
              } else if ("string" == typeof i) {
                var g = document.createElement("video");
                p && (g.crossOrigin = "anonymous"),
                  g.setAttribute("muted", ""),
                  g.setAttribute("playsinline", ""),
                  u && g.setAttribute("loop", ""),
                  h || g.setAttribute("preload", "none"),
                  (g.src = i),
                  (this.el = g);
              } else this.el = i;
              (this.thumbnailTime = s),
                v &&
                  (Yr.loadingCountList[Yr.pageId].push(
                    new Promise(
                      (function () {
                        var t = n(
                          e().mark(function t(n) {
                            return e().wrap(function (e) {
                              for (;;)
                                switch ((e.prev = e.next)) {
                                  case 0:
                                    r.load(n);
                                  case 1:
                                  case "end":
                                    return e.stop();
                                }
                            }, t);
                          })
                        );
                        return function (e) {
                          return t.apply(this, arguments);
                        };
                      })()
                    )
                  ),
                  Us());
            },
            [
              {
                key: "play",
                value: function () {
                  var e = this;
                  if (!this.isPlay)
                    return (
                      (this.isPlay = !0),
                      (this._promise = this.el.play().catch(function () {
                        e.el.currentTime = e.thumbnailTime;
                      }))
                    );
                }
              },
              {
                key: "pause",
                value: function () {
                  var e,
                    t = this;
                  this.isPlay &&
                    ((this.isPlay = !1),
                    null === (e = this._promise) ||
                      void 0 === e ||
                      e.then(function () {
                        t.isPlay || t.el.pause();
                      }));
                }
              },
              {
                key: "load",
                value: function (e) {
                  this.isLoaded ||
                    ((this.isLoaded = !0),
                    this.el.addEventListener("loadedmetadata", e),
                    this.el.load());
                }
              },
              {
                key: "restart",
                value: function () {
                  (this.isPlay = !1), this.play();
                }
              },
              {
                key: "getDuration",
                value: function () {
                  return this.el.duration;
                }
              }
            ]
          );
        })();
      ((k = (function (e) {
        function t() {
          var e;
          b(this, t);
          for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
            i[r] = arguments[r];
          return V((e = h(this, t, [].concat(i))), "isOpen", !1), e;
        }
        return (
          v(t, e),
          w(t, [
            {
              key: "onInit",
              value: function () {
                var e,
                  t = this,
                  n = this.el,
                  i = n.dataset.modal ? JSON.parse(n.dataset.modal) : {},
                  r = i.id,
                  a = void 0 === r ? n.id || n.dataset.modal : r,
                  o = i.isDisableAnimation,
                  s = void 0 !== o && o;
                (this.id = a),
                  (this.isDisableAnimation = s),
                  (this.elBody = document.body),
                  (this.elContent = this.el.querySelector(
                    "[data-modal-content]"
                  )),
                  (this.elBackdrop = this.el.querySelector(
                    "[data-modal-backdrop]"
                  )),
                  (this.elsClose =
                    this.el.querySelectorAll("[data-modal-close]")),
                  this.isDisableAnimation ||
                    (Fo(this.elContent, { visibility: "hidden" }),
                    this.elBackdrop && Fo(this.elBackdrop, { opacity: 0 }),
                    (Yr.modals[this.id] = this)),
                  null === (e = this.elContent) ||
                    void 0 === e ||
                    e.addEventListener(
                      "click",
                      function (e) {
                        e.stopPropagation();
                      },
                      ga
                    );
                var l = function (e) {
                  t.isDisableAnimation || Fo(e, { opacity: 0 }),
                    e.addEventListener(
                      "click",
                      function (e) {
                        e.stopPropagation(), Ha.emit("closeModal", t.id);
                      },
                      ga
                    );
                };
                this.elsClose.length > 0
                  ? this.elsClose.forEach(function (e) {
                      l(e);
                    })
                  : 0 !== this.elsClose.length && l(this.elsClose);
              }
            },
            {
              key: "onClick",
              value: function (e) {
                e.stopPropagation(), Ha.emit("closeModal", this.id);
              }
            },
            {
              key: "open",
              value: function (e) {
                this.isDisableAnimation ||
                  this.isOpen ||
                  ((this.isOpen = !0),
                  this.el.classList.add("-open"),
                  this.elBody.classList.add("-open"),
                  gsap.set(this.elContent, { visibility: "visible" }),
                  Oo(this.elContent, {
                    duration: 0.6,
                    ease: "expo.out",
                    onComplete: this.elBackdrop ? null : e
                  }),
                  Oo(this.elContent, {
                    duration: 0.6,
                    scrollTop: 0,
                    ease: "power2.out"
                  }),
                  Oo(this.elsClose, {
                    opacity: 1,
                    duration: 0.6,
                    ease: "power2.out",
                    delay: 0.2
                  }),
                  this.elBackdrop &&
                    No(
                      this.elBackdrop,
                      { opacity: 0, scale: this.isSp ? 0.8 : 0.9 },
                      { opacity: 1, scale: 1, duration: 0.8, ease: "expo.out" }
                    ));
              }
            },
            {
              key: "close",
              value: function (e) {
                var t = this,
                  n =
                    arguments.length > 1 &&
                    void 0 !== arguments[1] &&
                    arguments[1];
                this.isDisableAnimation ||
                  (this.isOpen &&
                    ((this.isOpen = !1),
                    Oo(this.elContent, {
                      duration: n ? 0.01 : this.isSp ? 0.8 : 0.5,
                      ease: "power4.out",
                      onComplete: this.elBackdrop
                        ? null
                        : function () {
                            t.el.classList.remove("-open"),
                              t.elBody.classList.remove("-open"),
                              e && e();
                          }
                    }),
                    Oo(this.elContent, {
                      duration: n ? 0.01 : this.isSp ? 0.6 : 0.35,
                      ease: "power2.out"
                    }),
                    Oo(this.elsClose, {
                      opacity: 0,
                      duration: n ? 0.01 : this.isSp ? 0.6 : 0.35,
                      ease: "power2.out"
                    }),
                    this.elBackdrop &&
                      Oo(this.elBackdrop, [
                        {
                          scale: this.isSp ? 0.8 : 0.9,
                          duration: n ? 0.01 : this.isSp ? 0.3 : 0.5,
                          ease: "power4.out"
                        },
                        {
                          opacity: 0,
                          duration: n ? 0.01 : this.isSp ? 0.3 : 0.5,
                          ease: "power2.out",
                          onComplete: function () {
                            t.el.classList.remove("-open"),
                              t.elBody.classList.remove("-open"),
                              Fo(t.elContent, { visibility: "hidden" }),
                              e && e();
                          }
                        }
                      ])));
              }
            },
            {
              key: "onLeave",
              value: function () {
                this.isDisableAnimation || (this.isOpen && this.close());
              }
            }
          ])
        );
      })(Zs)),
      V(k, "selectorRoot", "[data-modal]:not([data-modal-manual])"),
      k).register(),
        ((E = (function (e) {
          function t() {
            var e;
            b(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return V((e = h(this, t, [].concat(i))), "isOpen", !1), e;
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  this.id = this.el.dataset.modalTrigger;
                }
              },
              {
                key: "onClick",
                value: function (e) {
                  e.preventDefault(),
                    this.isOpen
                      ? (Ha.emit("closeModal", this.id), (this.isOpen = !1))
                      : (Ha.emit("openModal", this.id), (this.isOpen = !0));
                }
              },
              {
                key: "onCloseModal",
                value: function (e) {
                  e === this.id && (this.isOpen = !1);
                }
              },
              {
                key: "onLeave",
                value: function (e) {
                  e === this.id && (this.isOpen = !1);
                }
              }
            ])
          );
        })(Zs)),
        V(
          E,
          "selectorRoot",
          "[data-modal-trigger]:not([data-modal-trigger-manual])"
        ),
        E).register(),
        ((C = (function (e) {
          function t() {
            return b(this, t), h(this, t, arguments);
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  (this.isDisableHash = "disableHash" in this.el.dataset),
                    (this.to = this.el.getAttribute("href")),
                    (this.onTouchStartHandler = this.onTouchStart.bind(this)),
                    (this.swipe = new Ks(
                      this.el,
                      function () {
                        return null;
                      },
                      { onStart: this.onTouchStartHandler }
                    ));
                }
              },
              {
                key: "onMouseenter",
                value: function () {
                  this.path = window.location.pathname;
                }
              },
              {
                key: "onTouchStart",
                value: function () {
                  this.path = window.location.pathname;
                }
              },
              {
                key: "onClick",
                value: function (e) {
                  if (!Yr.cScroll.isDisable) {
                    if ("#top" === this.to)
                      return (
                        e.preventDefault(),
                        !this.isDisableHash &&
                          location.hash &&
                          window.history.pushState(
                            null,
                            "",
                            window.location.pathname
                          ),
                        (Yr.isAnchor = !0),
                        void this.detectOpenModal()
                      );
                    if (
                      this.to.startsWith("#") ||
                      this.to.includes(this.path)
                    ) {
                      var t = document.querySelector(
                        this.el.hash.replace(/#(.+)/, function (e, t) {
                          return "#".concat(decodeURIComponent(t));
                        })
                      );
                      t &&
                        (e.preventDefault(),
                        this.isDisableHash ||
                          window.history.pushState(null, "", this.to),
                        (Yr.isAnchor = !0),
                        this.detectOpenModal(t));
                    }
                  }
                }
              },
              {
                key: "detectOpenModal",
                value: function (e) {
                  var t = this;
                  Yr.isOpenModal
                    ? (Ha.emit("closeModal"),
                      requestAnimationFrame(function () {
                        t.scrollTo(e);
                      }))
                    : this.scrollTo(e);
                }
              },
              {
                key: "scrollTo",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0;
                  Yr.cScroll.scrollTo(e, {
                    onComplete: function () {
                      Yr.isAnchor = !1;
                    }
                  });
                }
              },
              {
                key: "onDestroy",
                value: function () {
                  this.swipe.destroy();
                }
              }
            ])
          );
        })(Zs)),
        V(C, "selectorRoot", 'a[href*="#"]:not([href="#"])'),
        C).register(),
        ((D = (function (e) {
          function t() {
            var e;
            b(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return (
              V((e = h(this, t, [].concat(i))), "isOpen", !1),
              V(e, "isAnimating", !1),
              e
            );
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  if (!this.isDestroyed) {
                    var t = Ol(
                        this.option,
                        JSON.parse(this.el.dataset.accordion || "{}")
                      ),
                      n = t.isDisablePc,
                      i = void 0 !== n && n,
                      r = t.isDisableSp,
                      a = void 0 !== r && r,
                      o = t.isOpenPc,
                      s = void 0 !== o && o,
                      l = t.isOpenSp,
                      u = void 0 !== l && l;
                    if ((!this.isSp && i) || (this.isSp && a))
                      return (
                        this.el.classList.add("-disable"),
                        void (this.isDisable = !0)
                      );
                    (this.elsTrigger = this.el.querySelectorAll(
                      "[data-accordion-trigger]"
                    )),
                      (this.elContent = this.el.querySelector(
                        "[data-accordion-content]"
                      )),
                      (this.elIcon = this.el.querySelector(
                        "[data-accordion-icon]"
                      )),
                      0 !== this.elsTrigger.length &&
                        this.elContent &&
                        (Fo(this.elContent, { overflow: "hidden", height: 0 }),
                        (this._onClickTrigger = this.clickTrigger.bind(this)),
                        this.elsTrigger.forEach(function (t) {
                          t.addEventListener("click", e._onClickTrigger, ga);
                        }),
                        ((this.isSp && u) || (!this.isSp && s)) &&
                          this.open(!0));
                  }
                }
              },
              {
                key: "clickTrigger",
                value: function () {
                  this.isOpen ? this.close() : this.open();
                }
              },
              {
                key: "open",
                value: function () {
                  var e = this,
                    t =
                      arguments.length > 0 &&
                      void 0 !== arguments[0] &&
                      arguments[0];
                  this.isAnimating ||
                    this.isOpen ||
                    ((this.isOpen = !0),
                    (this.isAnimating = !0),
                    this.el.classList.add("-open", "-animating"),
                    this.elsTrigger.forEach(function (e) {
                      e.classList.add("-open");
                    }),
                    this.elIcon && this.elIcon.classList.add("-open"),
                    Oo(this.elContent, {
                      height: "auto",
                      duration: t ? 0 : 0.9,
                      ease: "Expo.easeInOut",
                      onComplete: function () {
                        e.el.classList.remove("-animating"),
                          Fa(!0),
                          (e.isAnimating = !1);
                      }
                    }));
                }
              },
              {
                key: "close",
                value: function () {
                  var e = this,
                    t =
                      arguments.length > 0 &&
                      void 0 !== arguments[0] &&
                      arguments[0];
                  this.isAnimating ||
                    !this.isOpen ||
                    ((this.isOpen = !1),
                    (this.isAnimating = !0),
                    this.el.classList.remove("-open"),
                    this.el.classList.add("-animating"),
                    this.elsTrigger.forEach(function (e) {
                      e.classList.remove("-open");
                    }),
                    this.elIcon && this.elIcon.classList.remove("-open"),
                    Oo(this.elContent, {
                      height: 0,
                      duration: t ? 0 : 0.8,
                      ease: "Expo.easeOut",
                      onComplete: function () {
                        e.el.classList.remove("-animating"),
                          Fa(!0),
                          (e.isAnimating = !1);
                      }
                    }));
                }
              },
              {
                key: "onDestroy",
                value: function () {
                  var e,
                    t = this;
                  this.isDisable ||
                    (null !== (e = this.elsTrigger) &&
                      void 0 !== e &&
                      e.forEach(function (e) {
                        e.removeEventListener("click", t._onClickTrigger, ga);
                      }),
                    (this._onClickTrigger = null),
                    (this.elsTrigger = null),
                    (this.elContent = null));
                }
              }
            ])
          );
        })(Zs)),
        V(D, "selectorRoot", "[data-accordion]"),
        D).register();
      var Fl = "-disable",
        Ul = (function () {
          return w(
            function e(t) {
              b(this, e),
                (this.el = t),
                (this._eClickHandler = void 0),
                (this.onClick = void 0);
            },
            [
              {
                key: "init",
                value: function () {
                  (this._mouseTarget = this.el),
                    (this._eClickHandler = this._eClick.bind(this)),
                    this.el.addEventListener("click", this._eClickHandler);
                }
              },
              {
                key: "_eClick",
                value: function (e) {
                  this.onClick && this.onClick(e);
                }
              },
              {
                key: "getPos",
                value: function () {
                  var e = document.defaultView.getComputedStyle(this.el, null),
                    t = Number(e.width.replace("px", "")),
                    n = this.el.getBoundingClientRect(),
                    i =
                      window.pageXOffset || document.documentElement.scrollLeft,
                    r = n.left + i;
                  return { width: t, x: r, right: r + t };
                }
              },
              {
                key: "onResize",
                value: function () {
                  this.width = this.el.clientWidth;
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.el &&
                    (this._mouseTarget.removeEventListener(
                      "click",
                      this._eClickHandler
                    ),
                    (this.el = null),
                    (this._eClickHandler = null)),
                    (this.onClick = null);
                }
              }
            ]
          );
        })();
      ((A = (function (e) {
        function t() {
          var e;
          b(this, t);
          for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
            i[r] = arguments[r];
          return (
            V((e = h(this, t, [].concat(i))), "_isInit", !1),
            V(e, "_isDisable", !1),
            V(e, "item", null),
            V(e, "_isMouseDown", !1),
            V(e, "_isMouseMove", !1),
            V(e, "_isMouseMoveVertical", !1),
            V(e, "_isProgressDrag", !1),
            V(e, "_pos", null),
            V(e, "_posOffset", null),
            V(e, "_startPos", null),
            V(e, "_listSize", null),
            V(e, "_totalSize", 0),
            V(e, "_listOffsetLeft", 0),
            V(e, "_follow", 0),
            V(e, "_isMoving", !1),
            V(e, "_isMoveUseBtn", !1),
            V(e, "_isMovingLoop", !1),
            V(e, "_isLastPositionRight", !1),
            V(e, "isIntersecting", !1),
            V(e, "_moveTotal", 0),
            V(e, "nowKey", 0),
            V(e, "_nowKeyCurrent", -1),
            V(e, "_nowKeyNext", -1),
            V(e, "_nowKeyPrev", -1),
            V(e, "_nowKeyCurrent2", -1),
            V(e, "_nowKeyNext2", -1),
            V(e, "_nowKeyPrev2", -1),
            V(e, "_nowKeyCurrent3", -1),
            V(e, "_nowKeyNext3", -1),
            V(e, "_nowKeyPrev3", -1),
            V(e, "_eMouseOverHandler", void 0),
            V(e, "_eMouseOutHandler", void 0),
            V(e, "_eMouseDownHandler", void 0),
            V(e, "_eMouseMoveHandler", void 0),
            V(e, "_eMouseUpHandler", void 0),
            V(e, "_eWindowMouseUpHandler", void 0),
            V(e, "_eClickNextBtnHandler", void 0),
            V(e, "_eClickPrevBtnHandler", void 0),
            V(e, "_eClickNextSlideHandler", void 0),
            V(e, "_eClickPrevSlideHandler", void 0),
            V(e, "_moveTween", void 0),
            V(e, "_lastPos", void 0),
            V(e, "onClickItem", void 0),
            V(e, "indexCurrent", 0),
            V(e, "positionLoopOneSide", 0),
            V(e, "xNext", 0),
            V(e, "xPrev", 0),
            V(e, "mouse", null),
            V(e, "mouseOld", null),
            V(e, "mouseStart", null),
            V(e, "mouseDiff", null),
            V(e, "mouseDist", null),
            V(e, "progress", { value: 0, start: 0, total: 0, offset: 0 }),
            e
          );
        }
        return (
          v(t, e),
          w(t, [
            {
              key: "onInit",
              value: function () {
                var e = this.el,
                  t = e.dataset.slider ? JSON.parse(e.dataset.slider) : {},
                  n = t.isDisablePc,
                  i = void 0 !== n && n,
                  a = t.isDisableSp,
                  o = void 0 !== a && a,
                  s = t.isLoop,
                  l = void 0 !== s && s,
                  u = t.isLoopOneSide,
                  c = void 0 !== u && u,
                  h = t.isAutoPlay,
                  d = void 0 !== h && h,
                  p = t.interval,
                  f = void 0 === p ? 5 : p,
                  v = (t.easePaginationProgress, t.fps),
                  m = void 0 === v ? 60 : v,
                  g = t.isLastPositionRight,
                  _ = void 0 !== g && g,
                  y = t.isManual,
                  b = void 0 !== y && y;
                if ((!this.isSp && i) || (this.isSp && o))
                  return (
                    e.classList.add("-disable"), void (this._isDisable = !0)
                  );
                (this._option = r(
                  r({}, this.option),
                  {},
                  {
                    isDisablePc: i,
                    isDisableSp: o,
                    isLoop: l,
                    isLoopOneSide: c,
                    isAutoPlay: d,
                    interval: f,
                    isLastPositionRight: _,
                    isManual: b
                  }
                )),
                  (this.framerate = 60 / m),
                  this.init();
              }
            },
            {
              key: "init",
              value: function () {
                var e = this;
                if (!this._isDisable && !this._isInit) {
                  this._isInit = !0;
                  var t = this.el,
                    n = this._option;
                  (this._isLoopOneSide =
                    ("pc" === this._option.isLoopOneSide && !this.isSp) ||
                    ("sp" === this._option.isLoopOneSide && this.isSp) ||
                    !0 === this._option.isLoopOneSide),
                    (this._isLoop =
                      ("pc" === this._option.isLoop && !this.isSp) ||
                      ("sp" === this._option.isLoop && this.isSp) ||
                      !0 === this._option.isLoop ||
                      this._isLoopOneSide),
                    (this._lastSlide = n.lastSlide || 1),
                    (this._lastSlideSp = n.lastSlideSp || 1),
                    (this.onMove = n.onMove),
                    n.onChange && (this.onChange = n.onChange),
                    (this.isManualAddBackground = n.isManualAddBackground),
                    (this.elList = t.querySelector("[data-slider-list]")),
                    (this._parent = t),
                    (this._elCurrent = t.querySelectorAll(
                      "[data-slider-current]"
                    )),
                    (this._elAll = t.querySelectorAll("[data-slider-all]")),
                    (this._nextBtn = t.querySelector("[data-slider-next]")),
                    (this._prevBtn = t.querySelector("[data-slider-prev]")),
                    (this._progress = t.querySelector(
                      "[data-slider-progress]"
                    )),
                    (this._progressBar = t.querySelector(
                      "[data-slider-progress-bar]"
                    )),
                    (this._progressCircle = t.querySelector(
                      "[data-slider-progress-circle]"
                    )),
                    (this._paginationProgress = t.querySelector(
                      "[data-slider-pagination-progress]"
                    )),
                    (this._pos = { x: 0, y: 0 }),
                    (this._posOffset = { x: 0, y: 0 }),
                    (this._startPos = { x: 0, y: 0 }),
                    (this._listSize = { x: 0, y: 0 }),
                    (this._totalSize = 0),
                    (this.mouse = { x: 0, y: 0 }),
                    (this.mouseOld = { x: 0, y: 0 }),
                    (this.mouseStart = { x: 0, y: 0 }),
                    (this.mouseDiff = { x: 0, y: 0 }),
                    (this.mouseDist = { x: 0, y: 0 }),
                    this._progress &&
                      ((this.progress.total =
                        this._progress.getBoundingClientRect().width),
                      (this.progress.offset = this.el.offsetLeft),
                      (this._progressBar.style.transformOrigin = "left")),
                    (this.count = 0);
                  var i = this.elList.querySelectorAll("[data-slider-item]"),
                    r = !!this.el.dataset.sliderOriginalCount;
                  if (this._isLoop && !r) {
                    var a = document.createDocumentFragment();
                    i.forEach(function (t) {
                      a.append(t.cloneNode(!0)),
                        "sliderItemMore" in t.dataset || e.count++;
                    });
                    var o = a.cloneNode(!0);
                    this._isLoopOneSide &&
                      Array.prototype.forEach.call(a.children, function (e, t) {
                        e.style.visibility = "hidden";
                      }),
                      this.elList.prepend(a),
                      this.elList.append(o),
                      (i = this.elList.querySelectorAll("[data-slider-item]")),
                      (this.elsOutOfOneSide = Array.prototype.slice.call(
                        i,
                        0,
                        this.count
                      )),
                      (this.el.dataset.sliderOriginalCount = this.count);
                  } else
                    (this.count = Number(this.el.dataset.sliderOriginalCount)),
                      (this.elsOutOfOneSide = Array.prototype.slice.call(
                        i,
                        0,
                        this.count
                      ));
                  (this.item = Array.prototype.map.call(i, function (t, n) {
                    var i = new Ul(t);
                    return (
                      i.init(),
                      (i.onClick = function (t) {
                        e._isMoveUseBtn ||
                          (e._isMouseMove &&
                            (t.preventDefault(),
                            t.stopPropagation(),
                            (e._isMouseMove = !1),
                            e.enableClick()));
                      }),
                      !e._isLoop &&
                        !("sliderItemMore" in t.dataset) &&
                        e.count++,
                      i
                    );
                  })),
                    (this._eMouseOverHandler = this._eMouseOver.bind(this)),
                    As(this._parent, this._eMouseOverHandler),
                    (this._eMouseOutHandler = this._eMouseOut.bind(this)),
                    Ps(this._parent, this._eMouseOutHandler),
                    (this._eMouseDownHandler = this._eMouseDown.bind(this)),
                    this._parent.addEventListener(
                      "mousedown",
                      this._eMouseDownHandler,
                      ga
                    ),
                    (this._eDragstartHandler = this._eDragstart.bind(this)),
                    this._parent.addEventListener(
                      "dragstart",
                      this._eDragstartHandler
                    ),
                    (this._eMouseMoveHandler = this._eMouseMove.bind(this)),
                    this._parent.addEventListener(
                      "mousemove",
                      this._eMouseMoveHandler
                    ),
                    (this._eMouseUpHandler = this._eMouseUp.bind(this)),
                    this._parent.addEventListener(
                      "mouseup",
                      this._eMouseUpHandler,
                      ga
                    ),
                    (this._eWindowMouseUpHandler = this._eMouseUp.bind(this)),
                    window.addEventListener(
                      "mouseup",
                      this._eWindowMouseUpHandler,
                      ga
                    ),
                    (this._eMouseDownHandler = this._eMouseDown.bind(this)),
                    this._parent.addEventListener(
                      "touchstart",
                      this._eMouseDownHandler,
                      ga
                    ),
                    (this._eMouseMoveHandler = this._eMouseMove.bind(this)),
                    this._parent.addEventListener(
                      "touchmove",
                      this._eMouseMoveHandler
                    ),
                    (this._eMouseUpHandler = this._eMouseUp.bind(this)),
                    this._parent.addEventListener(
                      "touchend",
                      this._eMouseUpHandler,
                      ga
                    ),
                    (this._eWindowMouseUpHandler = this._eMouseUp.bind(this)),
                    window.addEventListener(
                      "touchend",
                      this._eWindowMouseUpHandler,
                      ga
                    ),
                    this._nextBtn &&
                      ((this._eClickNextBtnHandler =
                        this._eClickNextBtn.bind(this)),
                      this._nextBtn.addEventListener(
                        "click",
                        this._eClickNextBtnHandler
                      )),
                    this._prevBtn &&
                      ((this._eClickPrevBtnHandler =
                        this._eClickPrevBtn.bind(this)),
                      this._prevBtn.addEventListener(
                        "click",
                        this._eClickPrevBtnHandler
                      ),
                      this._prevBtn.classList.add(Fl),
                      (this._prevBtn.style.pointerEvents = "none")),
                    this._progressCircle &&
                      (this._progressCircle.addEventListener(
                        "mousedown",
                        this._eMouseDownHandler,
                        ga
                      ),
                      this._progressCircle.addEventListener(
                        "mouseup",
                        this._eMouseUpHandler,
                        ga
                      ),
                      this._progressCircle.addEventListener(
                        "touchstart",
                        this._eMouseDownHandler,
                        ga
                      ),
                      this._progressCircle.addEventListener(
                        "touchend",
                        this._eMouseUpHandler,
                        ga
                      )),
                    this._setCurrent(),
                    this._setAll();
                  var s = t.dataset.sliderInitialPosition;
                  if (s) {
                    var l = s - 1,
                      u = t.querySelectorAll("[data-slider-item]").length;
                    this._moveTo(u === l ? 0 : l, { disableAnimation: !0 });
                  } else
                    this._isLoop &&
                      this._moveTo(this.count, { disableAnimation: !0 });
                  this.onResize(),
                    (this.widthItem = this.item[0].width),
                    this._setProgress(this._getProgress()),
                    (this.elList.style.cursor = "grab");
                }
              }
            },
            {
              key: "setTimer",
              value: function () {
                var e = this;
                this.timer ||
                  ((this.tlTimerProgress = No(
                    this._paginationProgress,
                    { scaleX: 0, transformOrigin: "left" },
                    {
                      scaleX: 1,
                      duration: this._option.interval,
                      ease: this._option.easePaginationProgress
                    }
                  )),
                  (this.timer = Dr.delayedCall(
                    this._option.interval,
                    function () {
                      Fo(e._paginationProgress, { scaleX: 0 }),
                        !e._isLoop &&
                        e.nowKey >=
                          e.item.length -
                            (e.isSp ? e._lastSlideSp : e._lastSlide)
                          ? e._moveTo(0)
                          : e._move(!0);
                    }
                  )));
              }
            },
            {
              key: "stopTimer",
              value: function () {
                this.timer &&
                  (Fo(this._paginationProgress, { scaleX: 0 }),
                  this.timer.kill(),
                  this.tlTimerProgress.kill(),
                  (this.timer = null));
              }
            },
            {
              key: "onResize",
              value: function () {
                if (!this._isDisable && this._isInit) {
                  var e = this._parent.getBoundingClientRect();
                  (this._lastPos = this._getLastPos()),
                    (this._listOffsetLeft = parseInt(
                      e.left +
                        parseInt(
                          document.defaultView.getComputedStyle(
                            this._parent,
                            null
                          ).paddingLeft
                        )
                    )),
                    (this._listSize.x =
                      this._lastPos.right +
                      -1 * this._pos.x +
                      this._listOffsetLeft),
                    (this._maxMove =
                      Math.floor(e.width / this._lastPos.width) *
                      this._lastPos.width *
                      0.6),
                    (this.elList.style.transform = ""),
                    (this._totalSize =
                      this.item[this.item.length - 1].el.getBoundingClientRect()
                        .left -
                      this.elList.getBoundingClientRect().left +
                      this.elList.scrollLeft),
                    this.item.forEach(function (e) {
                      e.onResize();
                    }),
                    this._progress &&
                      ((this.progress.total =
                        this._progress.getBoundingClientRect().width),
                      (this.progress.offset = this.el.offsetLeft)),
                    (this._initialX = this._pos.x),
                    this._moveTo(this.nowKey, { disableAnimation: !0 });
                }
              }
            },
            {
              key: "play",
              value: function () {
                this._isPlay || ((this._isPlay = !0), this.playTick());
              }
            },
            {
              key: "pause",
              value: function () {
                this._isPlay && ((this._isPlay = !1), this.pauseTick());
              }
            },
            {
              key: "_eClickNextBtn",
              value: function (e) {
                e && e.stopPropagation(),
                  !(this.mouseDiffStartX > 0) && this._move(!0);
              }
            },
            {
              key: "_eClickPrevBtn",
              value: function (e) {
                e && e.stopPropagation(),
                  !(this.mouseDiffStartX > 0) && this._move(!1);
              }
            },
            {
              key: "_eDragstart",
              value: function (e) {
                e.preventDefault();
              }
            },
            { key: "_eMouseOver", value: function (e) {} },
            { key: "_eMouseOut", value: function (e) {} },
            {
              key: "_eMouseDown",
              value: function (e) {
                if (!this._isMouseDown) {
                  (this.el.style.cursor = ""),
                    (document.documentElement.style.cursor = "grabbing"),
                    "sliderProgressCircle" in e.target.dataset &&
                      ((this._isProgressDrag = !0),
                      this._progressCircle &&
                        this._progressCircle.classList.add("-grabbing"));
                  var t = ea(e),
                    n = t.x,
                    i = t.y;
                  (this.mouseStart.x = this.mouse.x = n),
                    (this.mouseStart.y = this.mouse.y = i),
                    (this.mouseDiff.x = 0),
                    (this.mouseDiff.y = 0),
                    (this._isMouseDown = !0),
                    (this._moveTotal = 0),
                    (this._startPos.x = this._isProgressDrag
                      ? -this._pos.x
                      : this._pos.x),
                    this.onMouseDownHandle && this.onMouseDownHandle();
                }
              }
            },
            {
              key: "_eMouseMove",
              value: function (e) {
                if (!this._isMoving) {
                  if (((this.progress.start = e.clientX), !this._isMouseDown))
                    return;
                  this._option.isAutoPlay && this.stopTimer(),
                    (this.mouseOld.x = this.mouse.x),
                    (this.mouseOld.y = this.mouse.y);
                  var t = ea(e),
                    n = t.x,
                    i = t.y;
                  (this.mouse.x = n),
                    (this.mouse.y = i),
                    (this.mouseDiff.x = this.mouseOld.x - this.mouse.x),
                    (this.mouseDiff.y = this.mouseOld.y - this.mouse.y),
                    this.elList.classList.add("-drag");
                  var r = i - this.mouseStart.y,
                    a = n - this.mouseStart.x;
                  if (0 === a || Math.abs(r) / Math.abs(a) >= 1.5)
                    return void (this._isMouseMoveVertical = !0);
                  e.cancelable && e.preventDefault(),
                    (this._isMouseMoveVertical = !1),
                    (this._isMouseMove = !0),
                    this.disableClick(),
                    this._cancelMove();
                }
              }
            },
            {
              key: "_eMouseUp",
              value: function (e) {
                if (this._isMouseDown) {
                  if (
                    ((this._isMouseDown = !1),
                    this.onMouseUpHandle && this.onMouseUpHandle(),
                    (this.mouseDiffStartX = Math.abs(
                      this.mouse.x - this.mouseStart.x
                    )),
                    this.mouseDiffStartX > 0 && !this._isMouseMoveVertical)
                  ) {
                    if (!this.isSp || this._isProgressDrag) {
                      var t = Math.min(
                        Math.max(
                          this._getNowItemKey(),
                          this._isLoopOneSide && 0 === this.positionLoopOneSide
                            ? this.count
                            : 0
                        ),
                        this.item.length - this._lastSlide
                      );
                      this._moveTo(t, { isDrag: !0 });
                    } else {
                      var n = this.nowKey,
                        i = 10 * this.mouseDiff.x;
                      Math.abs(-(this.mouse.x - this.mouseStart.x) + i) >= 60 &&
                        (n =
                          this.mouseDiff.x > 0
                            ? this.nowKey + (1 + Math.floor(Math.abs(i) / 200))
                            : this.mouseDiff.x < 0
                            ? this.nowKey - (1 + Math.floor(Math.abs(i) / 200))
                            : this.nowKey),
                        (n = Math.min(
                          Math.max(
                            n,
                            this._isLoopOneSide &&
                              0 === this.positionLoopOneSide
                              ? this.count
                              : 0
                          ),
                          this.item.length - this._lastSlideSp
                        )),
                        this._moveTo(n, { isDrag: !0 });
                    }
                  } else this._option.isAutoPlay && this.setTimer();
                  (this.mouseDiff.x = 0),
                    (this.mouseDiff.y = 0),
                    (this._isProgressDrag = !1),
                    (document.documentElement.style.cursor = ""),
                    this._progressCircle &&
                      (this._progressCircle.style.cursor = ""),
                    (this.elList.style.cursor = "grab"),
                    this.elList.classList.remove("-drag");
                }
              }
            },
            {
              key: "setWillChange",
              value: function () {
                this.elList.style.willChange = "transform";
              }
            },
            {
              key: "resetWillChange",
              value: function () {
                this.elList.style.willChange = "auto";
              }
            },
            {
              key: "disableClick",
              value: function () {
                this.item.forEach(function (e) {
                  e.el.style.pointerEvents = "none";
                });
              }
            },
            {
              key: "enableClick",
              value: function () {
                this.item.forEach(function (e) {
                  e.el.style.pointerEvents = "auto";
                });
              }
            },
            {
              key: "onTick",
              value: function (e, t, n) {
                if (
                  !this._isDisable &&
                  n % this.framerate == 0 &&
                  !this._movingLoop
                ) {
                  var i,
                    r = 0.5;
                  if (
                    (this._progress &&
                      ((this.progress.value =
                        (this.progress.start - this.progress.offset) /
                        this.progress.total),
                      (i =
                        (this._listSize.x -
                          this._listSize.x / this.item.length) *
                        this.progress.value)),
                    this._isMouseDown && !this._isMouseMoveVertical)
                  ) {
                    (this.mouseDist.x = this._isProgressDrag
                      ? (this.mouseStart.x - this.mouse.x) *
                        (this.item.length / 2)
                      : this.mouseStart.x - this.mouse.x),
                      (this.mouseDist.y = this.mouseStart.y - this.mouse.y);
                    var a = this.mouseDist.x;
                    this._moveTotal += Math.abs(a);
                    var o = this._startPos.x - a;
                    this._isProgressDrag && this.progress
                      ? (this._pos.x -= (i + this._pos.x) * r)
                      : (this._pos.x += (o - this._pos.x) * r);
                  } else this._pos.x += this._follow;
                  this._lastPos || (this._lastPos = this._getLastPos());
                  var s = this.isSp ? this._lastSlideSp : this._lastSlide,
                    l =
                      this._isLoopOneSide && 0 === this.positionLoopOneSide
                        ? this._getXFromItemKey(this.count)
                        : 0,
                    u =
                      -this._listSize.x +
                      (this._option._isLastPositionRight
                        ? this.el.clientWidth
                        : this._lastPos.width * s);
                  this._pos.x > l && (this._pos.x += (l - this._pos.x) * r),
                    this._pos.x < u && (this._pos.x += (u - this._pos.x) * r),
                    !this._isMoveUseBtn &&
                      this.elList &&
                      this.setListPositionX(),
                    this._isMouseDown && this._setProgress(this._getProgress());
                }
              }
            },
            {
              key: "setListPositionX",
              value: function (e) {
                (this.xPrev = this.xNext),
                  (this.xNext = this._pos.x + this._posOffset.x),
                  (this.xReal = this.xNext - this._initialX),
                  Dr.set(this.elList, { x: this.xNext }),
                  this.onMove &&
                    this.onMove(this.xReal, e ? 0 : this.xNext - this.xPrev);
              }
            },
            {
              key: "_move",
              value: function (e) {
                if (!this._isMoveUseBtn) {
                  (this._isMoveUseBtn = !0), this._cancelMove();
                  var t = this._getNowItemKey();
                  if (e) {
                    t++;
                    var n = this.isSp ? this._lastSlideSp : this._lastSlide;
                    t >= this.item.length - n && (t = this.item.length - n);
                  } else --t < 0 && (t = 0);
                  this._moveTo(t);
                }
              }
            },
            {
              key: "_moveTo",
              value: function (e) {
                var t = this,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {},
                  i = n.isDrag,
                  r = n.disableAnimation;
                if (r || (!this._isMoving && !this._movingLoop)) {
                  var a = this._option.isAutoPlay;
                  (this._isMoving = !0),
                    (e >= 2 * this.count || e < this.count) &&
                      (this._movingLoop = !0),
                    a && this.stopTimer(),
                    (this.nowKey = e),
                    this._setCurrent(),
                    this._setBtnClass(),
                    this.onChange && this.onChange(e);
                  var o = this._getXFromItemKey(e);
                  this._moveTween = Oo(this._pos, {
                    x: o,
                    duration: r ? 0 : i ? 0.6 : 0.8,
                    ease: i ? "power2.out" : "power2.inOut",
                    overwrite: !0,
                    onUpdate: function () {
                      if (t.elList && t._pos && t._posOffset) {
                        if (t.changeSlideAnimation && r) {
                          var e = Dr.timeline();
                          t.changeSlideAnimation({
                            tl: e,
                            changeSlide: function () {
                              t.setListPositionX(r);
                            }
                          });
                        } else t.setListPositionX(r);
                        t._setProgress(t._getProgress());
                      }
                    },
                    onComplete: function () {
                      t.elList &&
                        t._pos &&
                        ((t._pos.x = o),
                        (t._isMouseMove = !1),
                        (t._isMoving = !1),
                        (t._isMoveUseBtn = !1),
                        (t._movingLoop = !1),
                        t.enableClick(),
                        r &&
                          (t.setListPositionX(r),
                          (t._startPos.x = t._isProgressDrag
                            ? -t._pos.x
                            : t._pos.x)),
                        t._isLoop &&
                          (e >= 2 * t.count
                            ? (t._moveTo(e - t.count, { disableAnimation: !0 }),
                              t._isLoopOneSide &&
                                (t.positionLoopOneSide++,
                                t.positionLoopOneSide > 0 &&
                                  t.elsOutOfOneSide.forEach(function (e, t) {
                                    e.style.visibility = "";
                                  })))
                            : e < t.count
                            ? (t._moveTo(e + t.count, { disableAnimation: !0 }),
                              t._isLoopOneSide &&
                                (t.positionLoopOneSide--,
                                0 === t.positionLoopOneSide &&
                                  t.elsOutOfOneSide.forEach(function (e, t) {
                                    e.style.visibility = "hidden";
                                  })))
                            : a && t.isIntersecting && t.setTimer()),
                        t._setBtnClass());
                    }
                  });
                }
              }
            },
            {
              key: "_cancelMove",
              value: function () {
                this._isMoving &&
                  (this._moveTween && this._moveTween.kill(),
                  (this._isMouseMove = !1),
                  (this._isMoveUseBtn = !1),
                  (this._isMoving = !1));
              }
            },
            {
              key: "_setCurrent",
              value: function () {
                var e = this;
                this._isInit &&
                  this._elCurrent.length &&
                  !("sliderItemMore" in this.item[this.nowKey].el.dataset) &&
                  ((this.indexCurrent = El(this.nowKey, this.count)),
                  this._elCurrent.forEach(function (t) {
                    t.textContent =
                      e.indexCurrent + 1 < 10
                        ? "0" + (e.indexCurrent + 1)
                        : e.indexCurrent + 1;
                  }),
                  this.nowKey >= 0 &&
                    (this._nowKeyCurrent >= 0 &&
                      (this.item[this._nowKeyCurrent].el.classList.remove(
                        "-current"
                      ),
                      this.item[this._nowKeyNext].el.classList.remove("-next"),
                      this.item[this._nowKeyPrev].el.classList.remove("-prev"),
                      this._isLoop &&
                        (this.item[this._nowKeyCurrent2].el.classList.remove(
                          "-current"
                        ),
                        this.item[this._nowKeyNext2].el.classList.remove(
                          "-next"
                        ),
                        this.item[this._nowKeyPrev2].el.classList.remove(
                          "-prev"
                        ),
                        this.item[this._nowKeyCurrent3].el.classList.remove(
                          "-current"
                        ),
                        this.item[this._nowKeyNext3].el.classList.remove(
                          "-next"
                        ),
                        this.item[this._nowKeyPrev3].el.classList.remove(
                          "-prev"
                        ))),
                    (this._nowKeyCurrent = this.nowKey),
                    (this._nowKeyNext = El(this.nowKey + 1, this.item.length)),
                    (this._nowKeyPrev = El(this.nowKey - 1, this.item.length)),
                    this.item[this._nowKeyCurrent].el.classList.add("-current"),
                    this.item[this._nowKeyNext].el.classList.add("-next"),
                    this.item[this._nowKeyPrev].el.classList.add("-prev"),
                    this._isLoop &&
                      ((this._nowKeyCurrent2 = El(
                        this._nowKeyCurrent + this.count,
                        this.item.length
                      )),
                      (this._nowKeyNext2 = El(
                        this._nowKeyCurrent2 + 1,
                        this.item.length
                      )),
                      (this._nowKeyPrev2 = El(
                        this._nowKeyCurrent2 - 1,
                        this.item.length
                      )),
                      (this._nowKeyCurrent3 = El(
                        this._nowKeyCurrent - this.count,
                        this.item.length
                      )),
                      (this._nowKeyNext3 = El(
                        this._nowKeyCurrent3 + 1,
                        this.item.length
                      )),
                      (this._nowKeyPrev3 = El(
                        this._nowKeyCurrent3 - 1,
                        this.item.length
                      )),
                      this.item[this._nowKeyCurrent2].el.classList.add(
                        "-current"
                      ),
                      this.item[this._nowKeyNext2].el.classList.add("-next"),
                      this.item[this._nowKeyPrev2].el.classList.add("-prev"),
                      this.item[this._nowKeyCurrent3].el.classList.add(
                        "-current"
                      ),
                      this.item[this._nowKeyNext3].el.classList.add("-next"),
                      this.item[this._nowKeyPrev3].el.classList.add("-prev"))));
              }
            },
            {
              key: "_setAll",
              value: function () {
                var e = this;
                this._elAll.length &&
                  this._elAll.forEach(function (t) {
                    t.textContent = e.count < 10 ? "0" + e.count : e.count;
                  });
              }
            },
            {
              key: "_setBtnClass",
              value: function () {
                if (this._nextBtn) {
                  this._nextBtn.classList.remove(Fl),
                    (this._nextBtn.style.pointerEvents = ""),
                    this._prevBtn.classList.remove(Fl),
                    (this._prevBtn.style.pointerEvents = "");
                  var e = this.nowKey;
                  (0 === e ||
                    (this._isLoopOneSide &&
                      0 === this.positionLoopOneSide &&
                      e === this.count)) &&
                    (this._prevBtn.classList.add(Fl),
                    (this._prevBtn.style.pointerEvents = "none"));
                  var t = this.isSp ? this._lastSlideSp : this._lastSlide;
                  e >= this.item.length - t &&
                    (this._nextBtn.classList.add(Fl),
                    (this._nextBtn.style.pointerEvents = "none"));
                }
              }
            },
            {
              key: "_setProgress",
              value: function (e) {
                this._progressBar &&
                  (Dr.set(this._progressBar, { scaleX: e }),
                  this._progressCircle &&
                    Dr.set(this._progressCircle, { left: 100 * e + "%" }));
              }
            },
            {
              key: "_getNowItemKey",
              value: function () {
                var e = 0,
                  t = 9999;
                this._listOffsetLeft =
                  parseInt(
                    this._parent.getBoundingClientRect().left +
                      parseInt(
                        document.defaultView.getComputedStyle(
                          this._parent,
                          null
                        ).paddingLeft
                      )
                  ) +
                  Math.min(
                    Math.max(20 * this.mouseDiff.x, -this._maxMove),
                    this._maxMove
                  );
                for (var n = this.item.length, i = 0; i < n; i++) {
                  var r = this.item[i],
                    a = Math.abs(r.getPos().x - this._listOffsetLeft);
                  a < t && ((t = a), (e = i));
                }
                return e;
              }
            },
            {
              key: "_getXFromItemKey",
              value: function (e) {
                if (!this.isDestroyed) {
                  var t = 0,
                    n = 0,
                    i = 0,
                    r = 1;
                  if (this._option.sizeDifference) {
                    0 !== e &&
                      ((t = this.el.clientWidth / 2),
                      (n = this.item[e].getPos().width / 2));
                    for (var a = 0; a < e; a++)
                      i += this.item[a].getPos().width;
                  } else (i = this.item[0].getPos().width), (r = e);
                  var o = parseInt(
                    document.defaultView.getComputedStyle(this.item[0].el, null)
                      .marginRight
                  );
                  return this._option._isLastPositionRight &&
                    e >=
                      this.item.length -
                        (this.isSp ? this._lastSlideSp : this._lastSlide)
                    ? -this._listSize.x + this.el.clientWidth
                    : -(i + o - t + n) * r;
                }
              }
            },
            {
              key: "_getProgress",
              value: function () {
                return Math.abs(this._pos.x) >= this._totalSize - 1
                  ? 1
                  : this._pos.x > 0
                  ? 0
                  : Math.abs(this._pos.x) / this._totalSize;
              }
            },
            {
              key: "_getLastPos",
              value: function () {
                return this.item[this.item.length - 1].getPos();
              }
            },
            {
              key: "onIntersect",
              value: function (e) {
                var t = e.isIntersecting;
                this._isDisable ||
                  !this._option ||
                  ((this.isIntersecting = t),
                  t
                    ? (this.play(), this._option.isAutoPlay && this.setTimer())
                    : (this._option.isAutoPlay && this.stopTimer(),
                      this.pause()));
              }
            },
            {
              key: "onDestroy",
              value: function () {
                var e, t;
                this._isDisable ||
                  (this._isInit &&
                    (this.pause(),
                    null !== (e = this._option) &&
                      void 0 !== e &&
                      e.isAutoPlay &&
                      this.stopTimer(),
                    null !== (t = this.item) &&
                      void 0 !== t &&
                      t.forEach(function (e) {
                        e.dispose();
                      }),
                    Ls(this._parent, this._eMouseOverHandler),
                    Rs(this._parent, this._eMouseOutHandler),
                    this._parent.removeEventListener(
                      "mousedown",
                      this._eMouseDownHandler,
                      ga
                    ),
                    this._parent.removeEventListener(
                      "dragstart",
                      this._eDragstartHandler
                    ),
                    this._parent.removeEventListener(
                      "mousemove",
                      this._eMouseMoveHandler
                    ),
                    this._parent.removeEventListener(
                      "mouseup",
                      this._eMouseUpHandler,
                      ga
                    ),
                    window.removeEventListener(
                      "mouseup",
                      this._eWindowMouseUpHandler,
                      ga
                    ),
                    this._parent.removeEventListener(
                      "touchstart",
                      this._eMouseDownHandler,
                      ga
                    ),
                    this._parent.removeEventListener(
                      "touchmove",
                      this._eMouseMoveHandler
                    ),
                    this._parent.removeEventListener(
                      "touchend",
                      this._eMouseUpHandler,
                      ga
                    ),
                    window.removeEventListener(
                      "touchend",
                      this._eWindowMouseUpHandler,
                      ga
                    ),
                    this._nextBtn &&
                      this._nextBtn.removeEventListener(
                        "click",
                        this._eClickNextBtnHandler
                      ),
                    this._prevBtn &&
                      this._prevBtn.removeEventListener(
                        "click",
                        this._eClickPrevBtnHandler
                      ),
                    this._progressCircle &&
                      (this._progressCircle.removeEventListener(
                        "mousedown",
                        this._eMouseDownHandler,
                        ga
                      ),
                      this._progressCircle.removeEventListener(
                        "mouseup",
                        this._eMouseUpHandler,
                        ga
                      ),
                      this._progressCircle.removeEventListener(
                        "touchstart",
                        this._eMouseDownHandler,
                        ga
                      ),
                      this._progressCircle.removeEventListener(
                        "touchend",
                        this._eMouseUpHandler,
                        ga
                      )),
                    (this._isDisable = !1),
                    (this.item = null),
                    (this._isMouseDown = !1),
                    (this._isMouseMove = !1),
                    (this._isMouseMoveVertical = !1),
                    (this._isProgressDrag = !1),
                    (this._pos = null),
                    (this._posOffset = null),
                    (this._startPos = null),
                    (this._listSize = null),
                    (this._totalSize = 0),
                    (this._listOffsetLeft = 0),
                    (this._follow = 0),
                    (this._isMoving = !1),
                    (this._isMoveUseBtn = !1),
                    (this._moveTotal = 0),
                    (this.nowKey = 0),
                    (this._nowKeyCurrent = -1),
                    (this._nowKeyNext = -1),
                    (this._nowKeyPrev = -1),
                    (this._nowKeyCurrent2 = -1),
                    (this._nowKeyNext2 = -1),
                    (this._nowKeyPrev2 = -1),
                    (this._nowKeyCurrent3 = -1),
                    (this._nowKeyNext3 = -1),
                    (this._nowKeyPrev3 = -1),
                    (this._eMouseOverHandler = void 0),
                    (this._eMouseOutHandler = void 0),
                    (this._eMouseDownHandler = void 0),
                    (this._eMouseMoveHandler = void 0),
                    (this._eMouseUpHandler = void 0),
                    (this._eWindowMouseUpHandler = void 0),
                    (this._eClickNextBtnHandler = void 0),
                    (this._eClickPrevBtnHandler = void 0),
                    (this._eClickNextSlideHandler = void 0),
                    (this._eClickPrevSlideHandler = void 0),
                    (this._moveTween = void 0),
                    (this._lastPos = void 0),
                    (this.onClickItem = void 0),
                    (this.indexCurrent = 0),
                    (this.mouse = null),
                    (this.mouseOld = null),
                    (this.mouseStart = null),
                    (this.mouseDiff = null),
                    (this.mouseDist = null)),
                  (this._option = null));
              }
            }
          ])
        );
      })(Zs)),
      V(A, "selectorRoot", "[data-slider]:not([data-slider-manual])"),
      A).register();
      var Bl = (function (e) {
        function t() {
          return b(this, t), h(this, t, arguments);
        }
        return (
          v(t, e),
          w(t, [
            {
              key: "onInit",
              value: function () {
                var e = this;
                if (!this.isDestroyed) {
                  var t = this.el,
                    n = t.closest("[data-modal]"),
                    i = t.dataset.marquee ? JSON.parse(t.dataset.marquee) : {},
                    r = i.isDuplicate,
                    a = void 0 === r || r,
                    o = i.isShort,
                    s = void 0 !== o && o,
                    l = i.isInModal,
                    u = void 0 === l ? !!n : l,
                    c = i.isStop,
                    h = void 0 !== c && c,
                    d = i.isStopSp,
                    p = void 0 !== d && d,
                    f = i.speed,
                    v = void 0 === f ? 60 : f,
                    m = i.speedSp,
                    g = void 0 === m ? 30 : m;
                  (this._isInModal = u),
                    this._isInModal &&
                      (this._modalId = n.id || n.dataset.modal),
                    (this.elWrapper = t.querySelector(
                      "[data-marquee-wrapper]"
                    ));
                  var _ = (this.elInner = t.querySelector(
                    "[data-marquee-inner]"
                  ));
                  if (
                    ((this.elSingle = t.querySelector("[data-marquee-single]")),
                    (this.isStop = h),
                    (this.isStopSp = p),
                    (this.speed = this.isSp ? g : v),
                    (this.isManual = "marqueeManual" in t.dataset),
                    (!this.isSp && this.isStop) || (this.isSp && this.isStopSp)
                      ? this.pauseTick()
                      : setTimeout(function () {
                          e.setSize();
                        }, 100),
                    a)
                  ) {
                    this.elsClone = [];
                    var y = this.elSingle.cloneNode(!0);
                    _.append(y), this.elsClone.push(y);
                    var b = this.elSingle.cloneNode(!0);
                    if ((_.append(b), this.elsClone.push(b), s))
                      if (this.isSp) {
                        if (this.isSp) {
                          var x = this.elSingle.cloneNode(!0);
                          _.append(x), this.elsClone.push(x);
                          var w = this.elSingle.cloneNode(!0);
                          _.append(w), this.elsClone.push(w);
                          var S = this.elSingle.cloneNode(!0);
                          _.append(S), this.elsClone.push(S);
                        }
                      } else {
                        var M = this.elSingle.cloneNode(!0);
                        _.append(M), this.elsClone.push(M);
                        var T = this.elSingle.cloneNode(!0);
                        _.append(T), this.elsClone.push(T);
                        var k = this.elSingle.cloneNode(!0);
                        _.append(k), this.elsClone.push(k);
                        var E = this.elSingle.cloneNode(!0);
                        _.append(E), this.elsClone.push(E);
                        var C = this.elSingle.cloneNode(!0);
                        _.append(C), this.elsClone.push(C);
                      }
                  }
                }
              }
            },
            {
              key: "setSize",
              value: function () {
                this._widthSingle =
                  this.option.widthSingle ||
                  this.elSingle.getBoundingClientRect().width;
              }
            },
            {
              key: "onIntersect",
              value: function (e) {
                var t = e.isIntersecting;
                this.isDestroyed ||
                  this.isManual ||
                  this._isInModal ||
                  (!this.isSp && this.isStop) ||
                  (this.isSp && this.isStopSp) ||
                  (t ? this.play() : this.pause());
              }
            },
            {
              key: "play",
              value: function () {
                this.elWrapper &&
                  (this._isPlay ||
                    ((this._isPlay = !0),
                    (this.elWrapper.style.willChange = "transform"),
                    this.playTick()));
              }
            },
            {
              key: "pause",
              value: function () {
                this._isPlay &&
                  ((this._isPlay = !1),
                  this.pauseTick(),
                  this.elWrapper && (this.elWrapper.style.willChange = ""));
              }
            },
            {
              key: "onTick",
              value: function (e) {
                this.elWrapper.style.transform =
                  "matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,-".concat(
                    (e * this.speed) % this._widthSingle,
                    ",0,0,1)"
                  );
              }
            },
            {
              key: "onStartOpenModal",
              value: function (e) {
                var t = this;
                if (
                  !((!this.isSp && this.isStop) || (this.isSp && this.isStopSp))
                ) {
                  if (
                    (setTimeout(function () {
                      t.setSize();
                    }, 100),
                    this._isInModal)
                  )
                    return void (e === this._modalId && this.play());
                  (this._isPlayPrev = this._isPlay),
                    this._isPlayPrev && this.pause();
                }
              }
            },
            {
              key: "onStartCloseModal",
              value: function () {
                (!this.isSp && this.isStop) ||
                  (this.isSp && this.isStopSp) ||
                  (this._isPlayPrev && (this.play(), (this._isPlayPrev = !1)));
              }
            },
            {
              key: "onCompleteCloseModal",
              value: function () {
                (!this.isSp && this.isStop) ||
                  (this.isSp && this.isStopSp) ||
                  !this._isInModal ||
                  this.pause();
              }
            },
            {
              key: "onDestroy",
              value: function () {
                this.pause(),
                  this.elsClone &&
                    this.elsClone.forEach(function (e, t) {
                      e.remove();
                    }),
                  (this._listener = null);
              }
            }
          ])
        );
      })(Zs);
      V(Bl, "selectorRoot", "[data-marquee]:not([data-manual])"), Bl.register();
      var zl = (function (e) {
        function t() {
          return b(this, t), h(this, t, arguments);
        }
        return (
          v(t, e),
          w(t, [
            {
              key: "onInit",
              value: function () {
                var e = this.el;
                this.addIntersectionObserver({
                  el: e,
                  callback: function (t, n) {
                    t.isIntersecting && e.classList.add("isIntersect_opacity");
                  },
                  param: { rootMargin: "0% 0% -20% 0%" },
                  once: !0
                });
              }
            }
          ])
        );
      })(Zs);
      V(zl, "selectorRoot", "[data-opacity-io]"), zl.register();
      var Vl = Object.defineProperty,
        Hl = function (e, t, n) {
          return (
            (function (e, t, n) {
              t in e
                ? Vl(e, t, {
                    enumerable: !0,
                    configurable: !0,
                    writable: !0,
                    value: n
                  })
                : (e[t] = n);
            })(e, "symbol" != M(t) ? t + "" : t, n),
            n
          );
        };
      function Gl(e) {
        if ($l(e)) {
          for (var t = {}, n = 0; n < e.length; n++) {
            var i = e[n],
              r = nu(i) ? ql(i) : Gl(i);
            if (r) for (var a in r) t[a] = r[a];
          }
          return t;
        }
        if (nu(e) || ru(e)) return e;
      }
      var Wl = /;(?![^(]*\))/g,
        jl = /:(.+)/;
      function ql(e) {
        var t = {};
        return (
          e.split(Wl).forEach(function (e) {
            if (e) {
              var n = e.split(jl);
              n.length > 1 && (t[n[0].trim()] = n[1].trim());
            }
          }),
          t
        );
      }
      function Kl(e) {
        var t = "";
        if (nu(e)) t = e;
        else if ($l(e))
          for (var n = 0; n < e.length; n++) {
            var i = Kl(e[n]);
            i && (t += i + " ");
          }
        else if (ru(e)) for (var r in e) e[r] && (t += r + " ");
        return t.trim();
      }
      function Xl(e, t) {
        if (e === t) return !0;
        var n = tu(e),
          i = tu(t);
        if (n || i) return !(!n || !i) && e.getTime() === t.getTime();
        if (((n = $l(e)), (i = $l(t)), n || i))
          return (
            !(!n || !i) &&
            (function (e, t) {
              if (e.length !== t.length) return !1;
              for (var n = !0, i = 0; n && i < e.length; i++)
                n = Xl(e[i], t[i]);
              return n;
            })(e, t)
          );
        if (((n = ru(e)), (i = ru(t)), n || i)) {
          if (!n || !i) return !1;
          if (Object.keys(e).length !== Object.keys(t).length) return !1;
          for (var r in e) {
            var a = e.hasOwnProperty(r),
              o = t.hasOwnProperty(r);
            if ((a && !o) || (!a && o) || !Xl(e[r], t[r])) return !1;
          }
        }
        return String(e) === String(t);
      }
      function Yl(e, t) {
        return e.findIndex(function (e) {
          return Xl(e, t);
        });
      }
      var Zl = Object.assign,
        Jl = Object.prototype.hasOwnProperty,
        Ql = function (e, t) {
          return Jl.call(e, t);
        },
        $l = Array.isArray,
        eu = function (e) {
          return "[object Map]" === ou(e);
        },
        tu = function (e) {
          return e instanceof Date;
        },
        nu = function (e) {
          return "string" == typeof e;
        },
        iu = function (e) {
          return "symbol" == M(e);
        },
        ru = function (e) {
          return null !== e && "object" == M(e);
        },
        au = Object.prototype.toString,
        ou = function (e) {
          return au.call(e);
        },
        su = function (e) {
          return (
            nu(e) && "NaN" !== e && "-" !== e[0] && "" + parseInt(e, 10) === e
          );
        },
        lu = function (e) {
          var t = Object.create(null);
          return function (n) {
            return t[n] || (t[n] = e(n));
          };
        },
        uu = /-(\w)/g,
        cu = lu(function (e) {
          return e.replace(uu, function (e, t) {
            return t ? t.toUpperCase() : "";
          });
        }),
        hu = /\B([A-Z])/g,
        du = lu(function (e) {
          return e.replace(hu, "-$1").toLowerCase();
        }),
        pu = function (e) {
          var t = parseFloat(e);
          return isNaN(t) ? e : t;
        };
      function fu(e, t) {
        (t = t || void 0) && t.active && t.effects.push(e);
      }
      var vu,
        mu = function (e) {
          var t = new Set(e);
          return (t.w = 0), (t.n = 0), t;
        },
        gu = function (e) {
          return (e.w & xu) > 0;
        },
        _u = function (e) {
          return (e.n & xu) > 0;
        },
        yu = new WeakMap(),
        bu = 0,
        xu = 1,
        wu = [],
        Su = Symbol(""),
        Mu = Symbol(""),
        Tu = (function () {
          return w(
            function e(t) {
              var n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : null,
                i = arguments.length > 2 ? arguments[2] : void 0;
              b(this, e),
                (this.fn = t),
                (this.scheduler = n),
                (this.active = !0),
                (this.deps = []),
                fu(this, i);
            },
            [
              {
                key: "run",
                value: function () {
                  if (!this.active) return this.fn();
                  if (!wu.includes(this))
                    try {
                      return (
                        wu.push((vu = this)),
                        Du.push(Cu),
                        (Cu = !0),
                        (xu = 1 << ++bu),
                        bu <= 30
                          ? (function (e) {
                              var t = e.deps;
                              if (t.length)
                                for (var n = 0; n < t.length; n++) t[n].w |= xu;
                            })(this)
                          : ku(this),
                        this.fn()
                      );
                    } finally {
                      bu <= 30 &&
                        (function (e) {
                          var t = e.deps;
                          if (t.length) {
                            for (var n = 0, i = 0; i < t.length; i++) {
                              var r = t[i];
                              gu(r) && !_u(r) ? r.delete(e) : (t[n++] = r),
                                (r.w &= ~xu),
                                (r.n &= ~xu);
                            }
                            t.length = n;
                          }
                        })(this),
                        (xu = 1 << --bu),
                        Au(),
                        wu.pop();
                      var e = wu.length;
                      vu = e > 0 ? wu[e - 1] : void 0;
                    }
                }
              },
              {
                key: "stop",
                value: function () {
                  this.active &&
                    (ku(this),
                    this.onStop && this.onStop(),
                    (this.active = !1));
                }
              }
            ]
          );
        })();
      function ku(e) {
        var t = e.deps;
        if (t.length) {
          for (var n = 0; n < t.length; n++) t[n].delete(e);
          t.length = 0;
        }
      }
      function Eu(e) {
        e.effect.stop();
      }
      var Cu = !0,
        Du = [];
      function Au() {
        var e = Du.pop();
        Cu = void 0 === e || e;
      }
      function Pu(e, t, n) {
        if (Cu && void 0 !== vu) {
          var i = yu.get(e);
          i || yu.set(e, (i = new Map()));
          var r = i.get(n);
          r || i.set(n, (r = mu())),
            (function (e) {
              var t = !1;
              bu <= 30
                ? _u(e) || ((e.n |= xu), (t = !gu(e)))
                : (t = !e.has(vu)),
                t && (e.add(vu), vu.deps.push(e));
            })(r);
        }
      }
      function Lu(e, t, n, i, r, a) {
        var o = yu.get(e);
        if (o) {
          var s = [];
          if ("clear" === t) s = u(o.values());
          else if ("length" === n && $l(e))
            o.forEach(function (e, t) {
              ("length" === t || t >= i) && s.push(e);
            });
          else
            switch ((void 0 !== n && s.push(o.get(n)), t)) {
              case "add":
                $l(e)
                  ? su(n) && s.push(o.get("length"))
                  : (s.push(o.get(Su)), eu(e) && s.push(o.get(Mu)));
                break;
              case "delete":
                $l(e) || (s.push(o.get(Su)), eu(e) && s.push(o.get(Mu)));
                break;
              case "set":
                eu(e) && s.push(o.get(Su));
            }
          if (1 === s.length) s[0] && Ru(s[0]);
          else {
            var c,
              h = [],
              d = l(s);
            try {
              for (d.s(); !(c = d.n()).done; ) {
                var p = c.value;
                p && h.push.apply(h, u(p));
              }
            } catch (e) {
              d.e(e);
            } finally {
              d.f();
            }
            Ru(mu(h));
          }
        }
      }
      function Ru(e, t) {
        var n,
          i = l($l(e) ? e : u(e));
        try {
          for (i.s(); !(n = i.n()).done; ) {
            var r = n.value;
            (r !== vu || r.allowRecurse) &&
              (r.scheduler ? r.scheduler() : r.run());
          }
        } catch (e) {
          i.e(e);
        } finally {
          i.f();
        }
      }
      var Iu = (function () {
          for (
            var e = Object.create(null),
              t = "__proto__,__v_isRef,__isVue".split(","),
              n = 0;
            n < t.length;
            n++
          )
            e[t[n]] = !0;
          return function (t) {
            return !!e[t];
          };
        })(),
        Ou = new Set(
          Object.getOwnPropertyNames(Symbol)
            .map(function (e) {
              return Symbol[e];
            })
            .filter(iu)
        ),
        Nu = Bu(),
        Fu = Bu(!0),
        Uu = (function () {
          var e = {};
          return (
            ["includes", "indexOf", "lastIndexOf"].forEach(function (t) {
              e[t] = function () {
                for (var e = Yu(this), n = 0, i = this.length; n < i; n++)
                  Pu(e, 0, n + "");
                for (
                  var r = arguments.length, a = new Array(r), o = 0;
                  o < r;
                  o++
                )
                  a[o] = arguments[o];
                var s = e[t].apply(e, a);
                return -1 === s || !1 === s ? e[t].apply(e, u(a.map(Yu))) : s;
              };
            }),
            ["push", "pop", "shift", "unshift", "splice"].forEach(function (t) {
              e[t] = function () {
                Du.push(Cu), (Cu = !1);
                for (
                  var e = arguments.length, n = new Array(e), i = 0;
                  i < e;
                  i++
                )
                  n[i] = arguments[i];
                var r = Yu(this)[t].apply(this, n);
                return Au(), r;
              };
            }),
            e
          );
        })();
      function Bu() {
        var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
          t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        return function (n, i, r) {
          if ("__v_isReactive" === i) return !e;
          if ("__v_isReadonly" === i) return e;
          if ("__v_raw" === i && r === (e ? (t ? qu : ju) : t ? Wu : Gu).get(n))
            return n;
          var a = $l(n);
          if (!e && a && Ql(Uu, i)) return Reflect.get(Uu, i, r);
          var o = Reflect.get(n, i, r);
          return (iu(i) ? Ou.has(i) : Iu(i)) || (e || Pu(n, 0, i), t)
            ? o
            : Zu(o)
            ? a && su(i)
              ? o
              : o.value
            : ru(o)
            ? e
              ? (function (e) {
                  return Xu(e, !0, Hu, null, ju);
                })(o)
              : Ku(o)
            : o;
        };
      }
      var zu = (function () {
          var e =
            arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
          return function (t, n, i, r) {
            var a = t[n];
            if (
              !e &&
              !(function (e) {
                return !(!e || !e.__v_isReadonly);
              })(i) &&
              ((i = Yu(i)), (a = Yu(a)), !$l(t) && Zu(a) && !Zu(i))
            )
              return (a.value = i), !0;
            var o = $l(t) && su(n) ? Number(n) < t.length : Ql(t, n),
              s = Reflect.set(t, n, i, r);
            return (
              t === Yu(r) &&
                (o
                  ? (function (e, t) {
                      return !Object.is(e, t);
                    })(i, a) && Lu(t, "set", n, i)
                  : Lu(t, "add", n, i)),
              s
            );
          };
        })(),
        Vu = {
          get: Nu,
          set: zu,
          deleteProperty: function (e, t) {
            var n = Ql(e, t);
            e[t];
            var i = Reflect.deleteProperty(e, t);
            return i && n && Lu(e, "delete", t, void 0), i;
          },
          has: function (e, t) {
            var n = Reflect.has(e, t);
            return (!iu(t) || !Ou.has(t)) && Pu(e, 0, t), n;
          },
          ownKeys: function (e) {
            return Pu(e, 0, $l(e) ? "length" : Su), Reflect.ownKeys(e);
          }
        },
        Hu = {
          get: Fu,
          set: function (e, t) {
            return !0;
          },
          deleteProperty: function (e, t) {
            return !0;
          }
        },
        Gu = new WeakMap(),
        Wu = new WeakMap(),
        ju = new WeakMap(),
        qu = new WeakMap();
      function Ku(e) {
        return e && e.__v_isReadonly ? e : Xu(e, !1, Vu, null, Gu);
      }
      function Xu(e, t, n, i, r) {
        if (!ru(e) || (e.__v_raw && (!t || !e.__v_isReactive))) return e;
        var a = r.get(e);
        if (a) return a;
        var o = (function (e) {
          return e.__v_skip || !Object.isExtensible(e)
            ? 0
            : (function (e) {
                switch (e) {
                  case "Object":
                  case "Array":
                    return 1;
                  case "Map":
                  case "Set":
                  case "WeakMap":
                  case "WeakSet":
                    return 2;
                  default:
                    return 0;
                }
              })(
                (function (e) {
                  return ou(e).slice(8, -1);
                })(e)
              );
        })(e);
        if (0 === o) return e;
        var s = new Proxy(e, 2 === o ? i : n);
        return r.set(e, s), s;
      }
      function Yu(e) {
        var t = e && e.__v_raw;
        return t ? Yu(t) : e;
      }
      function Zu(e) {
        return !(!e || !0 !== e.__v_isRef);
      }
      Promise.resolve();
      var Ju = !1,
        Qu = [],
        $u = Promise.resolve(),
        ec = function (e) {
          return $u.then(e);
        },
        tc = function (e) {
          Qu.includes(e) || Qu.push(e), Ju || ((Ju = !0), ec(nc));
        },
        nc = function () {
          for (var e = 0, t = Qu; e < t.length; e++) (0, t[e])();
          (Qu.length = 0), (Ju = !1);
        },
        ic = /^(spellcheck|draggable|form|list|type)$/,
        rc = function (e) {
          var t,
            n = e.el,
            i = e.get,
            r = e.effect,
            a = e.arg,
            o = e.modifiers;
          "class" === a && (n._class = n.className),
            r(function () {
              var e = i();
              if (a) null != o && o.camel && (a = cu(a)), ac(n, a, e, t);
              else {
                for (var r in e) ac(n, r, e[r], t && t[r]);
                for (var s in t) (!e || !(s in e)) && ac(n, s, null);
              }
              t = e;
            });
        },
        ac = function (e, t, n, i) {
          if ("class" === t)
            e.setAttribute("class", Kl(e._class ? [e._class, n] : n) || "");
          else if ("style" === t) {
            n = Gl(n);
            var r = e.style;
            if (n) {
              if (nu(n)) n !== i && (r.cssText = n);
              else {
                for (var a in n) sc(r, a, n[a]);
                if (i && !nu(i)) for (var o in i) null == n[o] && sc(r, o, "");
              }
            } else e.removeAttribute("style");
          } else
            e instanceof SVGElement || !(t in e) || ic.test(t)
              ? "true-value" === t
                ? (e._trueValue = n)
                : "false-value" === t
                ? (e._falseValue = n)
                : null != n
                ? e.setAttribute(t, n)
                : e.removeAttribute(t)
              : ((e[t] = n), "value" === t && (e._value = n));
        },
        oc = /\s*!important$/,
        sc = function (e, t, n) {
          $l(n)
            ? n.forEach(function (n) {
                return sc(e, t, n);
              })
            : t.startsWith("--")
            ? e.setProperty(t, n)
            : oc.test(n)
            ? e.setProperty(du(t), n.replace(oc, ""), "important")
            : (e[t] = n);
        },
        lc = function (e, t) {
          var n = e.getAttribute(t);
          return null != n && e.removeAttribute(t), n;
        },
        uc = function (e, t, n, i) {
          e.addEventListener(t, n, i);
        },
        cc =
          /^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,
        hc = ["ctrl", "shift", "alt", "meta"],
        dc = {
          stop: function (e) {
            return e.stopPropagation();
          },
          prevent: function (e) {
            return e.preventDefault();
          },
          self: function (e) {
            return e.target !== e.currentTarget;
          },
          ctrl: function (e) {
            return !e.ctrlKey;
          },
          shift: function (e) {
            return !e.shiftKey;
          },
          alt: function (e) {
            return !e.altKey;
          },
          meta: function (e) {
            return !e.metaKey;
          },
          left: function (e) {
            return "button" in e && 0 !== e.button;
          },
          middle: function (e) {
            return "button" in e && 1 !== e.button;
          },
          right: function (e) {
            return "button" in e && 2 !== e.button;
          },
          exact: function (e, t) {
            return hc.some(function (n) {
              return e["".concat(n, "Key")] && !t[n];
            });
          }
        },
        pc = function (e) {
          var t = e.el,
            n = e.get,
            i = e.exp,
            r = e.arg,
            a = e.modifiers;
          if (r) {
            var o = cc.test(i)
              ? n("(e => ".concat(i, "(e))"))
              : n("($event => { ".concat(i, " })"));
            if ("vue:mounted" !== r) {
              if ("vue:unmounted" === r)
                return function () {
                  return o();
                };
              if (a) {
                "click" === r &&
                  (a.right && (r = "contextmenu"), a.middle && (r = "mouseup"));
                var s = o;
                o = function (e) {
                  if (!("key" in e) || du(e.key) in a) {
                    for (var t in a) {
                      var n = dc[t];
                      if (n && n(e, a)) return;
                    }
                    return s(e);
                  }
                };
              }
              uc(t, r, o, a);
            } else ec(o);
          }
        },
        fc = function (e) {
          var t = e.el,
            n = e.get;
          (0, e.effect)(function () {
            t.textContent = vc(n());
          });
        },
        vc = function (e) {
          return null == e
            ? ""
            : ru(e)
            ? JSON.stringify(e, null, 2)
            : String(e);
        },
        mc = function (e) {
          return "_value" in e ? e._value : e.value;
        },
        gc = function (e, t) {
          var n = t ? "_trueValue" : "_falseValue";
          return n in e ? e[n] : t;
        },
        _c = function (e) {
          e.target.composing = !0;
        },
        yc = function (e) {
          var t = e.target;
          t.composing && ((t.composing = !1), bc(t, "input"));
        },
        bc = function (e, t) {
          var n = document.createEvent("HTMLEvents");
          n.initEvent(t, !0, !0), e.dispatchEvent(n);
        },
        xc = Object.create(null),
        wc = function (e, t, n) {
          return Sc(e, "return(".concat(t, ")"), n);
        },
        Sc = function (e, t, n) {
          var i = xc[t] || (xc[t] = Mc(t));
          try {
            return i(e, n);
          } catch (e) {
            console.error(e);
          }
        },
        Mc = function (e) {
          try {
            return new Function("$data", "$el", "with($data){".concat(e, "}"));
          } catch (t) {
            return (
              console.error("".concat(t.message, " in expression: ").concat(e)),
              function () {}
            );
          }
        },
        Tc = {
          bind: rc,
          on: pc,
          show: function (e) {
            var t = e.el,
              n = e.get,
              i = e.effect,
              r = t.style.display;
            i(function () {
              t.style.display = n() ? r : "none";
            });
          },
          text: fc,
          html: function (e) {
            var t = e.el,
              n = e.get;
            (0, e.effect)(function () {
              t.innerHTML = n();
            });
          },
          model: function (e) {
            var t = e.el,
              n = e.exp,
              i = e.get,
              r = e.effect,
              a = e.modifiers,
              o = t.type,
              s = i("(val) => { ".concat(n, " = val }")),
              l = a || {},
              c = l.trim,
              h = l.number,
              d = void 0 === h ? "number" === o : h;
            if ("SELECT" === t.tagName) {
              var p = t;
              uc(t, "change", function () {
                var e = Array.prototype.filter
                  .call(p.options, function (e) {
                    return e.selected;
                  })
                  .map(function (e) {
                    return d ? pu(mc(e)) : mc(e);
                  });
                s(p.multiple ? e : e[0]);
              }),
                r(function () {
                  for (
                    var e = i(), t = p.multiple, n = 0, r = p.options.length;
                    n < r;
                    n++
                  ) {
                    var a = p.options[n],
                      o = mc(a);
                    if (t)
                      $l(e)
                        ? (a.selected = Yl(e, o) > -1)
                        : (a.selected = e.has(o));
                    else if (Xl(mc(a), e))
                      return void (
                        p.selectedIndex !== n && (p.selectedIndex = n)
                      );
                  }
                  !t && -1 !== p.selectedIndex && (p.selectedIndex = -1);
                });
            } else if ("checkbox" === o) {
              var f;
              uc(t, "change", function () {
                var e = i(),
                  n = t.checked;
                if ($l(e)) {
                  var r = mc(t),
                    a = Yl(e, r),
                    o = -1 !== a;
                  if (n && !o) s(e.concat(r));
                  else if (!n && o) {
                    var l = u(e);
                    l.splice(a, 1), s(l);
                  }
                } else s(gc(t, n));
              }),
                r(function () {
                  var e = i();
                  $l(e)
                    ? (t.checked = Yl(e, mc(t)) > -1)
                    : e !== f && (t.checked = Xl(e, gc(t, !0))),
                    (f = e);
                });
            } else if ("radio" === o)
              uc(t, "change", function () {
                s(mc(t));
              }),
                r(function () {
                  var e = i();
                  void 0 !== e && (t.checked = Xl(e, mc(t)));
                });
            else {
              var v = function (e) {
                return c ? e.trim() : d ? pu(e) : e;
              };
              uc(t, "compositionstart", _c),
                uc(t, "compositionend", yc),
                uc(t, null != a && a.lazy ? "change" : "input", function () {
                  t.composing || s(v(t.value));
                }),
                c &&
                  uc(t, "change", function () {
                    t.value = t.value.trim();
                  }),
                r(function () {
                  if (!t.composing) {
                    var e = t.value,
                      n = i();
                    (document.activeElement === t && v(e) === n) ||
                      (e !== n && (t.value = n));
                  }
                });
            }
          },
          effect: function (e) {
            var t = e.el,
              n = e.ctx,
              i = e.exp,
              r = e.effect;
            ec(function () {
              return r(function () {
                return Sc(n.scope, i, t);
              });
            });
          }
        },
        kc = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,
        Ec = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/,
        Cc = /^\(|\)$/g,
        Dc = /^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,
        Ac = function (e) {
          var t,
            n = e.el,
            i = e.ctx.scope.$refs,
            r = e.get;
          return (
            (0, e.effect)(function () {
              var e = r();
              (i[e] = n), t && e !== t && delete i[t], (t = e);
            }),
            function () {
              t && delete i[t];
            }
          );
        },
        Pc = /^(?:v-|:|@)/,
        Lc = /\.([\w-]+)/g,
        Rc = !1,
        Ic = function (e, t) {
          var n = e.nodeType;
          if (1 === n) {
            var i,
              r = e;
            if (r.hasAttribute("v-pre")) return;
            if ((lc(r, "v-cloak"), (i = lc(r, "v-if"))))
              return (function (e, t, n) {
                var i = e.parentElement,
                  r = new Comment("v-if");
                i.insertBefore(r, e);
                for (
                  var a, o, s = [{ exp: t, el: e }];
                  (a = e.nextElementSibling) &&
                  ((o = null),
                  "" === lc(a, "v-else") || (o = lc(a, "v-else-if")));

                )
                  i.removeChild(a), s.push({ exp: o, el: a });
                var l = e.nextSibling;
                i.removeChild(e);
                var u,
                  c = -1,
                  h = function () {
                    u && (i.insertBefore(r, u.el), u.remove(), (u = void 0));
                  };
                return (
                  n.effect(function () {
                    for (var e = 0; e < s.length; e++) {
                      var t = s[e],
                        a = t.exp,
                        o = t.el;
                      if (!a || wc(n.scope, a))
                        return void (
                          e !== c &&
                          (h(),
                          (u = new Hc(o, n)),
                          u.insert(i, r),
                          i.removeChild(r),
                          (c = e))
                        );
                    }
                    (c = -1), h();
                  }),
                  l
                );
              })(r, i, t);
            if ((i = lc(r, "v-for")))
              return (function (e, t, n) {
                var i = t.match(kc);
                if (i) {
                  var r = e.nextSibling,
                    a = e.parentElement,
                    o = new Text("");
                  a.insertBefore(o, e), a.removeChild(e);
                  var s,
                    l,
                    u,
                    c,
                    h = i[2].trim(),
                    d = i[1].trim().replace(Cc, "").trim(),
                    p = !1,
                    f = "key",
                    v =
                      e.getAttribute(f) ||
                      e.getAttribute((f = ":key")) ||
                      e.getAttribute((f = "v-bind:key"));
                  v &&
                    (e.removeAttribute(f),
                    "key" === f && (v = JSON.stringify(v))),
                    (c = d.match(Ec)) &&
                      ((d = d.replace(Ec, "").trim()),
                      (l = c[1].trim()),
                      c[2] && (u = c[2].trim())),
                    (c = d.match(Dc)) &&
                      ((s = c[1].split(",").map(function (e) {
                        return e.trim();
                      })),
                      (p = "[" === d[0]));
                  var m,
                    _,
                    y,
                    b = !1,
                    x = function (e, t, i, r) {
                      var a = {};
                      s
                        ? s.forEach(function (e, n) {
                            return (a[e] = t[p ? n : e]);
                          })
                        : (a[d] = t),
                        r
                          ? (l && (a[l] = r), u && (a[u] = i))
                          : l && (a[l] = i);
                      var o = zc(n, a),
                        c = v ? wc(o.scope, v) : i;
                      return e.set(c, i), (o.key = c), o;
                    },
                    w = function (t, n) {
                      var i = new Hc(e, t);
                      return (i.key = t.key), i.insert(a, n), i;
                    };
                  return (
                    n.effect(function () {
                      var e,
                        t,
                        i = wc(n.scope, h),
                        r = y;
                      if (
                        ((e = (function (e) {
                          var t = new Map(),
                            n = [];
                          if ($l(e))
                            for (var i = 0; i < e.length; i++)
                              n.push(x(t, e[i], i));
                          else if ("number" == typeof e)
                            for (var r = 0; r < e; r++) n.push(x(t, r + 1, r));
                          else if (ru(e)) {
                            var a = 0;
                            for (var o in e) n.push(x(t, e[o], a++, o));
                          }
                          return [n, t];
                        })(i)),
                        (t = g(e, 2)),
                        (_ = t[0]),
                        (y = t[1]),
                        b)
                      ) {
                        for (var s = 0; s < m.length; s++)
                          y.has(m[s].key) || m[s].remove();
                        for (var l, u, c = [], d = _.length; d--; ) {
                          var p = _[d],
                            f = r.get(p.key),
                            v = void 0;
                          null == f
                            ? (v = w(p, l ? l.el : o))
                            : ((v = m[f]),
                              Object.assign(v.ctx.scope, p.scope),
                              f !== d &&
                                (m[f + 1] !== l || u === l) &&
                                ((u = v), v.insert(a, l ? l.el : o))),
                            c.unshift((l = v));
                        }
                        m = c;
                      } else
                        (m = _.map(function (e) {
                          return w(e, o);
                        })),
                          (b = !0);
                    }),
                    r
                  );
                }
              })(r, i, t);
            if ((i = lc(r, "v-scope")) || "" === i) {
              var a = i ? wc(t.scope, i) : {};
              (t = zc(t, a)), a.$template && Uc(r, a.$template);
            }
            var o = null != lc(r, "v-once");
            o && (Rc = !0),
              (i = lc(r, "ref")) && Fc(r, Ac, '"'.concat(i, '"'), t),
              Oc(r, t);
            for (var s = [], l = 0, c = u(r.attributes); l < c.length; l++) {
              var h = c[l],
                d = h.name,
                p = h.value;
              Pc.test(d) &&
                "v-cloak" !== d &&
                ("v-model" === d
                  ? s.unshift([d, p])
                  : "@" === d[0] || /^v-on\b/.test(d)
                  ? s.push([d, p])
                  : Nc(r, d, p, t));
            }
            for (var f = 0, v = s; f < v.length; f++) {
              var m = g(v[f], 2),
                _ = m[0],
                y = m[1];
              Nc(r, _, y, t);
            }
            o && (Rc = !1);
          } else if (3 === n) {
            var b = e.data;
            if (b.includes(t.delimiters[0])) {
              for (var x, w = [], S = 0; (x = t.delimitersRE.exec(b)); ) {
                var M = b.slice(S, x.index);
                M && w.push(JSON.stringify(M)),
                  w.push("$s(".concat(x[1], ")")),
                  (S = x.index + x[0].length);
              }
              S < b.length && w.push(JSON.stringify(b.slice(S))),
                Fc(e, fc, w.join("+"), t);
            }
          } else 11 === n && Oc(e, t);
        },
        Oc = function (e, t) {
          for (var n = e.firstChild; n; ) n = Ic(n, t) || n.nextSibling;
        },
        Nc = function (e, t, n, i) {
          var r, a, o;
          if (
            ((t = t.replace(Lc, function (e, t) {
              return ((o || (o = {}))[t] = !0), "";
            })),
            ":" === t[0])
          )
            (r = rc), (a = t.slice(1));
          else if ("@" === t[0]) (r = pc), (a = t.slice(1));
          else {
            var s = t.indexOf(":"),
              l = s > 0 ? t.slice(2, s) : t.slice(2);
            (r = Tc[l] || i.dirs[l]), (a = s > 0 ? t.slice(s + 1) : void 0);
          }
          r &&
            (r === rc && "ref" === a && (r = Ac),
            Fc(e, r, n, i, a, o),
            e.removeAttribute(t));
        },
        Fc = function (e, t, n, i, r, a) {
          var o = t({
            el: e,
            get: function () {
              var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : n;
              return wc(i.scope, t, e);
            },
            effect: i.effect,
            ctx: i,
            exp: n,
            arg: r,
            modifiers: a
          });
          o && i.cleanups.push(o);
        },
        Uc = function (e, t) {
          if ("#" !== t[0]) e.innerHTML = t;
          else {
            var n = document.querySelector(t);
            e.appendChild(n.content.cloneNode(!0));
          }
        },
        Bc = function (e) {
          var t = r(
            r(
              { delimiters: ["{{", "}}"], delimitersRE: /\{\{([^]+?)\}\}/g },
              e
            ),
            {},
            {
              scope: e ? e.scope : Ku({}),
              dirs: e ? e.dirs : {},
              effects: [],
              blocks: [],
              cleanups: [],
              effect: function (e) {
                if (Rc) return tc(e), e;
                var n = (function (e, t) {
                  e.effect && (e = e.effect.fn);
                  var n = new Tu(e);
                  t && (Zl(n, t), t.scope && fu(n, t.scope)),
                    (!t || !t.lazy) && n.run();
                  var i = n.run.bind(n);
                  return (i.effect = n), i;
                })(e, {
                  scheduler: function () {
                    return tc(n);
                  }
                });
                return t.effects.push(n), n;
              }
            }
          );
          return t;
        },
        zc = function (e) {
          var t =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : {},
            n = e.scope,
            i = Object.create(n);
          Object.defineProperties(i, Object.getOwnPropertyDescriptors(t)),
            (i.$refs = Object.create(n.$refs));
          var a = Ku(
            new Proxy(i, {
              set: function (e, t, i, r) {
                return r !== a || e.hasOwnProperty(t)
                  ? Reflect.set(e, t, i, r)
                  : Reflect.set(n, t, i);
              }
            })
          );
          return Vc(a), r(r({}, e), {}, { scope: a });
        },
        Vc = function (e) {
          for (var t = 0, n = Object.keys(e); t < n.length; t++) {
            var i = n[t];
            "function" == typeof e[i] && (e[i] = e[i].bind(e));
          }
        },
        Hc = (function () {
          return w(
            function e(t, n) {
              var i =
                arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
              b(this, e),
                Hl(this, "template"),
                Hl(this, "ctx"),
                Hl(this, "key"),
                Hl(this, "parentCtx"),
                Hl(this, "isFragment"),
                Hl(this, "start"),
                Hl(this, "end"),
                (this.isFragment = t instanceof HTMLTemplateElement),
                i
                  ? (this.template = t)
                  : this.isFragment
                  ? (this.template = t.content.cloneNode(!0))
                  : (this.template = t.cloneNode(!0)),
                i
                  ? (this.ctx = n)
                  : ((this.parentCtx = n),
                    n.blocks.push(this),
                    (this.ctx = Bc(n))),
                Ic(this.template, this.ctx);
            },
            [
              {
                key: "el",
                get: function () {
                  return this.start || this.template;
                }
              },
              {
                key: "insert",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : null;
                  if (this.isFragment) {
                    if (this.start)
                      for (
                        var n, i = this.start;
                        i &&
                        ((n = i.nextSibling),
                        e.insertBefore(i, t),
                        i !== this.end);

                      )
                        i = n;
                    else
                      (this.start = new Text("")),
                        (this.end = new Text("")),
                        e.insertBefore(this.end, t),
                        e.insertBefore(this.start, this.end),
                        e.insertBefore(this.template, this.end);
                  } else e.insertBefore(this.template, t);
                }
              },
              {
                key: "remove",
                value: function () {
                  if (
                    (this.parentCtx &&
                      (function (e, t) {
                        var n = e.indexOf(t);
                        n > -1 && e.splice(n, 1);
                      })(this.parentCtx.blocks, this),
                    this.start)
                  )
                    for (
                      var e, t = this.start.parentNode, n = this.start;
                      n &&
                      ((e = n.nextSibling), t.removeChild(n), n !== this.end);

                    )
                      n = e;
                  else this.template.parentNode.removeChild(this.template);
                  this.teardown();
                }
              },
              {
                key: "teardown",
                value: function () {
                  this.ctx.blocks.forEach(function (e) {
                    e.teardown();
                  }),
                    this.ctx.effects.forEach(Eu),
                    this.ctx.cleanups.forEach(function (e) {
                      return e();
                    });
                }
              }
            ]
          );
        })(),
        Gc = function (e) {
          return e.replace(/[-.*+?^${}()|[\]\/\\]/g, "\\$&");
        },
        Wc = function (e) {
          var t,
            n = Bc();
          if (e && ((n.scope = Ku(e)), Vc(n.scope), e.$delimiters)) {
            var i = g((n.delimiters = e.$delimiters), 2),
              r = i[0],
              a = i[1];
            n.delimitersRE = new RegExp(Gc(r) + "([^]+?)" + Gc(a), "g");
          }
          return (
            (n.scope.$s = vc),
            (n.scope.$nextTick = ec),
            (n.scope.$refs = Object.create(null)),
            {
              directive: function (e, t) {
                return t ? ((n.dirs[e] = t), this) : n.dirs[e];
              },
              mount: function (e) {
                var i;
                if ("string" != typeof e || (e = document.querySelector(e)))
                  return (
                    (i = (e = e || document.documentElement).hasAttribute(
                      "v-scope"
                    )
                      ? [e]
                      : u(e.querySelectorAll("[v-scope]")).filter(function (e) {
                          return !e.matches("[v-scope] [v-scope]");
                        })),
                    i.length || (i = [e]),
                    (t = i.map(function (e) {
                      return new Hc(e, n, !0);
                    })),
                    this
                  );
              },
              unmount: function () {
                t.forEach(function (e) {
                  return e.teardown();
                });
              }
            }
          );
        },
        jc = document.currentScript;
      function qc() {
        return new URL(document.location);
      }
      jc && jc.hasAttribute("init") && Wc().mount();
      var Kc = Ma.isSp ? 3 : 5,
        Xc = (function (t) {
          function i() {
            return b(this, i), h(this, i, arguments);
          }
          return (
            v(i, t),
            w(i, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  (this.maxPager = this.isSp ? 3 : Kc),
                    (this.listStore = this.option.store),
                    (this.elPager =
                      this.el.querySelector("[data-pager-inner]") || this.el),
                    (this.prev =
                      this.elPager.querySelector("[data-pager-prev]")),
                    (this.next =
                      this.elPager.querySelector("[data-pager-next]")),
                    (this.scrollTarget = document.querySelector(
                      this.el.dataset.listScrollTo
                    )),
                    this.scrollTarget &&
                      (this.scrollTargetFocus = this.scrollTarget.querySelector(
                        "a, label, select, button, input[type=radio], input[type=checkbox]"
                      )),
                    (this.targetList = document.querySelector(
                      this.el.dataset.pagerTargetList
                    ));
                  var t = (this.pagerStore = Ku({
                    chunkData: [],
                    numbers: [],
                    maxNumber: {},
                    minNumber: {},
                    hasMoreNext: !1,
                    hasMorePrev: !1,
                    isFirst: !1,
                    isShowMax: !1,
                    isShowMoreNext: !1,
                    isShowMin: !1,
                    isShowMorePrev: !1
                  }));
                  this.vue = Wc({
                    pagerStore: t,
                    change: function (t) {
                      e.changePage(t);
                    },
                    next: function () {
                      e.changePage(e.page + 1);
                    },
                    prev: function () {
                      e.changePage(e.page - 1);
                    }
                  })
                    .directive("visible", function (e) {
                      var t = e.el,
                        n = e.exp,
                        i = e.get;
                      (0, e.effect)(function () {
                        t.style.visibility = i(n) ? "visible" : "hidden";
                      });
                    })
                    .mount(this.elPager);
                }
              },
              {
                key: "chunk",
                value: function (e, t) {
                  return e.reduce(function (n, i, r) {
                    return r % t ? n : [].concat(u(n), [e.slice(r, r + t)]);
                  }, []);
                }
              },
              {
                key: "getPageFromParam",
                value: function () {
                  this.url = qc();
                  var e = (function (e) {
                    return e.searchParams.get("page");
                  })(this.url);
                  this.page = e ? parseInt(e) : 1;
                }
              },
              {
                key: "setParamToURL",
                value: function () {
                  (this.url = qc()),
                    1 === this.page
                      ? (function (e) {
                          e.searchParams.delete("page");
                        })(this.url)
                      : (function (e, t, n) {
                          e.searchParams.set("page", n);
                        })(this.url, 0, this.page),
                    (function (e) {
                      window.history.pushState(null, "", e);
                    })(this.url);
                }
              },
              {
                key: "showList",
                value: function (e, t) {
                  var n = this;
                  (this.listStore.showData =
                    this.pagerStore.chunkData[e - 1] || []),
                    setTimeout(function () {
                      bo(n.option.listContainer);
                    }, 0),
                    t
                      ? this.listStore.showData.forEach(function (e, t) {
                          e.isShow = !0;
                        })
                      : (this.listStore.showData.forEach(function (e, t) {
                          e.isShow = !1;
                        }),
                        setTimeout(function () {
                          n.listStore.showData.forEach(function (e, t) {
                            Dr.delayedCall(0.1 * t, function () {
                              e.isShow = !0;
                            });
                          });
                        }, 200));
                }
              },
              {
                key: "setPager",
                value: function () {
                  if (
                    (1 === this.page &&
                      1 === this.pagerStore.chunkData.length) ||
                    0 === this.pagerStore.chunkData.length
                  )
                    this.hide();
                  else {
                    this.show();
                    for (
                      var e = [],
                        t = this.pagerStore.chunkData.length,
                        n = Math.max(Math.min(this.page - 1 - 0, t - Kc), 0),
                        i = n;
                      i < t && i !== n + Kc;
                      i++
                    ) {
                      var r = i + 1;
                      e.push({
                        pageNumber: r,
                        text: Po(r),
                        isCurrent: r === this.page
                      });
                    }
                    (this.pagerStore.maxNumber = {
                      pageNumber: t,
                      text: Po(t)
                    }),
                      (this.pagerStore.isShowMax =
                        t !== e[e.length - 1].pageNumber),
                      (this.pagerStore.isShowMoreNext =
                        t - e[e.length - 1].pageNumber > 1),
                      (this.pagerStore.minNumber = {
                        pageNumber: 1,
                        text: "01"
                      }),
                      (this.pagerStore.isShowMin = e[0].pageNumber - 1 > 0),
                      (this.pagerStore.isShowMorePrev =
                        e[0].pageNumber - 1 > 1),
                      (this.pagerStore.numbers = e);
                  }
                }
              },
              {
                key: "judgeMore",
                value: function () {
                  (this.pagerStore.hasMorePrev = 1 !== this.page),
                    (this.pagerStore.hasMoreNext =
                      this.page !== this.pagerStore.maxNumber.pageNumber);
                }
              },
              {
                key: "update",
                value: function (e) {
                  var t = e.isImmediate;
                  (this.pagerStore.chunkData = this.chunk(
                    this.listStore.sortedData,
                    8
                  )),
                    this.listStore.isFirst
                      ? (this.getPageFromParam(),
                        this.page > this.pagerStore.chunkData.length
                          ? this.changePage(1, !1, t)
                          : this.changePage(this.page, !1, t))
                      : this.changePage(1, !1, t);
                }
              },
              {
                key: "changePage",
                value:
                  ((r = n(
                    e().mark(function t(n) {
                      var i,
                        r,
                        a = this,
                        o = arguments;
                      return e().wrap(
                        function (e) {
                          for (;;)
                            switch ((e.prev = e.next)) {
                              case 0:
                                (i =
                                  !(o.length > 1 && void 0 !== o[1]) || o[1]),
                                  (r = o.length > 2 ? o[2] : void 0),
                                  (this.page = n),
                                  this.option.replaceAnimation(function () {
                                    return a.showList(n, r);
                                  }, r),
                                  this.setPager(),
                                  this.judgeMore(),
                                  i && this.setParamToURL();
                              case 3:
                              case "end":
                                return e.stop();
                            }
                        },
                        t,
                        this
                      );
                    })
                  )),
                  function (e) {
                    return r.apply(this, arguments);
                  })
              },
              {
                key: "show",
                value: function () {
                  this.elPager.style.display = "";
                }
              },
              {
                key: "hide",
                value: function () {
                  this.elPager.style.display = "none";
                }
              }
            ])
          );
          var r;
        })(Zs);
      V(Xc, "selectorRoot", "[data-pager]");
      var Yc = (function (t) {
        function i() {
          var e;
          b(this, i);
          for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)
            n[r] = arguments[r];
          return V((e = h(this, i, [].concat(n))), "pageCount", 0), e;
        }
        return (
          v(i, t),
          w(i, [
            {
              key: "onInit",
              value: function () {
                (this.limitNumber = Number(this.el.dataset.viewMore) || 10),
                  (this.listData = this.option.store);
              }
            },
            {
              key: "showList",
              value: function (e, t) {
                var n = this;
                (this.listData.showData = e),
                  setTimeout(function () {
                    bo(n.option.listContainer);
                  }, 0),
                  t
                    ? this.listData.showData.forEach(function (e, t) {
                        e.isShow = !0;
                      })
                    : setTimeout(function () {
                        n.listData.showData.forEach(function (e, t) {
                          gsap.delayedCall(
                            0.1 *
                              Math.max(
                                t - n.limitNumber * (n.pageCount - 1),
                                0
                              ),
                            function () {
                              e.isShow = !0;
                            }
                          );
                        });
                      }, 100);
              }
            },
            {
              key: "setMore",
              value: function () {
                this.listData.showData.length < this.listData.sortedData.length
                  ? this.show()
                  : this.hide();
              }
            },
            {
              key: "showNext",
              value: function (e) {
                var t = this;
                this.pageCount++;
                var n = this.listData.sortedData.slice(
                  0,
                  this.limitNumber * this.pageCount
                );
                this.option.replaceAnimation(function () {
                  t.showList(n, e), t.setMore();
                }, e);
              }
            },
            {
              key: "showAll",
              value: function () {
                var e = this;
                (this.listData.showData = this.listData.sortedData),
                  this.hide(),
                  requestAnimationFrame(function () {
                    e.option.listContainer
                      .querySelectorAll("a[href]")
                      [e.limitNumber + 1].focus();
                  });
              }
            },
            {
              key: "reset",
              value:
                ((r = n(
                  e().mark(function t(n) {
                    return e().wrap(
                      function (e) {
                        for (;;)
                          switch ((e.prev = e.next)) {
                            case 0:
                              (this.pageCount = 0), this.showNext(n);
                            case 1:
                            case "end":
                              return e.stop();
                          }
                      },
                      t,
                      this
                    );
                  })
                )),
                function (e) {
                  return r.apply(this, arguments);
                })
            },
            {
              key: "onClick",
              value: function () {
                this.showNext();
              }
            },
            {
              key: "onIntersect",
              value: function (e) {
                e.isIntersecting && this.showNext();
              }
            },
            {
              key: "hide",
              value: function () {
                this.el.style.display = "none";
              }
            },
            {
              key: "show",
              value: function () {
                this.el.style.display = "block";
              }
            }
          ])
        );
        var r;
      })(Zs);
      V(Yc, "selectorRoot", "[data-view-more]"),
        V(Yc, "intersectOptions", { rootMargin: "0% 0% -30%" });
      var Zc = (function (e) {
        function t() {
          var e;
          b(this, t);
          for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
            i[r] = arguments[r];
          return (
            V((e = h(this, t, [].concat(i))), "input", void 0),
            V(e, "id", void 0),
            V(e, "value", void 0),
            V(e, "name", void 0),
            V(e, "label", void 0),
            V(e, "textElem", void 0),
            V(e, "text", void 0),
            V(e, "onChangeHandler", void 0),
            V(e, "isSelectTag", void 0),
            e
          );
        }
        return (
          v(t, e),
          w(t, [
            {
              key: "onInit",
              value: function () {
                (this.input = this.el.querySelector("[data-sort-item-input]")),
                  (this.isSelectTag = "SELECT" === this.input.tagName),
                  (this.id = this.input.id),
                  (this.value = this.input.value),
                  (this.name = this.input.name),
                  this.isSelectTag
                    ? this.selectTagGetData()
                    : ((this.label = this.el.querySelector(
                        'label[for="' + this.id + '"]'
                      )),
                      (this.textElem =
                        this.label.querySelector(
                          "[data-sort-item-label-text]"
                        ) || this.label),
                      (this.text = this.textElem.textContent)),
                  (this.onChangeHandler = this.onChange.bind(this)),
                  this.input.addEventListener("change", this.onChangeHandler),
                  "all" === this.value &&
                    this.input.checked &&
                    ((this.label.style.pointerEvents = "none"),
                    (this.input.style.pointerEvents = "none"));
              }
            },
            {
              key: "onChange",
              value: function () {
                this.isSelectTag ||
                  this.option.checkTarget({
                    group: this.name,
                    value: this.value
                  }),
                  this.option.createData(),
                  "all" === this.value &&
                    this.input.checked &&
                    ((this.label.style.pointerEvents = "none"),
                    (this.input.style.pointerEvents = "none"));
              }
            },
            {
              key: "otherChange",
              value: function (e) {
                var t = e.group,
                  n = e.value;
                this.isSelectTag ||
                  (t === this.name &&
                    n !== this.value &&
                    (("all" === this.value && "all" !== n) ||
                      ("all" !== this.value && "all" === n)) &&
                    this.checkFalse());
              }
            },
            {
              key: "check",
              value: function (e) {
                var t = this,
                  n = e.group,
                  i = e.value;
                if (this.isSelectTag) {
                  if (n !== this.name) return;
                  Array.prototype.some.call(
                    this.input.options,
                    function (e, n) {
                      var r = e.value === i;
                      return r && (t.input.options[n].selected = !0), r;
                    }
                  );
                } else
                  n === this.name &&
                    (i === this.value && this.checkTrue(),
                    "all" === this.value && this.checkFalse());
              }
            },
            {
              key: "checkTrue",
              value: function () {
                (this.input.checked = !0),
                  "all" === this.value &&
                    ((this.label.style.pointerEvents = "none"),
                    (this.input.style.pointerEvents = "none"));
              }
            },
            {
              key: "checkFalse",
              value: function () {
                (this.input.checked = !1),
                  "all" === this.value &&
                    ((this.label.style.pointerEvents = ""),
                    (this.input.style.pointerEvents = ""));
              }
            },
            {
              key: "selectTagGetData",
              value: function () {
                (this.value = this.input.value),
                  (this.text =
                    this.input.options[this.input.selectedIndex].textContent);
              }
            },
            {
              key: "getStatus",
              value: function (e) {
                e[this.name] || (e[this.name] = []),
                  this.isSelectTag
                    ? (this.selectTagGetData(),
                      e[this.name].push({ value: this.value, text: this.text }))
                    : this.input.checked &&
                      e[this.name].push({ value: this.value, text: this.text });
              }
            },
            {
              key: "onDestroy",
              value: function () {
                this.input.removeEventListener("change", this.onChangeHandler);
              }
            }
          ])
        );
      })(Zs);
      V(Zc, "selectorRoot", "[data-sort-item]");
      var Jc = (function (t) {
        function i() {
          var e;
          b(this, i);
          for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)
            n[r] = arguments[r];
          return (
            V((e = h(this, i, [].concat(n))), "tl", void 0),
            V(e, "notfoundText", void 0),
            V(e, "scrollTarget", void 0),
            V(e, "pager", void 0),
            V(e, "store", void 0),
            V(e, "vue", void 0),
            V(e, "isPager", void 0),
            V(e, "viewMore", void 0),
            V(e, "scrollTargetFocus", void 0),
            V(e, "isViewMore", void 0),
            e
          );
        }
        return (
          v(i, t),
          w(i, [
            {
              key: "onInit",
              value: function () {
                this.tl = null;
                var e = (this.store = Ku({
                  sortedData: [],
                  showData: [],
                  isFirst: !0,
                  isNotFound: !1
                }));
                (this.vue = Wc({ store: e }).mount(this.el)),
                  (this.notfoundText = document.querySelector(
                    "[data-sort-notfound]"
                  )),
                  this.notfoundText &&
                    (this.notfoundText.style.display = "none"),
                  (this.scrollTarget = document.querySelector(
                    this.el.dataset.listScrollTo
                  )),
                  this.scrollTarget &&
                    (this.scrollTargetFocus = this.scrollTarget.querySelector(
                      "a, label, select, button, input[type=radio], input[type=checkbox]"
                    )),
                  (this.isPager = "pager" === this.el.dataset.sortArticleList),
                  this.isPager &&
                    (this.pager = Xc.createAll(this.option.context, {
                      store: e,
                      listContainer: this.el,
                      replaceAnimation: this.replaceAnimation.bind(this)
                    })[0]),
                  (this.isViewMore =
                    "viewMore" === this.el.dataset.sortArticleList),
                  this.isViewMore &&
                    (this.viewMore = Yc.createAll(this.option.context, {
                      store: e,
                      listContainer: this.el,
                      replaceAnimation: this.replaceAnimation.bind(this)
                    })[0]),
                  (this.isScroll = this.isPager);
              }
            },
            {
              key: "setStoreItem",
              value: function (e) {
                var t = this;
                (this.store.showData = e),
                  setTimeout(function () {
                    bo(t.el);
                  }, 0);
              }
            },
            {
              key: "replaceAnimation",
              value: function (e) {
                var t = this,
                  n =
                    arguments.length > 1 &&
                    void 0 !== arguments[1] &&
                    arguments[1];
                Dr.timeline()
                  .add([
                    this.isScroll &&
                      !n &&
                      (!this.store.isFirst || Yr.pageId === Yr.pageIdPrev) &&
                      this.resetScroll()
                  ])
                  .call(function () {
                    t.store.isFirst && (t.store.isFirst = !1),
                      t.removeNotFound(),
                      (t.store.isNotFound = 0 === t.store.sortedData.length),
                      t.store.isNotFound ? t.setNotfound() : e();
                  });
              }
            },
            {
              key: "removeItems",
              value: function () {
                if ((this.destroyAnimation(), this.el.children.length))
                  for (; this.el.firstChild; )
                    this.el.removeChild(this.el.firstChild);
              }
            },
            {
              key: "setList",
              value:
                ((r = n(
                  e().mark(function t(n, i) {
                    var r = this;
                    return e().wrap(
                      function (e) {
                        for (;;)
                          switch ((e.prev = e.next)) {
                            case 0:
                              if (
                                (this.store.sortedData.forEach(function (e) {
                                  e.isShow = !1;
                                }),
                                (e.t0 = i),
                                e.t0)
                              ) {
                                e.next = 5;
                                break;
                              }
                              return (e.next = 5), zo(0.1);
                            case 5:
                              (this.store.sortedData = n),
                                this.pager
                                  ? this.pager.update({
                                      isFirst: this.store.isFirst,
                                      isImmediate: i
                                    })
                                  : this.viewMore
                                  ? this.viewMore.reset(i)
                                  : ((this.store.showData = n),
                                    this.replaceAnimation(function () {
                                      (r.store.showData = n),
                                        setTimeout(function () {
                                          bo(r.el);
                                        }, 0);
                                    }, i)),
                                this.store.isFirst ||
                                  this.option.setURLParams();
                            case 8:
                            case "end":
                              return e.stop();
                          }
                      },
                      t,
                      this
                    );
                  })
                )),
                function (e, t) {
                  return r.apply(this, arguments);
                })
            },
            {
              key: "removeNotFound",
              value: function () {
                this.notfoundText &&
                  this.notfoundText.classList.remove("-isShow");
              }
            },
            {
              key: "setNotfound",
              value: function () {
                this.notfoundText &&
                  (this.notfoundText.classList.add("-isShow"),
                  this.emitResizeAll());
              }
            },
            {
              key: "resetScroll",
              value: function () {
                var e = this;
                return new Promise(function (t) {
                  e.scrollTo(e.scrollTarget || e.option.context, {
                    duration: 1,
                    onComplete: function () {
                      e.scrollTargetFocus && e.scrollTargetFocus.focus(), t();
                    }
                  });
                });
              }
            },
            {
              key: "onDestroy",
              value: function () {
                this.vue.unmount();
              }
            }
          ])
        );
        var r;
      })(Zs);
      V(Jc, "selectorRoot", "[data-sort-article-list]");
      var Qc = (function (t) {
        function i() {
          var e;
          b(this, i);
          for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)
            n[r] = arguments[r];
          return (
            V((e = h(this, i, [].concat(n))), "allDataList", void 0),
            V(e, "currentData", void 0),
            V(e, "articleListElem", void 0),
            V(e, "articleList", void 0),
            V(e, "resultElems", void 0),
            V(e, "form", void 0),
            V(e, "sortItems", void 0),
            V(e, "defaultParams", void 0),
            V(e, "accordions", void 0),
            e
          );
        }
        return (
          v(i, t),
          w(i, [
            {
              key: "onInit",
              value:
                ((r = n(
                  e().mark(function t() {
                    var n;
                    return e().wrap(
                      function (e) {
                        for (;;)
                          switch ((e.prev = e.next)) {
                            case 0:
                              Ol(
                                this.option,
                                JSON.parse(this.el.dataset.sort || "{}")
                              ),
                                (n = this.el.querySelector("[data-sort-data]")),
                                (this.allDataList = JSON.parse(
                                  (null == n ? void 0 : n.textContent) || ""
                                )),
                                (this.currentData = {}),
                                (this.sortItems = Zc.createAll(this.el, {
                                  createData: this.createData.bind(this),
                                  checkTarget: this.checkTarget.bind(this)
                                })),
                                (this.articleList = Jc.createAll(this.el, {
                                  allDataList: this.allDataList,
                                  context: this.el,
                                  setURLParams: this.setURLParams.bind(this)
                                })[0]),
                                (this.accordions = this.el.querySelectorAll(
                                  "[data-sort-accordion]"
                                )),
                                (this.defaultParams = this.getURLParams()),
                                this.accordions && this.openAccordion(),
                                this.checkFromData(this.defaultParams),
                                this.createData(!0);
                            case 3:
                            case "end":
                              return e.stop();
                          }
                      },
                      t,
                      this
                    );
                  })
                )),
                function () {
                  return r.apply(this, arguments);
                })
            },
            {
              key: "createData",
              value: function () {
                var e =
                    arguments.length > 0 &&
                    void 0 !== arguments[0] &&
                    arguments[0],
                  t = {};
                this.sortItems.forEach(function (e) {
                  return e.getStatus(t);
                }),
                  (this.currentData = t),
                  this.sortExecute(e);
              }
            },
            {
              key: "checkTarget",
              value: function (e) {
                var t = e.group,
                  n = e.value;
                this.sortItems.forEach(function (e) {
                  return e.otherChange({ group: t, value: n });
                });
              }
            },
            {
              key: "sortExecute",
              value: function (e) {
                var t = this,
                  n = this.allDataList.concat(),
                  i = this.currentData,
                  r = function (e) {
                    var r = i[e];
                    if (0 === r.length || "all" === r[0].value)
                      return (
                        0 === r.length &&
                          t.sortItems.forEach(function (t) {
                            t.name === e && "all" === t.value && t.checkTrue();
                          }),
                        1
                      );
                    n = n.filter(function (t) {
                      return r.some(function (n) {
                        return n.value === t[e] || t[e].includes(n.value);
                      });
                    });
                  };
                for (var a in i) r(a);
                this.articleList.setList(n, e);
              }
            },
            {
              key: "setURLParams",
              value: function () {
                var e = new URL(window.location.href),
                  t = this.currentData;
                for (var n in t) {
                  var i = t[n],
                    r = i
                      .map(function (e) {
                        return e.value;
                      })
                      .join(",");
                  0 === i.length || "all" === i[0].value
                    ? e.searchParams.delete(n)
                    : e.searchParams.set(n, r);
                }
                var a = decodeURIComponent(e.href);
                window.history.pushState({}, "", a);
              }
            },
            {
              key: "getURLParams",
              value: function () {
                var e = decodeURIComponent(location.search),
                  t = e.slice(1, e.length).split("&"),
                  n = {};
                return (
                  "" !== t[0] &&
                    t.forEach(function (e) {
                      var t = e.split("="),
                        i = t[0],
                        r = t[1].split(",");
                      n[i] = r.map(function (e) {
                        return { value: e };
                      });
                    }),
                  n
                );
              }
            },
            {
              key: "checkFromData",
              value: function (e) {
                var t = this,
                  n = function (n) {
                    e[n].forEach(function (e) {
                      t.sortItems.forEach(function (t) {
                        return t.check({ group: n, value: e.value });
                      });
                    });
                  };
                for (var i in e) n(i);
              }
            },
            {
              key: "openAccordion",
              value: function () {
                var e = Object.keys(this.defaultParams);
                this.accordions.forEach(function (t) {
                  var n = t.dataset.sortAccordion;
                  e.some(function (e) {
                    return e === n;
                  }) &&
                    setTimeout(function () {
                      return t.click();
                    }, 1e3);
                });
              }
            },
            {
              key: "onDestroy",
              value: function () {
                this.allDataList = [];
              }
            }
          ])
        );
        var r;
      })(Zs);
      V(Qc, "selectorRoot", "[data-sort]:not([data-sort-manual])"),
        Qc.register(),
        ((P = (function (e) {
          function t() {
            return b(this, t), h(this, t, arguments);
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  this.elBackground = this.el.querySelector(
                    "[data-parallax-background]"
                  );
                }
              },
              {
                key: "onIntersect",
                value: function (e) {
                  var t = e.isIntersecting;
                  this.elBackground &&
                    (t
                      ? ((this.elBackground.style.willChange = "transform"),
                        this.playScroll())
                      : (this.pauseScroll(),
                        (this.elBackground.style.willChange = "")));
                }
              },
              {
                key: "onScroll",
                value: function (e) {
                  var t = e.scroll;
                  this.elBackground &&
                    (this.elBackground.style.transform =
                      "matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,".concat(
                        ((t - this.yStart) / this.yDistance - 1) * this.move,
                        ",0,1)"
                      ));
                }
              },
              {
                key: "onResize",
                value: function (e) {
                  var t = e.windowHeight;
                  if (this.elBackground) {
                    this.elBackground.style.transform = "";
                    var n = this.scrollY,
                      i = this.el.getBoundingClientRect(),
                      r = i.top,
                      a = i.bottom,
                      o = i.height,
                      s = this.elBackground.getBoundingClientRect().height;
                    (this.yStart = r + n - t),
                      (this.yEnd = a + n),
                      (this.yDistance = this.yEnd - this.yStart),
                      (this.move = s - o);
                  }
                }
              }
            ])
          );
        })(Zs)),
        V(P, "selectorRoot", "[data-parallax]"),
        P).register();
      var $c = (function (e) {
        function t() {
          return b(this, t), h(this, t, arguments);
        }
        return v(t, e), w(t);
      })(Zs);
      function eh(e) {
        var t = "function" == typeof Map ? new Map() : void 0;
        return (
          (eh = function (e) {
            if (
              null === e ||
              !(function (e) {
                try {
                  return (
                    -1 !== Function.toString.call(e).indexOf("[native code]")
                  );
                } catch (t) {
                  return "function" == typeof e;
                }
              })(e)
            )
              return e;
            if ("function" != typeof e)
              throw new TypeError(
                "Super expression must either be null or a function"
              );
            if (void 0 !== t) {
              if (t.has(e)) return t.get(e);
              t.set(e, n);
            }
            function n() {
              return (function (e, t, n) {
                if (hh()) return Reflect.construct.apply(null, arguments);
                var i = [null];
                i.push.apply(i, t);
                var r = new (e.bind.apply(e, i))();
                return n && fh(r, n.prototype), r;
              })(e, arguments, dh(this).constructor);
            }
            return (
              (n.prototype = Object.create(e.prototype, {
                constructor: {
                  value: n,
                  enumerable: !1,
                  writable: !0,
                  configurable: !0
                }
              })),
              fh(n, e)
            );
          }),
          eh(e)
        );
      }
      function th(e, t, n, i, r, a, o) {
        try {
          var s = e[a](o),
            l = s.value;
        } catch (e) {
          return void n(e);
        }
        s.done ? t(l) : Promise.resolve(l).then(i, r);
      }
      function nh(e) {
        return function () {
          var t = this,
            n = arguments;
          return new Promise(function (i, r) {
            var a = e.apply(t, n);
            function o(e) {
              th(a, i, r, o, s, "next", e);
            }
            function s(e) {
              th(a, i, r, o, s, "throw", e);
            }
            o(void 0);
          });
        };
      }
      function ih(e, t) {
        var n =
          ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
          e["@@iterator"];
        if (!n) {
          if (
            Array.isArray(e) ||
            (n = ah(e)) ||
            (t && e && "number" == typeof e.length)
          ) {
            n && (e = n);
            var i = 0,
              r = function () {};
            return {
              s: r,
              n: function () {
                return i >= e.length
                  ? { done: !0 }
                  : { done: !1, value: e[i++] };
              },
              e: function (e) {
                throw e;
              },
              f: r
            };
          }
          throw new TypeError(
            "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        }
        var a,
          o = !0,
          s = !1;
        return {
          s: function () {
            n = n.call(e);
          },
          n: function () {
            var e = n.next();
            return (o = e.done), e;
          },
          e: function (e) {
            (s = !0), (a = e);
          },
          f: function () {
            try {
              o || null == n.return || n.return();
            } finally {
              if (s) throw a;
            }
          }
        };
      }
      function rh(e, t) {
        return (
          (function (e) {
            if (Array.isArray(e)) return e;
          })(e) ||
          (function (e, t) {
            var n =
              null == e
                ? null
                : ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                  e["@@iterator"];
            if (null != n) {
              var i,
                r,
                a,
                o,
                s = [],
                l = !0,
                u = !1;
              try {
                if (((a = (n = n.call(e)).next), 0 === t)) {
                  if (Object(n) !== n) return;
                  l = !1;
                } else
                  for (
                    ;
                    !(l = (i = a.call(n)).done) &&
                    (s.push(i.value), s.length !== t);
                    l = !0
                  );
              } catch (e) {
                (u = !0), (r = e);
              } finally {
                try {
                  if (
                    !l &&
                    null != n.return &&
                    ((o = n.return()), Object(o) !== o)
                  )
                    return;
                } finally {
                  if (u) throw r;
                }
              }
              return s;
            }
          })(e, t) ||
          ah(e, t) ||
          (function () {
            throw new TypeError(
              "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
            );
          })()
        );
      }
      function ah(e, t) {
        if (e) {
          if ("string" == typeof e) return oh(e, t);
          var n = {}.toString.call(e).slice(8, -1);
          return (
            "Object" === n && e.constructor && (n = e.constructor.name),
            "Map" === n || "Set" === n
              ? Array.from(e)
              : "Arguments" === n ||
                /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
              ? oh(e, t)
              : void 0
          );
        }
      }
      function oh(e, t) {
        (null == t || t > e.length) && (t = e.length);
        for (var n = 0, i = Array(t); n < t; n++) i[n] = e[n];
        return i;
      }
      function sh(e, t, n, i) {
        var r = lh(dh(1 & i ? e.prototype : e), t, n);
        return 2 & i && "function" == typeof r
          ? function (e) {
              return r.apply(n, e);
            }
          : r;
      }
      function lh() {
        return (
          (lh =
            "undefined" != typeof Reflect && Reflect.get
              ? Reflect.get.bind()
              : function (e, t, n) {
                  var i = (function (e, t) {
                    for (
                      ;
                      !{}.hasOwnProperty.call(e, t) && null !== (e = dh(e));

                    );
                    return e;
                  })(e, t);
                  if (i) {
                    var r = Object.getOwnPropertyDescriptor(i, t);
                    return r.get
                      ? r.get.call(arguments.length < 3 ? e : n)
                      : r.value;
                  }
                }),
          lh.apply(null, arguments)
        );
      }
      function uh(e, t, n) {
        return (
          (t = dh(t)),
          (function (e, t) {
            if (t && ("object" == xh(t) || "function" == typeof t)) return t;
            if (void 0 !== t)
              throw new TypeError(
                "Derived constructors may only return object or undefined"
              );
            return ch(e);
          })(
            e,
            hh()
              ? Reflect.construct(t, n || [], dh(e).constructor)
              : t.apply(e, n)
          )
        );
      }
      function ch(e) {
        if (void 0 === e)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called"
          );
        return e;
      }
      function hh() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (hh = function () {
          return !!e;
        })();
      }
      function dh(e) {
        return (
          (dh = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          dh(e)
        );
      }
      function ph(e, t) {
        if ("function" != typeof t && null !== t)
          throw new TypeError(
            "Super expression must either be null or a function"
          );
        (e.prototype = Object.create(t && t.prototype, {
          constructor: { value: e, writable: !0, configurable: !0 }
        })),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          t && fh(e, t);
      }
      function fh(e, t) {
        return (
          (fh = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          fh(e, t)
        );
      }
      function vh(e, t, n) {
        return (
          (t = bh(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      function mh() {
        mh = function () {
          return t;
        };
        var e,
          t = {},
          n = Object.prototype,
          i = n.hasOwnProperty,
          r =
            Object.defineProperty ||
            function (e, t, n) {
              e[t] = n.value;
            },
          a = "function" == typeof Symbol ? Symbol : {},
          o = a.iterator || "@@iterator",
          s = a.asyncIterator || "@@asyncIterator",
          l = a.toStringTag || "@@toStringTag";
        function u(e, t, n) {
          return (
            Object.defineProperty(e, t, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0
            }),
            e[t]
          );
        }
        try {
          u({}, "");
        } catch (e) {
          u = function (e, t, n) {
            return (e[t] = n);
          };
        }
        function c(e, t, n, i) {
          var a = t && t.prototype instanceof g ? t : g,
            o = Object.create(a.prototype),
            s = new A(i || []);
          return r(o, "_invoke", { value: k(e, n, s) }), o;
        }
        function h(e, t, n) {
          try {
            return { type: "normal", arg: e.call(t, n) };
          } catch (e) {
            return { type: "throw", arg: e };
          }
        }
        t.wrap = c;
        var d = "suspendedStart",
          p = "suspendedYield",
          f = "executing",
          v = "completed",
          m = {};
        function g() {}
        function _() {}
        function y() {}
        var b = {};
        u(b, o, function () {
          return this;
        });
        var x = Object.getPrototypeOf,
          w = x && x(x(P([])));
        w && w !== n && i.call(w, o) && (b = w);
        var S = (y.prototype = g.prototype = Object.create(b));
        function M(e) {
          ["next", "throw", "return"].forEach(function (t) {
            u(e, t, function (e) {
              return this._invoke(t, e);
            });
          });
        }
        function T(e, t) {
          function n(r, a, o, s) {
            var l = h(e[r], e, a);
            if ("throw" !== l.type) {
              var u = l.arg,
                c = u.value;
              return c && "object" == xh(c) && i.call(c, "__await")
                ? t.resolve(c.__await).then(
                    function (e) {
                      n("next", e, o, s);
                    },
                    function (e) {
                      n("throw", e, o, s);
                    }
                  )
                : t.resolve(c).then(
                    function (e) {
                      (u.value = e), o(u);
                    },
                    function (e) {
                      return n("throw", e, o, s);
                    }
                  );
            }
            s(l.arg);
          }
          var a;
          r(this, "_invoke", {
            value: function (e, i) {
              function r() {
                return new t(function (t, r) {
                  n(e, i, t, r);
                });
              }
              return (a = a ? a.then(r, r) : r());
            }
          });
        }
        function k(t, n, i) {
          var r = d;
          return function (a, o) {
            if (r === f) throw Error("Generator is already running");
            if (r === v) {
              if ("throw" === a) throw o;
              return { value: e, done: !0 };
            }
            for (i.method = a, i.arg = o; ; ) {
              var s = i.delegate;
              if (s) {
                var l = E(s, i);
                if (l) {
                  if (l === m) continue;
                  return l;
                }
              }
              if ("next" === i.method) i.sent = i._sent = i.arg;
              else if ("throw" === i.method) {
                if (r === d) throw ((r = v), i.arg);
                i.dispatchException(i.arg);
              } else "return" === i.method && i.abrupt("return", i.arg);
              r = f;
              var u = h(t, n, i);
              if ("normal" === u.type) {
                if (((r = i.done ? v : p), u.arg === m)) continue;
                return { value: u.arg, done: i.done };
              }
              "throw" === u.type &&
                ((r = v), (i.method = "throw"), (i.arg = u.arg));
            }
          };
        }
        function E(t, n) {
          var i = n.method,
            r = t.iterator[i];
          if (r === e)
            return (
              (n.delegate = null),
              ("throw" === i &&
                t.iterator.return &&
                ((n.method = "return"),
                (n.arg = e),
                E(t, n),
                "throw" === n.method)) ||
                ("return" !== i &&
                  ((n.method = "throw"),
                  (n.arg = new TypeError(
                    "The iterator does not provide a '" + i + "' method"
                  )))),
              m
            );
          var a = h(r, t.iterator, n.arg);
          if ("throw" === a.type)
            return (
              (n.method = "throw"), (n.arg = a.arg), (n.delegate = null), m
            );
          var o = a.arg;
          return o
            ? o.done
              ? ((n[t.resultName] = o.value),
                (n.next = t.nextLoc),
                "return" !== n.method && ((n.method = "next"), (n.arg = e)),
                (n.delegate = null),
                m)
              : o
            : ((n.method = "throw"),
              (n.arg = new TypeError("iterator result is not an object")),
              (n.delegate = null),
              m);
        }
        function C(e) {
          var t = { tryLoc: e[0] };
          1 in e && (t.catchLoc = e[1]),
            2 in e && ((t.finallyLoc = e[2]), (t.afterLoc = e[3])),
            this.tryEntries.push(t);
        }
        function D(e) {
          var t = e.completion || {};
          (t.type = "normal"), delete t.arg, (e.completion = t);
        }
        function A(e) {
          (this.tryEntries = [{ tryLoc: "root" }]),
            e.forEach(C, this),
            this.reset(!0);
        }
        function P(t) {
          if (t || "" === t) {
            var n = t[o];
            if (n) return n.call(t);
            if ("function" == typeof t.next) return t;
            if (!isNaN(t.length)) {
              var r = -1,
                a = function n() {
                  for (; ++r < t.length; )
                    if (i.call(t, r)) return (n.value = t[r]), (n.done = !1), n;
                  return (n.value = e), (n.done = !0), n;
                };
              return (a.next = a);
            }
          }
          throw new TypeError(xh(t) + " is not iterable");
        }
        return (
          (_.prototype = y),
          r(S, "constructor", { value: y, configurable: !0 }),
          r(y, "constructor", { value: _, configurable: !0 }),
          (_.displayName = u(y, l, "GeneratorFunction")),
          (t.isGeneratorFunction = function (e) {
            var t = "function" == typeof e && e.constructor;
            return (
              !!t &&
              (t === _ || "GeneratorFunction" === (t.displayName || t.name))
            );
          }),
          (t.mark = function (e) {
            return (
              Object.setPrototypeOf
                ? Object.setPrototypeOf(e, y)
                : ((e.__proto__ = y), u(e, l, "GeneratorFunction")),
              (e.prototype = Object.create(S)),
              e
            );
          }),
          (t.awrap = function (e) {
            return { __await: e };
          }),
          M(T.prototype),
          u(T.prototype, s, function () {
            return this;
          }),
          (t.AsyncIterator = T),
          (t.async = function (e, n, i, r, a) {
            void 0 === a && (a = Promise);
            var o = new T(c(e, n, i, r), a);
            return t.isGeneratorFunction(n)
              ? o
              : o.next().then(function (e) {
                  return e.done ? e.value : o.next();
                });
          }),
          M(S),
          u(S, l, "Generator"),
          u(S, o, function () {
            return this;
          }),
          u(S, "toString", function () {
            return "[object Generator]";
          }),
          (t.keys = function (e) {
            var t = Object(e),
              n = [];
            for (var i in t) n.push(i);
            return (
              n.reverse(),
              function e() {
                for (; n.length; ) {
                  var i = n.pop();
                  if (i in t) return (e.value = i), (e.done = !1), e;
                }
                return (e.done = !0), e;
              }
            );
          }),
          (t.values = P),
          (A.prototype = {
            constructor: A,
            reset: function (t) {
              if (
                ((this.prev = 0),
                (this.next = 0),
                (this.sent = this._sent = e),
                (this.done = !1),
                (this.delegate = null),
                (this.method = "next"),
                (this.arg = e),
                this.tryEntries.forEach(D),
                !t)
              )
                for (var n in this)
                  "t" === n.charAt(0) &&
                    i.call(this, n) &&
                    !isNaN(+n.slice(1)) &&
                    (this[n] = e);
            },
            stop: function () {
              this.done = !0;
              var e = this.tryEntries[0].completion;
              if ("throw" === e.type) throw e.arg;
              return this.rval;
            },
            dispatchException: function (t) {
              if (this.done) throw t;
              var n = this;
              function r(i, r) {
                return (
                  (s.type = "throw"),
                  (s.arg = t),
                  (n.next = i),
                  r && ((n.method = "next"), (n.arg = e)),
                  !!r
                );
              }
              for (var a = this.tryEntries.length - 1; a >= 0; --a) {
                var o = this.tryEntries[a],
                  s = o.completion;
                if ("root" === o.tryLoc) return r("end");
                if (o.tryLoc <= this.prev) {
                  var l = i.call(o, "catchLoc"),
                    u = i.call(o, "finallyLoc");
                  if (l && u) {
                    if (this.prev < o.catchLoc) return r(o.catchLoc, !0);
                    if (this.prev < o.finallyLoc) return r(o.finallyLoc);
                  } else if (l) {
                    if (this.prev < o.catchLoc) return r(o.catchLoc, !0);
                  } else {
                    if (!u)
                      throw Error("try statement without catch or finally");
                    if (this.prev < o.finallyLoc) return r(o.finallyLoc);
                  }
                }
              }
            },
            abrupt: function (e, t) {
              for (var n = this.tryEntries.length - 1; n >= 0; --n) {
                var r = this.tryEntries[n];
                if (
                  r.tryLoc <= this.prev &&
                  i.call(r, "finallyLoc") &&
                  this.prev < r.finallyLoc
                ) {
                  var a = r;
                  break;
                }
              }
              a &&
                ("break" === e || "continue" === e) &&
                a.tryLoc <= t &&
                t <= a.finallyLoc &&
                (a = null);
              var o = a ? a.completion : {};
              return (
                (o.type = e),
                (o.arg = t),
                a
                  ? ((this.method = "next"), (this.next = a.finallyLoc), m)
                  : this.complete(o)
              );
            },
            complete: function (e, t) {
              if ("throw" === e.type) throw e.arg;
              return (
                "break" === e.type || "continue" === e.type
                  ? (this.next = e.arg)
                  : "return" === e.type
                  ? ((this.rval = this.arg = e.arg),
                    (this.method = "return"),
                    (this.next = "end"))
                  : "normal" === e.type && t && (this.next = t),
                m
              );
            },
            finish: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.finallyLoc === e)
                  return this.complete(n.completion, n.afterLoc), D(n), m;
              }
            },
            catch: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.tryLoc === e) {
                  var i = n.completion;
                  if ("throw" === i.type) {
                    var r = i.arg;
                    D(n);
                  }
                  return r;
                }
              }
              throw Error("illegal catch attempt");
            },
            delegateYield: function (t, n, i) {
              return (
                (this.delegate = { iterator: P(t), resultName: n, nextLoc: i }),
                "next" === this.method && (this.arg = e),
                m
              );
            }
          }),
          t
        );
      }
      function gh(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function _h(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          (i.enumerable = i.enumerable || !1),
            (i.configurable = !0),
            "value" in i && (i.writable = !0),
            Object.defineProperty(e, bh(i.key), i);
        }
      }
      function yh(e, t, n) {
        return (
          t && _h(e.prototype, t),
          n && _h(e, n),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          e
        );
      }
      function bh(e) {
        var t = (function (e) {
          if ("object" != xh(e) || !e) return e;
          var t = e[Symbol.toPrimitive];
          if (void 0 !== t) {
            var n = t.call(e, "string");
            if ("object" != xh(n)) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e);
        return "symbol" == xh(t) ? t : t + "";
      }
      function xh(e) {
        return (
          (xh =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          xh(e)
        );
      }
      function wh(e, t, n) {
        return (
          (t = (function (e) {
            var t = (function (e) {
              if ("object" != xh(e) || !e) return e;
              var t = e[Symbol.toPrimitive];
              if (void 0 !== t) {
                var n = t.call(e, "string");
                if ("object" != xh(n)) return n;
                throw new TypeError(
                  "@@toPrimitive must return a primitive value."
                );
              }
              return String(e);
            })(e);
            return "symbol" == xh(t) ? t : t + "";
          })(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      V($c, "isPermanent", !0),
        ((L = (function (e) {
          function t() {
            var e;
            b(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return (
              V((e = h(this, t, [].concat(i))), "isShow", !1),
              V(e, "isShowTrigger", !1),
              e
            );
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  var e,
                    t = this;
                  "pageTop" !== Yr.pageId &&
                    null !== (e = this.el) &&
                    void 0 !== e &&
                    e.classList.add("-start", "-show"),
                    this.isSp
                      ? (this.refs.navList.style.display = "none")
                      : this.addIntersectionObserver({
                          el: "[data-scroll-down-observer]",
                          callback: function (e) {
                            e.isIntersecting
                              ? t.hideTrigger()
                              : t.showTrigger();
                          }
                        }),
                    this.addFooterIntersectionObserver(),
                    this.on("showKv", function () {
                      var e;
                      null !== (e = t.el) &&
                        void 0 !== e &&
                        e.classList.add("-start"),
                        t.show();
                    }),
                    this.on("showHeaderTrigger", function () {
                      t.showTrigger();
                    }),
                    this.on("hideHeaderTrigger", function () {
                      t.hideTrigger();
                    }),
                    this.on("changeScene", function (e) {
                      var n, i, r;
                      switch (e) {
                        case "Service":
                        case "ServiceOpposite":
                        case "About":
                        case "News":
                        case "Footer":
                          t.tweenHideGradation && t.tweenHideGradation.kill(),
                            (t.tweenHideGradation = gsap.delayedCall(
                              1.5,
                              function () {
                                var e;
                                null === (e = t.el) ||
                                  void 0 === e ||
                                  e.classList.add("-hideGradation");
                              }
                            ));
                          break;
                        default:
                          t.tweenHideGradation && t.tweenHideGradation.kill(),
                            null !== (n = t.el) &&
                              void 0 !== n &&
                              n.classList.remove("-hideGradation"),
                            (t.tweenHideGradation = null);
                      }
                      "Kv" === e
                        ? null === (i = t.el) ||
                          void 0 === i ||
                          i.classList.add("-dark")
                        : null === (r = t.el) ||
                          void 0 === r ||
                          r.classList.remove("-dark");
                    }),
                    this.on("makeHeaderDark", function () {
                      var e;
                      null === (e = t.el) ||
                        void 0 === e ||
                        e.classList.add("-dark");
                    });
                }
              },
              {
                key: "show",
                value: function () {
                  var e;
                  this.isShow ||
                    ((this.isShow = !0),
                    null === (e = this.el) ||
                      void 0 === e ||
                      e.classList.add("-show"));
                }
              },
              {
                key: "hide",
                value: function () {
                  var e;
                  this.isShow &&
                    ((this.isShow = !1),
                    null === (e = this.el) ||
                      void 0 === e ||
                      e.classList.remove("-show"));
                }
              },
              {
                key: "showTrigger",
                value: function () {
                  var e;
                  this.isShowTrigger ||
                    ((this.isShowTrigger = !0),
                    null === (e = this.el) ||
                      void 0 === e ||
                      e.classList.add("-trigger"));
                }
              },
              {
                key: "hideTrigger",
                value: function () {
                  var e;
                  this.isShowTrigger &&
                    ((this.isShowTrigger = !1),
                    null === (e = this.el) ||
                      void 0 === e ||
                      e.classList.remove("-trigger"));
                }
              },
              {
                key: "addFooterIntersectionObserver",
                value: function () {
                  var e = this,
                    t = Yr.view.querySelector("[data-footer]");
                  t &&
                    (this.footerIntersectionObserver =
                      this.addIntersectionObserver({
                        el: t,
                        callback: function (t) {
                          t.isIntersecting ? e.hide() : e.show();
                        }
                      }));
                }
              },
              {
                key: "removeFooterIntersectionObserver",
                value: function () {
                  this.footerIntersectionObserver &&
                    (this.footerIntersectionObserver.destroy(),
                    (this.footerIntersectionObserver = null));
                }
              },
              {
                key: "onLeave",
                value: function () {
                  this.removeFooterIntersectionObserver();
                }
              },
              {
                key: "onEnter",
                value: function () {
                  "pageTop" === Yr.pageId
                    ? (this.hide(), this.hideTrigger())
                    : 0 === Yr.scrollY && (this.show(), this.hideTrigger());
                }
              },
              {
                key: "onEnterCompleted",
                value: function () {
                  this.addFooterIntersectionObserver();
                }
              }
            ])
          );
        })($c)),
        V(L, "componentName", "Header"),
        L).register(),
        ((R = (function (e) {
          function t() {
            var e;
            b(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return V((e = h(this, t, [].concat(i))), "isOpen", !1), e;
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  (Yr.modals.menu = this),
                    (this.elBody = document.body),
                    (this.elContent = this.el.querySelector(
                      "[data-modal-content]"
                    )),
                    (this.elBackdrop = this.el.querySelector(
                      "[data-modal-backdrop]"
                    )),
                    (this.elsClose =
                      this.el.querySelectorAll("[data-modal-close]")),
                    (this.elsLink = this.el.querySelectorAll(
                      '[data-ref="link"], .subNav'
                    )),
                    Fo(this.elContent, { visibility: "hidden" }),
                    Fo(this.refs.item, { opacity: 0 }),
                    Fo(this.refs.text, { opacity: 0 }),
                    (this.items = this.getItems()),
                    this.changeCurrent();
                }
              },
              {
                key: "open",
                value: function (e) {
                  this.isOpen ||
                    ((this.isOpen = !0),
                    this.el.classList.add("-open"),
                    this.elBody.classList.add("-open"),
                    this.el.classList.add("-show"),
                    gsap.set(this.elContent, { visibility: "visible" }),
                    Uo(
                      {
                        onComplete: function () {
                          e && e();
                        }
                      },
                      "menuOpen"
                    )
                      .add([
                        gsap.fromTo(
                          this.refs.content,
                          { opacity: 0 },
                          { opacity: 1, duration: 0.6, ease: "power2.out" }
                        ),
                        gsap.fromTo(
                          this.refs.content,
                          { y: 60 },
                          { y: 0, duration: 1, ease: "expo.out" }
                        )
                      ])
                      .add(
                        [
                          gsap.fromTo(
                            [this.refs.item, this.refs.text],
                            { opacity: 0 },
                            {
                              opacity: 1,
                              duration: 0.6,
                              ease: "power2.out",
                              stagger: 0.08
                            }
                          ),
                          gsap.fromTo(
                            this.elsLink,
                            { y: this.isSp ? 5 : 10 },
                            {
                              y: 0,
                              duration: 1,
                              ease: "expo.out",
                              stagger: 0.08
                            }
                          )
                        ],
                        "<".concat(0.2)
                      ));
                }
              },
              {
                key: "close",
                value: function (e) {
                  var t = this;
                  this.isOpen &&
                    ((this.isOpen = !1),
                    this.el.classList.remove("-show"),
                    Uo(
                      {
                        onComplete: function () {
                          t.el.classList.remove("-open"),
                            t.elBody.classList.remove("-open"),
                            Fo(t.elContent, { visibility: "hidden" }),
                            e && e();
                        }
                      },
                      "menuClose"
                    ).add([
                      gsap.to(
                        [this.refs.content, this.refs.item, this.refs.text],
                        { opacity: 0, duration: 0.15, ease: "power3.out" }
                      )
                    ]));
                }
              },
              {
                key: "getItems",
                value: function () {
                  var e = this.el.querySelectorAll(".FooterNavListItem"),
                    t = {};
                  return (
                    e.forEach(function (e) {
                      var n,
                        i = e.dataset.pageid;
                      switch (i) {
                        case "why-use":
                          n = "pageWhyUse";
                          break;
                        case "white-label":
                          n = "pageWhiteLabel";
                          break;
                        case "smb-service":
                          n = "pageSmbService";
                          break;
                        default:
                          n =
                            "page" +
                            i.charAt(0).toUpperCase() +
                            i.slice(1).toLowerCase();
                      }
                      t[n] = e;
                    }),
                    t
                  );
                }
              },
              {
                key: "changeCurrent",
                value: function () {
                  var e,
                    t,
                    n,
                    i =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : Yr.pageId,
                    r =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : Yr.pageIdPrev;
                  (i = this.getOrganizedPageId(i)),
                    (r = this.getOrganizedPageId(r)),
                    null !== (e = this.items[r]) &&
                      void 0 !== e &&
                      e.classList.remove("-current"),
                    null !== (t = this.items[i]) &&
                      void 0 !== t &&
                      t.classList.add("-current"),
                    null === (n = this.items[i]) ||
                      void 0 === n ||
                      null === (n = n.closest(".hasSubNav")) ||
                      void 0 === n ||
                      n.classList.add("-hasCurrent");
                }
              },
              {
                key: "getOrganizedPageId",
                value: function (e) {
                  return "pageNewsDetail" === e ? "pageNews" : e;
                }
              },
              {
                key: "onEnter",
                value: function (e, t) {
                  this.changeCurrent(e, t);
                }
              },
              {
                key: "onLeave",
                value: function () {
                  Ha.emit("closeModal", "menu");
                }
              }
            ])
          );
        })($c)),
        V(R, "componentName", "Menu"),
        R).register(),
        ((I = (function (e) {
          function t() {
            var e;
            b(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return V((e = h(this, t, [].concat(i))), "isShow", !1), e;
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  (this.el.style.visibility = "hidden"),
                    Fo(this.refs.icon, { opacity: 0 }),
                    this.isSp ||
                      Fo(this.el, {
                        x: window.innerWidth - (this.el.offsetWidth + 110),
                        y: window.innerHeight - (this.el.offsetHeight + 40)
                      }),
                    this.on("showScrollDown", function () {
                      e.show();
                    }),
                    this.on("hideScrollDown", function () {
                      e.hide();
                    });
                }
              },
              {
                key: "onMousemoveDocument",
                value: function (e, t) {
                  pa || Bo(this.el, { x: e, y: t, duration: 0.8 });
                }
              },
              {
                key: "onClick",
                value: function () {
                  this.isSp &&
                    ((Yr.scrollDirection = 1),
                    Ha.emit("top:startTransition:intro", !1, !0));
                }
              },
              {
                key: "show",
                value: function () {
                  this.isShow ||
                    ((this.isShow = !0),
                    (this.el.style.visibility = ""),
                    this.tween && this.tween.kill(),
                    (this.tween = Oo(this.refs.icon, {
                      opacity: 1,
                      duration: 0.8,
                      ease: "power3.out"
                    })));
                }
              },
              {
                key: "hide",
                value: function () {
                  var e = this;
                  this.isShow &&
                    ((this.isShow = !1),
                    this.tween && this.tween.kill(),
                    (this.tween = Oo(this.refs.icon, {
                      opacity: 0,
                      duration: 0.4,
                      ease: "power3.out",
                      onComplete: function () {
                        e.el.style.visibility = "hidden";
                      }
                    })));
                }
              },
              {
                key: "detectShow",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : Yr.pageId;
                  Yr.isLoadDone.pageTop && ("pageTop" === e || this.hide());
                }
              },
              {
                key: "onEnterReady",
                value: function (e, t) {
                  this.detectShow(e);
                }
              }
            ])
          );
        })($c)),
        V(I, "componentName", "ScrollDown"),
        I).register(),
        ((O = (function (e) {
          function t() {
            return b(this, t), h(this, t, arguments);
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  this.changeCurrent();
                }
              },
              {
                key: "changeCurrent",
                value: function () {
                  var e,
                    t,
                    n,
                    i,
                    r =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : Yr.pageId,
                    a =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : Yr.pageIdPrev;
                  null !== (e = this.refs[a]) &&
                    void 0 !== e &&
                    e.classList.remove("-current"),
                    null !== (t = this.refs[this.getParentPageId(a)]) &&
                      void 0 !== t &&
                      t.classList.remove("-parent"),
                    null !== (n = this.refs[r]) &&
                      void 0 !== n &&
                      n.classList.add("-current"),
                    null === (i = this.refs[this.getParentPageId(r)]) ||
                      void 0 === i ||
                      i.classList.add("-parent");
                }
              },
              {
                key: "getParentPageId",
                value: function (e) {
                  switch (e) {
                    case "pageWhiteLabel":
                    case "pageSmbService":
                      return "pageSolution";
                    case "pageNewsDetail":
                      return "pageNews";
                    default:
                      return "";
                  }
                }
              },
              {
                key: "onEnter",
                value: function (e, t) {
                  this.changeCurrent(e, t);
                }
              }
            ])
          );
        })($c)),
        V(O, "componentName", "HeaderNav"),
        O).register(),
        ((N = (function (e) {
          function t() {
            var e;
            b(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return (
              V((e = h(this, t, [].concat(i))), "pageHeight", 9999),
              V(e, "isFull", !0),
              V(e, "currentMeterIndex", 10),
              V(e, "amount", "high"),
              e
            );
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  Yr.components.HeaderEnergy = this;
                }
              },
              {
                key: "scroll",
                value: function (e) {
                  var t = 100 - Math.floor(99 * Math.min(Math.max(e, 0), 1));
                  this.refs.count.textContent = Po(t);
                  var n = Math.floor(t / 10);
                  n !== this.currentMeterIndex &&
                    (100 === t
                      ? this.isFull ||
                        ((this.isFull = !0),
                        this.refs.count.classList.add("-full"))
                      : this.isFull &&
                        ((this.isFull = !1),
                        this.refs.count.classList.remove("-full")),
                    t >= 70
                      ? "high" !== this.amount &&
                        ((this.amount = "high"),
                        this.el.style.setProperty("--color", "#1ece73"))
                      : t >= 30
                      ? "medium" !== this.amount &&
                        ((this.amount = "medium"),
                        this.el.style.setProperty("--color", "#78da02"))
                      : "low" !== this.amount &&
                        ((this.amount = "low"),
                        this.el.style.setProperty("--color", "#f16112")),
                    this.refs.meter.forEach(function (e, t) {
                      t < n
                        ? (e.classList.add("-fill"),
                          0 === t && e.classList.remove("-alert"))
                        : (e.classList.remove("-fill"),
                          0 === n && 0 === t && e.classList.add("-alert"));
                    }),
                    (this.currentMeterIndex = n)),
                    (this.scrollRate = e);
                }
              },
              {
                key: "onScroll",
                value: function (e) {
                  var t = e.scroll;
                  "pageTop" !== Yr.pageId && this.scroll(t / this.pageHeight);
                }
              },
              {
                key: "onResize",
                value: function () {
                  this.pageHeight =
                    document.body.scrollHeight - window.innerHeight - 1;
                }
              }
            ])
          );
        })($c)),
        V(N, "componentName", "HeaderEnergy"),
        N).register(),
        ((F = (function (e) {
          function t() {
            var e;
            b(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return (
              V((e = h(this, t, [].concat(i))), "store", void 0),
              V(e, "singleItemHeight", 0),
              V(e, "mask", 0),
              V(e, "listY", 0),
              V(e, "initialY", 0),
              V(e, "tweenChangeCurrentIndex", void 0),
              V(e, "cIntersectings", []),
              e
            );
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  this.initVue(),
                    "pageTop" === Yr.pageId
                      ? this.getAnchorLinksTopPage()
                      : this.getAnchorLinks(),
                    this.setMask(0),
                    "pageTop" === Yr.pageId
                      ? (this.on(
                          "changeHeaderLocationCurrentIndex",
                          this.changeCurrentIndex.bind(this)
                        ),
                        setTimeout(function () {
                          e.changeCurrentIndex(0);
                        }, 500))
                      : this.addIntersectionObserver({
                          el: "[data-scroll-down-observer]",
                          callback: function (t) {
                            t.isIntersecting && e.changeCurrentIndex(0);
                          }
                        });
                }
              },
              {
                key: "initVue",
                value: function () {
                  var e = (this.store = Ku({
                    anchorLinks: [],
                    currentIndex: 0,
                    isFirst: !0,
                    isLast: !1
                  }));
                  Wc({ store: e }).mount(this.el);
                }
              },
              {
                key: "getAnchorLinks",
                value: function () {
                  var e = this;
                  (this.store.anchorLinks = [
                    { link: "#top", text: "PAGE TOP", onClick: function () {} }
                  ]),
                    Array.prototype.forEach.call(
                      Yr.view.querySelectorAll("[data-anchor-link-item]"),
                      function (t, n) {
                        var i = t.hash,
                          r = Yr.view.querySelector(i);
                        if (r) {
                          var a = {
                            link: i,
                            text: t.dataset.anchorLinkItem,
                            onClick: function () {},
                            second: t.dataset.second
                          };
                          e.cIntersectings.push(
                            Yr.cIntersecting.add({
                              el: r,
                              callback: function (t) {
                                t.isIntersecting && e.changeCurrentIndex(n + 1);
                              },
                              param: { rootMargin: "-50% 0%" }
                            })
                          ),
                            e.store.anchorLinks.push(a);
                        }
                      }
                    ),
                    setTimeout(function () {
                      bo(e.el);
                    }, 0);
                }
              },
              {
                key: "getAnchorLinksTopPage",
                value: function () {
                  this.store.anchorLinks = [
                    { link: "top", text: "PAGE TOP" },
                    { link: "intro", text: "INTRO" },
                    { link: "solution", text: "SOLUTION" },
                    { link: "about", text: "ABOUT" },
                    { link: "news", text: "NEWS" },
                    { link: "footer", text: "FOOTER" }
                  ].map(function (e, t) {
                    var n = e.link,
                      i = e.text;
                    return {
                      link: "#".concat(n),
                      text: i,
                      onClick: function (e) {
                        e.preventDefault(), Ha.emit("top:goToAnchor", n);
                      }
                    };
                  });
                }
              },
              {
                key: "changeCurrentIndex",
                value: function (e) {
                  var t = this;
                  (this.store.currentIndex = e),
                    (this.store.isFirst = 0 === e),
                    (this.store.isLast =
                      e === this.store.anchorLinks.length - 1),
                    this.tweenChangeCurrentIndex &&
                      this.tweenChangeCurrentIndex.kill(),
                    (this.tweenChangeCurrentIndex = Oo(this, {
                      listY: this.singleItemHeight * (2 - e),
                      duration: 0.6,
                      ease: "power4.out",
                      onUpdate: function () {
                        Fo(t.refs.list, { y: t.listY });
                      }
                    }));
                }
              },
              {
                key: "setMask",
                value: function (e) {
                  var t = 40 * (1 - e);
                  this.refs.mask.style.maskImage =
                    this.refs.mask.style.webkitMaskImage =
                      "linear-gradient(\n        0deg,\n        transparent,\n        transparent "
                        .concat(t, "%,\n        #000 ")
                        .concat(40, "%,\n        #000 ")
                        .concat(60, "%,\n        transparent ")
                        .concat(100 - t, "%,\n        transparent\n      )");
                }
              },
              {
                key: "onMouseenter",
                value: function () {
                  var e,
                    t = this;
                  null !== (e = this.el) &&
                    void 0 !== e &&
                    e.classList.add("-open"),
                    (this.initialY = this.listY),
                    Oo(this, {
                      mask: 1,
                      duration: 0.6,
                      ease: "power4.out",
                      onUpdate: function () {
                        t.setMask(t.mask);
                      }
                    });
                }
              },
              {
                key: "onMouseleave",
                value: function () {
                  var e = this;
                  this.changeCurrentIndex(this.store.currentIndex),
                    Oo(this, {
                      mask: 0,
                      duration: 0.3,
                      ease: "power2.out",
                      onUpdate: function () {
                        e.setMask(e.mask);
                      },
                      onComplete: function () {
                        var t;
                        null === (t = e.el) ||
                          void 0 === t ||
                          t.classList.remove("-open");
                      }
                    });
                }
              },
              {
                key: "onGesture",
                value: function (e) {
                  var t = this,
                    n = e.e,
                    i = e.diff.y,
                    r = e.type;
                  n.stopPropagation(),
                    Bo(this, {
                      listY: Math.min(
                        Math.max(
                          this.listY + i * ("wheel" === r ? -0.5 : 1),
                          this.singleItemHeight *
                            (2 - (this.store.anchorLinks.length - 1))
                        ),
                        2 * this.singleItemHeight
                      ),
                      onUpdate: function () {
                        Fo(t.refs.list, { y: t.listY });
                      }
                    });
                }
              },
              {
                key: "onEnter",
                value: function (e, t) {
                  this.cIntersectings.forEach(function (e) {
                    null == e || e.destroy();
                  }),
                    (this.cIntersectings = []),
                    this.getAnchorLinks();
                }
              },
              {
                key: "onResize",
                value: function () {
                  this.singleItemHeight = no(23);
                }
              }
            ])
          );
        })($c)),
        V(F, "componentName", "HeaderLocation"),
        V(F, "gestureOptions", { disableKeyboard: !0, isPreventDefault: !0 }),
        F).register(),
        ((U = (function (e) {
          function t() {
            return b(this, t), h(this, t, arguments);
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  (this.main = this.el.querySelector(".main")),
                    (this.sub = this.el.querySelector(".sub")),
                    (this.gradColor1 = "#30ae52"),
                    (this.gradColor2 = "#3588c9"),
                    (this.gradColor3 = "#fff"),
                    (this.blurValue = 6),
                    (this.splitTarget = new Tl(this.sub, {
                      type: "chars",
                      charsClass: "sub-actor"
                    })),
                    (this.delayTimes = []),
                    this.splitTarget.chars.forEach(function (t, n) {
                      e.delayTimes.push(0.4 * gsap.utils.random(0, 1));
                    }),
                    this.setEvents();
                }
              },
              {
                key: "onDestroy",
                value: function () {
                  this.destroyEvents();
                }
              },
              {
                key: "setEvents",
                value: function () {
                  var e = this.el.parentNode;
                  e.classList.contains("-hasCurrent") ||
                    (e.classList.contains("hasSubNav") &&
                      ((this.parent = e),
                      this.parent.addEventListener(
                        "mouseenter",
                        this.onMouseenterParent.bind(this)
                      ),
                      this.parent.addEventListener(
                        "mouseleave",
                        this.onMouseleaveParent.bind(this)
                      )));
                }
              },
              {
                key: "destroyEvents",
                value: function () {
                  this.parent &&
                    (this.parent.removeEventListener(
                      "mouseenter",
                      this.onMouseenterParent
                    ),
                    this.parent.removeEventListener(
                      "mouseleave",
                      this.onMouseleaveParent
                    ));
                }
              },
              {
                key: "onMouseenter",
                value: function (e) {
                  if (this.parent) {
                    if (this.parent.classList.contains("-hasCurrent"))
                      return void this.showSubText();
                    if (this.isShowGrad) return void this.showSubText();
                  }
                  this.doGradMotion({
                    from: {
                      t0: -200,
                      t1: -150,
                      t2: -120,
                      t3: -90,
                      t4: -50,
                      t5: 0
                    },
                    to: { t1: 0, t2: 15, t3: 85, t4: 100, t5: 130 }
                  }),
                    Oo(this.main, {
                      x: no(15),
                      duration: 0.6,
                      ease: "Expo.easeOut"
                    }),
                    this.showSubText(),
                    (this.isShowGrad = !0);
                }
              },
              {
                key: "showSubText",
                value: function () {
                  var e = this,
                    t = (function (e) {
                      for (var t = u(e), n = t.length - 1; n > 0; n--) {
                        var i = Math.floor(Math.random() * (n + 1)),
                          r = t[n];
                        (t[n] = t[i]), (t[i] = r);
                      }
                      return t;
                    })(this.delayTimes);
                  this.splitTarget.chars.forEach(function (n, i) {
                    Fo(n, {
                      scale: 0.5,
                      filter: "blur(" + no(e.blurValue) + "px)"
                    }),
                      Oo(n, {
                        duration: 0.4,
                        alpha: 1,
                        scale: 1,
                        filter: "blur(0px)",
                        ease: "Quad.easeOut",
                        delay: t[i]
                      });
                  });
                }
              },
              {
                key: "onMouseleave",
                value: function (e) {
                  if (this.parent) {
                    if (this.parent.classList.contains("-hasCurrent"))
                      return void this.hideSubText();
                    if (this.isHoverParent) return void this.hideSubText();
                  }
                  this.doGradMotion({
                    from: { t0: -100, t1: 0, t2: 15, t3: 85, t4: 100, t5: 200 },
                    to: { t0: 100, t1: 120, t2: 112, t3: 188, t4: 200 }
                  }),
                    Oo(this.main, {
                      x: 0,
                      duration: 0.4,
                      ease: "Expo.easeOut",
                      clearProps: "transform"
                    }),
                    this.hideSubText(),
                    (this.isShowGrad = !1);
                }
              },
              {
                key: "hideSubText",
                value: function () {
                  var e = this;
                  this.splitTarget.chars.forEach(function (t, n) {
                    Oo(t, {
                      duration: 0.5,
                      alpha: 0,
                      scale: 0.6,
                      filter: "blur(" + no(e.blurValue) + "px)",
                      ease: "Quad.easeOut"
                    });
                  });
                }
              },
              {
                key: "doGradMotion",
                value: function (e) {
                  var t = this,
                    n = Object.assign(
                      {
                        duration: e.duration || 1.1,
                        ease: "Power3.easeOut",
                        onUpdateParams: [e.from],
                        onUpdate: function (e) {
                          t.main.style.backgroundImage =
                            "linear-gradient(60deg, " + t.getGradient(e) + ")";
                        }
                      },
                      e.to
                    );
                  Oo(e.from, n);
                }
              },
              {
                key: "getGradient",
                value: function (e) {
                  return (
                    this.gradColor3 +
                    " " +
                    e.t0 +
                    "%," +
                    this.gradColor1 +
                    " " +
                    e.t1 +
                    "%," +
                    this.gradColor1 +
                    " " +
                    e.t2 +
                    "%," +
                    this.gradColor2 +
                    " " +
                    e.t3 +
                    "%," +
                    this.gradColor2 +
                    " " +
                    e.t4 +
                    "%," +
                    this.gradColor3 +
                    " " +
                    e.t5 +
                    "%"
                  );
                }
              },
              {
                key: "onMouseenterParent",
                value: function () {
                  this.isHoverParent = !0;
                }
              },
              {
                key: "onMouseleaveParent",
                value: function (e) {
                  (this.isHoverParent = !1),
                    this.onMouseleave && this.onMouseleave();
                }
              }
            ])
          );
        })(Zs)),
        V(U, "componentName", "FooterNavListItem"),
        U).register(),
        ((B = (function (e) {
          function t() {
            return b(this, t), h(this, t, arguments);
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  (this.items = this.getItems()),
                    this.changeCurrent(),
                    (this.isSubNavOpened = !1),
                    this.setupSubNav();
                }
              },
              {
                key: "onEnter",
                value: function (e, t) {
                  this.changeCurrent(e, t);
                }
              },
              {
                key: "onDestroy",
                value: function () {
                  this.destroySubNav();
                }
              },
              {
                key: "getItems",
                value: function () {
                  var e = this.el.querySelectorAll(".FooterNavListItem"),
                    t = {};
                  return (
                    e.forEach(function (e) {
                      var n,
                        i = e.dataset.pageid;
                      switch (i) {
                        case "why-use":
                          n = "pageWhyUse";
                          break;
                        case "white-label":
                          n = "pageWhiteLabel";
                          break;
                        case "smb-service":
                          n = "pageSmbService";
                          break;
                        default:
                          n =
                            "page" +
                            i.charAt(0).toUpperCase() +
                            i.slice(1).toLowerCase();
                      }
                      t[n] = e;
                    }),
                    t
                  );
                }
              },
              {
                key: "changeCurrent",
                value: function () {
                  var e,
                    t,
                    n,
                    i =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : Yr.pageId,
                    r =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : Yr.pageIdPrev;
                  (i = this.getOrganizedPageId(i)),
                    (r = this.getOrganizedPageId(r)),
                    null !== (e = this.items[r]) &&
                      void 0 !== e &&
                      e.classList.remove("-current"),
                    null !== (t = this.items[i]) &&
                      void 0 !== t &&
                      t.classList.add("-current"),
                    null === (n = this.items[i]) ||
                      void 0 === n ||
                      null === (n = n.closest(".hasSubNav")) ||
                      void 0 === n ||
                      n.classList.add("-hasCurrent");
                }
              },
              {
                key: "getOrganizedPageId",
                value: function (e) {
                  return "pageNewsDetail" === e ? "pageNews" : e;
                }
              },
              {
                key: "setupSubNav",
                value: function () {
                  var e = this;
                  (this.hasSubNavItems =
                    this.el.querySelectorAll(".hasSubNav")),
                    (this.subNav = this.el.querySelectorAll(".subNav")),
                    this.hasSubNavItems.forEach(function (t, n) {
                      var i = e;
                      (i.subNav = e.subNav[n]),
                        e.isSp
                          ? t.addEventListener(
                              "click",
                              Object.assign(i, { handleEvent: e.toggleSubNav })
                            )
                          : (t.addEventListener(
                              "mouseenter",
                              Object.assign({}, i, {
                                handleEvent: e.openSubNav
                              })
                            ),
                            t.addEventListener(
                              "mouseleave",
                              Object.assign({}, i, {
                                handleEvent: e.closeSubNav
                              })
                            ));
                    });
                }
              },
              {
                key: "openSubNav",
                value: function (e) {
                  var t = this;
                  e.currentTarget.classList.contains("-hasCurrent") ||
                    ((this.isSubNavOpened = !0),
                    (this.subNav.style.willChange = "height"),
                    Oo(this.subNav, {
                      height: "auto",
                      duration: 0.6,
                      ease: "Expo.easeOut",
                      onComplete: function () {
                        Fa(!0), (t.subNav.style.willChange = "auto");
                      }
                    }));
                }
              },
              {
                key: "closeSubNav",
                value: function (e) {
                  var t = this;
                  e.currentTarget.classList.contains("-hasCurrent") ||
                    ((this.isSubNavOpened = !1),
                    (this.subNav.style.willChange = "height"),
                    Oo(this.subNav, {
                      height: 0,
                      duration: 0.6,
                      ease: "Expo.easeOut",
                      onComplete: function () {
                        Fa(!0), (t.subNav.style.willChange = "auto");
                      }
                    }));
                }
              },
              {
                key: "toggleSubNav",
                value: function (e) {
                  e.currentTarget.classList.contains("-hasCurrent") ||
                    (this.isSubNavOpened
                      ? this.closeSubNav(e)
                      : this.openSubNav(e));
                }
              },
              {
                key: "destroySubNav",
                value: function () {
                  var e = this;
                  this.hasSubNavItems.forEach(function (t, n) {
                    e.isSp
                      ? t.removeEventListener("click", e.toggleSubNav)
                      : (t.removeEventListener("mouseenter", e.openSubNav),
                        t.removeEventListener("mouseleave", e.closeSubNav));
                  });
                }
              }
            ])
          );
        })(Zs)),
        V(B, "componentName", "FooterNavList"),
        B).register(),
        ((z = (function (e) {
          function t() {
            return b(this, t), h(this, t, arguments);
          }
          return (
            v(t, e),
            w(t, [
              {
                key: "onInit",
                value: function () {
                  (this.video = this.refs.video
                    ? new Nl(this.refs.video)
                    : null),
                    this.setPreloadVideo();
                }
              },
              {
                key: "setPreloadVideo",
                value: function () {
                  var e = this;
                  this.addIntersectionObserver({
                    el: this.el,
                    callback: function (t, n) {
                      var i;
                      t.isIntersecting &&
                        (null === (i = e.video) ||
                          void 0 === i ||
                          i.load(e.onLoadedVideo.bind(e)));
                    },
                    param: { rootMargin: "100% 0%" },
                    once: !0
                  });
                }
              },
              {
                key: "onLoadedVideo",
                value: function (e) {
                  var t = this;
                  setTimeout(function () {
                    var e;
                    return null === (e = t.refs.videoContainer) || void 0 === e
                      ? void 0
                      : e.classList.add("-loaded");
                  }, 500);
                }
              },
              {
                key: "onMouseenter",
                value: function (e) {
                  this.isIntersecting || this.play();
                }
              },
              {
                key: "onMouseleave",
                value: function (e) {
                  this.isIntersecting || this.pause();
                }
              },
              {
                key: "onIntersect",
                value: function (e, t) {
                  var n = e.isIntersecting;
                  (this.isIntersecting = n), n ? this.play() : this.pause();
                }
              },
              {
                key: "play",
                value: function () {
                  var e, t;
                  null !== (e = this.refs.videoContainer) &&
                    void 0 !== e &&
                    e.classList.add("-active"),
                    null === (t = this.video) || void 0 === t || t.play();
                }
              },
              {
                key: "pause",
                value: function () {
                  var e, t;
                  null !== (e = this.refs.videoContainer) &&
                    void 0 !== e &&
                    e.classList.remove("-active"),
                    null === (t = this.video) || void 0 === t || t.pause();
                }
              }
            ])
          );
        })(Zs)),
        V(z, "componentName", "FooterNavContact"),
        V(z, "intersectOptions", { rootMargin: "-20% 0% -50% 0%" }),
        z).register();
      var Sh = "151",
        Mh = 100,
        Th = 301,
        kh = 302,
        Eh = 306,
        Ch = 1e3,
        Dh = 1001,
        Ah = 1002,
        Ph = 1003,
        Lh = 1004,
        Rh = 1005,
        Ih = 1006,
        Oh = 1008,
        Nh = 1009,
        Fh = 1014,
        Uh = 1015,
        Bh = 1016,
        zh = 1020,
        Vh = 1023,
        Hh = 1026,
        Gh = 1027,
        Wh = 33776,
        jh = 33777,
        qh = 33778,
        Kh = 33779,
        Xh = 36492,
        Yh = 2300,
        Zh = 2301,
        Jh = 2302,
        Qh = 2400,
        $h = 2401,
        ed = 2402,
        td = 3e3,
        nd = 3001,
        id = "srgb",
        rd = "srgb-linear",
        ad = "display-p3",
        od = 7680,
        sd = 35044,
        ld = "300 es",
        ud = 1035,
        cd = (function () {
          return yh(
            function e() {
              gh(this, e);
            },
            [
              {
                key: "addEventListener",
                value: function (e, t) {
                  void 0 === this._listeners && (this._listeners = {});
                  var n = this._listeners;
                  void 0 === n[e] && (n[e] = []),
                    -1 === n[e].indexOf(t) && n[e].push(t);
                }
              },
              {
                key: "hasEventListener",
                value: function (e, t) {
                  if (void 0 === this._listeners) return !1;
                  var n = this._listeners;
                  return void 0 !== n[e] && -1 !== n[e].indexOf(t);
                }
              },
              {
                key: "removeEventListener",
                value: function (e, t) {
                  if (void 0 !== this._listeners) {
                    var n = this._listeners[e];
                    if (void 0 !== n) {
                      var i = n.indexOf(t);
                      -1 !== i && n.splice(i, 1);
                    }
                  }
                }
              },
              {
                key: "dispatchEvent",
                value: function (e) {
                  if (void 0 !== this._listeners) {
                    var t = this._listeners[e.type];
                    if (void 0 !== t) {
                      e.target = this;
                      for (var n = t.slice(0), i = 0, r = n.length; i < r; i++)
                        n[i].call(this, e);
                      e.target = null;
                    }
                  }
                }
              }
            ]
          );
        })(),
        hd = [
          "00",
          "01",
          "02",
          "03",
          "04",
          "05",
          "06",
          "07",
          "08",
          "09",
          "0a",
          "0b",
          "0c",
          "0d",
          "0e",
          "0f",
          "10",
          "11",
          "12",
          "13",
          "14",
          "15",
          "16",
          "17",
          "18",
          "19",
          "1a",
          "1b",
          "1c",
          "1d",
          "1e",
          "1f",
          "20",
          "21",
          "22",
          "23",
          "24",
          "25",
          "26",
          "27",
          "28",
          "29",
          "2a",
          "2b",
          "2c",
          "2d",
          "2e",
          "2f",
          "30",
          "31",
          "32",
          "33",
          "34",
          "35",
          "36",
          "37",
          "38",
          "39",
          "3a",
          "3b",
          "3c",
          "3d",
          "3e",
          "3f",
          "40",
          "41",
          "42",
          "43",
          "44",
          "45",
          "46",
          "47",
          "48",
          "49",
          "4a",
          "4b",
          "4c",
          "4d",
          "4e",
          "4f",
          "50",
          "51",
          "52",
          "53",
          "54",
          "55",
          "56",
          "57",
          "58",
          "59",
          "5a",
          "5b",
          "5c",
          "5d",
          "5e",
          "5f",
          "60",
          "61",
          "62",
          "63",
          "64",
          "65",
          "66",
          "67",
          "68",
          "69",
          "6a",
          "6b",
          "6c",
          "6d",
          "6e",
          "6f",
          "70",
          "71",
          "72",
          "73",
          "74",
          "75",
          "76",
          "77",
          "78",
          "79",
          "7a",
          "7b",
          "7c",
          "7d",
          "7e",
          "7f",
          "80",
          "81",
          "82",
          "83",
          "84",
          "85",
          "86",
          "87",
          "88",
          "89",
          "8a",
          "8b",
          "8c",
          "8d",
          "8e",
          "8f",
          "90",
          "91",
          "92",
          "93",
          "94",
          "95",
          "96",
          "97",
          "98",
          "99",
          "9a",
          "9b",
          "9c",
          "9d",
          "9e",
          "9f",
          "a0",
          "a1",
          "a2",
          "a3",
          "a4",
          "a5",
          "a6",
          "a7",
          "a8",
          "a9",
          "aa",
          "ab",
          "ac",
          "ad",
          "ae",
          "af",
          "b0",
          "b1",
          "b2",
          "b3",
          "b4",
          "b5",
          "b6",
          "b7",
          "b8",
          "b9",
          "ba",
          "bb",
          "bc",
          "bd",
          "be",
          "bf",
          "c0",
          "c1",
          "c2",
          "c3",
          "c4",
          "c5",
          "c6",
          "c7",
          "c8",
          "c9",
          "ca",
          "cb",
          "cc",
          "cd",
          "ce",
          "cf",
          "d0",
          "d1",
          "d2",
          "d3",
          "d4",
          "d5",
          "d6",
          "d7",
          "d8",
          "d9",
          "da",
          "db",
          "dc",
          "dd",
          "de",
          "df",
          "e0",
          "e1",
          "e2",
          "e3",
          "e4",
          "e5",
          "e6",
          "e7",
          "e8",
          "e9",
          "ea",
          "eb",
          "ec",
          "ed",
          "ee",
          "ef",
          "f0",
          "f1",
          "f2",
          "f3",
          "f4",
          "f5",
          "f6",
          "f7",
          "f8",
          "f9",
          "fa",
          "fb",
          "fc",
          "fd",
          "fe",
          "ff"
        ],
        dd = Math.PI / 180,
        pd = 180 / Math.PI;
      function fd() {
        var e = (4294967295 * Math.random()) | 0,
          t = (4294967295 * Math.random()) | 0,
          n = (4294967295 * Math.random()) | 0,
          i = (4294967295 * Math.random()) | 0;
        return (
          hd[255 & e] +
          hd[(e >> 8) & 255] +
          hd[(e >> 16) & 255] +
          hd[(e >> 24) & 255] +
          "-" +
          hd[255 & t] +
          hd[(t >> 8) & 255] +
          "-" +
          hd[((t >> 16) & 15) | 64] +
          hd[(t >> 24) & 255] +
          "-" +
          hd[(63 & n) | 128] +
          hd[(n >> 8) & 255] +
          "-" +
          hd[(n >> 16) & 255] +
          hd[(n >> 24) & 255] +
          hd[255 & i] +
          hd[(i >> 8) & 255] +
          hd[(i >> 16) & 255] +
          hd[(i >> 24) & 255]
        ).toLowerCase();
      }
      function vd(e, t, n) {
        return Math.max(t, Math.min(n, e));
      }
      function md(e, t) {
        return ((e % t) + t) % t;
      }
      function gd(e, t, n) {
        return (1 - n) * e + n * t;
      }
      function _d(e) {
        return !(e & (e - 1)) && 0 !== e;
      }
      function yd(e) {
        return Math.pow(2, Math.ceil(Math.log(e) / Math.LN2));
      }
      function bd(e) {
        return Math.pow(2, Math.floor(Math.log(e) / Math.LN2));
      }
      function xd(e, t) {
        switch (t.constructor) {
          case Float32Array:
            return e;
          case Uint16Array:
            return e / 65535;
          case Uint8Array:
            return e / 255;
          case Int16Array:
            return Math.max(e / 32767, -1);
          case Int8Array:
            return Math.max(e / 127, -1);
          default:
            throw new Error("Invalid component type.");
        }
      }
      function wd(e, t) {
        switch (t.constructor) {
          case Float32Array:
            return e;
          case Uint16Array:
            return Math.round(65535 * e);
          case Uint8Array:
            return Math.round(255 * e);
          case Int16Array:
            return Math.round(32767 * e);
          case Int8Array:
            return Math.round(127 * e);
          default:
            throw new Error("Invalid component type.");
        }
      }
      var Sd = function (e) {
          return e * pd;
        },
        Md = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : 0,
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0;
              gh(this, e),
                (e.prototype.isVector2 = !0),
                (this.x = t),
                (this.y = n);
            },
            [
              {
                key: "width",
                get: function () {
                  return this.x;
                },
                set: function (e) {
                  this.x = e;
                }
              },
              {
                key: "height",
                get: function () {
                  return this.y;
                },
                set: function (e) {
                  this.y = e;
                }
              },
              {
                key: "set",
                value: function (e, t) {
                  return (this.x = e), (this.y = t), this;
                }
              },
              {
                key: "setScalar",
                value: function (e) {
                  return (this.x = e), (this.y = e), this;
                }
              },
              {
                key: "setX",
                value: function (e) {
                  return (this.x = e), this;
                }
              },
              {
                key: "setY",
                value: function (e) {
                  return (this.y = e), this;
                }
              },
              {
                key: "setComponent",
                value: function (e, t) {
                  switch (e) {
                    case 0:
                      this.x = t;
                      break;
                    case 1:
                      this.y = t;
                      break;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                  return this;
                }
              },
              {
                key: "getComponent",
                value: function (e) {
                  switch (e) {
                    case 0:
                      return this.x;
                    case 1:
                      return this.y;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.x, this.y);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (this.x = e.x), (this.y = e.y), this;
                }
              },
              {
                key: "add",
                value: function (e) {
                  return (this.x += e.x), (this.y += e.y), this;
                }
              },
              {
                key: "addScalar",
                value: function (e) {
                  return (this.x += e), (this.y += e), this;
                }
              },
              {
                key: "addVectors",
                value: function (e, t) {
                  return (this.x = e.x + t.x), (this.y = e.y + t.y), this;
                }
              },
              {
                key: "addScaledVector",
                value: function (e, t) {
                  return (this.x += e.x * t), (this.y += e.y * t), this;
                }
              },
              {
                key: "sub",
                value: function (e) {
                  return (this.x -= e.x), (this.y -= e.y), this;
                }
              },
              {
                key: "subScalar",
                value: function (e) {
                  return (this.x -= e), (this.y -= e), this;
                }
              },
              {
                key: "subVectors",
                value: function (e, t) {
                  return (this.x = e.x - t.x), (this.y = e.y - t.y), this;
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return (this.x *= e.x), (this.y *= e.y), this;
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  return (this.x *= e), (this.y *= e), this;
                }
              },
              {
                key: "divide",
                value: function (e) {
                  return (this.x /= e.x), (this.y /= e.y), this;
                }
              },
              {
                key: "divideScalar",
                value: function (e) {
                  return this.multiplyScalar(1 / e);
                }
              },
              {
                key: "applyMatrix3",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    i = e.elements;
                  return (
                    (this.x = i[0] * t + i[3] * n + i[6]),
                    (this.y = i[1] * t + i[4] * n + i[7]),
                    this
                  );
                }
              },
              {
                key: "min",
                value: function (e) {
                  return (
                    (this.x = Math.min(this.x, e.x)),
                    (this.y = Math.min(this.y, e.y)),
                    this
                  );
                }
              },
              {
                key: "max",
                value: function (e) {
                  return (
                    (this.x = Math.max(this.x, e.x)),
                    (this.y = Math.max(this.y, e.y)),
                    this
                  );
                }
              },
              {
                key: "clamp",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                    (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                    this
                  );
                }
              },
              {
                key: "clampScalar",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e, Math.min(t, this.x))),
                    (this.y = Math.max(e, Math.min(t, this.y))),
                    this
                  );
                }
              },
              {
                key: "clampLength",
                value: function (e, t) {
                  var n = this.length();
                  return this.divideScalar(n || 1).multiplyScalar(
                    Math.max(e, Math.min(t, n))
                  );
                }
              },
              {
                key: "floor",
                value: function () {
                  return (
                    (this.x = Math.floor(this.x)),
                    (this.y = Math.floor(this.y)),
                    this
                  );
                }
              },
              {
                key: "ceil",
                value: function () {
                  return (
                    (this.x = Math.ceil(this.x)),
                    (this.y = Math.ceil(this.y)),
                    this
                  );
                }
              },
              {
                key: "round",
                value: function () {
                  return (
                    (this.x = Math.round(this.x)),
                    (this.y = Math.round(this.y)),
                    this
                  );
                }
              },
              {
                key: "roundToZero",
                value: function () {
                  return (
                    (this.x =
                      this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
                    (this.y =
                      this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
                    this
                  );
                }
              },
              {
                key: "negate",
                value: function () {
                  return (this.x = -this.x), (this.y = -this.y), this;
                }
              },
              {
                key: "dot",
                value: function (e) {
                  return this.x * e.x + this.y * e.y;
                }
              },
              {
                key: "cross",
                value: function (e) {
                  return this.x * e.y - this.y * e.x;
                }
              },
              {
                key: "lengthSq",
                value: function () {
                  return this.x * this.x + this.y * this.y;
                }
              },
              {
                key: "length",
                value: function () {
                  return Math.sqrt(this.x * this.x + this.y * this.y);
                }
              },
              {
                key: "manhattanLength",
                value: function () {
                  return Math.abs(this.x) + Math.abs(this.y);
                }
              },
              {
                key: "normalize",
                value: function () {
                  return this.divideScalar(this.length() || 1);
                }
              },
              {
                key: "angle",
                value: function () {
                  return Math.atan2(-this.y, -this.x) + Math.PI;
                }
              },
              {
                key: "angleTo",
                value: function (e) {
                  var t = Math.sqrt(this.lengthSq() * e.lengthSq());
                  if (0 === t) return Math.PI / 2;
                  var n = this.dot(e) / t;
                  return Math.acos(vd(n, -1, 1));
                }
              },
              {
                key: "distanceTo",
                value: function (e) {
                  return Math.sqrt(this.distanceToSquared(e));
                }
              },
              {
                key: "distanceToSquared",
                value: function (e) {
                  var t = this.x - e.x,
                    n = this.y - e.y;
                  return t * t + n * n;
                }
              },
              {
                key: "manhattanDistanceTo",
                value: function (e) {
                  return Math.abs(this.x - e.x) + Math.abs(this.y - e.y);
                }
              },
              {
                key: "setLength",
                value: function (e) {
                  return this.normalize().multiplyScalar(e);
                }
              },
              {
                key: "lerp",
                value: function (e, t) {
                  return (
                    (this.x += (e.x - this.x) * t),
                    (this.y += (e.y - this.y) * t),
                    this
                  );
                }
              },
              {
                key: "lerpVectors",
                value: function (e, t, n) {
                  return (
                    (this.x = e.x + (t.x - e.x) * n),
                    (this.y = e.y + (t.y - e.y) * n),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.x === this.x && e.y === this.y;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (this.x = e[t]), (this.y = e[t + 1]), this;
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (e[t] = this.x), (e[t + 1] = this.y), e;
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (this.x = e.getX(t)), (this.y = e.getY(t)), this;
                }
              },
              {
                key: "rotateAround",
                value: function (e, t) {
                  var n = Math.cos(t),
                    i = Math.sin(t),
                    r = this.x - e.x,
                    a = this.y - e.y;
                  return (
                    (this.x = r * n - a * i + e.x),
                    (this.y = r * i + a * n + e.y),
                    this
                  );
                }
              },
              {
                key: "random",
                value: function () {
                  return (
                    (this.x = Math.random()), (this.y = Math.random()), this
                  );
                }
              },
              {
                key: Symbol.iterator,
                value: mh().mark(function e() {
                  return mh().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this.x;
                          case 2:
                            return (e.next = 4), this.y;
                          case 4:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]
          );
        })(),
        Td = (function () {
          return yh(
            function e() {
              gh(this, e),
                (e.prototype.isMatrix3 = !0),
                (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
            },
            [
              {
                key: "set",
                value: function (e, t, n, i, r, a, o, s, l) {
                  var u = this.elements;
                  return (
                    (u[0] = e),
                    (u[1] = i),
                    (u[2] = o),
                    (u[3] = t),
                    (u[4] = r),
                    (u[5] = s),
                    (u[6] = n),
                    (u[7] = a),
                    (u[8] = l),
                    this
                  );
                }
              },
              {
                key: "identity",
                value: function () {
                  return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  var t = this.elements,
                    n = e.elements;
                  return (
                    (t[0] = n[0]),
                    (t[1] = n[1]),
                    (t[2] = n[2]),
                    (t[3] = n[3]),
                    (t[4] = n[4]),
                    (t[5] = n[5]),
                    (t[6] = n[6]),
                    (t[7] = n[7]),
                    (t[8] = n[8]),
                    this
                  );
                }
              },
              {
                key: "extractBasis",
                value: function (e, t, n) {
                  return (
                    e.setFromMatrix3Column(this, 0),
                    t.setFromMatrix3Column(this, 1),
                    n.setFromMatrix3Column(this, 2),
                    this
                  );
                }
              },
              {
                key: "setFromMatrix4",
                value: function (e) {
                  var t = e.elements;
                  return (
                    this.set(
                      t[0],
                      t[4],
                      t[8],
                      t[1],
                      t[5],
                      t[9],
                      t[2],
                      t[6],
                      t[10]
                    ),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return this.multiplyMatrices(this, e);
                }
              },
              {
                key: "premultiply",
                value: function (e) {
                  return this.multiplyMatrices(e, this);
                }
              },
              {
                key: "multiplyMatrices",
                value: function (e, t) {
                  var n = e.elements,
                    i = t.elements,
                    r = this.elements,
                    a = n[0],
                    o = n[3],
                    s = n[6],
                    l = n[1],
                    u = n[4],
                    c = n[7],
                    h = n[2],
                    d = n[5],
                    p = n[8],
                    f = i[0],
                    v = i[3],
                    m = i[6],
                    g = i[1],
                    _ = i[4],
                    y = i[7],
                    b = i[2],
                    x = i[5],
                    w = i[8];
                  return (
                    (r[0] = a * f + o * g + s * b),
                    (r[3] = a * v + o * _ + s * x),
                    (r[6] = a * m + o * y + s * w),
                    (r[1] = l * f + u * g + c * b),
                    (r[4] = l * v + u * _ + c * x),
                    (r[7] = l * m + u * y + c * w),
                    (r[2] = h * f + d * g + p * b),
                    (r[5] = h * v + d * _ + p * x),
                    (r[8] = h * m + d * y + p * w),
                    this
                  );
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  var t = this.elements;
                  return (
                    (t[0] *= e),
                    (t[3] *= e),
                    (t[6] *= e),
                    (t[1] *= e),
                    (t[4] *= e),
                    (t[7] *= e),
                    (t[2] *= e),
                    (t[5] *= e),
                    (t[8] *= e),
                    this
                  );
                }
              },
              {
                key: "determinant",
                value: function () {
                  var e = this.elements,
                    t = e[0],
                    n = e[1],
                    i = e[2],
                    r = e[3],
                    a = e[4],
                    o = e[5],
                    s = e[6],
                    l = e[7],
                    u = e[8];
                  return (
                    t * a * u -
                    t * o * l -
                    n * r * u +
                    n * o * s +
                    i * r * l -
                    i * a * s
                  );
                }
              },
              {
                key: "invert",
                value: function () {
                  var e = this.elements,
                    t = e[0],
                    n = e[1],
                    i = e[2],
                    r = e[3],
                    a = e[4],
                    o = e[5],
                    s = e[6],
                    l = e[7],
                    u = e[8],
                    c = u * a - o * l,
                    h = o * s - u * r,
                    d = l * r - a * s,
                    p = t * c + n * h + i * d;
                  if (0 === p) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
                  var f = 1 / p;
                  return (
                    (e[0] = c * f),
                    (e[1] = (i * l - u * n) * f),
                    (e[2] = (o * n - i * a) * f),
                    (e[3] = h * f),
                    (e[4] = (u * t - i * s) * f),
                    (e[5] = (i * r - o * t) * f),
                    (e[6] = d * f),
                    (e[7] = (n * s - l * t) * f),
                    (e[8] = (a * t - n * r) * f),
                    this
                  );
                }
              },
              {
                key: "transpose",
                value: function () {
                  var e,
                    t = this.elements;
                  return (
                    (e = t[1]),
                    (t[1] = t[3]),
                    (t[3] = e),
                    (e = t[2]),
                    (t[2] = t[6]),
                    (t[6] = e),
                    (e = t[5]),
                    (t[5] = t[7]),
                    (t[7] = e),
                    this
                  );
                }
              },
              {
                key: "getNormalMatrix",
                value: function (e) {
                  return this.setFromMatrix4(e).invert().transpose();
                }
              },
              {
                key: "transposeIntoArray",
                value: function (e) {
                  var t = this.elements;
                  return (
                    (e[0] = t[0]),
                    (e[1] = t[3]),
                    (e[2] = t[6]),
                    (e[3] = t[1]),
                    (e[4] = t[4]),
                    (e[5] = t[7]),
                    (e[6] = t[2]),
                    (e[7] = t[5]),
                    (e[8] = t[8]),
                    this
                  );
                }
              },
              {
                key: "setUvTransform",
                value: function (e, t, n, i, r, a, o) {
                  var s = Math.cos(r),
                    l = Math.sin(r);
                  return (
                    this.set(
                      n * s,
                      n * l,
                      -n * (s * a + l * o) + a + e,
                      -i * l,
                      i * s,
                      -i * (-l * a + s * o) + o + t,
                      0,
                      0,
                      1
                    ),
                    this
                  );
                }
              },
              {
                key: "scale",
                value: function (e, t) {
                  return this.premultiply(kd.makeScale(e, t)), this;
                }
              },
              {
                key: "rotate",
                value: function (e) {
                  return this.premultiply(kd.makeRotation(-e)), this;
                }
              },
              {
                key: "translate",
                value: function (e, t) {
                  return this.premultiply(kd.makeTranslation(e, t)), this;
                }
              },
              {
                key: "makeTranslation",
                value: function (e, t) {
                  return this.set(1, 0, e, 0, 1, t, 0, 0, 1), this;
                }
              },
              {
                key: "makeRotation",
                value: function (e) {
                  var t = Math.cos(e),
                    n = Math.sin(e);
                  return this.set(t, -n, 0, n, t, 0, 0, 0, 1), this;
                }
              },
              {
                key: "makeScale",
                value: function (e, t) {
                  return this.set(e, 0, 0, 0, t, 0, 0, 0, 1), this;
                }
              },
              {
                key: "equals",
                value: function (e) {
                  for (var t = this.elements, n = e.elements, i = 0; i < 9; i++)
                    if (t[i] !== n[i]) return !1;
                  return !0;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  for (
                    var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 0,
                      n = 0;
                    n < 9;
                    n++
                  )
                    this.elements[n] = e[n + t];
                  return this;
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n = this.elements;
                  return (
                    (e[t] = n[0]),
                    (e[t + 1] = n[1]),
                    (e[t + 2] = n[2]),
                    (e[t + 3] = n[3]),
                    (e[t + 4] = n[4]),
                    (e[t + 5] = n[5]),
                    (e[t + 6] = n[6]),
                    (e[t + 7] = n[7]),
                    (e[t + 8] = n[8]),
                    e
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().fromArray(this.elements);
                }
              }
            ]
          );
        })(),
        kd = new Td();
      function Ed(e) {
        for (var t = e.length - 1; t >= 0; --t) if (e[t] >= 65535) return !0;
        return !1;
      }
      function Cd(e) {
        return document.createElementNS("http://www.w3.org/1999/xhtml", e);
      }
      function Dd(e) {
        return e < 0.04045
          ? 0.0773993808 * e
          : Math.pow(0.9478672986 * e + 0.0521327014, 2.4);
      }
      function Ad(e) {
        return e < 0.0031308 ? 12.92 * e : 1.055 * Math.pow(e, 0.41666) - 0.055;
      }
      var Pd,
        Ld = new Td().fromArray([
          0.8224621, 0.0331941, 0.0170827, 0.177538, 0.9668058, 0.0723974,
          -1e-7, 1e-7, 0.9105199
        ]),
        Rd = new Td().fromArray([
          1.2249401, -0.0420569, -0.0196376, -0.2249404, 1.0420571, -0.0786361,
          1e-7, 0, 1.0982735
        ]),
        Id = vh(
          vh(
            vh({}, rd, function (e) {
              return e;
            }),
            id,
            function (e) {
              return e.convertSRGBToLinear();
            }
          ),
          ad,
          function (e) {
            return e.convertSRGBToLinear().applyMatrix3(Rd);
          }
        ),
        Od = vh(
          vh(
            vh({}, rd, function (e) {
              return e;
            }),
            id,
            function (e) {
              return e.convertLinearToSRGB();
            }
          ),
          ad,
          function (e) {
            return e.applyMatrix3(Ld).convertLinearToSRGB();
          }
        ),
        Nd = {
          enabled: !1,
          get legacyMode() {
            return (
              console.warn(
                "THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."
              ),
              !this.enabled
            );
          },
          set legacyMode(e) {
            console.warn(
              "THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."
            ),
              (this.enabled = !e);
          },
          get workingColorSpace() {
            return rd;
          },
          set workingColorSpace(e) {
            console.warn(
              "THREE.ColorManagement: .workingColorSpace is readonly."
            );
          },
          convert: function (e, t, n) {
            if (!1 === this.enabled || t === n || !t || !n) return e;
            var i = Id[t],
              r = Od[n];
            if (void 0 === i || void 0 === r)
              throw new Error(
                'Unsupported color space conversion, "'
                  .concat(t, '" to "')
                  .concat(n, '".')
              );
            return r(i(e));
          },
          fromWorkingColorSpace: function (e, t) {
            return this.convert(e, this.workingColorSpace, t);
          },
          toWorkingColorSpace: function (e, t) {
            return this.convert(e, t, this.workingColorSpace);
          }
        },
        Fd = (function () {
          return yh(
            function e() {
              gh(this, e);
            },
            null,
            [
              {
                key: "getDataURL",
                value: function (e) {
                  if (
                    /^data:/i.test(e.src) ||
                    ("undefined" == typeof HTMLCanvasElement
                      ? "undefined"
                      : xh(HTMLCanvasElement)) > "u"
                  )
                    return e.src;
                  var t;
                  if (e instanceof HTMLCanvasElement) t = e;
                  else {
                    void 0 === Pd && (Pd = Cd("canvas")),
                      (Pd.width = e.width),
                      (Pd.height = e.height);
                    var n = Pd.getContext("2d");
                    e instanceof ImageData
                      ? n.putImageData(e, 0, 0)
                      : n.drawImage(e, 0, 0, e.width, e.height),
                      (t = Pd);
                  }
                  return t.width > 2048 || t.height > 2048
                    ? (console.warn(
                        "THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",
                        e
                      ),
                      t.toDataURL("image/jpeg", 0.6))
                    : t.toDataURL("image/png");
                }
              },
              {
                key: "sRGBToLinear",
                value: function (e) {
                  if (
                    (("undefined" == typeof HTMLImageElement
                      ? "undefined"
                      : xh(HTMLImageElement)) < "u" &&
                      e instanceof HTMLImageElement) ||
                    (("undefined" == typeof HTMLCanvasElement
                      ? "undefined"
                      : xh(HTMLCanvasElement)) < "u" &&
                      e instanceof HTMLCanvasElement) ||
                    (("undefined" == typeof ImageBitmap
                      ? "undefined"
                      : xh(ImageBitmap)) < "u" &&
                      e instanceof ImageBitmap)
                  ) {
                    var t = Cd("canvas");
                    (t.width = e.width), (t.height = e.height);
                    var n = t.getContext("2d");
                    n.drawImage(e, 0, 0, e.width, e.height);
                    for (
                      var i = n.getImageData(0, 0, e.width, e.height),
                        r = i.data,
                        a = 0;
                      a < r.length;
                      a++
                    )
                      r[a] = 255 * Dd(r[a] / 255);
                    return n.putImageData(i, 0, 0), t;
                  }
                  if (e.data) {
                    for (var o = e.data.slice(0), s = 0; s < o.length; s++)
                      o instanceof Uint8Array || o instanceof Uint8ClampedArray
                        ? (o[s] = Math.floor(255 * Dd(o[s] / 255)))
                        : (o[s] = Dd(o[s]));
                    return { data: o, width: e.width, height: e.height };
                  }
                  return (
                    console.warn(
                      "THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."
                    ),
                    e
                  );
                }
              }
            ]
          );
        })(),
        Ud = (function () {
          return yh(
            function e() {
              var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : null;
              gh(this, e),
                (this.isSource = !0),
                (this.uuid = fd()),
                (this.data = t),
                (this.version = 0);
            },
            [
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && this.version++;
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var t = void 0 === e || "string" == typeof e;
                  if (!t && void 0 !== e.images[this.uuid])
                    return e.images[this.uuid];
                  var n = { uuid: this.uuid, url: "" },
                    i = this.data;
                  if (null !== i) {
                    var r;
                    if (Array.isArray(i)) {
                      r = [];
                      for (var a = 0, o = i.length; a < o; a++)
                        i[a].isDataTexture
                          ? r.push(Bd(i[a].image))
                          : r.push(Bd(i[a]));
                    } else r = Bd(i);
                    n.url = r;
                  }
                  return t || (e.images[this.uuid] = n), n;
                }
              }
            ]
          );
        })();
      function Bd(e) {
        return (("undefined" == typeof HTMLImageElement
          ? "undefined"
          : xh(HTMLImageElement)) < "u" &&
          e instanceof HTMLImageElement) ||
          (("undefined" == typeof HTMLCanvasElement
            ? "undefined"
            : xh(HTMLCanvasElement)) < "u" &&
            e instanceof HTMLCanvasElement) ||
          (("undefined" == typeof ImageBitmap ? "undefined" : xh(ImageBitmap)) <
            "u" &&
            e instanceof ImageBitmap)
          ? Fd.getDataURL(e)
          : e.data
          ? {
              data: Array.from(e.data),
              width: e.width,
              height: e.height,
              type: e.data.constructor.name
            }
          : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
      }
      var zd = 0,
        Vd = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : t.DEFAULT_IMAGE,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : t.DEFAULT_MAPPING,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : Dh,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : Dh,
              o =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : Ih,
              s =
                arguments.length > 5 && void 0 !== arguments[5]
                  ? arguments[5]
                  : Oh,
              l =
                arguments.length > 6 && void 0 !== arguments[6]
                  ? arguments[6]
                  : Vh,
              u =
                arguments.length > 7 && void 0 !== arguments[7]
                  ? arguments[7]
                  : Nh,
              c =
                arguments.length > 8 && void 0 !== arguments[8]
                  ? arguments[8]
                  : t.DEFAULT_ANISOTROPY,
              h =
                arguments.length > 9 && void 0 !== arguments[9]
                  ? arguments[9]
                  : td;
            return (
              gh(this, t),
              ((e = uh(this, t)).isTexture = !0),
              Object.defineProperty(ch(e), "id", { value: zd++ }),
              (e.uuid = fd()),
              (e.name = ""),
              (e.source = new Ud(n)),
              (e.mipmaps = []),
              (e.mapping = i),
              (e.channel = 0),
              (e.wrapS = r),
              (e.wrapT = a),
              (e.magFilter = o),
              (e.minFilter = s),
              (e.anisotropy = c),
              (e.format = l),
              (e.internalFormat = null),
              (e.type = u),
              (e.offset = new Md(0, 0)),
              (e.repeat = new Md(1, 1)),
              (e.center = new Md(0, 0)),
              (e.rotation = 0),
              (e.matrixAutoUpdate = !0),
              (e.matrix = new Td()),
              (e.generateMipmaps = !0),
              (e.premultiplyAlpha = !1),
              (e.flipY = !0),
              (e.unpackAlignment = 4),
              (e.encoding = h),
              (e.userData = {}),
              (e.version = 0),
              (e.onUpdate = null),
              (e.isRenderTargetTexture = !1),
              (e.needsPMREMUpdate = !1),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "image",
                get: function () {
                  return this.source.data;
                },
                set: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : null;
                  this.source.data = e;
                }
              },
              {
                key: "updateMatrix",
                value: function () {
                  this.matrix.setUvTransform(
                    this.offset.x,
                    this.offset.y,
                    this.repeat.x,
                    this.repeat.y,
                    this.rotation,
                    this.center.x,
                    this.center.y
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.name = e.name),
                    (this.source = e.source),
                    (this.mipmaps = e.mipmaps.slice(0)),
                    (this.mapping = e.mapping),
                    (this.channel = e.channel),
                    (this.wrapS = e.wrapS),
                    (this.wrapT = e.wrapT),
                    (this.magFilter = e.magFilter),
                    (this.minFilter = e.minFilter),
                    (this.anisotropy = e.anisotropy),
                    (this.format = e.format),
                    (this.internalFormat = e.internalFormat),
                    (this.type = e.type),
                    this.offset.copy(e.offset),
                    this.repeat.copy(e.repeat),
                    this.center.copy(e.center),
                    (this.rotation = e.rotation),
                    (this.matrixAutoUpdate = e.matrixAutoUpdate),
                    this.matrix.copy(e.matrix),
                    (this.generateMipmaps = e.generateMipmaps),
                    (this.premultiplyAlpha = e.premultiplyAlpha),
                    (this.flipY = e.flipY),
                    (this.unpackAlignment = e.unpackAlignment),
                    (this.encoding = e.encoding),
                    (this.userData = JSON.parse(JSON.stringify(e.userData))),
                    (this.needsUpdate = !0),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var t = void 0 === e || "string" == typeof e;
                  if (!t && void 0 !== e.textures[this.uuid])
                    return e.textures[this.uuid];
                  var n = {
                    metadata: {
                      version: 4.5,
                      type: "Texture",
                      generator: "Texture.toJSON"
                    },
                    uuid: this.uuid,
                    name: this.name,
                    image: this.source.toJSON(e).uuid,
                    mapping: this.mapping,
                    channel: this.channel,
                    repeat: [this.repeat.x, this.repeat.y],
                    offset: [this.offset.x, this.offset.y],
                    center: [this.center.x, this.center.y],
                    rotation: this.rotation,
                    wrap: [this.wrapS, this.wrapT],
                    format: this.format,
                    internalFormat: this.internalFormat,
                    type: this.type,
                    encoding: this.encoding,
                    minFilter: this.minFilter,
                    magFilter: this.magFilter,
                    anisotropy: this.anisotropy,
                    flipY: this.flipY,
                    generateMipmaps: this.generateMipmaps,
                    premultiplyAlpha: this.premultiplyAlpha,
                    unpackAlignment: this.unpackAlignment
                  };
                  return (
                    Object.keys(this.userData).length > 0 &&
                      (n.userData = this.userData),
                    t || (e.textures[this.uuid] = n),
                    n
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              },
              {
                key: "transformUv",
                value: function (e) {
                  if (300 !== this.mapping) return e;
                  if ((e.applyMatrix3(this.matrix), e.x < 0 || e.x > 1))
                    switch (this.wrapS) {
                      case Ch:
                        e.x = e.x - Math.floor(e.x);
                        break;
                      case Dh:
                        e.x = e.x < 0 ? 0 : 1;
                        break;
                      case Ah:
                        1 === Math.abs(Math.floor(e.x) % 2)
                          ? (e.x = Math.ceil(e.x) - e.x)
                          : (e.x = e.x - Math.floor(e.x));
                    }
                  if (e.y < 0 || e.y > 1)
                    switch (this.wrapT) {
                      case Ch:
                        e.y = e.y - Math.floor(e.y);
                        break;
                      case Dh:
                        e.y = e.y < 0 ? 0 : 1;
                        break;
                      case Ah:
                        1 === Math.abs(Math.floor(e.y) % 2)
                          ? (e.y = Math.ceil(e.y) - e.y)
                          : (e.y = e.y - Math.floor(e.y));
                    }
                  return this.flipY && (e.y = 1 - e.y), e;
                }
              },
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && (this.version++, (this.source.needsUpdate = !0));
                }
              }
            ])
          );
        })(cd);
      (Vd.DEFAULT_IMAGE = null),
        (Vd.DEFAULT_MAPPING = 300),
        (Vd.DEFAULT_ANISOTROPY = 1);
      var Hd = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : 0,
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0,
                i =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 0,
                r =
                  arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : 1;
              gh(this, e),
                (e.prototype.isVector4 = !0),
                (this.x = t),
                (this.y = n),
                (this.z = i),
                (this.w = r);
            },
            [
              {
                key: "width",
                get: function () {
                  return this.z;
                },
                set: function (e) {
                  this.z = e;
                }
              },
              {
                key: "height",
                get: function () {
                  return this.w;
                },
                set: function (e) {
                  this.w = e;
                }
              },
              {
                key: "set",
                value: function (e, t, n, i) {
                  return (
                    (this.x = e), (this.y = t), (this.z = n), (this.w = i), this
                  );
                }
              },
              {
                key: "setScalar",
                value: function (e) {
                  return (
                    (this.x = e), (this.y = e), (this.z = e), (this.w = e), this
                  );
                }
              },
              {
                key: "setX",
                value: function (e) {
                  return (this.x = e), this;
                }
              },
              {
                key: "setY",
                value: function (e) {
                  return (this.y = e), this;
                }
              },
              {
                key: "setZ",
                value: function (e) {
                  return (this.z = e), this;
                }
              },
              {
                key: "setW",
                value: function (e) {
                  return (this.w = e), this;
                }
              },
              {
                key: "setComponent",
                value: function (e, t) {
                  switch (e) {
                    case 0:
                      this.x = t;
                      break;
                    case 1:
                      this.y = t;
                      break;
                    case 2:
                      this.z = t;
                      break;
                    case 3:
                      this.w = t;
                      break;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                  return this;
                }
              },
              {
                key: "getComponent",
                value: function (e) {
                  switch (e) {
                    case 0:
                      return this.x;
                    case 1:
                      return this.y;
                    case 2:
                      return this.z;
                    case 3:
                      return this.w;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.x, this.y, this.z, this.w);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.x = e.x),
                    (this.y = e.y),
                    (this.z = e.z),
                    (this.w = void 0 !== e.w ? e.w : 1),
                    this
                  );
                }
              },
              {
                key: "add",
                value: function (e) {
                  return (
                    (this.x += e.x),
                    (this.y += e.y),
                    (this.z += e.z),
                    (this.w += e.w),
                    this
                  );
                }
              },
              {
                key: "addScalar",
                value: function (e) {
                  return (
                    (this.x += e),
                    (this.y += e),
                    (this.z += e),
                    (this.w += e),
                    this
                  );
                }
              },
              {
                key: "addVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x + t.x),
                    (this.y = e.y + t.y),
                    (this.z = e.z + t.z),
                    (this.w = e.w + t.w),
                    this
                  );
                }
              },
              {
                key: "addScaledVector",
                value: function (e, t) {
                  return (
                    (this.x += e.x * t),
                    (this.y += e.y * t),
                    (this.z += e.z * t),
                    (this.w += e.w * t),
                    this
                  );
                }
              },
              {
                key: "sub",
                value: function (e) {
                  return (
                    (this.x -= e.x),
                    (this.y -= e.y),
                    (this.z -= e.z),
                    (this.w -= e.w),
                    this
                  );
                }
              },
              {
                key: "subScalar",
                value: function (e) {
                  return (
                    (this.x -= e),
                    (this.y -= e),
                    (this.z -= e),
                    (this.w -= e),
                    this
                  );
                }
              },
              {
                key: "subVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x - t.x),
                    (this.y = e.y - t.y),
                    (this.z = e.z - t.z),
                    (this.w = e.w - t.w),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return (
                    (this.x *= e.x),
                    (this.y *= e.y),
                    (this.z *= e.z),
                    (this.w *= e.w),
                    this
                  );
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  return (
                    (this.x *= e),
                    (this.y *= e),
                    (this.z *= e),
                    (this.w *= e),
                    this
                  );
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    i = this.z,
                    r = this.w,
                    a = e.elements;
                  return (
                    (this.x = a[0] * t + a[4] * n + a[8] * i + a[12] * r),
                    (this.y = a[1] * t + a[5] * n + a[9] * i + a[13] * r),
                    (this.z = a[2] * t + a[6] * n + a[10] * i + a[14] * r),
                    (this.w = a[3] * t + a[7] * n + a[11] * i + a[15] * r),
                    this
                  );
                }
              },
              {
                key: "divideScalar",
                value: function (e) {
                  return this.multiplyScalar(1 / e);
                }
              },
              {
                key: "setAxisAngleFromQuaternion",
                value: function (e) {
                  this.w = 2 * Math.acos(e.w);
                  var t = Math.sqrt(1 - e.w * e.w);
                  return (
                    t < 1e-4
                      ? ((this.x = 1), (this.y = 0), (this.z = 0))
                      : ((this.x = e.x / t),
                        (this.y = e.y / t),
                        (this.z = e.z / t)),
                    this
                  );
                }
              },
              {
                key: "setAxisAngleFromRotationMatrix",
                value: function (e) {
                  var t,
                    n,
                    i,
                    r,
                    a = e.elements,
                    o = a[0],
                    s = a[4],
                    l = a[8],
                    u = a[1],
                    c = a[5],
                    h = a[9],
                    d = a[2],
                    p = a[6],
                    f = a[10];
                  if (
                    Math.abs(s - u) < 0.01 &&
                    Math.abs(l - d) < 0.01 &&
                    Math.abs(h - p) < 0.01
                  ) {
                    if (
                      Math.abs(s + u) < 0.1 &&
                      Math.abs(l + d) < 0.1 &&
                      Math.abs(h + p) < 0.1 &&
                      Math.abs(o + c + f - 3) < 0.1
                    )
                      return this.set(1, 0, 0, 0), this;
                    t = Math.PI;
                    var v = (o + 1) / 2,
                      m = (c + 1) / 2,
                      g = (f + 1) / 2,
                      _ = (s + u) / 4,
                      y = (l + d) / 4,
                      b = (h + p) / 4;
                    return (
                      v > m && v > g
                        ? v < 0.01
                          ? ((n = 0), (i = 0.707106781), (r = 0.707106781))
                          : ((i = _ / (n = Math.sqrt(v))), (r = y / n))
                        : m > g
                        ? m < 0.01
                          ? ((n = 0.707106781), (i = 0), (r = 0.707106781))
                          : ((n = _ / (i = Math.sqrt(m))), (r = b / i))
                        : g < 0.01
                        ? ((n = 0.707106781), (i = 0.707106781), (r = 0))
                        : ((n = y / (r = Math.sqrt(g))), (i = b / r)),
                      this.set(n, i, r, t),
                      this
                    );
                  }
                  var x = Math.sqrt(
                    (p - h) * (p - h) + (l - d) * (l - d) + (u - s) * (u - s)
                  );
                  return (
                    Math.abs(x) < 0.001 && (x = 1),
                    (this.x = (p - h) / x),
                    (this.y = (l - d) / x),
                    (this.z = (u - s) / x),
                    (this.w = Math.acos((o + c + f - 1) / 2)),
                    this
                  );
                }
              },
              {
                key: "min",
                value: function (e) {
                  return (
                    (this.x = Math.min(this.x, e.x)),
                    (this.y = Math.min(this.y, e.y)),
                    (this.z = Math.min(this.z, e.z)),
                    (this.w = Math.min(this.w, e.w)),
                    this
                  );
                }
              },
              {
                key: "max",
                value: function (e) {
                  return (
                    (this.x = Math.max(this.x, e.x)),
                    (this.y = Math.max(this.y, e.y)),
                    (this.z = Math.max(this.z, e.z)),
                    (this.w = Math.max(this.w, e.w)),
                    this
                  );
                }
              },
              {
                key: "clamp",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                    (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                    (this.z = Math.max(e.z, Math.min(t.z, this.z))),
                    (this.w = Math.max(e.w, Math.min(t.w, this.w))),
                    this
                  );
                }
              },
              {
                key: "clampScalar",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e, Math.min(t, this.x))),
                    (this.y = Math.max(e, Math.min(t, this.y))),
                    (this.z = Math.max(e, Math.min(t, this.z))),
                    (this.w = Math.max(e, Math.min(t, this.w))),
                    this
                  );
                }
              },
              {
                key: "clampLength",
                value: function (e, t) {
                  var n = this.length();
                  return this.divideScalar(n || 1).multiplyScalar(
                    Math.max(e, Math.min(t, n))
                  );
                }
              },
              {
                key: "floor",
                value: function () {
                  return (
                    (this.x = Math.floor(this.x)),
                    (this.y = Math.floor(this.y)),
                    (this.z = Math.floor(this.z)),
                    (this.w = Math.floor(this.w)),
                    this
                  );
                }
              },
              {
                key: "ceil",
                value: function () {
                  return (
                    (this.x = Math.ceil(this.x)),
                    (this.y = Math.ceil(this.y)),
                    (this.z = Math.ceil(this.z)),
                    (this.w = Math.ceil(this.w)),
                    this
                  );
                }
              },
              {
                key: "round",
                value: function () {
                  return (
                    (this.x = Math.round(this.x)),
                    (this.y = Math.round(this.y)),
                    (this.z = Math.round(this.z)),
                    (this.w = Math.round(this.w)),
                    this
                  );
                }
              },
              {
                key: "roundToZero",
                value: function () {
                  return (
                    (this.x =
                      this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
                    (this.y =
                      this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
                    (this.z =
                      this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
                    (this.w =
                      this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w)),
                    this
                  );
                }
              },
              {
                key: "negate",
                value: function () {
                  return (
                    (this.x = -this.x),
                    (this.y = -this.y),
                    (this.z = -this.z),
                    (this.w = -this.w),
                    this
                  );
                }
              },
              {
                key: "dot",
                value: function (e) {
                  return (
                    this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
                  );
                }
              },
              {
                key: "lengthSq",
                value: function () {
                  return (
                    this.x * this.x +
                    this.y * this.y +
                    this.z * this.z +
                    this.w * this.w
                  );
                }
              },
              {
                key: "length",
                value: function () {
                  return Math.sqrt(
                    this.x * this.x +
                      this.y * this.y +
                      this.z * this.z +
                      this.w * this.w
                  );
                }
              },
              {
                key: "manhattanLength",
                value: function () {
                  return (
                    Math.abs(this.x) +
                    Math.abs(this.y) +
                    Math.abs(this.z) +
                    Math.abs(this.w)
                  );
                }
              },
              {
                key: "normalize",
                value: function () {
                  return this.divideScalar(this.length() || 1);
                }
              },
              {
                key: "setLength",
                value: function (e) {
                  return this.normalize().multiplyScalar(e);
                }
              },
              {
                key: "lerp",
                value: function (e, t) {
                  return (
                    (this.x += (e.x - this.x) * t),
                    (this.y += (e.y - this.y) * t),
                    (this.z += (e.z - this.z) * t),
                    (this.w += (e.w - this.w) * t),
                    this
                  );
                }
              },
              {
                key: "lerpVectors",
                value: function (e, t, n) {
                  return (
                    (this.x = e.x + (t.x - e.x) * n),
                    (this.y = e.y + (t.y - e.y) * n),
                    (this.z = e.z + (t.z - e.z) * n),
                    (this.w = e.w + (t.w - e.w) * n),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e.x === this.x &&
                    e.y === this.y &&
                    e.z === this.z &&
                    e.w === this.w
                  );
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (
                    (this.x = e[t]),
                    (this.y = e[t + 1]),
                    (this.z = e[t + 2]),
                    (this.w = e[t + 3]),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this.x),
                    (e[t + 1] = this.y),
                    (e[t + 2] = this.z),
                    (e[t + 3] = this.w),
                    e
                  );
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (
                    (this.x = e.getX(t)),
                    (this.y = e.getY(t)),
                    (this.z = e.getZ(t)),
                    (this.w = e.getW(t)),
                    this
                  );
                }
              },
              {
                key: "random",
                value: function () {
                  return (
                    (this.x = Math.random()),
                    (this.y = Math.random()),
                    (this.z = Math.random()),
                    (this.w = Math.random()),
                    this
                  );
                }
              },
              {
                key: Symbol.iterator,
                value: mh().mark(function e() {
                  return mh().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this.x;
                          case 2:
                            return (e.next = 4), this.y;
                          case 4:
                            return (e.next = 6), this.z;
                          case 6:
                            return (e.next = 8), this.w;
                          case 8:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]
          );
        })(),
        Gd = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : {};
            gh(this, t),
              ((e = uh(this, t)).isWebGLRenderTarget = !0),
              (e.width = n),
              (e.height = i),
              (e.depth = 1),
              (e.scissor = new Hd(0, 0, n, i)),
              (e.scissorTest = !1),
              (e.viewport = new Hd(0, 0, n, i));
            var a = { width: n, height: i, depth: 1 };
            return (
              (e.texture = new Vd(
                a,
                r.mapping,
                r.wrapS,
                r.wrapT,
                r.magFilter,
                r.minFilter,
                r.format,
                r.type,
                r.anisotropy,
                r.encoding
              )),
              (e.texture.isRenderTargetTexture = !0),
              (e.texture.flipY = !1),
              (e.texture.generateMipmaps =
                void 0 !== r.generateMipmaps && r.generateMipmaps),
              (e.texture.internalFormat =
                void 0 !== r.internalFormat ? r.internalFormat : null),
              (e.texture.minFilter = void 0 !== r.minFilter ? r.minFilter : Ih),
              (e.depthBuffer = void 0 === r.depthBuffer || r.depthBuffer),
              (e.stencilBuffer = void 0 !== r.stencilBuffer && r.stencilBuffer),
              (e.depthTexture =
                void 0 !== r.depthTexture ? r.depthTexture : null),
              (e.samples = void 0 !== r.samples ? r.samples : 0),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "setSize",
                value: function (e, t) {
                  var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 1;
                  (this.width !== e || this.height !== t || this.depth !== n) &&
                    ((this.width = e),
                    (this.height = t),
                    (this.depth = n),
                    (this.texture.image.width = e),
                    (this.texture.image.height = t),
                    (this.texture.image.depth = n),
                    this.dispose()),
                    this.viewport.set(0, 0, e, t),
                    this.scissor.set(0, 0, e, t);
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  (this.width = e.width),
                    (this.height = e.height),
                    (this.depth = e.depth),
                    this.viewport.copy(e.viewport),
                    (this.texture = e.texture.clone()),
                    (this.texture.isRenderTargetTexture = !0);
                  var t = Object.assign({}, e.texture.image);
                  return (
                    (this.texture.source = new Ud(t)),
                    (this.depthBuffer = e.depthBuffer),
                    (this.stencilBuffer = e.stencilBuffer),
                    null !== e.depthTexture &&
                      (this.depthTexture = e.depthTexture.clone()),
                    (this.samples = e.samples),
                    this
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              }
            ])
          );
        })(cd),
        Wd = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : null,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            return (
              gh(this, t),
              ((e = uh(this, t, [null])).isDataArrayTexture = !0),
              (e.image = { data: n, width: i, height: r, depth: a }),
              (e.magFilter = Ph),
              (e.minFilter = Ph),
              (e.wrapR = Dh),
              (e.generateMipmaps = !1),
              (e.flipY = !1),
              (e.unpackAlignment = 1),
              e
            );
          }
          return ph(t, e), yh(t);
        })(Vd),
        jd = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : null,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            return (
              gh(this, t),
              ((e = uh(this, t, [null])).isData3DTexture = !0),
              (e.image = { data: n, width: i, height: r, depth: a }),
              (e.magFilter = Ph),
              (e.minFilter = Ph),
              (e.wrapR = Dh),
              (e.generateMipmaps = !1),
              (e.flipY = !1),
              (e.unpackAlignment = 1),
              e
            );
          }
          return ph(t, e), yh(t);
        })(Vd),
        qd = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : 0,
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0,
                i =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 0,
                r =
                  arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : 1;
              gh(this, e),
                (this.isQuaternion = !0),
                (this._x = t),
                (this._y = n),
                (this._z = i),
                (this._w = r);
            },
            [
              {
                key: "x",
                get: function () {
                  return this._x;
                },
                set: function (e) {
                  (this._x = e), this._onChangeCallback();
                }
              },
              {
                key: "y",
                get: function () {
                  return this._y;
                },
                set: function (e) {
                  (this._y = e), this._onChangeCallback();
                }
              },
              {
                key: "z",
                get: function () {
                  return this._z;
                },
                set: function (e) {
                  (this._z = e), this._onChangeCallback();
                }
              },
              {
                key: "w",
                get: function () {
                  return this._w;
                },
                set: function (e) {
                  (this._w = e), this._onChangeCallback();
                }
              },
              {
                key: "set",
                value: function (e, t, n, i) {
                  return (
                    (this._x = e),
                    (this._y = t),
                    (this._z = n),
                    (this._w = i),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(
                    this._x,
                    this._y,
                    this._z,
                    this._w
                  );
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this._x = e.x),
                    (this._y = e.y),
                    (this._z = e.z),
                    (this._w = e.w),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "setFromEuler",
                value: function (e, t) {
                  var n = e._x,
                    i = e._y,
                    r = e._z,
                    a = e._order,
                    o = Math.cos,
                    s = Math.sin,
                    l = o(n / 2),
                    u = o(i / 2),
                    c = o(r / 2),
                    h = s(n / 2),
                    d = s(i / 2),
                    p = s(r / 2);
                  switch (a) {
                    case "XYZ":
                      (this._x = h * u * c + l * d * p),
                        (this._y = l * d * c - h * u * p),
                        (this._z = l * u * p + h * d * c),
                        (this._w = l * u * c - h * d * p);
                      break;
                    case "YXZ":
                      (this._x = h * u * c + l * d * p),
                        (this._y = l * d * c - h * u * p),
                        (this._z = l * u * p - h * d * c),
                        (this._w = l * u * c + h * d * p);
                      break;
                    case "ZXY":
                      (this._x = h * u * c - l * d * p),
                        (this._y = l * d * c + h * u * p),
                        (this._z = l * u * p + h * d * c),
                        (this._w = l * u * c - h * d * p);
                      break;
                    case "ZYX":
                      (this._x = h * u * c - l * d * p),
                        (this._y = l * d * c + h * u * p),
                        (this._z = l * u * p - h * d * c),
                        (this._w = l * u * c + h * d * p);
                      break;
                    case "YZX":
                      (this._x = h * u * c + l * d * p),
                        (this._y = l * d * c + h * u * p),
                        (this._z = l * u * p - h * d * c),
                        (this._w = l * u * c - h * d * p);
                      break;
                    case "XZY":
                      (this._x = h * u * c - l * d * p),
                        (this._y = l * d * c - h * u * p),
                        (this._z = l * u * p + h * d * c),
                        (this._w = l * u * c + h * d * p);
                      break;
                    default:
                      console.warn(
                        "THREE.Quaternion: .setFromEuler() encountered an unknown order: " +
                          a
                      );
                  }
                  return !1 !== t && this._onChangeCallback(), this;
                }
              },
              {
                key: "setFromAxisAngle",
                value: function (e, t) {
                  var n = t / 2,
                    i = Math.sin(n);
                  return (
                    (this._x = e.x * i),
                    (this._y = e.y * i),
                    (this._z = e.z * i),
                    (this._w = Math.cos(n)),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "setFromRotationMatrix",
                value: function (e) {
                  var t = e.elements,
                    n = t[0],
                    i = t[4],
                    r = t[8],
                    a = t[1],
                    o = t[5],
                    s = t[9],
                    l = t[2],
                    u = t[6],
                    c = t[10],
                    h = n + o + c;
                  if (h > 0) {
                    var d = 0.5 / Math.sqrt(h + 1);
                    (this._w = 0.25 / d),
                      (this._x = (u - s) * d),
                      (this._y = (r - l) * d),
                      (this._z = (a - i) * d);
                  } else if (n > o && n > c) {
                    var p = 2 * Math.sqrt(1 + n - o - c);
                    (this._w = (u - s) / p),
                      (this._x = 0.25 * p),
                      (this._y = (i + a) / p),
                      (this._z = (r + l) / p);
                  } else if (o > c) {
                    var f = 2 * Math.sqrt(1 + o - n - c);
                    (this._w = (r - l) / f),
                      (this._x = (i + a) / f),
                      (this._y = 0.25 * f),
                      (this._z = (s + u) / f);
                  } else {
                    var v = 2 * Math.sqrt(1 + c - n - o);
                    (this._w = (a - i) / v),
                      (this._x = (r + l) / v),
                      (this._y = (s + u) / v),
                      (this._z = 0.25 * v);
                  }
                  return this._onChangeCallback(), this;
                }
              },
              {
                key: "setFromUnitVectors",
                value: function (e, t) {
                  var n = e.dot(t) + 1;
                  return (
                    n < Number.EPSILON
                      ? ((n = 0),
                        Math.abs(e.x) > Math.abs(e.z)
                          ? ((this._x = -e.y),
                            (this._y = e.x),
                            (this._z = 0),
                            (this._w = n))
                          : ((this._x = 0),
                            (this._y = -e.z),
                            (this._z = e.y),
                            (this._w = n)))
                      : ((this._x = e.y * t.z - e.z * t.y),
                        (this._y = e.z * t.x - e.x * t.z),
                        (this._z = e.x * t.y - e.y * t.x),
                        (this._w = n)),
                    this.normalize()
                  );
                }
              },
              {
                key: "angleTo",
                value: function (e) {
                  return 2 * Math.acos(Math.abs(vd(this.dot(e), -1, 1)));
                }
              },
              {
                key: "rotateTowards",
                value: function (e, t) {
                  var n = this.angleTo(e);
                  if (0 === n) return this;
                  var i = Math.min(1, t / n);
                  return this.slerp(e, i), this;
                }
              },
              {
                key: "identity",
                value: function () {
                  return this.set(0, 0, 0, 1);
                }
              },
              {
                key: "invert",
                value: function () {
                  return this.conjugate();
                }
              },
              {
                key: "conjugate",
                value: function () {
                  return (
                    (this._x *= -1),
                    (this._y *= -1),
                    (this._z *= -1),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "dot",
                value: function (e) {
                  return (
                    this._x * e._x +
                    this._y * e._y +
                    this._z * e._z +
                    this._w * e._w
                  );
                }
              },
              {
                key: "lengthSq",
                value: function () {
                  return (
                    this._x * this._x +
                    this._y * this._y +
                    this._z * this._z +
                    this._w * this._w
                  );
                }
              },
              {
                key: "length",
                value: function () {
                  return Math.sqrt(
                    this._x * this._x +
                      this._y * this._y +
                      this._z * this._z +
                      this._w * this._w
                  );
                }
              },
              {
                key: "normalize",
                value: function () {
                  var e = this.length();
                  return (
                    0 === e
                      ? ((this._x = 0),
                        (this._y = 0),
                        (this._z = 0),
                        (this._w = 1))
                      : ((e = 1 / e),
                        (this._x = this._x * e),
                        (this._y = this._y * e),
                        (this._z = this._z * e),
                        (this._w = this._w * e)),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return this.multiplyQuaternions(this, e);
                }
              },
              {
                key: "premultiply",
                value: function (e) {
                  return this.multiplyQuaternions(e, this);
                }
              },
              {
                key: "multiplyQuaternions",
                value: function (e, t) {
                  var n = e._x,
                    i = e._y,
                    r = e._z,
                    a = e._w,
                    o = t._x,
                    s = t._y,
                    l = t._z,
                    u = t._w;
                  return (
                    (this._x = n * u + a * o + i * l - r * s),
                    (this._y = i * u + a * s + r * o - n * l),
                    (this._z = r * u + a * l + n * s - i * o),
                    (this._w = a * u - n * o - i * s - r * l),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "slerp",
                value: function (e, t) {
                  if (0 === t) return this;
                  if (1 === t) return this.copy(e);
                  var n = this._x,
                    i = this._y,
                    r = this._z,
                    a = this._w,
                    o = a * e._w + n * e._x + i * e._y + r * e._z;
                  if (
                    (o < 0
                      ? ((this._w = -e._w),
                        (this._x = -e._x),
                        (this._y = -e._y),
                        (this._z = -e._z),
                        (o = -o))
                      : this.copy(e),
                    o >= 1)
                  )
                    return (
                      (this._w = a),
                      (this._x = n),
                      (this._y = i),
                      (this._z = r),
                      this
                    );
                  var s = 1 - o * o;
                  if (s <= Number.EPSILON) {
                    var l = 1 - t;
                    return (
                      (this._w = l * a + t * this._w),
                      (this._x = l * n + t * this._x),
                      (this._y = l * i + t * this._y),
                      (this._z = l * r + t * this._z),
                      this.normalize(),
                      this._onChangeCallback(),
                      this
                    );
                  }
                  var u = Math.sqrt(s),
                    c = Math.atan2(u, o),
                    h = Math.sin((1 - t) * c) / u,
                    d = Math.sin(t * c) / u;
                  return (
                    (this._w = a * h + this._w * d),
                    (this._x = n * h + this._x * d),
                    (this._y = i * h + this._y * d),
                    (this._z = r * h + this._z * d),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "slerpQuaternions",
                value: function (e, t, n) {
                  return this.copy(e).slerp(t, n);
                }
              },
              {
                key: "random",
                value: function () {
                  var e = Math.random(),
                    t = Math.sqrt(1 - e),
                    n = Math.sqrt(e),
                    i = 2 * Math.PI * Math.random(),
                    r = 2 * Math.PI * Math.random();
                  return this.set(
                    t * Math.cos(i),
                    n * Math.sin(r),
                    n * Math.cos(r),
                    t * Math.sin(i)
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e._x === this._x &&
                    e._y === this._y &&
                    e._z === this._z &&
                    e._w === this._w
                  );
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (
                    (this._x = e[t]),
                    (this._y = e[t + 1]),
                    (this._z = e[t + 2]),
                    (this._w = e[t + 3]),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this._x),
                    (e[t + 1] = this._y),
                    (e[t + 2] = this._z),
                    (e[t + 3] = this._w),
                    e
                  );
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (
                    (this._x = e.getX(t)),
                    (this._y = e.getY(t)),
                    (this._z = e.getZ(t)),
                    (this._w = e.getW(t)),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function () {
                  return this.toArray();
                }
              },
              {
                key: "_onChange",
                value: function (e) {
                  return (this._onChangeCallback = e), this;
                }
              },
              { key: "_onChangeCallback", value: function () {} },
              {
                key: Symbol.iterator,
                value: mh().mark(function e() {
                  return mh().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this._x;
                          case 2:
                            return (e.next = 4), this._y;
                          case 4:
                            return (e.next = 6), this._z;
                          case 6:
                            return (e.next = 8), this._w;
                          case 8:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ],
            [
              {
                key: "slerpFlat",
                value: function (e, t, n, i, r, a, o) {
                  var s = n[i + 0],
                    l = n[i + 1],
                    u = n[i + 2],
                    c = n[i + 3],
                    h = r[a + 0],
                    d = r[a + 1],
                    p = r[a + 2],
                    f = r[a + 3];
                  if (0 === o)
                    return (
                      (e[t + 0] = s),
                      (e[t + 1] = l),
                      (e[t + 2] = u),
                      void (e[t + 3] = c)
                    );
                  if (1 === o)
                    return (
                      (e[t + 0] = h),
                      (e[t + 1] = d),
                      (e[t + 2] = p),
                      void (e[t + 3] = f)
                    );
                  if (c !== f || s !== h || l !== d || u !== p) {
                    var v = 1 - o,
                      m = s * h + l * d + u * p + c * f,
                      g = m >= 0 ? 1 : -1,
                      _ = 1 - m * m;
                    if (_ > Number.EPSILON) {
                      var y = Math.sqrt(_),
                        b = Math.atan2(y, m * g);
                      (v = Math.sin(v * b) / y), (o = Math.sin(o * b) / y);
                    }
                    var x = o * g;
                    if (
                      ((s = s * v + h * x),
                      (l = l * v + d * x),
                      (u = u * v + p * x),
                      (c = c * v + f * x),
                      v === 1 - o)
                    ) {
                      var w = 1 / Math.sqrt(s * s + l * l + u * u + c * c);
                      (s *= w), (l *= w), (u *= w), (c *= w);
                    }
                  }
                  (e[t] = s), (e[t + 1] = l), (e[t + 2] = u), (e[t + 3] = c);
                }
              },
              {
                key: "multiplyQuaternionsFlat",
                value: function (e, t, n, i, r, a) {
                  var o = n[i],
                    s = n[i + 1],
                    l = n[i + 2],
                    u = n[i + 3],
                    c = r[a],
                    h = r[a + 1],
                    d = r[a + 2],
                    p = r[a + 3];
                  return (
                    (e[t] = o * p + u * c + s * d - l * h),
                    (e[t + 1] = s * p + u * h + l * c - o * d),
                    (e[t + 2] = l * p + u * d + o * h - s * c),
                    (e[t + 3] = u * p - o * c - s * h - l * d),
                    e
                  );
                }
              }
            ]
          );
        })(),
        Kd = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : 0,
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0,
                i =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 0;
              gh(this, e),
                (e.prototype.isVector3 = !0),
                (this.x = t),
                (this.y = n),
                (this.z = i);
            },
            [
              {
                key: "set",
                value: function (e, t, n) {
                  return (
                    void 0 === n && (n = this.z),
                    (this.x = e),
                    (this.y = t),
                    (this.z = n),
                    this
                  );
                }
              },
              {
                key: "setScalar",
                value: function (e) {
                  return (this.x = e), (this.y = e), (this.z = e), this;
                }
              },
              {
                key: "setX",
                value: function (e) {
                  return (this.x = e), this;
                }
              },
              {
                key: "setY",
                value: function (e) {
                  return (this.y = e), this;
                }
              },
              {
                key: "setZ",
                value: function (e) {
                  return (this.z = e), this;
                }
              },
              {
                key: "setComponent",
                value: function (e, t) {
                  switch (e) {
                    case 0:
                      this.x = t;
                      break;
                    case 1:
                      this.y = t;
                      break;
                    case 2:
                      this.z = t;
                      break;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                  return this;
                }
              },
              {
                key: "getComponent",
                value: function (e) {
                  switch (e) {
                    case 0:
                      return this.x;
                    case 1:
                      return this.y;
                    case 2:
                      return this.z;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.x, this.y, this.z);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (this.x = e.x), (this.y = e.y), (this.z = e.z), this;
                }
              },
              {
                key: "add",
                value: function (e) {
                  return (
                    (this.x += e.x), (this.y += e.y), (this.z += e.z), this
                  );
                }
              },
              {
                key: "addScalar",
                value: function (e) {
                  return (this.x += e), (this.y += e), (this.z += e), this;
                }
              },
              {
                key: "addVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x + t.x),
                    (this.y = e.y + t.y),
                    (this.z = e.z + t.z),
                    this
                  );
                }
              },
              {
                key: "addScaledVector",
                value: function (e, t) {
                  return (
                    (this.x += e.x * t),
                    (this.y += e.y * t),
                    (this.z += e.z * t),
                    this
                  );
                }
              },
              {
                key: "sub",
                value: function (e) {
                  return (
                    (this.x -= e.x), (this.y -= e.y), (this.z -= e.z), this
                  );
                }
              },
              {
                key: "subScalar",
                value: function (e) {
                  return (this.x -= e), (this.y -= e), (this.z -= e), this;
                }
              },
              {
                key: "subVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x - t.x),
                    (this.y = e.y - t.y),
                    (this.z = e.z - t.z),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return (
                    (this.x *= e.x), (this.y *= e.y), (this.z *= e.z), this
                  );
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  return (this.x *= e), (this.y *= e), (this.z *= e), this;
                }
              },
              {
                key: "multiplyVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x * t.x),
                    (this.y = e.y * t.y),
                    (this.z = e.z * t.z),
                    this
                  );
                }
              },
              {
                key: "applyEuler",
                value: function (e) {
                  return this.applyQuaternion(Yd.setFromEuler(e));
                }
              },
              {
                key: "applyAxisAngle",
                value: function (e, t) {
                  return this.applyQuaternion(Yd.setFromAxisAngle(e, t));
                }
              },
              {
                key: "applyMatrix3",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    i = this.z,
                    r = e.elements;
                  return (
                    (this.x = r[0] * t + r[3] * n + r[6] * i),
                    (this.y = r[1] * t + r[4] * n + r[7] * i),
                    (this.z = r[2] * t + r[5] * n + r[8] * i),
                    this
                  );
                }
              },
              {
                key: "applyNormalMatrix",
                value: function (e) {
                  return this.applyMatrix3(e).normalize();
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    i = this.z,
                    r = e.elements,
                    a = 1 / (r[3] * t + r[7] * n + r[11] * i + r[15]);
                  return (
                    (this.x = (r[0] * t + r[4] * n + r[8] * i + r[12]) * a),
                    (this.y = (r[1] * t + r[5] * n + r[9] * i + r[13]) * a),
                    (this.z = (r[2] * t + r[6] * n + r[10] * i + r[14]) * a),
                    this
                  );
                }
              },
              {
                key: "applyQuaternion",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    i = this.z,
                    r = e.x,
                    a = e.y,
                    o = e.z,
                    s = e.w,
                    l = s * t + a * i - o * n,
                    u = s * n + o * t - r * i,
                    c = s * i + r * n - a * t,
                    h = -r * t - a * n - o * i;
                  return (
                    (this.x = l * s + h * -r + u * -o - c * -a),
                    (this.y = u * s + h * -a + c * -r - l * -o),
                    (this.z = c * s + h * -o + l * -a - u * -r),
                    this
                  );
                }
              },
              {
                key: "project",
                value: function (e) {
                  return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(
                    e.projectionMatrix
                  );
                }
              },
              {
                key: "unproject",
                value: function (e) {
                  return this.applyMatrix4(
                    e.projectionMatrixInverse
                  ).applyMatrix4(e.matrixWorld);
                }
              },
              {
                key: "transformDirection",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    i = this.z,
                    r = e.elements;
                  return (
                    (this.x = r[0] * t + r[4] * n + r[8] * i),
                    (this.y = r[1] * t + r[5] * n + r[9] * i),
                    (this.z = r[2] * t + r[6] * n + r[10] * i),
                    this.normalize()
                  );
                }
              },
              {
                key: "divide",
                value: function (e) {
                  return (
                    (this.x /= e.x), (this.y /= e.y), (this.z /= e.z), this
                  );
                }
              },
              {
                key: "divideScalar",
                value: function (e) {
                  return this.multiplyScalar(1 / e);
                }
              },
              {
                key: "min",
                value: function (e) {
                  return (
                    (this.x = Math.min(this.x, e.x)),
                    (this.y = Math.min(this.y, e.y)),
                    (this.z = Math.min(this.z, e.z)),
                    this
                  );
                }
              },
              {
                key: "max",
                value: function (e) {
                  return (
                    (this.x = Math.max(this.x, e.x)),
                    (this.y = Math.max(this.y, e.y)),
                    (this.z = Math.max(this.z, e.z)),
                    this
                  );
                }
              },
              {
                key: "clamp",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                    (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                    (this.z = Math.max(e.z, Math.min(t.z, this.z))),
                    this
                  );
                }
              },
              {
                key: "clampScalar",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e, Math.min(t, this.x))),
                    (this.y = Math.max(e, Math.min(t, this.y))),
                    (this.z = Math.max(e, Math.min(t, this.z))),
                    this
                  );
                }
              },
              {
                key: "clampLength",
                value: function (e, t) {
                  var n = this.length();
                  return this.divideScalar(n || 1).multiplyScalar(
                    Math.max(e, Math.min(t, n))
                  );
                }
              },
              {
                key: "floor",
                value: function () {
                  return (
                    (this.x = Math.floor(this.x)),
                    (this.y = Math.floor(this.y)),
                    (this.z = Math.floor(this.z)),
                    this
                  );
                }
              },
              {
                key: "ceil",
                value: function () {
                  return (
                    (this.x = Math.ceil(this.x)),
                    (this.y = Math.ceil(this.y)),
                    (this.z = Math.ceil(this.z)),
                    this
                  );
                }
              },
              {
                key: "round",
                value: function () {
                  return (
                    (this.x = Math.round(this.x)),
                    (this.y = Math.round(this.y)),
                    (this.z = Math.round(this.z)),
                    this
                  );
                }
              },
              {
                key: "roundToZero",
                value: function () {
                  return (
                    (this.x =
                      this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x)),
                    (this.y =
                      this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y)),
                    (this.z =
                      this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z)),
                    this
                  );
                }
              },
              {
                key: "negate",
                value: function () {
                  return (
                    (this.x = -this.x),
                    (this.y = -this.y),
                    (this.z = -this.z),
                    this
                  );
                }
              },
              {
                key: "dot",
                value: function (e) {
                  return this.x * e.x + this.y * e.y + this.z * e.z;
                }
              },
              {
                key: "lengthSq",
                value: function () {
                  return this.x * this.x + this.y * this.y + this.z * this.z;
                }
              },
              {
                key: "length",
                value: function () {
                  return Math.sqrt(
                    this.x * this.x + this.y * this.y + this.z * this.z
                  );
                }
              },
              {
                key: "manhattanLength",
                value: function () {
                  return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
                }
              },
              {
                key: "normalize",
                value: function () {
                  return this.divideScalar(this.length() || 1);
                }
              },
              {
                key: "setLength",
                value: function (e) {
                  return this.normalize().multiplyScalar(e);
                }
              },
              {
                key: "lerp",
                value: function (e, t) {
                  return (
                    (this.x += (e.x - this.x) * t),
                    (this.y += (e.y - this.y) * t),
                    (this.z += (e.z - this.z) * t),
                    this
                  );
                }
              },
              {
                key: "lerpVectors",
                value: function (e, t, n) {
                  return (
                    (this.x = e.x + (t.x - e.x) * n),
                    (this.y = e.y + (t.y - e.y) * n),
                    (this.z = e.z + (t.z - e.z) * n),
                    this
                  );
                }
              },
              {
                key: "cross",
                value: function (e) {
                  return this.crossVectors(this, e);
                }
              },
              {
                key: "crossVectors",
                value: function (e, t) {
                  var n = e.x,
                    i = e.y,
                    r = e.z,
                    a = t.x,
                    o = t.y,
                    s = t.z;
                  return (
                    (this.x = i * s - r * o),
                    (this.y = r * a - n * s),
                    (this.z = n * o - i * a),
                    this
                  );
                }
              },
              {
                key: "projectOnVector",
                value: function (e) {
                  var t = e.lengthSq();
                  if (0 === t) return this.set(0, 0, 0);
                  var n = e.dot(this) / t;
                  return this.copy(e).multiplyScalar(n);
                }
              },
              {
                key: "projectOnPlane",
                value: function (e) {
                  return Xd.copy(this).projectOnVector(e), this.sub(Xd);
                }
              },
              {
                key: "reflect",
                value: function (e) {
                  return this.sub(Xd.copy(e).multiplyScalar(2 * this.dot(e)));
                }
              },
              {
                key: "angleTo",
                value: function (e) {
                  var t = Math.sqrt(this.lengthSq() * e.lengthSq());
                  if (0 === t) return Math.PI / 2;
                  var n = this.dot(e) / t;
                  return Math.acos(vd(n, -1, 1));
                }
              },
              {
                key: "distanceTo",
                value: function (e) {
                  return Math.sqrt(this.distanceToSquared(e));
                }
              },
              {
                key: "distanceToSquared",
                value: function (e) {
                  var t = this.x - e.x,
                    n = this.y - e.y,
                    i = this.z - e.z;
                  return t * t + n * n + i * i;
                }
              },
              {
                key: "manhattanDistanceTo",
                value: function (e) {
                  return (
                    Math.abs(this.x - e.x) +
                    Math.abs(this.y - e.y) +
                    Math.abs(this.z - e.z)
                  );
                }
              },
              {
                key: "setFromSpherical",
                value: function (e) {
                  return this.setFromSphericalCoords(e.radius, e.phi, e.theta);
                }
              },
              {
                key: "setFromSphericalCoords",
                value: function (e, t, n) {
                  var i = Math.sin(t) * e;
                  return (
                    (this.x = i * Math.sin(n)),
                    (this.y = Math.cos(t) * e),
                    (this.z = i * Math.cos(n)),
                    this
                  );
                }
              },
              {
                key: "setFromCylindrical",
                value: function (e) {
                  return this.setFromCylindricalCoords(e.radius, e.theta, e.y);
                }
              },
              {
                key: "setFromCylindricalCoords",
                value: function (e, t, n) {
                  return (
                    (this.x = e * Math.sin(t)),
                    (this.y = n),
                    (this.z = e * Math.cos(t)),
                    this
                  );
                }
              },
              {
                key: "setFromMatrixPosition",
                value: function (e) {
                  var t = e.elements;
                  return (
                    (this.x = t[12]), (this.y = t[13]), (this.z = t[14]), this
                  );
                }
              },
              {
                key: "setFromMatrixScale",
                value: function (e) {
                  var t = this.setFromMatrixColumn(e, 0).length(),
                    n = this.setFromMatrixColumn(e, 1).length(),
                    i = this.setFromMatrixColumn(e, 2).length();
                  return (this.x = t), (this.y = n), (this.z = i), this;
                }
              },
              {
                key: "setFromMatrixColumn",
                value: function (e, t) {
                  return this.fromArray(e.elements, 4 * t);
                }
              },
              {
                key: "setFromMatrix3Column",
                value: function (e, t) {
                  return this.fromArray(e.elements, 3 * t);
                }
              },
              {
                key: "setFromEuler",
                value: function (e) {
                  return (
                    (this.x = e._x), (this.y = e._y), (this.z = e._z), this
                  );
                }
              },
              {
                key: "setFromColor",
                value: function (e) {
                  return (this.x = e.r), (this.y = e.g), (this.z = e.b), this;
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.x === this.x && e.y === this.y && e.z === this.z;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (
                    (this.x = e[t]),
                    (this.y = e[t + 1]),
                    (this.z = e[t + 2]),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this.x), (e[t + 1] = this.y), (e[t + 2] = this.z), e
                  );
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (
                    (this.x = e.getX(t)),
                    (this.y = e.getY(t)),
                    (this.z = e.getZ(t)),
                    this
                  );
                }
              },
              {
                key: "random",
                value: function () {
                  return (
                    (this.x = Math.random()),
                    (this.y = Math.random()),
                    (this.z = Math.random()),
                    this
                  );
                }
              },
              {
                key: "randomDirection",
                value: function () {
                  var e = 2 * (Math.random() - 0.5),
                    t = Math.random() * Math.PI * 2,
                    n = Math.sqrt(1 - Math.pow(e, 2));
                  return (
                    (this.x = n * Math.cos(t)),
                    (this.y = n * Math.sin(t)),
                    (this.z = e),
                    this
                  );
                }
              },
              {
                key: Symbol.iterator,
                value: mh().mark(function e() {
                  return mh().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this.x;
                          case 2:
                            return (e.next = 4), this.y;
                          case 4:
                            return (e.next = 6), this.z;
                          case 6:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]
          );
        })(),
        Xd = new Kd(),
        Yd = new qd(),
        Zd = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : new Kd(1 / 0, 1 / 0, 1 / 0),
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : new Kd(-1 / 0, -1 / 0, -1 / 0);
              gh(this, e), (this.isBox3 = !0), (this.min = t), (this.max = n);
            },
            [
              {
                key: "set",
                value: function (e, t) {
                  return this.min.copy(e), this.max.copy(t), this;
                }
              },
              {
                key: "setFromArray",
                value: function (e) {
                  this.makeEmpty();
                  for (var t = 0, n = e.length; t < n; t += 3)
                    this.expandByPoint(Qd.fromArray(e, t));
                  return this;
                }
              },
              {
                key: "setFromBufferAttribute",
                value: function (e) {
                  this.makeEmpty();
                  for (var t = 0, n = e.count; t < n; t++)
                    this.expandByPoint(Qd.fromBufferAttribute(e, t));
                  return this;
                }
              },
              {
                key: "setFromPoints",
                value: function (e) {
                  this.makeEmpty();
                  for (var t = 0, n = e.length; t < n; t++)
                    this.expandByPoint(e[t]);
                  return this;
                }
              },
              {
                key: "setFromCenterAndSize",
                value: function (e, t) {
                  var n = Qd.copy(t).multiplyScalar(0.5);
                  return this.min.copy(e).sub(n), this.max.copy(e).add(n), this;
                }
              },
              {
                key: "setFromObject",
                value: function (e) {
                  var t =
                    arguments.length > 1 &&
                    void 0 !== arguments[1] &&
                    arguments[1];
                  return this.makeEmpty(), this.expandByObject(e, t);
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return this.min.copy(e.min), this.max.copy(e.max), this;
                }
              },
              {
                key: "makeEmpty",
                value: function () {
                  return (
                    (this.min.x = this.min.y = this.min.z = 1 / 0),
                    (this.max.x = this.max.y = this.max.z = -1 / 0),
                    this
                  );
                }
              },
              {
                key: "isEmpty",
                value: function () {
                  return (
                    this.max.x < this.min.x ||
                    this.max.y < this.min.y ||
                    this.max.z < this.min.z
                  );
                }
              },
              {
                key: "getCenter",
                value: function (e) {
                  return this.isEmpty()
                    ? e.set(0, 0, 0)
                    : e.addVectors(this.min, this.max).multiplyScalar(0.5);
                }
              },
              {
                key: "getSize",
                value: function (e) {
                  return this.isEmpty()
                    ? e.set(0, 0, 0)
                    : e.subVectors(this.max, this.min);
                }
              },
              {
                key: "expandByPoint",
                value: function (e) {
                  return this.min.min(e), this.max.max(e), this;
                }
              },
              {
                key: "expandByVector",
                value: function (e) {
                  return this.min.sub(e), this.max.add(e), this;
                }
              },
              {
                key: "expandByScalar",
                value: function (e) {
                  return this.min.addScalar(-e), this.max.addScalar(e), this;
                }
              },
              {
                key: "expandByObject",
                value: function (e) {
                  var t =
                    arguments.length > 1 &&
                    void 0 !== arguments[1] &&
                    arguments[1];
                  if ((e.updateWorldMatrix(!1, !1), void 0 !== e.boundingBox))
                    null === e.boundingBox && e.computeBoundingBox(),
                      $d.copy(e.boundingBox),
                      $d.applyMatrix4(e.matrixWorld),
                      this.union($d);
                  else {
                    var n = e.geometry;
                    if (void 0 !== n)
                      if (
                        t &&
                        void 0 !== n.attributes &&
                        void 0 !== n.attributes.position
                      )
                        for (
                          var i = n.attributes.position, r = 0, a = i.count;
                          r < a;
                          r++
                        )
                          Qd.fromBufferAttribute(i, r).applyMatrix4(
                            e.matrixWorld
                          ),
                            this.expandByPoint(Qd);
                      else
                        null === n.boundingBox && n.computeBoundingBox(),
                          $d.copy(n.boundingBox),
                          $d.applyMatrix4(e.matrixWorld),
                          this.union($d);
                  }
                  for (var o = e.children, s = 0, l = o.length; s < l; s++)
                    this.expandByObject(o[s], t);
                  return this;
                }
              },
              {
                key: "containsPoint",
                value: function (e) {
                  return !(
                    e.x < this.min.x ||
                    e.x > this.max.x ||
                    e.y < this.min.y ||
                    e.y > this.max.y ||
                    e.z < this.min.z ||
                    e.z > this.max.z
                  );
                }
              },
              {
                key: "containsBox",
                value: function (e) {
                  return (
                    this.min.x <= e.min.x &&
                    e.max.x <= this.max.x &&
                    this.min.y <= e.min.y &&
                    e.max.y <= this.max.y &&
                    this.min.z <= e.min.z &&
                    e.max.z <= this.max.z
                  );
                }
              },
              {
                key: "getParameter",
                value: function (e, t) {
                  return t.set(
                    (e.x - this.min.x) / (this.max.x - this.min.x),
                    (e.y - this.min.y) / (this.max.y - this.min.y),
                    (e.z - this.min.z) / (this.max.z - this.min.z)
                  );
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return !(
                    e.max.x < this.min.x ||
                    e.min.x > this.max.x ||
                    e.max.y < this.min.y ||
                    e.min.y > this.max.y ||
                    e.max.z < this.min.z ||
                    e.min.z > this.max.z
                  );
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  return (
                    this.clampPoint(e.center, Qd),
                    Qd.distanceToSquared(e.center) <= e.radius * e.radius
                  );
                }
              },
              {
                key: "intersectsPlane",
                value: function (e) {
                  var t, n;
                  return (
                    e.normal.x > 0
                      ? ((t = e.normal.x * this.min.x),
                        (n = e.normal.x * this.max.x))
                      : ((t = e.normal.x * this.max.x),
                        (n = e.normal.x * this.min.x)),
                    e.normal.y > 0
                      ? ((t += e.normal.y * this.min.y),
                        (n += e.normal.y * this.max.y))
                      : ((t += e.normal.y * this.max.y),
                        (n += e.normal.y * this.min.y)),
                    e.normal.z > 0
                      ? ((t += e.normal.z * this.min.z),
                        (n += e.normal.z * this.max.z))
                      : ((t += e.normal.z * this.max.z),
                        (n += e.normal.z * this.min.z)),
                    t <= -e.constant && n >= -e.constant
                  );
                }
              },
              {
                key: "intersectsTriangle",
                value: function (e) {
                  if (this.isEmpty()) return !1;
                  this.getCenter(op),
                    sp.subVectors(this.max, op),
                    ep.subVectors(e.a, op),
                    tp.subVectors(e.b, op),
                    np.subVectors(e.c, op),
                    ip.subVectors(tp, ep),
                    rp.subVectors(np, tp),
                    ap.subVectors(ep, np);
                  var t = [
                    0,
                    -ip.z,
                    ip.y,
                    0,
                    -rp.z,
                    rp.y,
                    0,
                    -ap.z,
                    ap.y,
                    ip.z,
                    0,
                    -ip.x,
                    rp.z,
                    0,
                    -rp.x,
                    ap.z,
                    0,
                    -ap.x,
                    -ip.y,
                    ip.x,
                    0,
                    -rp.y,
                    rp.x,
                    0,
                    -ap.y,
                    ap.x,
                    0
                  ];
                  return (
                    !(
                      !cp(t, ep, tp, np, sp) ||
                      ((t = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
                      !cp(t, ep, tp, np, sp))
                    ) &&
                    (lp.crossVectors(ip, rp),
                    cp((t = [lp.x, lp.y, lp.z]), ep, tp, np, sp))
                  );
                }
              },
              {
                key: "clampPoint",
                value: function (e, t) {
                  return t.copy(e).clamp(this.min, this.max);
                }
              },
              {
                key: "distanceToPoint",
                value: function (e) {
                  return this.clampPoint(e, Qd).distanceTo(e);
                }
              },
              {
                key: "getBoundingSphere",
                value: function (e) {
                  return (
                    this.isEmpty()
                      ? e.makeEmpty()
                      : (this.getCenter(e.center),
                        (e.radius = 0.5 * this.getSize(Qd).length())),
                    e
                  );
                }
              },
              {
                key: "intersect",
                value: function (e) {
                  return (
                    this.min.max(e.min),
                    this.max.min(e.max),
                    this.isEmpty() && this.makeEmpty(),
                    this
                  );
                }
              },
              {
                key: "union",
                value: function (e) {
                  return this.min.min(e.min), this.max.max(e.max), this;
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  return (
                    this.isEmpty() ||
                      (Jd[0]
                        .set(this.min.x, this.min.y, this.min.z)
                        .applyMatrix4(e),
                      Jd[1]
                        .set(this.min.x, this.min.y, this.max.z)
                        .applyMatrix4(e),
                      Jd[2]
                        .set(this.min.x, this.max.y, this.min.z)
                        .applyMatrix4(e),
                      Jd[3]
                        .set(this.min.x, this.max.y, this.max.z)
                        .applyMatrix4(e),
                      Jd[4]
                        .set(this.max.x, this.min.y, this.min.z)
                        .applyMatrix4(e),
                      Jd[5]
                        .set(this.max.x, this.min.y, this.max.z)
                        .applyMatrix4(e),
                      Jd[6]
                        .set(this.max.x, this.max.y, this.min.z)
                        .applyMatrix4(e),
                      Jd[7]
                        .set(this.max.x, this.max.y, this.max.z)
                        .applyMatrix4(e),
                      this.setFromPoints(Jd)),
                    this
                  );
                }
              },
              {
                key: "translate",
                value: function (e) {
                  return this.min.add(e), this.max.add(e), this;
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.min.equals(this.min) && e.max.equals(this.max);
                }
              }
            ]
          );
        })(),
        Jd = [
          new Kd(),
          new Kd(),
          new Kd(),
          new Kd(),
          new Kd(),
          new Kd(),
          new Kd(),
          new Kd()
        ],
        Qd = new Kd(),
        $d = new Zd(),
        ep = new Kd(),
        tp = new Kd(),
        np = new Kd(),
        ip = new Kd(),
        rp = new Kd(),
        ap = new Kd(),
        op = new Kd(),
        sp = new Kd(),
        lp = new Kd(),
        up = new Kd();
      function cp(e, t, n, i, r) {
        for (var a = 0, o = e.length - 3; a <= o; a += 3) {
          up.fromArray(e, a);
          var s =
              r.x * Math.abs(up.x) +
              r.y * Math.abs(up.y) +
              r.z * Math.abs(up.z),
            l = t.dot(up),
            u = n.dot(up),
            c = i.dot(up);
          if (Math.max(-Math.max(l, u, c), Math.min(l, u, c)) > s) return !1;
        }
        return !0;
      }
      var hp = new Zd(),
        dp = new Kd(),
        pp = new Kd(),
        fp = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : new Kd(),
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : -1;
              gh(this, e), (this.center = t), (this.radius = n);
            },
            [
              {
                key: "set",
                value: function (e, t) {
                  return this.center.copy(e), (this.radius = t), this;
                }
              },
              {
                key: "setFromPoints",
                value: function (e, t) {
                  var n = this.center;
                  void 0 !== t ? n.copy(t) : hp.setFromPoints(e).getCenter(n);
                  for (var i = 0, r = 0, a = e.length; r < a; r++)
                    i = Math.max(i, n.distanceToSquared(e[r]));
                  return (this.radius = Math.sqrt(i)), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    this.center.copy(e.center), (this.radius = e.radius), this
                  );
                }
              },
              {
                key: "isEmpty",
                value: function () {
                  return this.radius < 0;
                }
              },
              {
                key: "makeEmpty",
                value: function () {
                  return this.center.set(0, 0, 0), (this.radius = -1), this;
                }
              },
              {
                key: "containsPoint",
                value: function (e) {
                  return (
                    e.distanceToSquared(this.center) <=
                    this.radius * this.radius
                  );
                }
              },
              {
                key: "distanceToPoint",
                value: function (e) {
                  return e.distanceTo(this.center) - this.radius;
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  var t = this.radius + e.radius;
                  return e.center.distanceToSquared(this.center) <= t * t;
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return e.intersectsSphere(this);
                }
              },
              {
                key: "intersectsPlane",
                value: function (e) {
                  return (
                    Math.abs(e.distanceToPoint(this.center)) <= this.radius
                  );
                }
              },
              {
                key: "clampPoint",
                value: function (e, t) {
                  var n = this.center.distanceToSquared(e);
                  return (
                    t.copy(e),
                    n > this.radius * this.radius &&
                      (t.sub(this.center).normalize(),
                      t.multiplyScalar(this.radius).add(this.center)),
                    t
                  );
                }
              },
              {
                key: "getBoundingBox",
                value: function (e) {
                  return this.isEmpty()
                    ? (e.makeEmpty(), e)
                    : (e.set(this.center, this.center),
                      e.expandByScalar(this.radius),
                      e);
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  return (
                    this.center.applyMatrix4(e),
                    (this.radius = this.radius * e.getMaxScaleOnAxis()),
                    this
                  );
                }
              },
              {
                key: "translate",
                value: function (e) {
                  return this.center.add(e), this;
                }
              },
              {
                key: "expandByPoint",
                value: function (e) {
                  if (this.isEmpty())
                    return this.center.copy(e), (this.radius = 0), this;
                  dp.subVectors(e, this.center);
                  var t = dp.lengthSq();
                  if (t > this.radius * this.radius) {
                    var n = Math.sqrt(t),
                      i = 0.5 * (n - this.radius);
                    this.center.addScaledVector(dp, i / n), (this.radius += i);
                  }
                  return this;
                }
              },
              {
                key: "union",
                value: function (e) {
                  return e.isEmpty()
                    ? this
                    : this.isEmpty()
                    ? (this.copy(e), this)
                    : (!0 === this.center.equals(e.center)
                        ? (this.radius = Math.max(this.radius, e.radius))
                        : (pp
                            .subVectors(e.center, this.center)
                            .setLength(e.radius),
                          this.expandByPoint(dp.copy(e.center).add(pp)),
                          this.expandByPoint(dp.copy(e.center).sub(pp))),
                      this);
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e.center.equals(this.center) && e.radius === this.radius
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]
          );
        })(),
        vp = new Kd(),
        mp = new Kd(),
        gp = new Kd(),
        _p = new Kd(),
        yp = new Kd(),
        bp = new Kd(),
        xp = new Kd(),
        wp = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : new Kd(),
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : new Kd(0, 0, -1);
              gh(this, e), (this.origin = t), (this.direction = n);
            },
            [
              {
                key: "set",
                value: function (e, t) {
                  return this.origin.copy(e), this.direction.copy(t), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    this.origin.copy(e.origin),
                    this.direction.copy(e.direction),
                    this
                  );
                }
              },
              {
                key: "at",
                value: function (e, t) {
                  return t.copy(this.origin).addScaledVector(this.direction, e);
                }
              },
              {
                key: "lookAt",
                value: function (e) {
                  return (
                    this.direction.copy(e).sub(this.origin).normalize(), this
                  );
                }
              },
              {
                key: "recast",
                value: function (e) {
                  return this.origin.copy(this.at(e, vp)), this;
                }
              },
              {
                key: "closestPointToPoint",
                value: function (e, t) {
                  t.subVectors(e, this.origin);
                  var n = t.dot(this.direction);
                  return n < 0
                    ? t.copy(this.origin)
                    : t.copy(this.origin).addScaledVector(this.direction, n);
                }
              },
              {
                key: "distanceToPoint",
                value: function (e) {
                  return Math.sqrt(this.distanceSqToPoint(e));
                }
              },
              {
                key: "distanceSqToPoint",
                value: function (e) {
                  var t = vp.subVectors(e, this.origin).dot(this.direction);
                  return t < 0
                    ? this.origin.distanceToSquared(e)
                    : (vp.copy(this.origin).addScaledVector(this.direction, t),
                      vp.distanceToSquared(e));
                }
              },
              {
                key: "distanceSqToSegment",
                value: function (e, t, n, i) {
                  mp.copy(e).add(t).multiplyScalar(0.5),
                    gp.copy(t).sub(e).normalize(),
                    _p.copy(this.origin).sub(mp);
                  var r,
                    a,
                    o,
                    s,
                    l = 0.5 * e.distanceTo(t),
                    u = -this.direction.dot(gp),
                    c = _p.dot(this.direction),
                    h = -_p.dot(gp),
                    d = _p.lengthSq(),
                    p = Math.abs(1 - u * u);
                  if (p > 0) {
                    if (((a = u * c - h), (s = l * p), (r = u * h - c) >= 0)) {
                      if (a >= -s) {
                        if (a <= s) {
                          var f = 1 / p;
                          o =
                            (r *= f) * (r + u * (a *= f) + 2 * c) +
                            a * (u * r + a + 2 * h) +
                            d;
                        } else
                          (a = l),
                            (o =
                              -(r = Math.max(0, -(u * a + c))) * r +
                              a * (a + 2 * h) +
                              d);
                      } else
                        (a = -l),
                          (o =
                            -(r = Math.max(0, -(u * a + c))) * r +
                            a * (a + 2 * h) +
                            d);
                    } else
                      a <= -s
                        ? (o =
                            -(r = Math.max(0, -(-u * l + c))) * r +
                            (a = r > 0 ? -l : Math.min(Math.max(-l, -h), l)) *
                              (a + 2 * h) +
                            d)
                        : a <= s
                        ? ((r = 0),
                          (o =
                            (a = Math.min(Math.max(-l, -h), l)) * (a + 2 * h) +
                            d))
                        : (o =
                            -(r = Math.max(0, -(u * l + c))) * r +
                            (a = r > 0 ? l : Math.min(Math.max(-l, -h), l)) *
                              (a + 2 * h) +
                            d);
                  } else
                    (a = u > 0 ? -l : l),
                      (o =
                        -(r = Math.max(0, -(u * a + c))) * r +
                        a * (a + 2 * h) +
                        d);
                  return (
                    n && n.copy(this.origin).addScaledVector(this.direction, r),
                    i && i.copy(mp).addScaledVector(gp, a),
                    o
                  );
                }
              },
              {
                key: "intersectSphere",
                value: function (e, t) {
                  vp.subVectors(e.center, this.origin);
                  var n = vp.dot(this.direction),
                    i = vp.dot(vp) - n * n,
                    r = e.radius * e.radius;
                  if (i > r) return null;
                  var a = Math.sqrt(r - i),
                    o = n - a,
                    s = n + a;
                  return s < 0 ? null : o < 0 ? this.at(s, t) : this.at(o, t);
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  return (
                    this.distanceSqToPoint(e.center) <= e.radius * e.radius
                  );
                }
              },
              {
                key: "distanceToPlane",
                value: function (e) {
                  var t = e.normal.dot(this.direction);
                  if (0 === t)
                    return 0 === e.distanceToPoint(this.origin) ? 0 : null;
                  var n = -(this.origin.dot(e.normal) + e.constant) / t;
                  return n >= 0 ? n : null;
                }
              },
              {
                key: "intersectPlane",
                value: function (e, t) {
                  var n = this.distanceToPlane(e);
                  return null === n ? null : this.at(n, t);
                }
              },
              {
                key: "intersectsPlane",
                value: function (e) {
                  var t = e.distanceToPoint(this.origin);
                  return 0 === t || e.normal.dot(this.direction) * t < 0;
                }
              },
              {
                key: "intersectBox",
                value: function (e, t) {
                  var n,
                    i,
                    r,
                    a,
                    o,
                    s,
                    l = 1 / this.direction.x,
                    u = 1 / this.direction.y,
                    c = 1 / this.direction.z,
                    h = this.origin;
                  return (
                    l >= 0
                      ? ((n = (e.min.x - h.x) * l), (i = (e.max.x - h.x) * l))
                      : ((n = (e.max.x - h.x) * l), (i = (e.min.x - h.x) * l)),
                    u >= 0
                      ? ((r = (e.min.y - h.y) * u), (a = (e.max.y - h.y) * u))
                      : ((r = (e.max.y - h.y) * u), (a = (e.min.y - h.y) * u)),
                    n > a ||
                    r > i ||
                    ((r > n || isNaN(n)) && (n = r),
                    (a < i || isNaN(i)) && (i = a),
                    c >= 0
                      ? ((o = (e.min.z - h.z) * c), (s = (e.max.z - h.z) * c))
                      : ((o = (e.max.z - h.z) * c), (s = (e.min.z - h.z) * c)),
                    n > s || o > i) ||
                    ((o > n || n != n) && (n = o),
                    (s < i || i != i) && (i = s),
                    i < 0)
                      ? null
                      : this.at(n >= 0 ? n : i, t)
                  );
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return null !== this.intersectBox(e, vp);
                }
              },
              {
                key: "intersectTriangle",
                value: function (e, t, n, i, r) {
                  yp.subVectors(t, e),
                    bp.subVectors(n, e),
                    xp.crossVectors(yp, bp);
                  var a,
                    o = this.direction.dot(xp);
                  if (o > 0) {
                    if (i) return null;
                    a = 1;
                  } else {
                    if (!(o < 0)) return null;
                    (a = -1), (o = -o);
                  }
                  _p.subVectors(this.origin, e);
                  var s = a * this.direction.dot(bp.crossVectors(_p, bp));
                  if (s < 0) return null;
                  var l = a * this.direction.dot(yp.cross(_p));
                  if (l < 0 || s + l > o) return null;
                  var u = -a * _p.dot(xp);
                  return u < 0 ? null : this.at(u / o, r);
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  return (
                    this.origin.applyMatrix4(e),
                    this.direction.transformDirection(e),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e.origin.equals(this.origin) &&
                    e.direction.equals(this.direction)
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]
          );
        })(),
        Sp = (function () {
          function e() {
            gh(this, e),
              (e.prototype.isMatrix4 = !0),
              (this.elements = [
                1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1
              ]);
          }
          return yh(e, [
            {
              key: "set",
              value: function (e, t, n, i, r, a, o, s, l, u, c, h, d, p, f, v) {
                var m = this.elements;
                return (
                  (m[0] = e),
                  (m[4] = t),
                  (m[8] = n),
                  (m[12] = i),
                  (m[1] = r),
                  (m[5] = a),
                  (m[9] = o),
                  (m[13] = s),
                  (m[2] = l),
                  (m[6] = u),
                  (m[10] = c),
                  (m[14] = h),
                  (m[3] = d),
                  (m[7] = p),
                  (m[11] = f),
                  (m[15] = v),
                  this
                );
              }
            },
            {
              key: "identity",
              value: function () {
                return (
                  this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
                );
              }
            },
            {
              key: "clone",
              value: function () {
                return new e().fromArray(this.elements);
              }
            },
            {
              key: "copy",
              value: function (e) {
                var t = this.elements,
                  n = e.elements;
                return (
                  (t[0] = n[0]),
                  (t[1] = n[1]),
                  (t[2] = n[2]),
                  (t[3] = n[3]),
                  (t[4] = n[4]),
                  (t[5] = n[5]),
                  (t[6] = n[6]),
                  (t[7] = n[7]),
                  (t[8] = n[8]),
                  (t[9] = n[9]),
                  (t[10] = n[10]),
                  (t[11] = n[11]),
                  (t[12] = n[12]),
                  (t[13] = n[13]),
                  (t[14] = n[14]),
                  (t[15] = n[15]),
                  this
                );
              }
            },
            {
              key: "copyPosition",
              value: function (e) {
                var t = this.elements,
                  n = e.elements;
                return (t[12] = n[12]), (t[13] = n[13]), (t[14] = n[14]), this;
              }
            },
            {
              key: "setFromMatrix3",
              value: function (e) {
                var t = e.elements;
                return (
                  this.set(
                    t[0],
                    t[3],
                    t[6],
                    0,
                    t[1],
                    t[4],
                    t[7],
                    0,
                    t[2],
                    t[5],
                    t[8],
                    0,
                    0,
                    0,
                    0,
                    1
                  ),
                  this
                );
              }
            },
            {
              key: "extractBasis",
              value: function (e, t, n) {
                return (
                  e.setFromMatrixColumn(this, 0),
                  t.setFromMatrixColumn(this, 1),
                  n.setFromMatrixColumn(this, 2),
                  this
                );
              }
            },
            {
              key: "makeBasis",
              value: function (e, t, n) {
                return (
                  this.set(
                    e.x,
                    t.x,
                    n.x,
                    0,
                    e.y,
                    t.y,
                    n.y,
                    0,
                    e.z,
                    t.z,
                    n.z,
                    0,
                    0,
                    0,
                    0,
                    1
                  ),
                  this
                );
              }
            },
            {
              key: "extractRotation",
              value: function (e) {
                var t = this.elements,
                  n = e.elements,
                  i = 1 / Mp.setFromMatrixColumn(e, 0).length(),
                  r = 1 / Mp.setFromMatrixColumn(e, 1).length(),
                  a = 1 / Mp.setFromMatrixColumn(e, 2).length();
                return (
                  (t[0] = n[0] * i),
                  (t[1] = n[1] * i),
                  (t[2] = n[2] * i),
                  (t[3] = 0),
                  (t[4] = n[4] * r),
                  (t[5] = n[5] * r),
                  (t[6] = n[6] * r),
                  (t[7] = 0),
                  (t[8] = n[8] * a),
                  (t[9] = n[9] * a),
                  (t[10] = n[10] * a),
                  (t[11] = 0),
                  (t[12] = 0),
                  (t[13] = 0),
                  (t[14] = 0),
                  (t[15] = 1),
                  this
                );
              }
            },
            {
              key: "makeRotationFromEuler",
              value: function (e) {
                var t = this.elements,
                  n = e.x,
                  i = e.y,
                  r = e.z,
                  a = Math.cos(n),
                  o = Math.sin(n),
                  s = Math.cos(i),
                  l = Math.sin(i),
                  u = Math.cos(r),
                  c = Math.sin(r);
                if ("XYZ" === e.order) {
                  var h = a * u,
                    d = a * c,
                    p = o * u,
                    f = o * c;
                  (t[0] = s * u),
                    (t[4] = -s * c),
                    (t[8] = l),
                    (t[1] = d + p * l),
                    (t[5] = h - f * l),
                    (t[9] = -o * s),
                    (t[2] = f - h * l),
                    (t[6] = p + d * l),
                    (t[10] = a * s);
                } else if ("YXZ" === e.order) {
                  var v = s * u,
                    m = s * c,
                    g = l * u,
                    _ = l * c;
                  (t[0] = v + _ * o),
                    (t[4] = g * o - m),
                    (t[8] = a * l),
                    (t[1] = a * c),
                    (t[5] = a * u),
                    (t[9] = -o),
                    (t[2] = m * o - g),
                    (t[6] = _ + v * o),
                    (t[10] = a * s);
                } else if ("ZXY" === e.order) {
                  var y = s * u,
                    b = s * c,
                    x = l * u,
                    w = l * c;
                  (t[0] = y - w * o),
                    (t[4] = -a * c),
                    (t[8] = x + b * o),
                    (t[1] = b + x * o),
                    (t[5] = a * u),
                    (t[9] = w - y * o),
                    (t[2] = -a * l),
                    (t[6] = o),
                    (t[10] = a * s);
                } else if ("ZYX" === e.order) {
                  var S = a * u,
                    M = a * c,
                    T = o * u,
                    k = o * c;
                  (t[0] = s * u),
                    (t[4] = T * l - M),
                    (t[8] = S * l + k),
                    (t[1] = s * c),
                    (t[5] = k * l + S),
                    (t[9] = M * l - T),
                    (t[2] = -l),
                    (t[6] = o * s),
                    (t[10] = a * s);
                } else if ("YZX" === e.order) {
                  var E = a * s,
                    C = a * l,
                    D = o * s,
                    A = o * l;
                  (t[0] = s * u),
                    (t[4] = A - E * c),
                    (t[8] = D * c + C),
                    (t[1] = c),
                    (t[5] = a * u),
                    (t[9] = -o * u),
                    (t[2] = -l * u),
                    (t[6] = C * c + D),
                    (t[10] = E - A * c);
                } else if ("XZY" === e.order) {
                  var P = a * s,
                    L = a * l,
                    R = o * s,
                    I = o * l;
                  (t[0] = s * u),
                    (t[4] = -c),
                    (t[8] = l * u),
                    (t[1] = P * c + I),
                    (t[5] = a * u),
                    (t[9] = L * c - R),
                    (t[2] = R * c - L),
                    (t[6] = o * u),
                    (t[10] = I * c + P);
                }
                return (
                  (t[3] = 0),
                  (t[7] = 0),
                  (t[11] = 0),
                  (t[12] = 0),
                  (t[13] = 0),
                  (t[14] = 0),
                  (t[15] = 1),
                  this
                );
              }
            },
            {
              key: "makeRotationFromQuaternion",
              value: function (e) {
                return this.compose(kp, e, Ep);
              }
            },
            {
              key: "lookAt",
              value: function (e, t, n) {
                var i = this.elements;
                return (
                  Ap.subVectors(e, t),
                  0 === Ap.lengthSq() && (Ap.z = 1),
                  Ap.normalize(),
                  Cp.crossVectors(n, Ap),
                  0 === Cp.lengthSq() &&
                    (1 === Math.abs(n.z) ? (Ap.x += 1e-4) : (Ap.z += 1e-4),
                    Ap.normalize(),
                    Cp.crossVectors(n, Ap)),
                  Cp.normalize(),
                  Dp.crossVectors(Ap, Cp),
                  (i[0] = Cp.x),
                  (i[4] = Dp.x),
                  (i[8] = Ap.x),
                  (i[1] = Cp.y),
                  (i[5] = Dp.y),
                  (i[9] = Ap.y),
                  (i[2] = Cp.z),
                  (i[6] = Dp.z),
                  (i[10] = Ap.z),
                  this
                );
              }
            },
            {
              key: "multiply",
              value: function (e) {
                return this.multiplyMatrices(this, e);
              }
            },
            {
              key: "premultiply",
              value: function (e) {
                return this.multiplyMatrices(e, this);
              }
            },
            {
              key: "multiplyMatrices",
              value: function (e, t) {
                var n = e.elements,
                  i = t.elements,
                  r = this.elements,
                  a = n[0],
                  o = n[4],
                  s = n[8],
                  l = n[12],
                  u = n[1],
                  c = n[5],
                  h = n[9],
                  d = n[13],
                  p = n[2],
                  f = n[6],
                  v = n[10],
                  m = n[14],
                  g = n[3],
                  _ = n[7],
                  y = n[11],
                  b = n[15],
                  x = i[0],
                  w = i[4],
                  S = i[8],
                  M = i[12],
                  T = i[1],
                  k = i[5],
                  E = i[9],
                  C = i[13],
                  D = i[2],
                  A = i[6],
                  P = i[10],
                  L = i[14],
                  R = i[3],
                  I = i[7],
                  O = i[11],
                  N = i[15];
                return (
                  (r[0] = a * x + o * T + s * D + l * R),
                  (r[4] = a * w + o * k + s * A + l * I),
                  (r[8] = a * S + o * E + s * P + l * O),
                  (r[12] = a * M + o * C + s * L + l * N),
                  (r[1] = u * x + c * T + h * D + d * R),
                  (r[5] = u * w + c * k + h * A + d * I),
                  (r[9] = u * S + c * E + h * P + d * O),
                  (r[13] = u * M + c * C + h * L + d * N),
                  (r[2] = p * x + f * T + v * D + m * R),
                  (r[6] = p * w + f * k + v * A + m * I),
                  (r[10] = p * S + f * E + v * P + m * O),
                  (r[14] = p * M + f * C + v * L + m * N),
                  (r[3] = g * x + _ * T + y * D + b * R),
                  (r[7] = g * w + _ * k + y * A + b * I),
                  (r[11] = g * S + _ * E + y * P + b * O),
                  (r[15] = g * M + _ * C + y * L + b * N),
                  this
                );
              }
            },
            {
              key: "multiplyScalar",
              value: function (e) {
                var t = this.elements;
                return (
                  (t[0] *= e),
                  (t[4] *= e),
                  (t[8] *= e),
                  (t[12] *= e),
                  (t[1] *= e),
                  (t[5] *= e),
                  (t[9] *= e),
                  (t[13] *= e),
                  (t[2] *= e),
                  (t[6] *= e),
                  (t[10] *= e),
                  (t[14] *= e),
                  (t[3] *= e),
                  (t[7] *= e),
                  (t[11] *= e),
                  (t[15] *= e),
                  this
                );
              }
            },
            {
              key: "determinant",
              value: function () {
                var e = this.elements,
                  t = e[0],
                  n = e[4],
                  i = e[8],
                  r = e[12],
                  a = e[1],
                  o = e[5],
                  s = e[9],
                  l = e[13],
                  u = e[2],
                  c = e[6],
                  h = e[10],
                  d = e[14];
                return (
                  e[3] *
                    (+r * s * c -
                      i * l * c -
                      r * o * h +
                      n * l * h +
                      i * o * d -
                      n * s * d) +
                  e[7] *
                    (+t * s * d -
                      t * l * h +
                      r * a * h -
                      i * a * d +
                      i * l * u -
                      r * s * u) +
                  e[11] *
                    (+t * l * c -
                      t * o * d -
                      r * a * c +
                      n * a * d +
                      r * o * u -
                      n * l * u) +
                  e[15] *
                    (-i * o * u -
                      t * s * c +
                      t * o * h +
                      i * a * c -
                      n * a * h +
                      n * s * u)
                );
              }
            },
            {
              key: "transpose",
              value: function () {
                var e,
                  t = this.elements;
                return (
                  (e = t[1]),
                  (t[1] = t[4]),
                  (t[4] = e),
                  (e = t[2]),
                  (t[2] = t[8]),
                  (t[8] = e),
                  (e = t[6]),
                  (t[6] = t[9]),
                  (t[9] = e),
                  (e = t[3]),
                  (t[3] = t[12]),
                  (t[12] = e),
                  (e = t[7]),
                  (t[7] = t[13]),
                  (t[13] = e),
                  (e = t[11]),
                  (t[11] = t[14]),
                  (t[14] = e),
                  this
                );
              }
            },
            {
              key: "setPosition",
              value: function (e, t, n) {
                var i = this.elements;
                return (
                  e.isVector3
                    ? ((i[12] = e.x), (i[13] = e.y), (i[14] = e.z))
                    : ((i[12] = e), (i[13] = t), (i[14] = n)),
                  this
                );
              }
            },
            {
              key: "invert",
              value: function () {
                var e = this.elements,
                  t = e[0],
                  n = e[1],
                  i = e[2],
                  r = e[3],
                  a = e[4],
                  o = e[5],
                  s = e[6],
                  l = e[7],
                  u = e[8],
                  c = e[9],
                  h = e[10],
                  d = e[11],
                  p = e[12],
                  f = e[13],
                  v = e[14],
                  m = e[15],
                  g =
                    c * v * l -
                    f * h * l +
                    f * s * d -
                    o * v * d -
                    c * s * m +
                    o * h * m,
                  _ =
                    p * h * l -
                    u * v * l -
                    p * s * d +
                    a * v * d +
                    u * s * m -
                    a * h * m,
                  y =
                    u * f * l -
                    p * c * l +
                    p * o * d -
                    a * f * d -
                    u * o * m +
                    a * c * m,
                  b =
                    p * c * s -
                    u * f * s -
                    p * o * h +
                    a * f * h +
                    u * o * v -
                    a * c * v,
                  x = t * g + n * _ + i * y + r * b;
                if (0 === x)
                  return this.set(
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0,
                    0
                  );
                var w = 1 / x;
                return (
                  (e[0] = g * w),
                  (e[1] =
                    (f * h * r -
                      c * v * r -
                      f * i * d +
                      n * v * d +
                      c * i * m -
                      n * h * m) *
                    w),
                  (e[2] =
                    (o * v * r -
                      f * s * r +
                      f * i * l -
                      n * v * l -
                      o * i * m +
                      n * s * m) *
                    w),
                  (e[3] =
                    (c * s * r -
                      o * h * r -
                      c * i * l +
                      n * h * l +
                      o * i * d -
                      n * s * d) *
                    w),
                  (e[4] = _ * w),
                  (e[5] =
                    (u * v * r -
                      p * h * r +
                      p * i * d -
                      t * v * d -
                      u * i * m +
                      t * h * m) *
                    w),
                  (e[6] =
                    (p * s * r -
                      a * v * r -
                      p * i * l +
                      t * v * l +
                      a * i * m -
                      t * s * m) *
                    w),
                  (e[7] =
                    (a * h * r -
                      u * s * r +
                      u * i * l -
                      t * h * l -
                      a * i * d +
                      t * s * d) *
                    w),
                  (e[8] = y * w),
                  (e[9] =
                    (p * c * r -
                      u * f * r -
                      p * n * d +
                      t * f * d +
                      u * n * m -
                      t * c * m) *
                    w),
                  (e[10] =
                    (a * f * r -
                      p * o * r +
                      p * n * l -
                      t * f * l -
                      a * n * m +
                      t * o * m) *
                    w),
                  (e[11] =
                    (u * o * r -
                      a * c * r -
                      u * n * l +
                      t * c * l +
                      a * n * d -
                      t * o * d) *
                    w),
                  (e[12] = b * w),
                  (e[13] =
                    (u * f * i -
                      p * c * i +
                      p * n * h -
                      t * f * h -
                      u * n * v +
                      t * c * v) *
                    w),
                  (e[14] =
                    (p * o * i -
                      a * f * i -
                      p * n * s +
                      t * f * s +
                      a * n * v -
                      t * o * v) *
                    w),
                  (e[15] =
                    (a * c * i -
                      u * o * i +
                      u * n * s -
                      t * c * s -
                      a * n * h +
                      t * o * h) *
                    w),
                  this
                );
              }
            },
            {
              key: "scale",
              value: function (e) {
                var t = this.elements,
                  n = e.x,
                  i = e.y,
                  r = e.z;
                return (
                  (t[0] *= n),
                  (t[4] *= i),
                  (t[8] *= r),
                  (t[1] *= n),
                  (t[5] *= i),
                  (t[9] *= r),
                  (t[2] *= n),
                  (t[6] *= i),
                  (t[10] *= r),
                  (t[3] *= n),
                  (t[7] *= i),
                  (t[11] *= r),
                  this
                );
              }
            },
            {
              key: "getMaxScaleOnAxis",
              value: function () {
                var e = this.elements,
                  t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
                  n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
                  i = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
                return Math.sqrt(Math.max(t, n, i));
              }
            },
            {
              key: "makeTranslation",
              value: function (e, t, n) {
                return (
                  this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this
                );
              }
            },
            {
              key: "makeRotationX",
              value: function (e) {
                var t = Math.cos(e),
                  n = Math.sin(e);
                return (
                  this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1),
                  this
                );
              }
            },
            {
              key: "makeRotationY",
              value: function (e) {
                var t = Math.cos(e),
                  n = Math.sin(e);
                return (
                  this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1),
                  this
                );
              }
            },
            {
              key: "makeRotationZ",
              value: function (e) {
                var t = Math.cos(e),
                  n = Math.sin(e);
                return (
                  this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                  this
                );
              }
            },
            {
              key: "makeRotationAxis",
              value: function (e, t) {
                var n = Math.cos(t),
                  i = Math.sin(t),
                  r = 1 - n,
                  a = e.x,
                  o = e.y,
                  s = e.z,
                  l = r * a,
                  u = r * o;
                return (
                  this.set(
                    l * a + n,
                    l * o - i * s,
                    l * s + i * o,
                    0,
                    l * o + i * s,
                    u * o + n,
                    u * s - i * a,
                    0,
                    l * s - i * o,
                    u * s + i * a,
                    r * s * s + n,
                    0,
                    0,
                    0,
                    0,
                    1
                  ),
                  this
                );
              }
            },
            {
              key: "makeScale",
              value: function (e, t, n) {
                return (
                  this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
                );
              }
            },
            {
              key: "makeShear",
              value: function (e, t, n, i, r, a) {
                return (
                  this.set(1, n, r, 0, e, 1, a, 0, t, i, 1, 0, 0, 0, 0, 1), this
                );
              }
            },
            {
              key: "compose",
              value: function (e, t, n) {
                var i = this.elements,
                  r = t._x,
                  a = t._y,
                  o = t._z,
                  s = t._w,
                  l = r + r,
                  u = a + a,
                  c = o + o,
                  h = r * l,
                  d = r * u,
                  p = r * c,
                  f = a * u,
                  v = a * c,
                  m = o * c,
                  g = s * l,
                  _ = s * u,
                  y = s * c,
                  b = n.x,
                  x = n.y,
                  w = n.z;
                return (
                  (i[0] = (1 - (f + m)) * b),
                  (i[1] = (d + y) * b),
                  (i[2] = (p - _) * b),
                  (i[3] = 0),
                  (i[4] = (d - y) * x),
                  (i[5] = (1 - (h + m)) * x),
                  (i[6] = (v + g) * x),
                  (i[7] = 0),
                  (i[8] = (p + _) * w),
                  (i[9] = (v - g) * w),
                  (i[10] = (1 - (h + f)) * w),
                  (i[11] = 0),
                  (i[12] = e.x),
                  (i[13] = e.y),
                  (i[14] = e.z),
                  (i[15] = 1),
                  this
                );
              }
            },
            {
              key: "decompose",
              value: function (e, t, n) {
                var i = this.elements,
                  r = Mp.set(i[0], i[1], i[2]).length(),
                  a = Mp.set(i[4], i[5], i[6]).length(),
                  o = Mp.set(i[8], i[9], i[10]).length();
                this.determinant() < 0 && (r = -r),
                  (e.x = i[12]),
                  (e.y = i[13]),
                  (e.z = i[14]),
                  Tp.copy(this);
                var s = 1 / r,
                  l = 1 / a,
                  u = 1 / o;
                return (
                  (Tp.elements[0] *= s),
                  (Tp.elements[1] *= s),
                  (Tp.elements[2] *= s),
                  (Tp.elements[4] *= l),
                  (Tp.elements[5] *= l),
                  (Tp.elements[6] *= l),
                  (Tp.elements[8] *= u),
                  (Tp.elements[9] *= u),
                  (Tp.elements[10] *= u),
                  t.setFromRotationMatrix(Tp),
                  (n.x = r),
                  (n.y = a),
                  (n.z = o),
                  this
                );
              }
            },
            {
              key: "makePerspective",
              value: function (e, t, n, i, r, a) {
                var o = this.elements,
                  s = (2 * r) / (t - e),
                  l = (2 * r) / (n - i),
                  u = (t + e) / (t - e),
                  c = (n + i) / (n - i),
                  h = -(a + r) / (a - r),
                  d = (-2 * a * r) / (a - r);
                return (
                  (o[0] = s),
                  (o[4] = 0),
                  (o[8] = u),
                  (o[12] = 0),
                  (o[1] = 0),
                  (o[5] = l),
                  (o[9] = c),
                  (o[13] = 0),
                  (o[2] = 0),
                  (o[6] = 0),
                  (o[10] = h),
                  (o[14] = d),
                  (o[3] = 0),
                  (o[7] = 0),
                  (o[11] = -1),
                  (o[15] = 0),
                  this
                );
              }
            },
            {
              key: "makeOrthographic",
              value: function (e, t, n, i, r, a) {
                var o = this.elements,
                  s = 1 / (t - e),
                  l = 1 / (n - i),
                  u = 1 / (a - r),
                  c = (t + e) * s,
                  h = (n + i) * l,
                  d = (a + r) * u;
                return (
                  (o[0] = 2 * s),
                  (o[4] = 0),
                  (o[8] = 0),
                  (o[12] = -c),
                  (o[1] = 0),
                  (o[5] = 2 * l),
                  (o[9] = 0),
                  (o[13] = -h),
                  (o[2] = 0),
                  (o[6] = 0),
                  (o[10] = -2 * u),
                  (o[14] = -d),
                  (o[3] = 0),
                  (o[7] = 0),
                  (o[11] = 0),
                  (o[15] = 1),
                  this
                );
              }
            },
            {
              key: "equals",
              value: function (e) {
                for (var t = this.elements, n = e.elements, i = 0; i < 16; i++)
                  if (t[i] !== n[i]) return !1;
                return !0;
              }
            },
            {
              key: "fromArray",
              value: function (e) {
                for (
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n = 0;
                  n < 16;
                  n++
                )
                  this.elements[n] = e[n + t];
                return this;
              }
            },
            {
              key: "toArray",
              value: function () {
                var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : [],
                  t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  n = this.elements;
                return (
                  (e[t] = n[0]),
                  (e[t + 1] = n[1]),
                  (e[t + 2] = n[2]),
                  (e[t + 3] = n[3]),
                  (e[t + 4] = n[4]),
                  (e[t + 5] = n[5]),
                  (e[t + 6] = n[6]),
                  (e[t + 7] = n[7]),
                  (e[t + 8] = n[8]),
                  (e[t + 9] = n[9]),
                  (e[t + 10] = n[10]),
                  (e[t + 11] = n[11]),
                  (e[t + 12] = n[12]),
                  (e[t + 13] = n[13]),
                  (e[t + 14] = n[14]),
                  (e[t + 15] = n[15]),
                  e
                );
              }
            }
          ]);
        })(),
        Mp = new Kd(),
        Tp = new Sp(),
        kp = new Kd(0, 0, 0),
        Ep = new Kd(1, 1, 1),
        Cp = new Kd(),
        Dp = new Kd(),
        Ap = new Kd(),
        Pp = new Sp(),
        Lp = new qd(),
        Rp = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : 0,
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0,
                i =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 0,
                r =
                  arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : e.DEFAULT_ORDER;
              gh(this, e),
                (this.isEuler = !0),
                (this._x = t),
                (this._y = n),
                (this._z = i),
                (this._order = r);
            },
            [
              {
                key: "x",
                get: function () {
                  return this._x;
                },
                set: function (e) {
                  (this._x = e), this._onChangeCallback();
                }
              },
              {
                key: "y",
                get: function () {
                  return this._y;
                },
                set: function (e) {
                  (this._y = e), this._onChangeCallback();
                }
              },
              {
                key: "z",
                get: function () {
                  return this._z;
                },
                set: function (e) {
                  (this._z = e), this._onChangeCallback();
                }
              },
              {
                key: "order",
                get: function () {
                  return this._order;
                },
                set: function (e) {
                  (this._order = e), this._onChangeCallback();
                }
              },
              {
                key: "set",
                value: function (e, t, n) {
                  var i =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : this._order;
                  return (
                    (this._x = e),
                    (this._y = t),
                    (this._z = n),
                    (this._order = i),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(
                    this._x,
                    this._y,
                    this._z,
                    this._order
                  );
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this._x = e._x),
                    (this._y = e._y),
                    (this._z = e._z),
                    (this._order = e._order),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "setFromRotationMatrix",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : this._order,
                    n =
                      !(arguments.length > 2 && void 0 !== arguments[2]) ||
                      arguments[2],
                    i = e.elements,
                    r = i[0],
                    a = i[4],
                    o = i[8],
                    s = i[1],
                    l = i[5],
                    u = i[9],
                    c = i[2],
                    h = i[6],
                    d = i[10];
                  switch (t) {
                    case "XYZ":
                      (this._y = Math.asin(vd(o, -1, 1))),
                        Math.abs(o) < 0.9999999
                          ? ((this._x = Math.atan2(-u, d)),
                            (this._z = Math.atan2(-a, r)))
                          : ((this._x = Math.atan2(h, l)), (this._z = 0));
                      break;
                    case "YXZ":
                      (this._x = Math.asin(-vd(u, -1, 1))),
                        Math.abs(u) < 0.9999999
                          ? ((this._y = Math.atan2(o, d)),
                            (this._z = Math.atan2(s, l)))
                          : ((this._y = Math.atan2(-c, r)), (this._z = 0));
                      break;
                    case "ZXY":
                      (this._x = Math.asin(vd(h, -1, 1))),
                        Math.abs(h) < 0.9999999
                          ? ((this._y = Math.atan2(-c, d)),
                            (this._z = Math.atan2(-a, l)))
                          : ((this._y = 0), (this._z = Math.atan2(s, r)));
                      break;
                    case "ZYX":
                      (this._y = Math.asin(-vd(c, -1, 1))),
                        Math.abs(c) < 0.9999999
                          ? ((this._x = Math.atan2(h, d)),
                            (this._z = Math.atan2(s, r)))
                          : ((this._x = 0), (this._z = Math.atan2(-a, l)));
                      break;
                    case "YZX":
                      (this._z = Math.asin(vd(s, -1, 1))),
                        Math.abs(s) < 0.9999999
                          ? ((this._x = Math.atan2(-u, l)),
                            (this._y = Math.atan2(-c, r)))
                          : ((this._x = 0), (this._y = Math.atan2(o, d)));
                      break;
                    case "XZY":
                      (this._z = Math.asin(-vd(a, -1, 1))),
                        Math.abs(a) < 0.9999999
                          ? ((this._x = Math.atan2(h, l)),
                            (this._y = Math.atan2(o, r)))
                          : ((this._x = Math.atan2(-u, d)), (this._y = 0));
                      break;
                    default:
                      console.warn(
                        "THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " +
                          t
                      );
                  }
                  return (
                    (this._order = t),
                    !0 === n && this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "setFromQuaternion",
                value: function (e, t, n) {
                  return (
                    Pp.makeRotationFromQuaternion(e),
                    this.setFromRotationMatrix(Pp, t, n)
                  );
                }
              },
              {
                key: "setFromVector3",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : this._order;
                  return this.set(e.x, e.y, e.z, t);
                }
              },
              {
                key: "reorder",
                value: function (e) {
                  return Lp.setFromEuler(this), this.setFromQuaternion(Lp, e);
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e._x === this._x &&
                    e._y === this._y &&
                    e._z === this._z &&
                    e._order === this._order
                  );
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  return (
                    (this._x = e[0]),
                    (this._y = e[1]),
                    (this._z = e[2]),
                    void 0 !== e[3] && (this._order = e[3]),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this._x),
                    (e[t + 1] = this._y),
                    (e[t + 2] = this._z),
                    (e[t + 3] = this._order),
                    e
                  );
                }
              },
              {
                key: "_onChange",
                value: function (e) {
                  return (this._onChangeCallback = e), this;
                }
              },
              { key: "_onChangeCallback", value: function () {} },
              {
                key: Symbol.iterator,
                value: mh().mark(function e() {
                  return mh().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this._x;
                          case 2:
                            return (e.next = 4), this._y;
                          case 4:
                            return (e.next = 6), this._z;
                          case 6:
                            return (e.next = 8), this._order;
                          case 8:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]
          );
        })();
      Rp.DEFAULT_ORDER = "XYZ";
      var Ip = (function () {
          return yh(
            function e() {
              gh(this, e), (this.mask = 1);
            },
            [
              {
                key: "set",
                value: function (e) {
                  this.mask = (1 << e) >>> 0;
                }
              },
              {
                key: "enable",
                value: function (e) {
                  this.mask |= 1 << e;
                }
              },
              {
                key: "enableAll",
                value: function () {
                  this.mask = -1;
                }
              },
              {
                key: "toggle",
                value: function (e) {
                  this.mask ^= 1 << e;
                }
              },
              {
                key: "disable",
                value: function (e) {
                  this.mask &= ~(1 << e);
                }
              },
              {
                key: "disableAll",
                value: function () {
                  this.mask = 0;
                }
              },
              {
                key: "test",
                value: function (e) {
                  return !!(this.mask & e.mask);
                }
              },
              {
                key: "isEnabled",
                value: function (e) {
                  return !!(this.mask & (1 << e));
                }
              }
            ]
          );
        })(),
        Op = 0,
        Np = new Kd(),
        Fp = new qd(),
        Up = new Sp(),
        Bp = new Kd(),
        zp = new Kd(),
        Vp = new Kd(),
        Hp = new qd(),
        Gp = new Kd(1, 0, 0),
        Wp = new Kd(0, 1, 0),
        jp = new Kd(0, 0, 1),
        qp = { type: "added" },
        Kp = { type: "removed" },
        Xp = (function (e) {
          function t() {
            var e;
            gh(this, t),
              ((e = uh(this, t)).isObject3D = !0),
              Object.defineProperty(ch(e), "id", { value: Op++ }),
              (e.uuid = fd()),
              (e.name = ""),
              (e.type = "Object3D"),
              (e.parent = null),
              (e.children = []),
              (e.up = t.DEFAULT_UP.clone());
            var n = new Kd(),
              i = new Rp(),
              r = new qd(),
              a = new Kd(1, 1, 1);
            return (
              i._onChange(function () {
                r.setFromEuler(i, !1);
              }),
              r._onChange(function () {
                i.setFromQuaternion(r, void 0, !1);
              }),
              Object.defineProperties(e, {
                position: { configurable: !0, enumerable: !0, value: n },
                rotation: { configurable: !0, enumerable: !0, value: i },
                quaternion: { configurable: !0, enumerable: !0, value: r },
                scale: { configurable: !0, enumerable: !0, value: a },
                modelViewMatrix: { value: new Sp() },
                normalMatrix: { value: new Td() }
              }),
              (e.matrix = new Sp()),
              (e.matrixWorld = new Sp()),
              (e.matrixAutoUpdate = t.DEFAULT_MATRIX_AUTO_UPDATE),
              (e.matrixWorldNeedsUpdate = !1),
              (e.matrixWorldAutoUpdate = t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE),
              (e.layers = new Ip()),
              (e.visible = !0),
              (e.castShadow = !1),
              (e.receiveShadow = !1),
              (e.frustumCulled = !0),
              (e.renderOrder = 0),
              (e.animations = []),
              (e.userData = {}),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              { key: "onBeforeRender", value: function () {} },
              { key: "onAfterRender", value: function () {} },
              {
                key: "applyMatrix4",
                value: function (e) {
                  this.matrixAutoUpdate && this.updateMatrix(),
                    this.matrix.premultiply(e),
                    this.matrix.decompose(
                      this.position,
                      this.quaternion,
                      this.scale
                    );
                }
              },
              {
                key: "applyQuaternion",
                value: function (e) {
                  return this.quaternion.premultiply(e), this;
                }
              },
              {
                key: "setRotationFromAxisAngle",
                value: function (e, t) {
                  this.quaternion.setFromAxisAngle(e, t);
                }
              },
              {
                key: "setRotationFromEuler",
                value: function (e) {
                  this.quaternion.setFromEuler(e, !0);
                }
              },
              {
                key: "setRotationFromMatrix",
                value: function (e) {
                  this.quaternion.setFromRotationMatrix(e);
                }
              },
              {
                key: "setRotationFromQuaternion",
                value: function (e) {
                  this.quaternion.copy(e);
                }
              },
              {
                key: "rotateOnAxis",
                value: function (e, t) {
                  return (
                    Fp.setFromAxisAngle(e, t),
                    this.quaternion.multiply(Fp),
                    this
                  );
                }
              },
              {
                key: "rotateOnWorldAxis",
                value: function (e, t) {
                  return (
                    Fp.setFromAxisAngle(e, t),
                    this.quaternion.premultiply(Fp),
                    this
                  );
                }
              },
              {
                key: "rotateX",
                value: function (e) {
                  return this.rotateOnAxis(Gp, e);
                }
              },
              {
                key: "rotateY",
                value: function (e) {
                  return this.rotateOnAxis(Wp, e);
                }
              },
              {
                key: "rotateZ",
                value: function (e) {
                  return this.rotateOnAxis(jp, e);
                }
              },
              {
                key: "translateOnAxis",
                value: function (e, t) {
                  return (
                    Np.copy(e).applyQuaternion(this.quaternion),
                    this.position.add(Np.multiplyScalar(t)),
                    this
                  );
                }
              },
              {
                key: "translateX",
                value: function (e) {
                  return this.translateOnAxis(Gp, e);
                }
              },
              {
                key: "translateY",
                value: function (e) {
                  return this.translateOnAxis(Wp, e);
                }
              },
              {
                key: "translateZ",
                value: function (e) {
                  return this.translateOnAxis(jp, e);
                }
              },
              {
                key: "localToWorld",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    e.applyMatrix4(this.matrixWorld)
                  );
                }
              },
              {
                key: "worldToLocal",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    e.applyMatrix4(Up.copy(this.matrixWorld).invert())
                  );
                }
              },
              {
                key: "lookAt",
                value: function (e, t, n) {
                  e.isVector3 ? Bp.copy(e) : Bp.set(e, t, n);
                  var i = this.parent;
                  this.updateWorldMatrix(!0, !1),
                    zp.setFromMatrixPosition(this.matrixWorld),
                    this.isCamera || this.isLight
                      ? Up.lookAt(zp, Bp, this.up)
                      : Up.lookAt(Bp, zp, this.up),
                    this.quaternion.setFromRotationMatrix(Up),
                    i &&
                      (Up.extractRotation(i.matrixWorld),
                      Fp.setFromRotationMatrix(Up),
                      this.quaternion.premultiply(Fp.invert()));
                }
              },
              {
                key: "add",
                value: function (e) {
                  if (arguments.length > 1) {
                    for (var t = 0; t < arguments.length; t++)
                      this.add(arguments[t]);
                    return this;
                  }
                  return e === this
                    ? (console.error(
                        "THREE.Object3D.add: object can't be added as a child of itself.",
                        e
                      ),
                      this)
                    : (e && e.isObject3D
                        ? (null !== e.parent && e.parent.remove(e),
                          (e.parent = this),
                          this.children.push(e),
                          e.dispatchEvent(qp))
                        : console.error(
                            "THREE.Object3D.add: object not an instance of THREE.Object3D.",
                            e
                          ),
                      this);
                }
              },
              {
                key: "remove",
                value: function (e) {
                  if (arguments.length > 1) {
                    for (var t = 0; t < arguments.length; t++)
                      this.remove(arguments[t]);
                    return this;
                  }
                  var n = this.children.indexOf(e);
                  return (
                    -1 !== n &&
                      ((e.parent = null),
                      this.children.splice(n, 1),
                      e.dispatchEvent(Kp)),
                    this
                  );
                }
              },
              {
                key: "removeFromParent",
                value: function () {
                  var e = this.parent;
                  return null !== e && e.remove(this), this;
                }
              },
              {
                key: "clear",
                value: function () {
                  for (var e = 0; e < this.children.length; e++) {
                    var t = this.children[e];
                    (t.parent = null), t.dispatchEvent(Kp);
                  }
                  return (this.children.length = 0), this;
                }
              },
              {
                key: "attach",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    Up.copy(this.matrixWorld).invert(),
                    null !== e.parent &&
                      (e.parent.updateWorldMatrix(!0, !1),
                      Up.multiply(e.parent.matrixWorld)),
                    e.applyMatrix4(Up),
                    this.add(e),
                    e.updateWorldMatrix(!1, !0),
                    this
                  );
                }
              },
              {
                key: "getObjectById",
                value: function (e) {
                  return this.getObjectByProperty("id", e);
                }
              },
              {
                key: "getObjectByName",
                value: function (e) {
                  return this.getObjectByProperty("name", e);
                }
              },
              {
                key: "getObjectByProperty",
                value: function (e, t) {
                  if (this[e] === t) return this;
                  for (var n = 0, i = this.children.length; n < i; n++) {
                    var r = this.children[n].getObjectByProperty(e, t);
                    if (void 0 !== r) return r;
                  }
                }
              },
              {
                key: "getObjectsByProperty",
                value: function (e, t) {
                  var n = [];
                  this[e] === t && n.push(this);
                  for (var i = 0, r = this.children.length; i < r; i++) {
                    var a = this.children[i].getObjectsByProperty(e, t);
                    a.length > 0 && (n = n.concat(a));
                  }
                  return n;
                }
              },
              {
                key: "getWorldPosition",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    e.setFromMatrixPosition(this.matrixWorld)
                  );
                }
              },
              {
                key: "getWorldQuaternion",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    this.matrixWorld.decompose(zp, e, Vp),
                    e
                  );
                }
              },
              {
                key: "getWorldScale",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    this.matrixWorld.decompose(zp, Hp, e),
                    e
                  );
                }
              },
              {
                key: "getWorldDirection",
                value: function (e) {
                  this.updateWorldMatrix(!0, !1);
                  var t = this.matrixWorld.elements;
                  return e.set(t[8], t[9], t[10]).normalize();
                }
              },
              { key: "raycast", value: function () {} },
              {
                key: "traverse",
                value: function (e) {
                  e(this);
                  for (var t = this.children, n = 0, i = t.length; n < i; n++)
                    t[n].traverse(e);
                }
              },
              {
                key: "traverseVisible",
                value: function (e) {
                  if (!1 !== this.visible) {
                    e(this);
                    for (var t = this.children, n = 0, i = t.length; n < i; n++)
                      t[n].traverseVisible(e);
                  }
                }
              },
              {
                key: "traverseAncestors",
                value: function (e) {
                  var t = this.parent;
                  null !== t && (e(t), t.traverseAncestors(e));
                }
              },
              {
                key: "updateMatrix",
                value: function () {
                  this.matrix.compose(
                    this.position,
                    this.quaternion,
                    this.scale
                  ),
                    (this.matrixWorldNeedsUpdate = !0);
                }
              },
              {
                key: "updateMatrixWorld",
                value: function (e) {
                  this.matrixAutoUpdate && this.updateMatrix(),
                    (this.matrixWorldNeedsUpdate || e) &&
                      (null === this.parent
                        ? this.matrixWorld.copy(this.matrix)
                        : this.matrixWorld.multiplyMatrices(
                            this.parent.matrixWorld,
                            this.matrix
                          ),
                      (this.matrixWorldNeedsUpdate = !1),
                      (e = !0));
                  for (var t = this.children, n = 0, i = t.length; n < i; n++) {
                    var r = t[n];
                    (!0 === r.matrixWorldAutoUpdate || !0 === e) &&
                      r.updateMatrixWorld(e);
                  }
                }
              },
              {
                key: "updateWorldMatrix",
                value: function (e, t) {
                  var n = this.parent;
                  if (
                    (!0 === e &&
                      null !== n &&
                      !0 === n.matrixWorldAutoUpdate &&
                      n.updateWorldMatrix(!0, !1),
                    this.matrixAutoUpdate && this.updateMatrix(),
                    null === this.parent
                      ? this.matrixWorld.copy(this.matrix)
                      : this.matrixWorld.multiplyMatrices(
                          this.parent.matrixWorld,
                          this.matrix
                        ),
                    !0 === t)
                  )
                    for (
                      var i = this.children, r = 0, a = i.length;
                      r < a;
                      r++
                    ) {
                      var o = i[r];
                      !0 === o.matrixWorldAutoUpdate &&
                        o.updateWorldMatrix(!1, !0);
                    }
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var t = void 0 === e || "string" == typeof e,
                    n = {};
                  t &&
                    ((e = {
                      geometries: {},
                      materials: {},
                      textures: {},
                      images: {},
                      shapes: {},
                      skeletons: {},
                      animations: {},
                      nodes: {}
                    }),
                    (n.metadata = {
                      version: 4.5,
                      type: "Object",
                      generator: "Object3D.toJSON"
                    }));
                  var i = {};
                  function r(t, n) {
                    return (
                      void 0 === t[n.uuid] && (t[n.uuid] = n.toJSON(e)), n.uuid
                    );
                  }
                  if (
                    ((i.uuid = this.uuid),
                    (i.type = this.type),
                    "" !== this.name && (i.name = this.name),
                    !0 === this.castShadow && (i.castShadow = !0),
                    !0 === this.receiveShadow && (i.receiveShadow = !0),
                    !1 === this.visible && (i.visible = !1),
                    !1 === this.frustumCulled && (i.frustumCulled = !1),
                    0 !== this.renderOrder &&
                      (i.renderOrder = this.renderOrder),
                    Object.keys(this.userData).length > 0 &&
                      (i.userData = this.userData),
                    (i.layers = this.layers.mask),
                    (i.matrix = this.matrix.toArray()),
                    (i.up = this.up.toArray()),
                    !1 === this.matrixAutoUpdate && (i.matrixAutoUpdate = !1),
                    this.isInstancedMesh &&
                      ((i.type = "InstancedMesh"),
                      (i.count = this.count),
                      (i.instanceMatrix = this.instanceMatrix.toJSON()),
                      null !== this.instanceColor &&
                        (i.instanceColor = this.instanceColor.toJSON())),
                    this.isScene)
                  )
                    this.background &&
                      (this.background.isColor
                        ? (i.background = this.background.toJSON())
                        : this.background.isTexture &&
                          (i.background = this.background.toJSON(e).uuid)),
                      this.environment &&
                        this.environment.isTexture &&
                        !0 !== this.environment.isRenderTargetTexture &&
                        (i.environment = this.environment.toJSON(e).uuid);
                  else if (this.isMesh || this.isLine || this.isPoints) {
                    i.geometry = r(e.geometries, this.geometry);
                    var a = this.geometry.parameters;
                    if (void 0 !== a && void 0 !== a.shapes) {
                      var o = a.shapes;
                      if (Array.isArray(o))
                        for (var s = 0, l = o.length; s < l; s++) {
                          var u = o[s];
                          r(e.shapes, u);
                        }
                      else r(e.shapes, o);
                    }
                  }
                  if (
                    (this.isSkinnedMesh &&
                      ((i.bindMode = this.bindMode),
                      (i.bindMatrix = this.bindMatrix.toArray()),
                      void 0 !== this.skeleton &&
                        (r(e.skeletons, this.skeleton),
                        (i.skeleton = this.skeleton.uuid))),
                    void 0 !== this.material)
                  )
                    if (Array.isArray(this.material)) {
                      for (
                        var c = [], h = 0, d = this.material.length;
                        h < d;
                        h++
                      )
                        c.push(r(e.materials, this.material[h]));
                      i.material = c;
                    } else i.material = r(e.materials, this.material);
                  if (this.children.length > 0) {
                    i.children = [];
                    for (var p = 0; p < this.children.length; p++)
                      i.children.push(this.children[p].toJSON(e).object);
                  }
                  if (this.animations.length > 0) {
                    i.animations = [];
                    for (var f = 0; f < this.animations.length; f++) {
                      var v = this.animations[f];
                      i.animations.push(r(e.animations, v));
                    }
                  }
                  if (t) {
                    var m = M(e.geometries),
                      g = M(e.materials),
                      _ = M(e.textures),
                      y = M(e.images),
                      b = M(e.shapes),
                      x = M(e.skeletons),
                      w = M(e.animations),
                      S = M(e.nodes);
                    m.length > 0 && (n.geometries = m),
                      g.length > 0 && (n.materials = g),
                      _.length > 0 && (n.textures = _),
                      y.length > 0 && (n.images = y),
                      b.length > 0 && (n.shapes = b),
                      x.length > 0 && (n.skeletons = x),
                      w.length > 0 && (n.animations = w),
                      S.length > 0 && (n.nodes = S);
                  }
                  return (n.object = i), n;
                  function M(e) {
                    var t = [];
                    for (var n in e) {
                      var i = e[n];
                      delete i.metadata, t.push(i);
                    }
                    return t;
                  }
                }
              },
              {
                key: "clone",
                value: function (e) {
                  return new this.constructor().copy(this, e);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  var t =
                    !(arguments.length > 1 && void 0 !== arguments[1]) ||
                    arguments[1];
                  if (
                    ((this.name = e.name),
                    this.up.copy(e.up),
                    this.position.copy(e.position),
                    (this.rotation.order = e.rotation.order),
                    this.quaternion.copy(e.quaternion),
                    this.scale.copy(e.scale),
                    this.matrix.copy(e.matrix),
                    this.matrixWorld.copy(e.matrixWorld),
                    (this.matrixAutoUpdate = e.matrixAutoUpdate),
                    (this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate),
                    (this.matrixWorldAutoUpdate = e.matrixWorldAutoUpdate),
                    (this.layers.mask = e.layers.mask),
                    (this.visible = e.visible),
                    (this.castShadow = e.castShadow),
                    (this.receiveShadow = e.receiveShadow),
                    (this.frustumCulled = e.frustumCulled),
                    (this.renderOrder = e.renderOrder),
                    (this.userData = JSON.parse(JSON.stringify(e.userData))),
                    !0 === t)
                  )
                    for (var n = 0; n < e.children.length; n++) {
                      var i = e.children[n];
                      this.add(i.clone());
                    }
                  return this;
                }
              }
            ])
          );
        })(cd);
      (Xp.DEFAULT_UP = new Kd(0, 1, 0)),
        (Xp.DEFAULT_MATRIX_AUTO_UPDATE = !0),
        (Xp.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = !0);
      var Yp = new Kd(),
        Zp = new Kd(),
        Jp = new Kd(),
        Qp = new Kd(),
        $p = new Kd(),
        ef = new Kd(),
        tf = new Kd(),
        nf = new Kd(),
        rf = new Kd(),
        af = new Kd(),
        of = !1,
        sf = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new Kd(),
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new Kd(),
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : new Kd();
            gh(this, e), (this.a = t), (this.b = n), (this.c = i);
          }
          return yh(
            e,
            [
              {
                key: "set",
                value: function (e, t, n) {
                  return this.a.copy(e), this.b.copy(t), this.c.copy(n), this;
                }
              },
              {
                key: "setFromPointsAndIndices",
                value: function (e, t, n, i) {
                  return (
                    this.a.copy(e[t]),
                    this.b.copy(e[n]),
                    this.c.copy(e[i]),
                    this
                  );
                }
              },
              {
                key: "setFromAttributeAndIndices",
                value: function (e, t, n, i) {
                  return (
                    this.a.fromBufferAttribute(e, t),
                    this.b.fromBufferAttribute(e, n),
                    this.c.fromBufferAttribute(e, i),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this
                  );
                }
              },
              {
                key: "getArea",
                value: function () {
                  return (
                    Yp.subVectors(this.c, this.b),
                    Zp.subVectors(this.a, this.b),
                    0.5 * Yp.cross(Zp).length()
                  );
                }
              },
              {
                key: "getMidpoint",
                value: function (e) {
                  return e
                    .addVectors(this.a, this.b)
                    .add(this.c)
                    .multiplyScalar(1 / 3);
                }
              },
              {
                key: "getNormal",
                value: function (t) {
                  return e.getNormal(this.a, this.b, this.c, t);
                }
              },
              {
                key: "getPlane",
                value: function (e) {
                  return e.setFromCoplanarPoints(this.a, this.b, this.c);
                }
              },
              {
                key: "getBarycoord",
                value: function (t, n) {
                  return e.getBarycoord(t, this.a, this.b, this.c, n);
                }
              },
              {
                key: "getUV",
                value: function (t, n, i, r, a) {
                  return (
                    !1 === of &&
                      (console.warn(
                        "THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."
                      ),
                      (of = !0)),
                    e.getInterpolation(t, this.a, this.b, this.c, n, i, r, a)
                  );
                }
              },
              {
                key: "getInterpolation",
                value: function (t, n, i, r, a) {
                  return e.getInterpolation(
                    t,
                    this.a,
                    this.b,
                    this.c,
                    n,
                    i,
                    r,
                    a
                  );
                }
              },
              {
                key: "containsPoint",
                value: function (t) {
                  return e.containsPoint(t, this.a, this.b, this.c);
                }
              },
              {
                key: "isFrontFacing",
                value: function (t) {
                  return e.isFrontFacing(this.a, this.b, this.c, t);
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return e.intersectsTriangle(this);
                }
              },
              {
                key: "closestPointToPoint",
                value: function (e, t) {
                  var n,
                    i,
                    r = this.a,
                    a = this.b,
                    o = this.c;
                  $p.subVectors(a, r), ef.subVectors(o, r), nf.subVectors(e, r);
                  var s = $p.dot(nf),
                    l = ef.dot(nf);
                  if (s <= 0 && l <= 0) return t.copy(r);
                  rf.subVectors(e, a);
                  var u = $p.dot(rf),
                    c = ef.dot(rf);
                  if (u >= 0 && c <= u) return t.copy(a);
                  var h = s * c - u * l;
                  if (h <= 0 && s >= 0 && u <= 0)
                    return (n = s / (s - u)), t.copy(r).addScaledVector($p, n);
                  af.subVectors(e, o);
                  var d = $p.dot(af),
                    p = ef.dot(af);
                  if (p >= 0 && d <= p) return t.copy(o);
                  var f = d * l - s * p;
                  if (f <= 0 && l >= 0 && p <= 0)
                    return (i = l / (l - p)), t.copy(r).addScaledVector(ef, i);
                  var v = u * p - d * c;
                  if (v <= 0 && c - u >= 0 && d - p >= 0)
                    return (
                      tf.subVectors(o, a),
                      (i = (c - u) / (c - u + (d - p))),
                      t.copy(a).addScaledVector(tf, i)
                    );
                  var m = 1 / (v + f + h);
                  return (
                    (n = f * m),
                    (i = h * m),
                    t.copy(r).addScaledVector($p, n).addScaledVector(ef, i)
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e.a.equals(this.a) &&
                    e.b.equals(this.b) &&
                    e.c.equals(this.c)
                  );
                }
              }
            ],
            [
              {
                key: "getNormal",
                value: function (e, t, n, i) {
                  i.subVectors(n, t), Yp.subVectors(e, t), i.cross(Yp);
                  var r = i.lengthSq();
                  return r > 0
                    ? i.multiplyScalar(1 / Math.sqrt(r))
                    : i.set(0, 0, 0);
                }
              },
              {
                key: "getBarycoord",
                value: function (e, t, n, i, r) {
                  Yp.subVectors(i, t), Zp.subVectors(n, t), Jp.subVectors(e, t);
                  var a = Yp.dot(Yp),
                    o = Yp.dot(Zp),
                    s = Yp.dot(Jp),
                    l = Zp.dot(Zp),
                    u = Zp.dot(Jp),
                    c = a * l - o * o;
                  if (0 === c) return r.set(-2, -1, -1);
                  var h = 1 / c,
                    d = (l * s - o * u) * h,
                    p = (a * u - o * s) * h;
                  return r.set(1 - d - p, p, d);
                }
              },
              {
                key: "containsPoint",
                value: function (e, t, n, i) {
                  return (
                    this.getBarycoord(e, t, n, i, Qp),
                    Qp.x >= 0 && Qp.y >= 0 && Qp.x + Qp.y <= 1
                  );
                }
              },
              {
                key: "getUV",
                value: function (e, t, n, i, r, a, o, s) {
                  return (
                    !1 === of &&
                      (console.warn(
                        "THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."
                      ),
                      (of = !0)),
                    this.getInterpolation(e, t, n, i, r, a, o, s)
                  );
                }
              },
              {
                key: "getInterpolation",
                value: function (e, t, n, i, r, a, o, s) {
                  return (
                    this.getBarycoord(e, t, n, i, Qp),
                    s.setScalar(0),
                    s.addScaledVector(r, Qp.x),
                    s.addScaledVector(a, Qp.y),
                    s.addScaledVector(o, Qp.z),
                    s
                  );
                }
              },
              {
                key: "isFrontFacing",
                value: function (e, t, n, i) {
                  return (
                    Yp.subVectors(n, t),
                    Zp.subVectors(e, t),
                    Yp.cross(Zp).dot(i) < 0
                  );
                }
              }
            ]
          );
        })(),
        lf = 0,
        uf = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t),
              ((e = uh(this, t)).isMaterial = !0),
              Object.defineProperty(ch(e), "id", { value: lf++ }),
              (e.uuid = fd()),
              (e.name = ""),
              (e.type = "Material"),
              (e.blending = 1),
              (e.side = 0),
              (e.vertexColors = !1),
              (e.opacity = 1),
              (e.transparent = !1),
              (e.blendSrc = 204),
              (e.blendDst = 205),
              (e.blendEquation = Mh),
              (e.blendSrcAlpha = null),
              (e.blendDstAlpha = null),
              (e.blendEquationAlpha = null),
              (e.depthFunc = 3),
              (e.depthTest = !0),
              (e.depthWrite = !0),
              (e.stencilWriteMask = 255),
              (e.stencilFunc = 519),
              (e.stencilRef = 0),
              (e.stencilFuncMask = 255),
              (e.stencilFail = od),
              (e.stencilZFail = od),
              (e.stencilZPass = od),
              (e.stencilWrite = !1),
              (e.clippingPlanes = null),
              (e.clipIntersection = !1),
              (e.clipShadows = !1),
              (e.shadowSide = null),
              (e.colorWrite = !0),
              (e.precision = null),
              (e.polygonOffset = !1),
              (e.polygonOffsetFactor = 0),
              (e.polygonOffsetUnits = 0),
              (e.dithering = !1),
              (e.alphaToCoverage = !1),
              (e.premultipliedAlpha = !1),
              (e.forceSinglePass = !1),
              (e.visible = !0),
              (e.toneMapped = !0),
              (e.userData = {}),
              (e.version = 0),
              (e._alphaTest = 0),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "alphaTest",
                get: function () {
                  return this._alphaTest;
                },
                set: function (e) {
                  this._alphaTest > 0 != e > 0 && this.version++,
                    (this._alphaTest = e);
                }
              },
              { key: "onBuild", value: function () {} },
              { key: "onBeforeRender", value: function () {} },
              { key: "onBeforeCompile", value: function () {} },
              {
                key: "customProgramCacheKey",
                value: function () {
                  return this.onBeforeCompile.toString();
                }
              },
              {
                key: "setValues",
                value: function (e) {
                  if (void 0 !== e)
                    for (var t in e) {
                      var n = e[t];
                      if (void 0 !== n) {
                        var i = this[t];
                        void 0 !== i
                          ? i && i.isColor
                            ? i.set(n)
                            : i && i.isVector3 && n && n.isVector3
                            ? i.copy(n)
                            : (this[t] = n)
                          : console.warn(
                              "THREE.Material: '"
                                .concat(t, "' is not a property of THREE.")
                                .concat(this.type, ".")
                            );
                      } else
                        console.warn(
                          "THREE.Material: parameter '".concat(
                            t,
                            "' has value of undefined."
                          )
                        );
                    }
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var t = void 0 === e || "string" == typeof e;
                  t && (e = { textures: {}, images: {} });
                  var n = {
                    metadata: {
                      version: 4.5,
                      type: "Material",
                      generator: "Material.toJSON"
                    }
                  };
                  function i(e) {
                    var t = [];
                    for (var n in e) {
                      var i = e[n];
                      delete i.metadata, t.push(i);
                    }
                    return t;
                  }
                  if (
                    ((n.uuid = this.uuid),
                    (n.type = this.type),
                    "" !== this.name && (n.name = this.name),
                    this.color &&
                      this.color.isColor &&
                      (n.color = this.color.getHex()),
                    void 0 !== this.roughness && (n.roughness = this.roughness),
                    void 0 !== this.metalness && (n.metalness = this.metalness),
                    void 0 !== this.sheen && (n.sheen = this.sheen),
                    this.sheenColor &&
                      this.sheenColor.isColor &&
                      (n.sheenColor = this.sheenColor.getHex()),
                    void 0 !== this.sheenRoughness &&
                      (n.sheenRoughness = this.sheenRoughness),
                    this.emissive &&
                      this.emissive.isColor &&
                      (n.emissive = this.emissive.getHex()),
                    this.emissiveIntensity &&
                      1 !== this.emissiveIntensity &&
                      (n.emissiveIntensity = this.emissiveIntensity),
                    this.specular &&
                      this.specular.isColor &&
                      (n.specular = this.specular.getHex()),
                    void 0 !== this.specularIntensity &&
                      (n.specularIntensity = this.specularIntensity),
                    this.specularColor &&
                      this.specularColor.isColor &&
                      (n.specularColor = this.specularColor.getHex()),
                    void 0 !== this.shininess && (n.shininess = this.shininess),
                    void 0 !== this.clearcoat && (n.clearcoat = this.clearcoat),
                    void 0 !== this.clearcoatRoughness &&
                      (n.clearcoatRoughness = this.clearcoatRoughness),
                    this.clearcoatMap &&
                      this.clearcoatMap.isTexture &&
                      (n.clearcoatMap = this.clearcoatMap.toJSON(e).uuid),
                    this.clearcoatRoughnessMap &&
                      this.clearcoatRoughnessMap.isTexture &&
                      (n.clearcoatRoughnessMap =
                        this.clearcoatRoughnessMap.toJSON(e).uuid),
                    this.clearcoatNormalMap &&
                      this.clearcoatNormalMap.isTexture &&
                      ((n.clearcoatNormalMap =
                        this.clearcoatNormalMap.toJSON(e).uuid),
                      (n.clearcoatNormalScale =
                        this.clearcoatNormalScale.toArray())),
                    void 0 !== this.iridescence &&
                      (n.iridescence = this.iridescence),
                    void 0 !== this.iridescenceIOR &&
                      (n.iridescenceIOR = this.iridescenceIOR),
                    void 0 !== this.iridescenceThicknessRange &&
                      (n.iridescenceThicknessRange =
                        this.iridescenceThicknessRange),
                    this.iridescenceMap &&
                      this.iridescenceMap.isTexture &&
                      (n.iridescenceMap = this.iridescenceMap.toJSON(e).uuid),
                    this.iridescenceThicknessMap &&
                      this.iridescenceThicknessMap.isTexture &&
                      (n.iridescenceThicknessMap =
                        this.iridescenceThicknessMap.toJSON(e).uuid),
                    this.map &&
                      this.map.isTexture &&
                      (n.map = this.map.toJSON(e).uuid),
                    this.matcap &&
                      this.matcap.isTexture &&
                      (n.matcap = this.matcap.toJSON(e).uuid),
                    this.alphaMap &&
                      this.alphaMap.isTexture &&
                      (n.alphaMap = this.alphaMap.toJSON(e).uuid),
                    this.lightMap &&
                      this.lightMap.isTexture &&
                      ((n.lightMap = this.lightMap.toJSON(e).uuid),
                      (n.lightMapIntensity = this.lightMapIntensity)),
                    this.aoMap &&
                      this.aoMap.isTexture &&
                      ((n.aoMap = this.aoMap.toJSON(e).uuid),
                      (n.aoMapIntensity = this.aoMapIntensity)),
                    this.bumpMap &&
                      this.bumpMap.isTexture &&
                      ((n.bumpMap = this.bumpMap.toJSON(e).uuid),
                      (n.bumpScale = this.bumpScale)),
                    this.normalMap &&
                      this.normalMap.isTexture &&
                      ((n.normalMap = this.normalMap.toJSON(e).uuid),
                      (n.normalMapType = this.normalMapType),
                      (n.normalScale = this.normalScale.toArray())),
                    this.displacementMap &&
                      this.displacementMap.isTexture &&
                      ((n.displacementMap =
                        this.displacementMap.toJSON(e).uuid),
                      (n.displacementScale = this.displacementScale),
                      (n.displacementBias = this.displacementBias)),
                    this.roughnessMap &&
                      this.roughnessMap.isTexture &&
                      (n.roughnessMap = this.roughnessMap.toJSON(e).uuid),
                    this.metalnessMap &&
                      this.metalnessMap.isTexture &&
                      (n.metalnessMap = this.metalnessMap.toJSON(e).uuid),
                    this.emissiveMap &&
                      this.emissiveMap.isTexture &&
                      (n.emissiveMap = this.emissiveMap.toJSON(e).uuid),
                    this.specularMap &&
                      this.specularMap.isTexture &&
                      (n.specularMap = this.specularMap.toJSON(e).uuid),
                    this.specularIntensityMap &&
                      this.specularIntensityMap.isTexture &&
                      (n.specularIntensityMap =
                        this.specularIntensityMap.toJSON(e).uuid),
                    this.specularColorMap &&
                      this.specularColorMap.isTexture &&
                      (n.specularColorMap =
                        this.specularColorMap.toJSON(e).uuid),
                    this.envMap &&
                      this.envMap.isTexture &&
                      ((n.envMap = this.envMap.toJSON(e).uuid),
                      void 0 !== this.combine && (n.combine = this.combine)),
                    void 0 !== this.envMapIntensity &&
                      (n.envMapIntensity = this.envMapIntensity),
                    void 0 !== this.reflectivity &&
                      (n.reflectivity = this.reflectivity),
                    void 0 !== this.refractionRatio &&
                      (n.refractionRatio = this.refractionRatio),
                    this.gradientMap &&
                      this.gradientMap.isTexture &&
                      (n.gradientMap = this.gradientMap.toJSON(e).uuid),
                    void 0 !== this.transmission &&
                      (n.transmission = this.transmission),
                    this.transmissionMap &&
                      this.transmissionMap.isTexture &&
                      (n.transmissionMap = this.transmissionMap.toJSON(e).uuid),
                    void 0 !== this.thickness && (n.thickness = this.thickness),
                    this.thicknessMap &&
                      this.thicknessMap.isTexture &&
                      (n.thicknessMap = this.thicknessMap.toJSON(e).uuid),
                    void 0 !== this.attenuationDistance &&
                      this.attenuationDistance !== 1 / 0 &&
                      (n.attenuationDistance = this.attenuationDistance),
                    void 0 !== this.attenuationColor &&
                      (n.attenuationColor = this.attenuationColor.getHex()),
                    void 0 !== this.size && (n.size = this.size),
                    null !== this.shadowSide &&
                      (n.shadowSide = this.shadowSide),
                    void 0 !== this.sizeAttenuation &&
                      (n.sizeAttenuation = this.sizeAttenuation),
                    1 !== this.blending && (n.blending = this.blending),
                    0 !== this.side && (n.side = this.side),
                    this.vertexColors && (n.vertexColors = !0),
                    this.opacity < 1 && (n.opacity = this.opacity),
                    !0 === this.transparent &&
                      (n.transparent = this.transparent),
                    (n.depthFunc = this.depthFunc),
                    (n.depthTest = this.depthTest),
                    (n.depthWrite = this.depthWrite),
                    (n.colorWrite = this.colorWrite),
                    (n.stencilWrite = this.stencilWrite),
                    (n.stencilWriteMask = this.stencilWriteMask),
                    (n.stencilFunc = this.stencilFunc),
                    (n.stencilRef = this.stencilRef),
                    (n.stencilFuncMask = this.stencilFuncMask),
                    (n.stencilFail = this.stencilFail),
                    (n.stencilZFail = this.stencilZFail),
                    (n.stencilZPass = this.stencilZPass),
                    void 0 !== this.rotation &&
                      0 !== this.rotation &&
                      (n.rotation = this.rotation),
                    !0 === this.polygonOffset && (n.polygonOffset = !0),
                    0 !== this.polygonOffsetFactor &&
                      (n.polygonOffsetFactor = this.polygonOffsetFactor),
                    0 !== this.polygonOffsetUnits &&
                      (n.polygonOffsetUnits = this.polygonOffsetUnits),
                    void 0 !== this.linewidth &&
                      1 !== this.linewidth &&
                      (n.linewidth = this.linewidth),
                    void 0 !== this.dashSize && (n.dashSize = this.dashSize),
                    void 0 !== this.gapSize && (n.gapSize = this.gapSize),
                    void 0 !== this.scale && (n.scale = this.scale),
                    !0 === this.dithering && (n.dithering = !0),
                    this.alphaTest > 0 && (n.alphaTest = this.alphaTest),
                    !0 === this.alphaToCoverage &&
                      (n.alphaToCoverage = this.alphaToCoverage),
                    !0 === this.premultipliedAlpha &&
                      (n.premultipliedAlpha = this.premultipliedAlpha),
                    !0 === this.forceSinglePass &&
                      (n.forceSinglePass = this.forceSinglePass),
                    !0 === this.wireframe && (n.wireframe = this.wireframe),
                    this.wireframeLinewidth > 1 &&
                      (n.wireframeLinewidth = this.wireframeLinewidth),
                    "round" !== this.wireframeLinecap &&
                      (n.wireframeLinecap = this.wireframeLinecap),
                    "round" !== this.wireframeLinejoin &&
                      (n.wireframeLinejoin = this.wireframeLinejoin),
                    !0 === this.flatShading &&
                      (n.flatShading = this.flatShading),
                    !1 === this.visible && (n.visible = !1),
                    !1 === this.toneMapped && (n.toneMapped = !1),
                    !1 === this.fog && (n.fog = !1),
                    Object.keys(this.userData).length > 0 &&
                      (n.userData = this.userData),
                    t)
                  ) {
                    var r = i(e.textures),
                      a = i(e.images);
                    r.length > 0 && (n.textures = r),
                      a.length > 0 && (n.images = a);
                  }
                  return n;
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  (this.name = e.name),
                    (this.blending = e.blending),
                    (this.side = e.side),
                    (this.vertexColors = e.vertexColors),
                    (this.opacity = e.opacity),
                    (this.transparent = e.transparent),
                    (this.blendSrc = e.blendSrc),
                    (this.blendDst = e.blendDst),
                    (this.blendEquation = e.blendEquation),
                    (this.blendSrcAlpha = e.blendSrcAlpha),
                    (this.blendDstAlpha = e.blendDstAlpha),
                    (this.blendEquationAlpha = e.blendEquationAlpha),
                    (this.depthFunc = e.depthFunc),
                    (this.depthTest = e.depthTest),
                    (this.depthWrite = e.depthWrite),
                    (this.stencilWriteMask = e.stencilWriteMask),
                    (this.stencilFunc = e.stencilFunc),
                    (this.stencilRef = e.stencilRef),
                    (this.stencilFuncMask = e.stencilFuncMask),
                    (this.stencilFail = e.stencilFail),
                    (this.stencilZFail = e.stencilZFail),
                    (this.stencilZPass = e.stencilZPass),
                    (this.stencilWrite = e.stencilWrite);
                  var t = e.clippingPlanes,
                    n = null;
                  if (null !== t) {
                    var i = t.length;
                    n = new Array(i);
                    for (var r = 0; r !== i; ++r) n[r] = t[r].clone();
                  }
                  return (
                    (this.clippingPlanes = n),
                    (this.clipIntersection = e.clipIntersection),
                    (this.clipShadows = e.clipShadows),
                    (this.shadowSide = e.shadowSide),
                    (this.colorWrite = e.colorWrite),
                    (this.precision = e.precision),
                    (this.polygonOffset = e.polygonOffset),
                    (this.polygonOffsetFactor = e.polygonOffsetFactor),
                    (this.polygonOffsetUnits = e.polygonOffsetUnits),
                    (this.dithering = e.dithering),
                    (this.alphaTest = e.alphaTest),
                    (this.alphaToCoverage = e.alphaToCoverage),
                    (this.premultipliedAlpha = e.premultipliedAlpha),
                    (this.forceSinglePass = e.forceSinglePass),
                    (this.visible = e.visible),
                    (this.toneMapped = e.toneMapped),
                    (this.userData = JSON.parse(JSON.stringify(e.userData))),
                    this
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              },
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && this.version++;
                }
              }
            ])
          );
        })(cd),
        cf = {
          aliceblue: 15792383,
          antiquewhite: 16444375,
          aqua: 65535,
          aquamarine: 8388564,
          azure: 15794175,
          beige: 16119260,
          bisque: 16770244,
          black: 0,
          blanchedalmond: 16772045,
          blue: 255,
          blueviolet: 9055202,
          brown: 10824234,
          burlywood: 14596231,
          cadetblue: 6266528,
          chartreuse: 8388352,
          chocolate: 13789470,
          coral: 16744272,
          cornflowerblue: 6591981,
          cornsilk: 16775388,
          crimson: 14423100,
          cyan: 65535,
          darkblue: 139,
          darkcyan: 35723,
          darkgoldenrod: 12092939,
          darkgray: 11119017,
          darkgreen: 25600,
          darkgrey: 11119017,
          darkkhaki: 12433259,
          darkmagenta: 9109643,
          darkolivegreen: 5597999,
          darkorange: 16747520,
          darkorchid: 10040012,
          darkred: 9109504,
          darksalmon: 15308410,
          darkseagreen: 9419919,
          darkslateblue: 4734347,
          darkslategray: 3100495,
          darkslategrey: 3100495,
          darkturquoise: 52945,
          darkviolet: 9699539,
          deeppink: 16716947,
          deepskyblue: 49151,
          dimgray: 6908265,
          dimgrey: 6908265,
          dodgerblue: 2003199,
          firebrick: 11674146,
          floralwhite: 16775920,
          forestgreen: 2263842,
          fuchsia: 16711935,
          gainsboro: 14474460,
          ghostwhite: 16316671,
          gold: 16766720,
          goldenrod: 14329120,
          gray: 8421504,
          green: 32768,
          greenyellow: 11403055,
          grey: 8421504,
          honeydew: 15794160,
          hotpink: 16738740,
          indianred: 13458524,
          indigo: 4915330,
          ivory: 16777200,
          khaki: 15787660,
          lavender: 15132410,
          lavenderblush: 16773365,
          lawngreen: 8190976,
          lemonchiffon: 16775885,
          lightblue: 11393254,
          lightcoral: 15761536,
          lightcyan: 14745599,
          lightgoldenrodyellow: 16448210,
          lightgray: 13882323,
          lightgreen: 9498256,
          lightgrey: 13882323,
          lightpink: 16758465,
          lightsalmon: 16752762,
          lightseagreen: 2142890,
          lightskyblue: 8900346,
          lightslategray: 7833753,
          lightslategrey: 7833753,
          lightsteelblue: 11584734,
          lightyellow: 16777184,
          lime: 65280,
          limegreen: 3329330,
          linen: 16445670,
          magenta: 16711935,
          maroon: 8388608,
          mediumaquamarine: 6737322,
          mediumblue: 205,
          mediumorchid: 12211667,
          mediumpurple: 9662683,
          mediumseagreen: 3978097,
          mediumslateblue: 8087790,
          mediumspringgreen: 64154,
          mediumturquoise: 4772300,
          mediumvioletred: 13047173,
          midnightblue: 1644912,
          mintcream: 16121850,
          mistyrose: 16770273,
          moccasin: 16770229,
          navajowhite: 16768685,
          navy: 128,
          oldlace: 16643558,
          olive: 8421376,
          olivedrab: 7048739,
          orange: 16753920,
          orangered: 16729344,
          orchid: 14315734,
          palegoldenrod: 15657130,
          palegreen: 10025880,
          paleturquoise: 11529966,
          palevioletred: 14381203,
          papayawhip: 16773077,
          peachpuff: 16767673,
          peru: 13468991,
          pink: 16761035,
          plum: 14524637,
          powderblue: 11591910,
          purple: 8388736,
          rebeccapurple: 6697881,
          red: 16711680,
          rosybrown: 12357519,
          royalblue: 4286945,
          saddlebrown: 9127187,
          salmon: 16416882,
          sandybrown: 16032864,
          seagreen: 3050327,
          seashell: 16774638,
          sienna: 10506797,
          silver: 12632256,
          skyblue: 8900331,
          slateblue: 6970061,
          slategray: 7372944,
          slategrey: 7372944,
          snow: 16775930,
          springgreen: 65407,
          steelblue: 4620980,
          tan: 13808780,
          teal: 32896,
          thistle: 14204888,
          tomato: 16737095,
          turquoise: 4251856,
          violet: 15631086,
          wheat: 16113331,
          white: 16777215,
          whitesmoke: 16119285,
          yellow: 16776960,
          yellowgreen: 10145074
        },
        hf = { h: 0, s: 0, l: 0 },
        df = { h: 0, s: 0, l: 0 };
      function pf(e, t, n) {
        return (
          n < 0 && (n += 1),
          n > 1 && (n -= 1),
          n < 1 / 6
            ? e + 6 * (t - e) * n
            : n < 0.5
            ? t
            : n < 2 / 3
            ? e + 6 * (t - e) * (2 / 3 - n)
            : e
        );
      }
      var ff = (function () {
          return yh(
            function e(t, n, i) {
              return (
                gh(this, e),
                (this.isColor = !0),
                (this.r = 1),
                (this.g = 1),
                (this.b = 1),
                void 0 === n && void 0 === i
                  ? this.set(t)
                  : this.setRGB(t, n, i)
              );
            },
            [
              {
                key: "set",
                value: function (e) {
                  return (
                    e && e.isColor
                      ? this.copy(e)
                      : "number" == typeof e
                      ? this.setHex(e)
                      : "string" == typeof e && this.setStyle(e),
                    this
                  );
                }
              },
              {
                key: "setScalar",
                value: function (e) {
                  return (this.r = e), (this.g = e), (this.b = e), this;
                }
              },
              {
                key: "setHex",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : id;
                  return (
                    (e = Math.floor(e)),
                    (this.r = ((e >> 16) & 255) / 255),
                    (this.g = ((e >> 8) & 255) / 255),
                    (this.b = (255 & e) / 255),
                    Nd.toWorkingColorSpace(this, t),
                    this
                  );
                }
              },
              {
                key: "setRGB",
                value: function (e, t, n) {
                  var i =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : Nd.workingColorSpace;
                  return (
                    (this.r = e),
                    (this.g = t),
                    (this.b = n),
                    Nd.toWorkingColorSpace(this, i),
                    this
                  );
                }
              },
              {
                key: "setHSL",
                value: function (e, t, n) {
                  var i =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : Nd.workingColorSpace;
                  if (
                    ((e = md(e, 1)),
                    (t = vd(t, 0, 1)),
                    (n = vd(n, 0, 1)),
                    0 === t)
                  )
                    this.r = this.g = this.b = n;
                  else {
                    var r = n <= 0.5 ? n * (1 + t) : n + t - n * t,
                      a = 2 * n - r;
                    (this.r = pf(a, r, e + 1 / 3)),
                      (this.g = pf(a, r, e)),
                      (this.b = pf(a, r, e - 1 / 3));
                  }
                  return Nd.toWorkingColorSpace(this, i), this;
                }
              },
              {
                key: "setStyle",
                value: function (e) {
                  var t,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : id;
                  function i(t) {
                    void 0 !== t &&
                      parseFloat(t) < 1 &&
                      console.warn(
                        "THREE.Color: Alpha component of " +
                          e +
                          " will be ignored."
                      );
                  }
                  if ((t = /^(\w+)\(([^\)]*)\)/.exec(e))) {
                    var r,
                      a = t[1],
                      o = t[2];
                    switch (a) {
                      case "rgb":
                      case "rgba":
                        if (
                          (r =
                            /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                              o
                            ))
                        )
                          return (
                            (this.r = Math.min(255, parseInt(r[1], 10)) / 255),
                            (this.g = Math.min(255, parseInt(r[2], 10)) / 255),
                            (this.b = Math.min(255, parseInt(r[3], 10)) / 255),
                            Nd.toWorkingColorSpace(this, n),
                            i(r[4]),
                            this
                          );
                        if (
                          (r =
                            /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                              o
                            ))
                        )
                          return (
                            (this.r = Math.min(100, parseInt(r[1], 10)) / 100),
                            (this.g = Math.min(100, parseInt(r[2], 10)) / 100),
                            (this.b = Math.min(100, parseInt(r[3], 10)) / 100),
                            Nd.toWorkingColorSpace(this, n),
                            i(r[4]),
                            this
                          );
                        break;
                      case "hsl":
                      case "hsla":
                        if (
                          (r =
                            /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                              o
                            ))
                        ) {
                          var s = parseFloat(r[1]) / 360,
                            l = parseFloat(r[2]) / 100,
                            u = parseFloat(r[3]) / 100;
                          return i(r[4]), this.setHSL(s, l, u, n);
                        }
                        break;
                      default:
                        console.warn("THREE.Color: Unknown color model " + e);
                    }
                  } else if ((t = /^\#([A-Fa-f\d]+)$/.exec(e))) {
                    var c = t[1],
                      h = c.length;
                    if (3 === h)
                      return this.setRGB(
                        parseInt(c.charAt(0), 16) / 15,
                        parseInt(c.charAt(1), 16) / 15,
                        parseInt(c.charAt(2), 16) / 15,
                        n
                      );
                    if (6 === h) return this.setHex(parseInt(c, 16), n);
                    console.warn("THREE.Color: Invalid hex color " + e);
                  } else if (e && e.length > 0) return this.setColorName(e, n);
                  return this;
                }
              },
              {
                key: "setColorName",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : id,
                    n = cf[e.toLowerCase()];
                  return (
                    void 0 !== n
                      ? this.setHex(n, t)
                      : console.warn("THREE.Color: Unknown color " + e),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.r, this.g, this.b);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (this.r = e.r), (this.g = e.g), (this.b = e.b), this;
                }
              },
              {
                key: "copySRGBToLinear",
                value: function (e) {
                  return (
                    (this.r = Dd(e.r)),
                    (this.g = Dd(e.g)),
                    (this.b = Dd(e.b)),
                    this
                  );
                }
              },
              {
                key: "copyLinearToSRGB",
                value: function (e) {
                  return (
                    (this.r = Ad(e.r)),
                    (this.g = Ad(e.g)),
                    (this.b = Ad(e.b)),
                    this
                  );
                }
              },
              {
                key: "convertSRGBToLinear",
                value: function () {
                  return this.copySRGBToLinear(this), this;
                }
              },
              {
                key: "convertLinearToSRGB",
                value: function () {
                  return this.copyLinearToSRGB(this), this;
                }
              },
              {
                key: "getHex",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : id;
                  return (
                    Nd.fromWorkingColorSpace(vf.copy(this), e),
                    (vd(255 * vf.r, 0, 255) << 16) ^
                      (vd(255 * vf.g, 0, 255) << 8) ^
                      vd(255 * vf.b, 0, 255)
                  );
                }
              },
              {
                key: "getHexString",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : id;
                  return ("000000" + this.getHex(e).toString(16)).slice(-6);
                }
              },
              {
                key: "getHSL",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : Nd.workingColorSpace;
                  Nd.fromWorkingColorSpace(vf.copy(this), t);
                  var n,
                    i,
                    r = vf.r,
                    a = vf.g,
                    o = vf.b,
                    s = Math.max(r, a, o),
                    l = Math.min(r, a, o),
                    u = (l + s) / 2;
                  if (l === s) (n = 0), (i = 0);
                  else {
                    var c = s - l;
                    switch (
                      ((i = u <= 0.5 ? c / (s + l) : c / (2 - s - l)), s)
                    ) {
                      case r:
                        n = (a - o) / c + (a < o ? 6 : 0);
                        break;
                      case a:
                        n = (o - r) / c + 2;
                        break;
                      case o:
                        n = (r - a) / c + 4;
                    }
                    n /= 6;
                  }
                  return (e.h = n), (e.s = i), (e.l = u), e;
                }
              },
              {
                key: "getRGB",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : Nd.workingColorSpace;
                  return (
                    Nd.fromWorkingColorSpace(vf.copy(this), t),
                    (e.r = vf.r),
                    (e.g = vf.g),
                    (e.b = vf.b),
                    e
                  );
                }
              },
              {
                key: "getStyle",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : id;
                  Nd.fromWorkingColorSpace(vf.copy(this), e);
                  var t = vf.r,
                    n = vf.g,
                    i = vf.b;
                  return e !== id
                    ? "color("
                        .concat(e, " ")
                        .concat(t.toFixed(3), " ")
                        .concat(n.toFixed(3), " ")
                        .concat(i.toFixed(3), ")")
                    : "rgb("
                        .concat((255 * t) | 0, ",")
                        .concat((255 * n) | 0, ",")
                        .concat((255 * i) | 0, ")");
                }
              },
              {
                key: "offsetHSL",
                value: function (e, t, n) {
                  return (
                    this.getHSL(hf),
                    (hf.h += e),
                    (hf.s += t),
                    (hf.l += n),
                    this.setHSL(hf.h, hf.s, hf.l),
                    this
                  );
                }
              },
              {
                key: "add",
                value: function (e) {
                  return (
                    (this.r += e.r), (this.g += e.g), (this.b += e.b), this
                  );
                }
              },
              {
                key: "addColors",
                value: function (e, t) {
                  return (
                    (this.r = e.r + t.r),
                    (this.g = e.g + t.g),
                    (this.b = e.b + t.b),
                    this
                  );
                }
              },
              {
                key: "addScalar",
                value: function (e) {
                  return (this.r += e), (this.g += e), (this.b += e), this;
                }
              },
              {
                key: "sub",
                value: function (e) {
                  return (
                    (this.r = Math.max(0, this.r - e.r)),
                    (this.g = Math.max(0, this.g - e.g)),
                    (this.b = Math.max(0, this.b - e.b)),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return (
                    (this.r *= e.r), (this.g *= e.g), (this.b *= e.b), this
                  );
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  return (this.r *= e), (this.g *= e), (this.b *= e), this;
                }
              },
              {
                key: "lerp",
                value: function (e, t) {
                  return (
                    (this.r += (e.r - this.r) * t),
                    (this.g += (e.g - this.g) * t),
                    (this.b += (e.b - this.b) * t),
                    this
                  );
                }
              },
              {
                key: "lerpColors",
                value: function (e, t, n) {
                  return (
                    (this.r = e.r + (t.r - e.r) * n),
                    (this.g = e.g + (t.g - e.g) * n),
                    (this.b = e.b + (t.b - e.b) * n),
                    this
                  );
                }
              },
              {
                key: "lerpHSL",
                value: function (e, t) {
                  this.getHSL(hf), e.getHSL(df);
                  var n = gd(hf.h, df.h, t),
                    i = gd(hf.s, df.s, t),
                    r = gd(hf.l, df.l, t);
                  return this.setHSL(n, i, r), this;
                }
              },
              {
                key: "setFromVector3",
                value: function (e) {
                  return (this.r = e.x), (this.g = e.y), (this.b = e.z), this;
                }
              },
              {
                key: "applyMatrix3",
                value: function (e) {
                  var t = this.r,
                    n = this.g,
                    i = this.b,
                    r = e.elements;
                  return (
                    (this.r = r[0] * t + r[3] * n + r[6] * i),
                    (this.g = r[1] * t + r[4] * n + r[7] * i),
                    (this.b = r[2] * t + r[5] * n + r[8] * i),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.r === this.r && e.g === this.g && e.b === this.b;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (
                    (this.r = e[t]),
                    (this.g = e[t + 1]),
                    (this.b = e[t + 2]),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this.r), (e[t + 1] = this.g), (e[t + 2] = this.b), e
                  );
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (
                    (this.r = e.getX(t)),
                    (this.g = e.getY(t)),
                    (this.b = e.getZ(t)),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function () {
                  return this.getHex();
                }
              },
              {
                key: Symbol.iterator,
                value: mh().mark(function e() {
                  return mh().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this.r;
                          case 2:
                            return (e.next = 4), this.g;
                          case 4:
                            return (e.next = 6), this.b;
                          case 6:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]
          );
        })(),
        vf = new ff();
      ff.NAMES = cf;
      var mf = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t)).isMeshBasicMaterial = !0),
              (n.type = "MeshBasicMaterial"),
              (n.color = new ff(16777215)),
              (n.map = null),
              (n.lightMap = null),
              (n.lightMapIntensity = 1),
              (n.aoMap = null),
              (n.aoMapIntensity = 1),
              (n.specularMap = null),
              (n.alphaMap = null),
              (n.envMap = null),
              (n.combine = 0),
              (n.reflectivity = 1),
              (n.refractionRatio = 0.98),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              (n.wireframeLinecap = "round"),
              (n.wireframeLinejoin = "round"),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    this.color.copy(e.color),
                    (this.map = e.map),
                    (this.lightMap = e.lightMap),
                    (this.lightMapIntensity = e.lightMapIntensity),
                    (this.aoMap = e.aoMap),
                    (this.aoMapIntensity = e.aoMapIntensity),
                    (this.specularMap = e.specularMap),
                    (this.alphaMap = e.alphaMap),
                    (this.envMap = e.envMap),
                    (this.combine = e.combine),
                    (this.reflectivity = e.reflectivity),
                    (this.refractionRatio = e.refractionRatio),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    (this.wireframeLinecap = e.wireframeLinecap),
                    (this.wireframeLinejoin = e.wireframeLinejoin),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ])
          );
        })(uf),
        gf = new Kd(),
        _f = new Md(),
        yf = (function () {
          return yh(
            function e(t, n) {
              var i =
                arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
              if ((gh(this, e), Array.isArray(t)))
                throw new TypeError(
                  "THREE.BufferAttribute: array should be a Typed Array."
                );
              (this.isBufferAttribute = !0),
                (this.name = ""),
                (this.array = t),
                (this.itemSize = n),
                (this.count = void 0 !== t ? t.length / n : 0),
                (this.normalized = i),
                (this.usage = sd),
                (this.updateRange = { offset: 0, count: -1 }),
                (this.version = 0);
            },
            [
              { key: "onUploadCallback", value: function () {} },
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && this.version++;
                }
              },
              {
                key: "setUsage",
                value: function (e) {
                  return (this.usage = e), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.name = e.name),
                    (this.array = new e.array.constructor(e.array)),
                    (this.itemSize = e.itemSize),
                    (this.count = e.count),
                    (this.normalized = e.normalized),
                    (this.usage = e.usage),
                    this
                  );
                }
              },
              {
                key: "copyAt",
                value: function (e, t, n) {
                  (e *= this.itemSize), (n *= t.itemSize);
                  for (var i = 0, r = this.itemSize; i < r; i++)
                    this.array[e + i] = t.array[n + i];
                  return this;
                }
              },
              {
                key: "copyArray",
                value: function (e) {
                  return this.array.set(e), this;
                }
              },
              {
                key: "applyMatrix3",
                value: function (e) {
                  if (2 === this.itemSize)
                    for (var t = 0, n = this.count; t < n; t++)
                      _f.fromBufferAttribute(this, t),
                        _f.applyMatrix3(e),
                        this.setXY(t, _f.x, _f.y);
                  else if (3 === this.itemSize)
                    for (var i = 0, r = this.count; i < r; i++)
                      gf.fromBufferAttribute(this, i),
                        gf.applyMatrix3(e),
                        this.setXYZ(i, gf.x, gf.y, gf.z);
                  return this;
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  for (var t = 0, n = this.count; t < n; t++)
                    gf.fromBufferAttribute(this, t),
                      gf.applyMatrix4(e),
                      this.setXYZ(t, gf.x, gf.y, gf.z);
                  return this;
                }
              },
              {
                key: "applyNormalMatrix",
                value: function (e) {
                  for (var t = 0, n = this.count; t < n; t++)
                    gf.fromBufferAttribute(this, t),
                      gf.applyNormalMatrix(e),
                      this.setXYZ(t, gf.x, gf.y, gf.z);
                  return this;
                }
              },
              {
                key: "transformDirection",
                value: function (e) {
                  for (var t = 0, n = this.count; t < n; t++)
                    gf.fromBufferAttribute(this, t),
                      gf.transformDirection(e),
                      this.setXYZ(t, gf.x, gf.y, gf.z);
                  return this;
                }
              },
              {
                key: "set",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return this.array.set(e, t), this;
                }
              },
              {
                key: "getX",
                value: function (e) {
                  var t = this.array[e * this.itemSize];
                  return this.normalized && (t = xd(t, this.array)), t;
                }
              },
              {
                key: "setX",
                value: function (e, t) {
                  return (
                    this.normalized && (t = wd(t, this.array)),
                    (this.array[e * this.itemSize] = t),
                    this
                  );
                }
              },
              {
                key: "getY",
                value: function (e) {
                  var t = this.array[e * this.itemSize + 1];
                  return this.normalized && (t = xd(t, this.array)), t;
                }
              },
              {
                key: "setY",
                value: function (e, t) {
                  return (
                    this.normalized && (t = wd(t, this.array)),
                    (this.array[e * this.itemSize + 1] = t),
                    this
                  );
                }
              },
              {
                key: "getZ",
                value: function (e) {
                  var t = this.array[e * this.itemSize + 2];
                  return this.normalized && (t = xd(t, this.array)), t;
                }
              },
              {
                key: "setZ",
                value: function (e, t) {
                  return (
                    this.normalized && (t = wd(t, this.array)),
                    (this.array[e * this.itemSize + 2] = t),
                    this
                  );
                }
              },
              {
                key: "getW",
                value: function (e) {
                  var t = this.array[e * this.itemSize + 3];
                  return this.normalized && (t = xd(t, this.array)), t;
                }
              },
              {
                key: "setW",
                value: function (e, t) {
                  return (
                    this.normalized && (t = wd(t, this.array)),
                    (this.array[e * this.itemSize + 3] = t),
                    this
                  );
                }
              },
              {
                key: "setXY",
                value: function (e, t, n) {
                  return (
                    (e *= this.itemSize),
                    this.normalized &&
                      ((t = wd(t, this.array)), (n = wd(n, this.array))),
                    (this.array[e + 0] = t),
                    (this.array[e + 1] = n),
                    this
                  );
                }
              },
              {
                key: "setXYZ",
                value: function (e, t, n, i) {
                  return (
                    (e *= this.itemSize),
                    this.normalized &&
                      ((t = wd(t, this.array)),
                      (n = wd(n, this.array)),
                      (i = wd(i, this.array))),
                    (this.array[e + 0] = t),
                    (this.array[e + 1] = n),
                    (this.array[e + 2] = i),
                    this
                  );
                }
              },
              {
                key: "setXYZW",
                value: function (e, t, n, i, r) {
                  return (
                    (e *= this.itemSize),
                    this.normalized &&
                      ((t = wd(t, this.array)),
                      (n = wd(n, this.array)),
                      (i = wd(i, this.array)),
                      (r = wd(r, this.array))),
                    (this.array[e + 0] = t),
                    (this.array[e + 1] = n),
                    (this.array[e + 2] = i),
                    (this.array[e + 3] = r),
                    this
                  );
                }
              },
              {
                key: "onUpload",
                value: function (e) {
                  return (this.onUploadCallback = e), this;
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.array, this.itemSize).copy(
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = {
                    itemSize: this.itemSize,
                    type: this.array.constructor.name,
                    array: Array.from(this.array),
                    normalized: this.normalized
                  };
                  return (
                    "" !== this.name && (e.name = this.name),
                    this.usage !== sd && (e.usage = this.usage),
                    (0 !== this.updateRange.offset ||
                      -1 !== this.updateRange.count) &&
                      (e.updateRange = this.updateRange),
                    e
                  );
                }
              },
              {
                key: "copyColorsArray",
                value: function () {
                  console.error(
                    "THREE.BufferAttribute: copyColorsArray() was removed in r144."
                  );
                }
              },
              {
                key: "copyVector2sArray",
                value: function () {
                  console.error(
                    "THREE.BufferAttribute: copyVector2sArray() was removed in r144."
                  );
                }
              },
              {
                key: "copyVector3sArray",
                value: function () {
                  console.error(
                    "THREE.BufferAttribute: copyVector3sArray() was removed in r144."
                  );
                }
              },
              {
                key: "copyVector4sArray",
                value: function () {
                  console.error(
                    "THREE.BufferAttribute: copyVector4sArray() was removed in r144."
                  );
                }
              }
            ]
          );
        })(),
        bf = (function (e) {
          function t(e, n, i) {
            return gh(this, t), uh(this, t, [new Uint16Array(e), n, i]);
          }
          return ph(t, e), yh(t);
        })(yf),
        xf = (function (e) {
          function t(e, n, i) {
            return gh(this, t), uh(this, t, [new Uint32Array(e), n, i]);
          }
          return ph(t, e), yh(t);
        })(yf),
        wf = (function (e) {
          function t(e, n, i) {
            return gh(this, t), uh(this, t, [new Float32Array(e), n, i]);
          }
          return ph(t, e), yh(t);
        })(yf),
        Sf = 0,
        Mf = new Sp(),
        Tf = new Xp(),
        kf = new Kd(),
        Ef = new Zd(),
        Cf = new Zd(),
        Df = new Kd(),
        Af = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t),
              ((e = uh(this, t)).isBufferGeometry = !0),
              Object.defineProperty(ch(e), "id", { value: Sf++ }),
              (e.uuid = fd()),
              (e.name = ""),
              (e.type = "BufferGeometry"),
              (e.index = null),
              (e.attributes = {}),
              (e.morphAttributes = {}),
              (e.morphTargetsRelative = !1),
              (e.groups = []),
              (e.boundingBox = null),
              (e.boundingSphere = null),
              (e.drawRange = { start: 0, count: 1 / 0 }),
              (e.userData = {}),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "getIndex",
                value: function () {
                  return this.index;
                }
              },
              {
                key: "setIndex",
                value: function (e) {
                  return (
                    Array.isArray(e)
                      ? (this.index = new (Ed(e) ? xf : bf)(e, 1))
                      : (this.index = e),
                    this
                  );
                }
              },
              {
                key: "getAttribute",
                value: function (e) {
                  return this.attributes[e];
                }
              },
              {
                key: "setAttribute",
                value: function (e, t) {
                  return (this.attributes[e] = t), this;
                }
              },
              {
                key: "deleteAttribute",
                value: function (e) {
                  return delete this.attributes[e], this;
                }
              },
              {
                key: "hasAttribute",
                value: function (e) {
                  return void 0 !== this.attributes[e];
                }
              },
              {
                key: "addGroup",
                value: function (e, t) {
                  var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0;
                  this.groups.push({ start: e, count: t, materialIndex: n });
                }
              },
              {
                key: "clearGroups",
                value: function () {
                  this.groups = [];
                }
              },
              {
                key: "setDrawRange",
                value: function (e, t) {
                  (this.drawRange.start = e), (this.drawRange.count = t);
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  var t = this.attributes.position;
                  void 0 !== t && (t.applyMatrix4(e), (t.needsUpdate = !0));
                  var n = this.attributes.normal;
                  if (void 0 !== n) {
                    var i = new Td().getNormalMatrix(e);
                    n.applyNormalMatrix(i), (n.needsUpdate = !0);
                  }
                  var r = this.attributes.tangent;
                  return (
                    void 0 !== r &&
                      (r.transformDirection(e), (r.needsUpdate = !0)),
                    null !== this.boundingBox && this.computeBoundingBox(),
                    null !== this.boundingSphere &&
                      this.computeBoundingSphere(),
                    this
                  );
                }
              },
              {
                key: "applyQuaternion",
                value: function (e) {
                  return (
                    Mf.makeRotationFromQuaternion(e),
                    this.applyMatrix4(Mf),
                    this
                  );
                }
              },
              {
                key: "rotateX",
                value: function (e) {
                  return Mf.makeRotationX(e), this.applyMatrix4(Mf), this;
                }
              },
              {
                key: "rotateY",
                value: function (e) {
                  return Mf.makeRotationY(e), this.applyMatrix4(Mf), this;
                }
              },
              {
                key: "rotateZ",
                value: function (e) {
                  return Mf.makeRotationZ(e), this.applyMatrix4(Mf), this;
                }
              },
              {
                key: "translate",
                value: function (e, t, n) {
                  return (
                    Mf.makeTranslation(e, t, n), this.applyMatrix4(Mf), this
                  );
                }
              },
              {
                key: "scale",
                value: function (e, t, n) {
                  return Mf.makeScale(e, t, n), this.applyMatrix4(Mf), this;
                }
              },
              {
                key: "lookAt",
                value: function (e) {
                  return (
                    Tf.lookAt(e),
                    Tf.updateMatrix(),
                    this.applyMatrix4(Tf.matrix),
                    this
                  );
                }
              },
              {
                key: "center",
                value: function () {
                  return (
                    this.computeBoundingBox(),
                    this.boundingBox.getCenter(kf).negate(),
                    this.translate(kf.x, kf.y, kf.z),
                    this
                  );
                }
              },
              {
                key: "setFromPoints",
                value: function (e) {
                  for (var t = [], n = 0, i = e.length; n < i; n++) {
                    var r = e[n];
                    t.push(r.x, r.y, r.z || 0);
                  }
                  return this.setAttribute("position", new wf(t, 3)), this;
                }
              },
              {
                key: "computeBoundingBox",
                value: function () {
                  null === this.boundingBox && (this.boundingBox = new Zd());
                  var e = this.attributes.position,
                    t = this.morphAttributes.position;
                  if (e && e.isGLBufferAttribute)
                    return (
                      console.error(
                        'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
                        this
                      ),
                      void this.boundingBox.set(
                        new Kd(-1 / 0, -1 / 0, -1 / 0),
                        new Kd(1 / 0, 1 / 0, 1 / 0)
                      )
                    );
                  if (void 0 !== e) {
                    if ((this.boundingBox.setFromBufferAttribute(e), t))
                      for (var n = 0, i = t.length; n < i; n++) {
                        var r = t[n];
                        Ef.setFromBufferAttribute(r),
                          this.morphTargetsRelative
                            ? (Df.addVectors(this.boundingBox.min, Ef.min),
                              this.boundingBox.expandByPoint(Df),
                              Df.addVectors(this.boundingBox.max, Ef.max),
                              this.boundingBox.expandByPoint(Df))
                            : (this.boundingBox.expandByPoint(Ef.min),
                              this.boundingBox.expandByPoint(Ef.max));
                      }
                  } else this.boundingBox.makeEmpty();
                  (isNaN(this.boundingBox.min.x) ||
                    isNaN(this.boundingBox.min.y) ||
                    isNaN(this.boundingBox.min.z)) &&
                    console.error(
                      'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
                      this
                    );
                }
              },
              {
                key: "computeBoundingSphere",
                value: function () {
                  null === this.boundingSphere &&
                    (this.boundingSphere = new fp());
                  var e = this.attributes.position,
                    t = this.morphAttributes.position;
                  if (e && e.isGLBufferAttribute)
                    return (
                      console.error(
                        'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
                        this
                      ),
                      void this.boundingSphere.set(new Kd(), 1 / 0)
                    );
                  if (e) {
                    var n = this.boundingSphere.center;
                    if ((Ef.setFromBufferAttribute(e), t))
                      for (var i = 0, r = t.length; i < r; i++) {
                        var a = t[i];
                        Cf.setFromBufferAttribute(a),
                          this.morphTargetsRelative
                            ? (Df.addVectors(Ef.min, Cf.min),
                              Ef.expandByPoint(Df),
                              Df.addVectors(Ef.max, Cf.max),
                              Ef.expandByPoint(Df))
                            : (Ef.expandByPoint(Cf.min),
                              Ef.expandByPoint(Cf.max));
                      }
                    Ef.getCenter(n);
                    for (var o = 0, s = 0, l = e.count; s < l; s++)
                      Df.fromBufferAttribute(e, s),
                        (o = Math.max(o, n.distanceToSquared(Df)));
                    if (t)
                      for (var u = 0, c = t.length; u < c; u++)
                        for (
                          var h = t[u],
                            d = this.morphTargetsRelative,
                            p = 0,
                            f = h.count;
                          p < f;
                          p++
                        )
                          Df.fromBufferAttribute(h, p),
                            d && (kf.fromBufferAttribute(e, p), Df.add(kf)),
                            (o = Math.max(o, n.distanceToSquared(Df)));
                    (this.boundingSphere.radius = Math.sqrt(o)),
                      isNaN(this.boundingSphere.radius) &&
                        console.error(
                          'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                          this
                        );
                  }
                }
              },
              {
                key: "computeTangents",
                value: function () {
                  var e = this.index,
                    t = this.attributes;
                  if (
                    null !== e &&
                    void 0 !== t.position &&
                    void 0 !== t.normal &&
                    void 0 !== t.uv
                  ) {
                    var n = e.array,
                      i = t.position.array,
                      r = t.normal.array,
                      a = t.uv.array,
                      o = i.length / 3;
                    !1 === this.hasAttribute("tangent") &&
                      this.setAttribute(
                        "tangent",
                        new yf(new Float32Array(4 * o), 4)
                      );
                    for (
                      var s = this.getAttribute("tangent").array,
                        l = [],
                        u = [],
                        c = 0;
                      c < o;
                      c++
                    )
                      (l[c] = new Kd()), (u[c] = new Kd());
                    var h = new Kd(),
                      d = new Kd(),
                      p = new Kd(),
                      f = new Md(),
                      v = new Md(),
                      m = new Md(),
                      g = new Kd(),
                      _ = new Kd(),
                      y = this.groups;
                    0 === y.length && (y = [{ start: 0, count: n.length }]);
                    for (var b = 0, x = y.length; b < x; ++b)
                      for (
                        var w = y[b], S = w.start, M = S, T = S + w.count;
                        M < T;
                        M += 3
                      )
                        N(n[M + 0], n[M + 1], n[M + 2]);
                    for (
                      var k = new Kd(),
                        E = new Kd(),
                        C = new Kd(),
                        D = new Kd(),
                        A = 0,
                        P = y.length;
                      A < P;
                      ++A
                    )
                      for (
                        var L = y[A], R = L.start, I = R, O = R + L.count;
                        I < O;
                        I += 3
                      )
                        F(n[I + 0]), F(n[I + 1]), F(n[I + 2]);
                  } else
                    console.error(
                      "THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)"
                    );
                  function N(e, t, n) {
                    h.fromArray(i, 3 * e),
                      d.fromArray(i, 3 * t),
                      p.fromArray(i, 3 * n),
                      f.fromArray(a, 2 * e),
                      v.fromArray(a, 2 * t),
                      m.fromArray(a, 2 * n),
                      d.sub(h),
                      p.sub(h),
                      v.sub(f),
                      m.sub(f);
                    var r = 1 / (v.x * m.y - m.x * v.y);
                    isFinite(r) &&
                      (g
                        .copy(d)
                        .multiplyScalar(m.y)
                        .addScaledVector(p, -v.y)
                        .multiplyScalar(r),
                      _.copy(p)
                        .multiplyScalar(v.x)
                        .addScaledVector(d, -m.x)
                        .multiplyScalar(r),
                      l[e].add(g),
                      l[t].add(g),
                      l[n].add(g),
                      u[e].add(_),
                      u[t].add(_),
                      u[n].add(_));
                  }
                  function F(e) {
                    C.fromArray(r, 3 * e), D.copy(C);
                    var t = l[e];
                    k.copy(t),
                      k.sub(C.multiplyScalar(C.dot(t))).normalize(),
                      E.crossVectors(D, t);
                    var n = E.dot(u[e]) < 0 ? -1 : 1;
                    (s[4 * e] = k.x),
                      (s[4 * e + 1] = k.y),
                      (s[4 * e + 2] = k.z),
                      (s[4 * e + 3] = n);
                  }
                }
              },
              {
                key: "computeVertexNormals",
                value: function () {
                  var e = this.index,
                    t = this.getAttribute("position");
                  if (void 0 !== t) {
                    var n = this.getAttribute("normal");
                    if (void 0 === n)
                      (n = new yf(new Float32Array(3 * t.count), 3)),
                        this.setAttribute("normal", n);
                    else
                      for (var i = 0, r = n.count; i < r; i++)
                        n.setXYZ(i, 0, 0, 0);
                    var a = new Kd(),
                      o = new Kd(),
                      s = new Kd(),
                      l = new Kd(),
                      u = new Kd(),
                      c = new Kd(),
                      h = new Kd(),
                      d = new Kd();
                    if (e)
                      for (var p = 0, f = e.count; p < f; p += 3) {
                        var v = e.getX(p + 0),
                          m = e.getX(p + 1),
                          g = e.getX(p + 2);
                        a.fromBufferAttribute(t, v),
                          o.fromBufferAttribute(t, m),
                          s.fromBufferAttribute(t, g),
                          h.subVectors(s, o),
                          d.subVectors(a, o),
                          h.cross(d),
                          l.fromBufferAttribute(n, v),
                          u.fromBufferAttribute(n, m),
                          c.fromBufferAttribute(n, g),
                          l.add(h),
                          u.add(h),
                          c.add(h),
                          n.setXYZ(v, l.x, l.y, l.z),
                          n.setXYZ(m, u.x, u.y, u.z),
                          n.setXYZ(g, c.x, c.y, c.z);
                      }
                    else
                      for (var _ = 0, y = t.count; _ < y; _ += 3)
                        a.fromBufferAttribute(t, _ + 0),
                          o.fromBufferAttribute(t, _ + 1),
                          s.fromBufferAttribute(t, _ + 2),
                          h.subVectors(s, o),
                          d.subVectors(a, o),
                          h.cross(d),
                          n.setXYZ(_ + 0, h.x, h.y, h.z),
                          n.setXYZ(_ + 1, h.x, h.y, h.z),
                          n.setXYZ(_ + 2, h.x, h.y, h.z);
                    this.normalizeNormals(), (n.needsUpdate = !0);
                  }
                }
              },
              {
                key: "merge",
                value: function () {
                  return (
                    console.error(
                      "THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."
                    ),
                    this
                  );
                }
              },
              {
                key: "normalizeNormals",
                value: function () {
                  for (
                    var e = this.attributes.normal, t = 0, n = e.count;
                    t < n;
                    t++
                  )
                    Df.fromBufferAttribute(e, t),
                      Df.normalize(),
                      e.setXYZ(t, Df.x, Df.y, Df.z);
                }
              },
              {
                key: "toNonIndexed",
                value: function () {
                  function e(e, t) {
                    for (
                      var n = e.array,
                        i = e.itemSize,
                        r = e.normalized,
                        a = new n.constructor(t.length * i),
                        o = 0,
                        s = 0,
                        l = 0,
                        u = t.length;
                      l < u;
                      l++
                    ) {
                      o = e.isInterleavedBufferAttribute
                        ? t[l] * e.data.stride + e.offset
                        : t[l] * i;
                      for (var c = 0; c < i; c++) a[s++] = n[o++];
                    }
                    return new yf(a, i, r);
                  }
                  if (null === this.index)
                    return (
                      console.warn(
                        "THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."
                      ),
                      this
                    );
                  var n = new t(),
                    i = this.index.array,
                    r = this.attributes;
                  for (var a in r) {
                    var o = e(r[a], i);
                    n.setAttribute(a, o);
                  }
                  var s = this.morphAttributes;
                  for (var l in s) {
                    for (
                      var u = [], c = s[l], h = 0, d = c.length;
                      h < d;
                      h++
                    ) {
                      var p = e(c[h], i);
                      u.push(p);
                    }
                    n.morphAttributes[l] = u;
                  }
                  n.morphTargetsRelative = this.morphTargetsRelative;
                  for (var f = this.groups, v = 0, m = f.length; v < m; v++) {
                    var g = f[v];
                    n.addGroup(g.start, g.count, g.materialIndex);
                  }
                  return n;
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = {
                    metadata: {
                      version: 4.5,
                      type: "BufferGeometry",
                      generator: "BufferGeometry.toJSON"
                    }
                  };
                  if (
                    ((e.uuid = this.uuid),
                    (e.type = this.type),
                    "" !== this.name && (e.name = this.name),
                    Object.keys(this.userData).length > 0 &&
                      (e.userData = this.userData),
                    void 0 !== this.parameters)
                  ) {
                    var t = this.parameters;
                    for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
                    return e;
                  }
                  e.data = { attributes: {} };
                  var i = this.index;
                  null !== i &&
                    (e.data.index = {
                      type: i.array.constructor.name,
                      array: Array.prototype.slice.call(i.array)
                    });
                  var r = this.attributes;
                  for (var a in r) {
                    var o = r[a];
                    e.data.attributes[a] = o.toJSON(e.data);
                  }
                  var s = {},
                    l = !1;
                  for (var u in this.morphAttributes) {
                    for (
                      var c = this.morphAttributes[u],
                        h = [],
                        d = 0,
                        p = c.length;
                      d < p;
                      d++
                    ) {
                      var f = c[d];
                      h.push(f.toJSON(e.data));
                    }
                    h.length > 0 && ((s[u] = h), (l = !0));
                  }
                  l &&
                    ((e.data.morphAttributes = s),
                    (e.data.morphTargetsRelative = this.morphTargetsRelative));
                  var v = this.groups;
                  v.length > 0 &&
                    (e.data.groups = JSON.parse(JSON.stringify(v)));
                  var m = this.boundingSphere;
                  return (
                    null !== m &&
                      (e.data.boundingSphere = {
                        center: m.center.toArray(),
                        radius: m.radius
                      }),
                    e
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  (this.index = null),
                    (this.attributes = {}),
                    (this.morphAttributes = {}),
                    (this.groups = []),
                    (this.boundingBox = null),
                    (this.boundingSphere = null);
                  var t = {};
                  this.name = e.name;
                  var n = e.index;
                  null !== n && this.setIndex(n.clone(t));
                  var i = e.attributes;
                  for (var r in i) {
                    var a = i[r];
                    this.setAttribute(r, a.clone(t));
                  }
                  var o = e.morphAttributes;
                  for (var s in o) {
                    for (var l = [], u = o[s], c = 0, h = u.length; c < h; c++)
                      l.push(u[c].clone(t));
                    this.morphAttributes[s] = l;
                  }
                  this.morphTargetsRelative = e.morphTargetsRelative;
                  for (var d = e.groups, p = 0, f = d.length; p < f; p++) {
                    var v = d[p];
                    this.addGroup(v.start, v.count, v.materialIndex);
                  }
                  var m = e.boundingBox;
                  null !== m && (this.boundingBox = m.clone());
                  var g = e.boundingSphere;
                  return (
                    null !== g && (this.boundingSphere = g.clone()),
                    (this.drawRange.start = e.drawRange.start),
                    (this.drawRange.count = e.drawRange.count),
                    (this.userData = e.userData),
                    this
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              }
            ])
          );
        })(cd),
        Pf = new Sp(),
        Lf = new wp(),
        Rf = new fp(),
        If = new Kd(),
        Of = new Kd(),
        Nf = new Kd(),
        Ff = new Kd(),
        Uf = new Kd(),
        Bf = new Kd(),
        zf = new Md(),
        Vf = new Md(),
        Hf = new Md(),
        Gf = new Kd(),
        Wf = new Kd(),
        jf = new Kd(),
        qf = new Kd(),
        Kf = new Kd(),
        Xf = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new Af(),
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new mf();
            return (
              gh(this, t),
              ((e = uh(this, t)).isMesh = !0),
              (e.type = "Mesh"),
              (e.geometry = n),
              (e.material = i),
              e.updateMorphTargets(),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    void 0 !== e.morphTargetInfluences &&
                      (this.morphTargetInfluences =
                        e.morphTargetInfluences.slice()),
                    void 0 !== e.morphTargetDictionary &&
                      (this.morphTargetDictionary = Object.assign(
                        {},
                        e.morphTargetDictionary
                      )),
                    (this.material = e.material),
                    (this.geometry = e.geometry),
                    this
                  );
                }
              },
              {
                key: "updateMorphTargets",
                value: function () {
                  var e = this.geometry.morphAttributes,
                    t = Object.keys(e);
                  if (t.length > 0) {
                    var n = e[t[0]];
                    if (void 0 !== n) {
                      (this.morphTargetInfluences = []),
                        (this.morphTargetDictionary = {});
                      for (var i = 0, r = n.length; i < r; i++) {
                        var a = n[i].name || String(i);
                        this.morphTargetInfluences.push(0),
                          (this.morphTargetDictionary[a] = i);
                      }
                    }
                  }
                }
              },
              {
                key: "getVertexPosition",
                value: function (e, t) {
                  var n = this.geometry,
                    i = n.attributes.position,
                    r = n.morphAttributes.position,
                    a = n.morphTargetsRelative;
                  t.fromBufferAttribute(i, e);
                  var o = this.morphTargetInfluences;
                  if (r && o) {
                    Bf.set(0, 0, 0);
                    for (var s = 0, l = r.length; s < l; s++) {
                      var u = o[s],
                        c = r[s];
                      0 !== u &&
                        (Uf.fromBufferAttribute(c, e),
                        a
                          ? Bf.addScaledVector(Uf, u)
                          : Bf.addScaledVector(Uf.sub(t), u));
                    }
                    t.add(Bf);
                  }
                  return this.isSkinnedMesh && this.applyBoneTransform(e, t), t;
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.geometry,
                    i = this.material,
                    r = this.matrixWorld;
                  if (
                    void 0 !== i &&
                    (null === n.boundingSphere && n.computeBoundingSphere(),
                    Rf.copy(n.boundingSphere),
                    Rf.applyMatrix4(r),
                    Lf.copy(e.ray).recast(e.near),
                    !1 !== Rf.containsPoint(Lf.origin) ||
                      !(
                        null === Lf.intersectSphere(Rf, If) ||
                        Lf.origin.distanceToSquared(If) >
                          Math.pow(e.far - e.near, 2)
                      )) &&
                    (Pf.copy(r).invert(),
                    Lf.copy(e.ray).applyMatrix4(Pf),
                    null === n.boundingBox ||
                      !1 !== Lf.intersectsBox(n.boundingBox))
                  ) {
                    var a,
                      o = n.index,
                      s = n.attributes.position,
                      l = n.attributes.uv,
                      u = n.attributes.uv2,
                      c = n.attributes.normal,
                      h = n.groups,
                      d = n.drawRange;
                    if (null !== o) {
                      if (Array.isArray(i))
                        for (var p = 0, f = h.length; p < f; p++)
                          for (
                            var v = h[p],
                              m = i[v.materialIndex],
                              g = Math.max(v.start, d.start),
                              _ = Math.min(
                                o.count,
                                Math.min(v.start + v.count, d.start + d.count)
                              );
                            g < _;
                            g += 3
                          ) {
                            var y = o.getX(g),
                              b = o.getX(g + 1),
                              x = o.getX(g + 2);
                            (a = Yf(this, m, e, Lf, l, u, c, y, b, x)) &&
                              ((a.faceIndex = Math.floor(g / 3)),
                              (a.face.materialIndex = v.materialIndex),
                              t.push(a));
                          }
                      else
                        for (
                          var w = Math.max(0, d.start),
                            S = Math.min(o.count, d.start + d.count);
                          w < S;
                          w += 3
                        ) {
                          var M = o.getX(w),
                            T = o.getX(w + 1),
                            k = o.getX(w + 2);
                          (a = Yf(this, i, e, Lf, l, u, c, M, T, k)) &&
                            ((a.faceIndex = Math.floor(w / 3)), t.push(a));
                        }
                    } else if (void 0 !== s)
                      if (Array.isArray(i))
                        for (var E = 0, C = h.length; E < C; E++)
                          for (
                            var D = h[E],
                              A = i[D.materialIndex],
                              P = Math.max(D.start, d.start),
                              L = Math.min(
                                s.count,
                                Math.min(D.start + D.count, d.start + d.count)
                              );
                            P < L;
                            P += 3
                          )
                            (a = Yf(
                              this,
                              A,
                              e,
                              Lf,
                              l,
                              u,
                              c,
                              P,
                              P + 1,
                              P + 2
                            )) &&
                              ((a.faceIndex = Math.floor(P / 3)),
                              (a.face.materialIndex = D.materialIndex),
                              t.push(a));
                      else
                        for (
                          var R = Math.max(0, d.start),
                            I = Math.min(s.count, d.start + d.count);
                          R < I;
                          R += 3
                        )
                          (a = Yf(this, i, e, Lf, l, u, c, R, R + 1, R + 2)) &&
                            ((a.faceIndex = Math.floor(R / 3)), t.push(a));
                  }
                }
              }
            ])
          );
        })(Xp);
      function Yf(e, t, n, i, r, a, o, s, l, u) {
        e.getVertexPosition(s, Of),
          e.getVertexPosition(l, Nf),
          e.getVertexPosition(u, Ff);
        var c = (function (e, t, n, i, r, a, o, s) {
          if (
            null ===
            (1 === t.side
              ? i.intersectTriangle(o, a, r, !0, s)
              : i.intersectTriangle(r, a, o, 0 === t.side, s))
          )
            return null;
          Kf.copy(s), Kf.applyMatrix4(e.matrixWorld);
          var l = n.ray.origin.distanceTo(Kf);
          return l < n.near || l > n.far
            ? null
            : { distance: l, point: Kf.clone(), object: e };
        })(e, t, n, i, Of, Nf, Ff, qf);
        if (c) {
          r &&
            (zf.fromBufferAttribute(r, s),
            Vf.fromBufferAttribute(r, l),
            Hf.fromBufferAttribute(r, u),
            (c.uv = sf.getInterpolation(qf, Of, Nf, Ff, zf, Vf, Hf, new Md()))),
            a &&
              (zf.fromBufferAttribute(a, s),
              Vf.fromBufferAttribute(a, l),
              Hf.fromBufferAttribute(a, u),
              (c.uv2 = sf.getInterpolation(
                qf,
                Of,
                Nf,
                Ff,
                zf,
                Vf,
                Hf,
                new Md()
              ))),
            o &&
              (Gf.fromBufferAttribute(o, s),
              Wf.fromBufferAttribute(o, l),
              jf.fromBufferAttribute(o, u),
              (c.normal = sf.getInterpolation(
                qf,
                Of,
                Nf,
                Ff,
                Gf,
                Wf,
                jf,
                new Kd()
              )),
              c.normal.dot(i.direction) > 0 && c.normal.multiplyScalar(-1));
          var h = { a: s, b: l, c: u, normal: new Kd(), materialIndex: 0 };
          sf.getNormal(Of, Nf, Ff, h.normal), (c.face = h);
        }
        return c;
      }
      var Zf = (function (e) {
        function t() {
          var e,
            n =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : 1,
            i =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 1,
            r =
              arguments.length > 2 && void 0 !== arguments[2]
                ? arguments[2]
                : 1,
            a =
              arguments.length > 3 && void 0 !== arguments[3]
                ? arguments[3]
                : 1,
            o =
              arguments.length > 4 && void 0 !== arguments[4]
                ? arguments[4]
                : 1,
            s =
              arguments.length > 5 && void 0 !== arguments[5]
                ? arguments[5]
                : 1;
          gh(this, t),
            ((e = uh(this, t)).type = "BoxGeometry"),
            (e.parameters = {
              width: n,
              height: i,
              depth: r,
              widthSegments: a,
              heightSegments: o,
              depthSegments: s
            });
          var l = e;
          (a = Math.floor(a)), (o = Math.floor(o)), (s = Math.floor(s));
          var u = [],
            c = [],
            h = [],
            d = [],
            p = 0,
            f = 0;
          function v(e, t, n, i, r, a, o, s, v, m, g) {
            for (
              var _ = a / v,
                y = o / m,
                b = a / 2,
                x = o / 2,
                w = s / 2,
                S = v + 1,
                M = m + 1,
                T = 0,
                k = 0,
                E = new Kd(),
                C = 0;
              C < M;
              C++
            )
              for (var D = C * y - x, A = 0; A < S; A++) {
                var P = A * _ - b;
                (E[e] = P * i),
                  (E[t] = D * r),
                  (E[n] = w),
                  c.push(E.x, E.y, E.z),
                  (E[e] = 0),
                  (E[t] = 0),
                  (E[n] = s > 0 ? 1 : -1),
                  h.push(E.x, E.y, E.z),
                  d.push(A / v),
                  d.push(1 - C / m),
                  (T += 1);
              }
            for (var L = 0; L < m; L++)
              for (var R = 0; R < v; R++) {
                var I = p + R + S * L,
                  O = p + R + S * (L + 1),
                  N = p + (R + 1) + S * (L + 1),
                  F = p + (R + 1) + S * L;
                u.push(I, O, F), u.push(O, N, F), (k += 6);
              }
            l.addGroup(f, k, g), (f += k), (p += T);
          }
          return (
            v("z", "y", "x", -1, -1, r, i, n, s, o, 0),
            v("z", "y", "x", 1, -1, r, i, -n, s, o, 1),
            v("x", "z", "y", 1, 1, n, r, i, a, s, 2),
            v("x", "z", "y", 1, -1, n, r, -i, a, s, 3),
            v("x", "y", "z", 1, -1, n, i, r, a, o, 4),
            v("x", "y", "z", -1, -1, n, i, -r, a, o, 5),
            e.setIndex(u),
            e.setAttribute("position", new wf(c, 3)),
            e.setAttribute("normal", new wf(h, 3)),
            e.setAttribute("uv", new wf(d, 2)),
            e
          );
        }
        return (
          ph(t, e),
          yh(
            t,
            [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    (this.parameters = Object.assign({}, e.parameters)),
                    this
                  );
                }
              }
            ],
            [
              {
                key: "fromJSON",
                value: function (e) {
                  return new t(
                    e.width,
                    e.height,
                    e.depth,
                    e.widthSegments,
                    e.heightSegments,
                    e.depthSegments
                  );
                }
              }
            ]
          )
        );
      })(Af);
      function Jf(e) {
        var t = {};
        for (var n in e)
          for (var i in ((t[n] = {}), e[n])) {
            var r = e[n][i];
            r &&
            (r.isColor ||
              r.isMatrix3 ||
              r.isMatrix4 ||
              r.isVector2 ||
              r.isVector3 ||
              r.isVector4 ||
              r.isTexture ||
              r.isQuaternion)
              ? r.isRenderTargetTexture
                ? (console.warn(
                    "UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."
                  ),
                  (t[n][i] = null))
                : (t[n][i] = r.clone())
              : Array.isArray(r)
              ? (t[n][i] = r.slice())
              : (t[n][i] = r);
          }
        return t;
      }
      function Qf(e) {
        for (var t = {}, n = 0; n < e.length; n++) {
          var i = Jf(e[n]);
          for (var r in i) t[r] = i[r];
        }
        return t;
      }
      function $f(e) {
        return null === e.getRenderTarget() && e.outputEncoding === nd
          ? id
          : rd;
      }
      var ev = { clone: Jf, merge: Qf },
        tv = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t)).isShaderMaterial = !0),
              (n.type = "ShaderMaterial"),
              (n.defines = {}),
              (n.uniforms = {}),
              (n.uniformsGroups = []),
              (n.vertexShader =
                "void main() {\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }"),
              (n.fragmentShader =
                "void main() {\n      gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n  }"),
              (n.linewidth = 1),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              (n.fog = !1),
              (n.lights = !1),
              (n.clipping = !1),
              (n.forceSinglePass = !0),
              (n.extensions = {
                derivatives: !1,
                fragDepth: !1,
                drawBuffers: !1,
                shaderTextureLOD: !1
              }),
              (n.defaultAttributeValues = {
                color: [1, 1, 1],
                uv: [0, 0],
                uv2: [0, 0]
              }),
              (n.index0AttributeName = void 0),
              (n.uniformsNeedUpdate = !1),
              (n.glslVersion = null),
              void 0 !== e && n.setValues(e),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    (this.fragmentShader = e.fragmentShader),
                    (this.vertexShader = e.vertexShader),
                    (this.uniforms = Jf(e.uniforms)),
                    (this.uniformsGroups = (function (e) {
                      for (var t = [], n = 0; n < e.length; n++)
                        t.push(e[n].clone());
                      return t;
                    })(e.uniformsGroups)),
                    (this.defines = Object.assign({}, e.defines)),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    (this.fog = e.fog),
                    (this.lights = e.lights),
                    (this.clipping = e.clipping),
                    (this.extensions = Object.assign({}, e.extensions)),
                    (this.glslVersion = e.glslVersion),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = sh(t, "toJSON", this, 3)([e]);
                  for (var i in ((n.glslVersion = this.glslVersion),
                  (n.uniforms = {}),
                  this.uniforms)) {
                    var r = this.uniforms[i].value;
                    r && r.isTexture
                      ? (n.uniforms[i] = { type: "t", value: r.toJSON(e).uuid })
                      : r && r.isColor
                      ? (n.uniforms[i] = { type: "c", value: r.getHex() })
                      : r && r.isVector2
                      ? (n.uniforms[i] = { type: "v2", value: r.toArray() })
                      : r && r.isVector3
                      ? (n.uniforms[i] = { type: "v3", value: r.toArray() })
                      : r && r.isVector4
                      ? (n.uniforms[i] = { type: "v4", value: r.toArray() })
                      : r && r.isMatrix3
                      ? (n.uniforms[i] = { type: "m3", value: r.toArray() })
                      : r && r.isMatrix4
                      ? (n.uniforms[i] = { type: "m4", value: r.toArray() })
                      : (n.uniforms[i] = { value: r });
                  }
                  Object.keys(this.defines).length > 0 &&
                    (n.defines = this.defines),
                    (n.vertexShader = this.vertexShader),
                    (n.fragmentShader = this.fragmentShader);
                  var a = {};
                  for (var o in this.extensions)
                    !0 === this.extensions[o] && (a[o] = !0);
                  return Object.keys(a).length > 0 && (n.extensions = a), n;
                }
              }
            ])
          );
        })(uf),
        nv = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t),
              ((e = uh(this, t)).isCamera = !0),
              (e.type = "Camera"),
              (e.matrixWorldInverse = new Sp()),
              (e.projectionMatrix = new Sp()),
              (e.projectionMatrixInverse = new Sp()),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    this.matrixWorldInverse.copy(e.matrixWorldInverse),
                    this.projectionMatrix.copy(e.projectionMatrix),
                    this.projectionMatrixInverse.copy(
                      e.projectionMatrixInverse
                    ),
                    this
                  );
                }
              },
              {
                key: "getWorldDirection",
                value: function (e) {
                  this.updateWorldMatrix(!0, !1);
                  var t = this.matrixWorld.elements;
                  return e.set(-t[8], -t[9], -t[10]).normalize();
                }
              },
              {
                key: "updateMatrixWorld",
                value: function (e) {
                  sh(t, "updateMatrixWorld", this, 3)([e]),
                    this.matrixWorldInverse.copy(this.matrixWorld).invert();
                }
              },
              {
                key: "updateWorldMatrix",
                value: function (e, n) {
                  sh(t, "updateWorldMatrix", this, 3)([e, n]),
                    this.matrixWorldInverse.copy(this.matrixWorld).invert();
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ])
          );
        })(Xp),
        iv = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 50,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0.1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 2e3;
            return (
              gh(this, t),
              ((e = uh(this, t)).isPerspectiveCamera = !0),
              (e.type = "PerspectiveCamera"),
              (e.fov = n),
              (e.zoom = 1),
              (e.near = r),
              (e.far = a),
              (e.focus = 10),
              (e.aspect = i),
              (e.view = null),
              (e.filmGauge = 35),
              (e.filmOffset = 0),
              e.updateProjectionMatrix(),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    (this.fov = e.fov),
                    (this.zoom = e.zoom),
                    (this.near = e.near),
                    (this.far = e.far),
                    (this.focus = e.focus),
                    (this.aspect = e.aspect),
                    (this.view =
                      null === e.view ? null : Object.assign({}, e.view)),
                    (this.filmGauge = e.filmGauge),
                    (this.filmOffset = e.filmOffset),
                    this
                  );
                }
              },
              {
                key: "setFocalLength",
                value: function (e) {
                  var t = (0.5 * this.getFilmHeight()) / e;
                  (this.fov = 2 * pd * Math.atan(t)),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "getFocalLength",
                value: function () {
                  var e = Math.tan(0.5 * dd * this.fov);
                  return (0.5 * this.getFilmHeight()) / e;
                }
              },
              {
                key: "getEffectiveFOV",
                value: function () {
                  return (
                    2 *
                    pd *
                    Math.atan(Math.tan(0.5 * dd * this.fov) / this.zoom)
                  );
                }
              },
              {
                key: "getFilmWidth",
                value: function () {
                  return this.filmGauge * Math.min(this.aspect, 1);
                }
              },
              {
                key: "getFilmHeight",
                value: function () {
                  return this.filmGauge / Math.max(this.aspect, 1);
                }
              },
              {
                key: "setViewOffset",
                value: function (e, t, n, i, r, a) {
                  (this.aspect = e / t),
                    null === this.view &&
                      (this.view = {
                        enabled: !0,
                        fullWidth: 1,
                        fullHeight: 1,
                        offsetX: 0,
                        offsetY: 0,
                        width: 1,
                        height: 1
                      }),
                    (this.view.enabled = !0),
                    (this.view.fullWidth = e),
                    (this.view.fullHeight = t),
                    (this.view.offsetX = n),
                    (this.view.offsetY = i),
                    (this.view.width = r),
                    (this.view.height = a),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "clearViewOffset",
                value: function () {
                  null !== this.view && (this.view.enabled = !1),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "updateProjectionMatrix",
                value: function () {
                  var e = this.near,
                    t = (e * Math.tan(0.5 * dd * this.fov)) / this.zoom,
                    n = 2 * t,
                    i = this.aspect * n,
                    r = -0.5 * i,
                    a = this.view;
                  if (null !== this.view && this.view.enabled) {
                    var o = a.fullWidth,
                      s = a.fullHeight;
                    (r += (a.offsetX * i) / o),
                      (t -= (a.offsetY * n) / s),
                      (i *= a.width / o),
                      (n *= a.height / s);
                  }
                  var l = this.filmOffset;
                  0 !== l && (r += (e * l) / this.getFilmWidth()),
                    this.projectionMatrix.makePerspective(
                      r,
                      r + i,
                      t,
                      t - n,
                      e,
                      this.far
                    ),
                    this.projectionMatrixInverse
                      .copy(this.projectionMatrix)
                      .invert();
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = sh(t, "toJSON", this, 3)([e]);
                  return (
                    (n.object.fov = this.fov),
                    (n.object.zoom = this.zoom),
                    (n.object.near = this.near),
                    (n.object.far = this.far),
                    (n.object.focus = this.focus),
                    (n.object.aspect = this.aspect),
                    null !== this.view &&
                      (n.object.view = Object.assign({}, this.view)),
                    (n.object.filmGauge = this.filmGauge),
                    (n.object.filmOffset = this.filmOffset),
                    n
                  );
                }
              }
            ])
          );
        })(nv),
        rv = -90,
        av = (function (e) {
          function t(e, n, i) {
            var r;
            gh(this, t),
              ((r = uh(this, t)).type = "CubeCamera"),
              (r.renderTarget = i);
            var a = new iv(rv, 1, e, n);
            (a.layers = r.layers),
              a.up.set(0, 1, 0),
              a.lookAt(1, 0, 0),
              r.add(a);
            var o = new iv(rv, 1, e, n);
            (o.layers = r.layers),
              o.up.set(0, 1, 0),
              o.lookAt(-1, 0, 0),
              r.add(o);
            var s = new iv(rv, 1, e, n);
            (s.layers = r.layers),
              s.up.set(0, 0, -1),
              s.lookAt(0, 1, 0),
              r.add(s);
            var l = new iv(rv, 1, e, n);
            (l.layers = r.layers),
              l.up.set(0, 0, 1),
              l.lookAt(0, -1, 0),
              r.add(l);
            var u = new iv(rv, 1, e, n);
            (u.layers = r.layers),
              u.up.set(0, 1, 0),
              u.lookAt(0, 0, 1),
              r.add(u);
            var c = new iv(rv, 1, e, n);
            return (
              (c.layers = r.layers),
              c.up.set(0, 1, 0),
              c.lookAt(0, 0, -1),
              r.add(c),
              r
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "update",
                value: function (e, t) {
                  null === this.parent && this.updateMatrixWorld();
                  var n = this.renderTarget,
                    i = rh(this.children, 6),
                    r = i[0],
                    a = i[1],
                    o = i[2],
                    s = i[3],
                    l = i[4],
                    u = i[5],
                    c = e.getRenderTarget(),
                    h = e.toneMapping,
                    d = e.xr.enabled;
                  (e.toneMapping = 0), (e.xr.enabled = !1);
                  var p = n.texture.generateMipmaps;
                  (n.texture.generateMipmaps = !1),
                    e.setRenderTarget(n, 0),
                    e.render(t, r),
                    e.setRenderTarget(n, 1),
                    e.render(t, a),
                    e.setRenderTarget(n, 2),
                    e.render(t, o),
                    e.setRenderTarget(n, 3),
                    e.render(t, s),
                    e.setRenderTarget(n, 4),
                    e.render(t, l),
                    (n.texture.generateMipmaps = p),
                    e.setRenderTarget(n, 5),
                    e.render(t, u),
                    e.setRenderTarget(c),
                    (e.toneMapping = h),
                    (e.xr.enabled = d),
                    (n.texture.needsPMREMUpdate = !0);
                }
              }
            ])
          );
        })(Xp),
        ov = (function (e) {
          function t(e, n, i, r, a, o, s, l, u, c) {
            var h;
            return (
              gh(this, t),
              ((h = uh(this, t, [
                (e = void 0 !== e ? e : []),
                (n = void 0 !== n ? n : Th),
                i,
                r,
                a,
                o,
                s,
                l,
                u,
                c
              ])).isCubeTexture = !0),
              (h.flipY = !1),
              h
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "images",
                get: function () {
                  return this.image;
                },
                set: function (e) {
                  this.image = e;
                }
              }
            ])
          );
        })(Vd),
        sv = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : {};
            gh(this, t),
              ((e = uh(this, t, [n, n, i])).isWebGLCubeRenderTarget = !0);
            var r = { width: n, height: n, depth: 1 },
              a = [r, r, r, r, r, r];
            return (
              (e.texture = new ov(
                a,
                i.mapping,
                i.wrapS,
                i.wrapT,
                i.magFilter,
                i.minFilter,
                i.format,
                i.type,
                i.anisotropy,
                i.encoding
              )),
              (e.texture.isRenderTargetTexture = !0),
              (e.texture.generateMipmaps =
                void 0 !== i.generateMipmaps && i.generateMipmaps),
              (e.texture.minFilter = void 0 !== i.minFilter ? i.minFilter : Ih),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "fromEquirectangularTexture",
                value: function (e, t) {
                  (this.texture.type = t.type),
                    (this.texture.encoding = t.encoding),
                    (this.texture.generateMipmaps = t.generateMipmaps),
                    (this.texture.minFilter = t.minFilter),
                    (this.texture.magFilter = t.magFilter);
                  var n = new Zf(5, 5, 5),
                    i = new tv({
                      name: "CubemapFromEquirect",
                      uniforms: Jf({ tEquirect: { value: null } }),
                      vertexShader:
                        "\n  \n                  varying vec3 vWorldDirection;\n  \n                  vec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n  \n                      return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n  \n                  }\n  \n                  void main() {\n  \n                      vWorldDirection = transformDirection( position, modelMatrix );\n  \n                      #include <begin_vertex>\n                      #include <project_vertex>\n  \n                  }\n              ",
                      fragmentShader:
                        "\n  \n                  uniform sampler2D tEquirect;\n  \n                  varying vec3 vWorldDirection;\n  \n                  #include <common>\n  \n                  void main() {\n  \n                      vec3 direction = normalize( vWorldDirection );\n  \n                      vec2 sampleUV = equirectUv( direction );\n  \n                      gl_FragColor = texture2D( tEquirect, sampleUV );\n  \n                  }\n              ",
                      side: 1,
                      blending: 0
                    });
                  i.uniforms.tEquirect.value = t;
                  var r = new Xf(n, i),
                    a = t.minFilter;
                  return (
                    t.minFilter === Oh && (t.minFilter = Ih),
                    new av(1, 10, this).update(e, r),
                    (t.minFilter = a),
                    r.geometry.dispose(),
                    r.material.dispose(),
                    this
                  );
                }
              },
              {
                key: "clear",
                value: function (e, t, n, i) {
                  for (var r = e.getRenderTarget(), a = 0; a < 6; a++)
                    e.setRenderTarget(this, a), e.clear(t, n, i);
                  e.setRenderTarget(r);
                }
              }
            ])
          );
        })(Gd),
        lv = new Kd(),
        uv = new Kd(),
        cv = new Td(),
        hv = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : new Kd(1, 0, 0),
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0;
              gh(this, e),
                (this.isPlane = !0),
                (this.normal = t),
                (this.constant = n);
            },
            [
              {
                key: "set",
                value: function (e, t) {
                  return this.normal.copy(e), (this.constant = t), this;
                }
              },
              {
                key: "setComponents",
                value: function (e, t, n, i) {
                  return this.normal.set(e, t, n), (this.constant = i), this;
                }
              },
              {
                key: "setFromNormalAndCoplanarPoint",
                value: function (e, t) {
                  return (
                    this.normal.copy(e),
                    (this.constant = -t.dot(this.normal)),
                    this
                  );
                }
              },
              {
                key: "setFromCoplanarPoints",
                value: function (e, t, n) {
                  var i = lv
                    .subVectors(n, t)
                    .cross(uv.subVectors(e, t))
                    .normalize();
                  return this.setFromNormalAndCoplanarPoint(i, e), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    this.normal.copy(e.normal),
                    (this.constant = e.constant),
                    this
                  );
                }
              },
              {
                key: "normalize",
                value: function () {
                  var e = 1 / this.normal.length();
                  return (
                    this.normal.multiplyScalar(e), (this.constant *= e), this
                  );
                }
              },
              {
                key: "negate",
                value: function () {
                  return (this.constant *= -1), this.normal.negate(), this;
                }
              },
              {
                key: "distanceToPoint",
                value: function (e) {
                  return this.normal.dot(e) + this.constant;
                }
              },
              {
                key: "distanceToSphere",
                value: function (e) {
                  return this.distanceToPoint(e.center) - e.radius;
                }
              },
              {
                key: "projectPoint",
                value: function (e, t) {
                  return t
                    .copy(e)
                    .addScaledVector(this.normal, -this.distanceToPoint(e));
                }
              },
              {
                key: "intersectLine",
                value: function (e, t) {
                  var n = e.delta(lv),
                    i = this.normal.dot(n);
                  if (0 === i)
                    return 0 === this.distanceToPoint(e.start)
                      ? t.copy(e.start)
                      : null;
                  var r = -(e.start.dot(this.normal) + this.constant) / i;
                  return r < 0 || r > 1
                    ? null
                    : t.copy(e.start).addScaledVector(n, r);
                }
              },
              {
                key: "intersectsLine",
                value: function (e) {
                  var t = this.distanceToPoint(e.start),
                    n = this.distanceToPoint(e.end);
                  return (t < 0 && n > 0) || (n < 0 && t > 0);
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return e.intersectsPlane(this);
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  return e.intersectsPlane(this);
                }
              },
              {
                key: "coplanarPoint",
                value: function (e) {
                  return e.copy(this.normal).multiplyScalar(-this.constant);
                }
              },
              {
                key: "applyMatrix4",
                value: function (e, t) {
                  var n = t || cv.getNormalMatrix(e),
                    i = this.coplanarPoint(lv).applyMatrix4(e),
                    r = this.normal.applyMatrix3(n).normalize();
                  return (this.constant = -i.dot(r)), this;
                }
              },
              {
                key: "translate",
                value: function (e) {
                  return (this.constant -= e.dot(this.normal)), this;
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e.normal.equals(this.normal) && e.constant === this.constant
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]
          );
        })(),
        dv = new fp(),
        pv = new Kd(),
        fv = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : new hv(),
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : new hv(),
                i =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : new hv(),
                r =
                  arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : new hv(),
                a =
                  arguments.length > 4 && void 0 !== arguments[4]
                    ? arguments[4]
                    : new hv(),
                o =
                  arguments.length > 5 && void 0 !== arguments[5]
                    ? arguments[5]
                    : new hv();
              gh(this, e), (this.planes = [t, n, i, r, a, o]);
            },
            [
              {
                key: "set",
                value: function (e, t, n, i, r, a) {
                  var o = this.planes;
                  return (
                    o[0].copy(e),
                    o[1].copy(t),
                    o[2].copy(n),
                    o[3].copy(i),
                    o[4].copy(r),
                    o[5].copy(a),
                    this
                  );
                }
              },
              {
                key: "copy",
                value: function (e) {
                  for (var t = this.planes, n = 0; n < 6; n++)
                    t[n].copy(e.planes[n]);
                  return this;
                }
              },
              {
                key: "setFromProjectionMatrix",
                value: function (e) {
                  var t = this.planes,
                    n = e.elements,
                    i = n[0],
                    r = n[1],
                    a = n[2],
                    o = n[3],
                    s = n[4],
                    l = n[5],
                    u = n[6],
                    c = n[7],
                    h = n[8],
                    d = n[9],
                    p = n[10],
                    f = n[11],
                    v = n[12],
                    m = n[13],
                    g = n[14],
                    _ = n[15];
                  return (
                    t[0].setComponents(o - i, c - s, f - h, _ - v).normalize(),
                    t[1].setComponents(o + i, c + s, f + h, _ + v).normalize(),
                    t[2].setComponents(o + r, c + l, f + d, _ + m).normalize(),
                    t[3].setComponents(o - r, c - l, f - d, _ - m).normalize(),
                    t[4].setComponents(o - a, c - u, f - p, _ - g).normalize(),
                    t[5].setComponents(o + a, c + u, f + p, _ + g).normalize(),
                    this
                  );
                }
              },
              {
                key: "intersectsObject",
                value: function (e) {
                  if (void 0 !== e.boundingSphere)
                    null === e.boundingSphere && e.computeBoundingSphere(),
                      dv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);
                  else {
                    var t = e.geometry;
                    null === t.boundingSphere && t.computeBoundingSphere(),
                      dv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld);
                  }
                  return this.intersectsSphere(dv);
                }
              },
              {
                key: "intersectsSprite",
                value: function (e) {
                  return (
                    dv.center.set(0, 0, 0),
                    (dv.radius = 0.7071067811865476),
                    dv.applyMatrix4(e.matrixWorld),
                    this.intersectsSphere(dv)
                  );
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  for (
                    var t = this.planes, n = e.center, i = -e.radius, r = 0;
                    r < 6;
                    r++
                  )
                    if (t[r].distanceToPoint(n) < i) return !1;
                  return !0;
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  for (var t = this.planes, n = 0; n < 6; n++) {
                    var i = t[n];
                    if (
                      ((pv.x = i.normal.x > 0 ? e.max.x : e.min.x),
                      (pv.y = i.normal.y > 0 ? e.max.y : e.min.y),
                      (pv.z = i.normal.z > 0 ? e.max.z : e.min.z),
                      i.distanceToPoint(pv) < 0)
                    )
                      return !1;
                  }
                  return !0;
                }
              },
              {
                key: "containsPoint",
                value: function (e) {
                  for (var t = this.planes, n = 0; n < 6; n++)
                    if (t[n].distanceToPoint(e) < 0) return !1;
                  return !0;
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]
          );
        })();
      function vv() {
        var e = null,
          t = !1,
          n = null,
          i = null;
        function r(t, a) {
          n(t, a), (i = e.requestAnimationFrame(r));
        }
        return {
          start: function () {
            !0 !== t &&
              null !== n &&
              ((i = e.requestAnimationFrame(r)), (t = !0));
          },
          stop: function () {
            e.cancelAnimationFrame(i), (t = !1);
          },
          setAnimationLoop: function (e) {
            n = e;
          },
          setContext: function (t) {
            e = t;
          }
        };
      }
      function mv(e, t) {
        var n = t.isWebGL2,
          i = new WeakMap();
        return {
          get: function (e) {
            return e.isInterleavedBufferAttribute && (e = e.data), i.get(e);
          },
          remove: function (t) {
            t.isInterleavedBufferAttribute && (t = t.data);
            var n = i.get(t);
            n && (e.deleteBuffer(n.buffer), i.delete(t));
          },
          update: function (t, r) {
            if (t.isGLBufferAttribute) {
              var a = i.get(t);
              (!a || a.version < t.version) &&
                i.set(t, {
                  buffer: t.buffer,
                  type: t.type,
                  bytesPerElement: t.elementSize,
                  version: t.version
                });
            } else {
              t.isInterleavedBufferAttribute && (t = t.data);
              var o = i.get(t);
              void 0 === o
                ? i.set(
                    t,
                    (function (t, i) {
                      var r,
                        a = t.array,
                        o = t.usage,
                        s = e.createBuffer();
                      if (
                        (e.bindBuffer(i, s),
                        e.bufferData(i, a, o),
                        t.onUploadCallback(),
                        a instanceof Float32Array)
                      )
                        r = 5126;
                      else if (a instanceof Uint16Array) {
                        if (t.isFloat16BufferAttribute) {
                          if (!n)
                            throw new Error(
                              "THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."
                            );
                          r = 5131;
                        } else r = 5123;
                      } else if (a instanceof Int16Array) r = 5122;
                      else if (a instanceof Uint32Array) r = 5125;
                      else if (a instanceof Int32Array) r = 5124;
                      else if (a instanceof Int8Array) r = 5120;
                      else if (a instanceof Uint8Array) r = 5121;
                      else {
                        if (!(a instanceof Uint8ClampedArray))
                          throw new Error(
                            "THREE.WebGLAttributes: Unsupported buffer data format: " +
                              a
                          );
                        r = 5121;
                      }
                      return {
                        buffer: s,
                        type: r,
                        bytesPerElement: a.BYTES_PER_ELEMENT,
                        version: t.version
                      };
                    })(t, r)
                  )
                : o.version < t.version &&
                  ((function (t, i, r) {
                    var a = i.array,
                      o = i.updateRange;
                    e.bindBuffer(r, t),
                      -1 === o.count
                        ? e.bufferSubData(r, 0, a)
                        : (n
                            ? e.bufferSubData(
                                r,
                                o.offset * a.BYTES_PER_ELEMENT,
                                a,
                                o.offset,
                                o.count
                              )
                            : e.bufferSubData(
                                r,
                                o.offset * a.BYTES_PER_ELEMENT,
                                a.subarray(o.offset, o.offset + o.count)
                              ),
                          (o.count = -1)),
                      i.onUploadCallback();
                  })(o.buffer, t, r),
                  (o.version = t.version));
            }
          }
        };
      }
      var gv = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            gh(this, t),
              ((e = uh(this, t)).type = "PlaneGeometry"),
              (e.parameters = {
                width: n,
                height: i,
                widthSegments: r,
                heightSegments: a
              });
            for (
              var o = n / 2,
                s = i / 2,
                l = Math.floor(r),
                u = Math.floor(a),
                c = l + 1,
                h = u + 1,
                d = n / l,
                p = i / u,
                f = [],
                v = [],
                m = [],
                g = [],
                _ = 0;
              _ < h;
              _++
            )
              for (var y = _ * p - s, b = 0; b < c; b++) {
                var x = b * d - o;
                v.push(x, -y, 0),
                  m.push(0, 0, 1),
                  g.push(b / l),
                  g.push(1 - _ / u);
              }
            for (var w = 0; w < u; w++)
              for (var S = 0; S < l; S++) {
                var M = S + c * w,
                  T = S + c * (w + 1),
                  k = S + 1 + c * (w + 1),
                  E = S + 1 + c * w;
                f.push(M, T, E), f.push(T, k, E);
              }
            return (
              e.setIndex(f),
              e.setAttribute("position", new wf(v, 3)),
              e.setAttribute("normal", new wf(m, 3)),
              e.setAttribute("uv", new wf(g, 2)),
              e
            );
          }
          return (
            ph(t, e),
            yh(
              t,
              [
                {
                  key: "copy",
                  value: function (e) {
                    return (
                      sh(t, "copy", this, 3)([e]),
                      (this.parameters = Object.assign({}, e.parameters)),
                      this
                    );
                  }
                }
              ],
              [
                {
                  key: "fromJSON",
                  value: function (e) {
                    return new t(
                      e.width,
                      e.height,
                      e.widthSegments,
                      e.heightSegments
                    );
                  }
                }
              ]
            )
          );
        })(Af),
        _v = {
          alphamap_fragment:
            "#ifdef USE_ALPHAMAP\n      diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n  #endif",
          alphamap_pars_fragment:
            "#ifdef USE_ALPHAMAP\n      uniform sampler2D alphaMap;\n  #endif",
          alphatest_fragment:
            "#ifdef USE_ALPHATEST\n      if ( diffuseColor.a < alphaTest ) discard;\n  #endif",
          alphatest_pars_fragment:
            "#ifdef USE_ALPHATEST\n      uniform float alphaTest;\n  #endif",
          aomap_fragment:
            "#ifdef USE_AOMAP\n      float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n      reflectedLight.indirectDiffuse *= ambientOcclusion;\n      #if defined( USE_ENVMAP ) && defined( STANDARD )\n          float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n          reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n      #endif\n  #endif",
          aomap_pars_fragment:
            "#ifdef USE_AOMAP\n      uniform sampler2D aoMap;\n      uniform float aoMapIntensity;\n  #endif",
          begin_vertex: "vec3 transformed = vec3( position );",
          beginnormal_vertex:
            "vec3 objectNormal = vec3( normal );\n  #ifdef USE_TANGENT\n      vec3 objectTangent = vec3( tangent.xyz );\n  #endif",
          bsdfs:
            "float G_BlinnPhong_Implicit( ) {\n      return 0.25;\n  }\n  float D_BlinnPhong( const in float shininess, const in float dotNH ) {\n      return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n  }\n  vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n      vec3 halfDir = normalize( lightDir + viewDir );\n      float dotNH = saturate( dot( normal, halfDir ) );\n      float dotVH = saturate( dot( viewDir, halfDir ) );\n      vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n      float G = G_BlinnPhong_Implicit( );\n      float D = D_BlinnPhong( shininess, dotNH );\n      return F * ( G * D );\n  } // validated",
          iridescence_fragment:
            "#ifdef USE_IRIDESCENCE\n      const mat3 XYZ_TO_REC709 = mat3(\n           3.2404542, -0.9692660,  0.0556434,\n          -1.5371385,  1.8760108, -0.2040259,\n          -0.4985314,  0.0415560,  1.0572252\n      );\n      vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n          vec3 sqrtF0 = sqrt( fresnel0 );\n          return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n      }\n      vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n          return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n      }\n      float IorToFresnel0( float transmittedIor, float incidentIor ) {\n          return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n      }\n      vec3 evalSensitivity( float OPD, vec3 shift ) {\n          float phase = 2.0 * PI * OPD * 1.0e-9;\n          vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n          vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n          vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n          vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n          xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n          xyz /= 1.0685e-7;\n          vec3 rgb = XYZ_TO_REC709 * xyz;\n          return rgb;\n      }\n      vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n          vec3 I;\n          float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n          float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n          float cosTheta2Sq = 1.0 - sinTheta2Sq;\n          if ( cosTheta2Sq < 0.0 ) {\n               return vec3( 1.0 );\n          }\n          float cosTheta2 = sqrt( cosTheta2Sq );\n          float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n          float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n          float R21 = R12;\n          float T121 = 1.0 - R12;\n          float phi12 = 0.0;\n          if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n          float phi21 = PI - phi12;\n          vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n          vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n          vec3 phi23 = vec3( 0.0 );\n          if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n          if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n          if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n          float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n          vec3 phi = vec3( phi21 ) + phi23;\n          vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n          vec3 r123 = sqrt( R123 );\n          vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n          vec3 C0 = R12 + Rs;\n          I = C0;\n          vec3 Cm = Rs - T121;\n          for ( int m = 1; m <= 2; ++ m ) {\n              Cm *= r123;\n              vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n              I += Cm * Sm;\n          }\n          return max( I, vec3( 0.0 ) );\n      }\n  #endif",
          bumpmap_pars_fragment:
            "#ifdef USE_BUMPMAP\n      uniform sampler2D bumpMap;\n      uniform float bumpScale;\n      vec2 dHdxy_fwd() {\n          vec2 dSTdx = dFdx( vBumpMapUv );\n          vec2 dSTdy = dFdy( vBumpMapUv );\n          float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n          float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n          float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n          return vec2( dBx, dBy );\n      }\n      vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n          vec3 vSigmaX = dFdx( surf_pos.xyz );\n          vec3 vSigmaY = dFdy( surf_pos.xyz );\n          vec3 vN = surf_norm;\n          vec3 R1 = cross( vSigmaY, vN );\n          vec3 R2 = cross( vN, vSigmaX );\n          float fDet = dot( vSigmaX, R1 ) * faceDirection;\n          vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n          return normalize( abs( fDet ) * surf_norm - vGrad );\n      }\n  #endif",
          clipping_planes_fragment:
            "#if NUM_CLIPPING_PLANES > 0\n      vec4 plane;\n      #pragma unroll_loop_start\n      for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n          plane = clippingPlanes[ i ];\n          if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n      }\n      #pragma unroll_loop_end\n      #if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n          bool clipped = true;\n          #pragma unroll_loop_start\n          for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n              plane = clippingPlanes[ i ];\n              clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n          }\n          #pragma unroll_loop_end\n          if ( clipped ) discard;\n      #endif\n  #endif",
          clipping_planes_pars_fragment:
            "#if NUM_CLIPPING_PLANES > 0\n      varying vec3 vClipPosition;\n      uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n  #endif",
          clipping_planes_pars_vertex:
            "#if NUM_CLIPPING_PLANES > 0\n      varying vec3 vClipPosition;\n  #endif",
          clipping_planes_vertex:
            "#if NUM_CLIPPING_PLANES > 0\n      vClipPosition = - mvPosition.xyz;\n  #endif",
          color_fragment:
            "#if defined( USE_COLOR_ALPHA )\n      diffuseColor *= vColor;\n  #elif defined( USE_COLOR )\n      diffuseColor.rgb *= vColor;\n  #endif",
          color_pars_fragment:
            "#if defined( USE_COLOR_ALPHA )\n      varying vec4 vColor;\n  #elif defined( USE_COLOR )\n      varying vec3 vColor;\n  #endif",
          color_pars_vertex:
            "#if defined( USE_COLOR_ALPHA )\n      varying vec4 vColor;\n  #elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n      varying vec3 vColor;\n  #endif",
          color_vertex:
            "#if defined( USE_COLOR_ALPHA )\n      vColor = vec4( 1.0 );\n  #elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n      vColor = vec3( 1.0 );\n  #endif\n  #ifdef USE_COLOR\n      vColor *= color;\n  #endif\n  #ifdef USE_INSTANCING_COLOR\n      vColor.xyz *= instanceColor.xyz;\n  #endif",
          common:
            "#define PI 3.141592653589793\n  #define PI2 6.283185307179586\n  #define PI_HALF 1.5707963267948966\n  #define RECIPROCAL_PI 0.3183098861837907\n  #define RECIPROCAL_PI2 0.15915494309189535\n  #define EPSILON 1e-6\n  #ifndef saturate\n  #define saturate( a ) clamp( a, 0.0, 1.0 )\n  #endif\n  #define whiteComplement( a ) ( 1.0 - saturate( a ) )\n  float pow2( const in float x ) { return x*x; }\n  vec3 pow2( const in vec3 x ) { return x*x; }\n  float pow3( const in float x ) { return x*x*x; }\n  float pow4( const in float x ) { float x2 = x*x; return x2*x2; }\n  float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n  float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\n  highp float rand( const in vec2 uv ) {\n      const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n      highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n      return fract( sin( sn ) * c );\n  }\n  #ifdef HIGH_PRECISION\n      float precisionSafeLength( vec3 v ) { return length( v ); }\n  #else\n      float precisionSafeLength( vec3 v ) {\n          float maxComponent = max3( abs( v ) );\n          return length( v / maxComponent ) * maxComponent;\n      }\n  #endif\n  struct IncidentLight {\n      vec3 color;\n      vec3 direction;\n      bool visible;\n  };\n  struct ReflectedLight {\n      vec3 directDiffuse;\n      vec3 directSpecular;\n      vec3 indirectDiffuse;\n      vec3 indirectSpecular;\n  };\n  struct GeometricContext {\n      vec3 position;\n      vec3 normal;\n      vec3 viewDir;\n  #ifdef USE_CLEARCOAT\n      vec3 clearcoatNormal;\n  #endif\n  };\n  vec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n      return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n  }\n  vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n      return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n  }\n  mat3 transposeMat3( const in mat3 m ) {\n      mat3 tmp;\n      tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n      tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n      tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n      return tmp;\n  }\n  float luminance( const in vec3 rgb ) {\n      const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n      return dot( weights, rgb );\n  }\n  bool isPerspectiveMatrix( mat4 m ) {\n      return m[ 2 ][ 3 ] == - 1.0;\n  }\n  vec2 equirectUv( in vec3 dir ) {\n      float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n      float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n      return vec2( u, v );\n  }\n  vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n      return RECIPROCAL_PI * diffuseColor;\n  }\n  vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n      float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n      return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n  }\n  float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n      float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n      return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n  } // validated",
          cube_uv_reflection_fragment:
            "#ifdef ENVMAP_TYPE_CUBE_UV\n      #define cubeUV_minMipLevel 4.0\n      #define cubeUV_minTileSize 16.0\n      float getFace( vec3 direction ) {\n          vec3 absDirection = abs( direction );\n          float face = - 1.0;\n          if ( absDirection.x > absDirection.z ) {\n              if ( absDirection.x > absDirection.y )\n                  face = direction.x > 0.0 ? 0.0 : 3.0;\n              else\n                  face = direction.y > 0.0 ? 1.0 : 4.0;\n          } else {\n              if ( absDirection.z > absDirection.y )\n                  face = direction.z > 0.0 ? 2.0 : 5.0;\n              else\n                  face = direction.y > 0.0 ? 1.0 : 4.0;\n          }\n          return face;\n      }\n      vec2 getUV( vec3 direction, float face ) {\n          vec2 uv;\n          if ( face == 0.0 ) {\n              uv = vec2( direction.z, direction.y ) / abs( direction.x );\n          } else if ( face == 1.0 ) {\n              uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n          } else if ( face == 2.0 ) {\n              uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n          } else if ( face == 3.0 ) {\n              uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n          } else if ( face == 4.0 ) {\n              uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n          } else {\n              uv = vec2( direction.x, direction.y ) / abs( direction.z );\n          }\n          return 0.5 * ( uv + 1.0 );\n      }\n      vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n          float face = getFace( direction );\n          float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n          mipInt = max( mipInt, cubeUV_minMipLevel );\n          float faceSize = exp2( mipInt );\n          highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n          if ( face > 2.0 ) {\n              uv.y += faceSize;\n              face -= 3.0;\n          }\n          uv.x += face * faceSize;\n          uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n          uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n          uv.x *= CUBEUV_TEXEL_WIDTH;\n          uv.y *= CUBEUV_TEXEL_HEIGHT;\n          #ifdef texture2DGradEXT\n              return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n          #else\n              return texture2D( envMap, uv ).rgb;\n          #endif\n      }\n      #define cubeUV_r0 1.0\n      #define cubeUV_v0 0.339\n      #define cubeUV_m0 - 2.0\n      #define cubeUV_r1 0.8\n      #define cubeUV_v1 0.276\n      #define cubeUV_m1 - 1.0\n      #define cubeUV_r4 0.4\n      #define cubeUV_v4 0.046\n      #define cubeUV_m4 2.0\n      #define cubeUV_r5 0.305\n      #define cubeUV_v5 0.016\n      #define cubeUV_m5 3.0\n      #define cubeUV_r6 0.21\n      #define cubeUV_v6 0.0038\n      #define cubeUV_m6 4.0\n      float roughnessToMip( float roughness ) {\n          float mip = 0.0;\n          if ( roughness >= cubeUV_r1 ) {\n              mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n          } else if ( roughness >= cubeUV_r4 ) {\n              mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n          } else if ( roughness >= cubeUV_r5 ) {\n              mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n          } else if ( roughness >= cubeUV_r6 ) {\n              mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n          } else {\n              mip = - 2.0 * log2( 1.16 * roughness );\t\t}\n          return mip;\n      }\n      vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n          float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n          float mipF = fract( mip );\n          float mipInt = floor( mip );\n          vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n          if ( mipF == 0.0 ) {\n              return vec4( color0, 1.0 );\n          } else {\n              vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n              return vec4( mix( color0, color1, mipF ), 1.0 );\n          }\n      }\n  #endif",
          defaultnormal_vertex:
            "vec3 transformedNormal = objectNormal;\n  #ifdef USE_INSTANCING\n      mat3 m = mat3( instanceMatrix );\n      transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n      transformedNormal = m * transformedNormal;\n  #endif\n  transformedNormal = normalMatrix * transformedNormal;\n  #ifdef FLIP_SIDED\n      transformedNormal = - transformedNormal;\n  #endif\n  #ifdef USE_TANGENT\n      vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n      #ifdef FLIP_SIDED\n          transformedTangent = - transformedTangent;\n      #endif\n  #endif",
          displacementmap_pars_vertex:
            "#ifdef USE_DISPLACEMENTMAP\n      uniform sampler2D displacementMap;\n      uniform float displacementScale;\n      uniform float displacementBias;\n  #endif",
          displacementmap_vertex:
            "#ifdef USE_DISPLACEMENTMAP\n      transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n  #endif",
          emissivemap_fragment:
            "#ifdef USE_EMISSIVEMAP\n      vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n      totalEmissiveRadiance *= emissiveColor.rgb;\n  #endif",
          emissivemap_pars_fragment:
            "#ifdef USE_EMISSIVEMAP\n      uniform sampler2D emissiveMap;\n  #endif",
          encodings_fragment:
            "gl_FragColor = linearToOutputTexel( gl_FragColor );",
          encodings_pars_fragment:
            "vec4 LinearToLinear( in vec4 value ) {\n      return value;\n  }\n  vec4 LinearTosRGB( in vec4 value ) {\n      return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n  }",
          envmap_fragment:
            "#ifdef USE_ENVMAP\n      #ifdef ENV_WORLDPOS\n          vec3 cameraToFrag;\n          if ( isOrthographic ) {\n              cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n          } else {\n              cameraToFrag = normalize( vWorldPosition - cameraPosition );\n          }\n          vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n          #ifdef ENVMAP_MODE_REFLECTION\n              vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n          #else\n              vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n          #endif\n      #else\n          vec3 reflectVec = vReflect;\n      #endif\n      #ifdef ENVMAP_TYPE_CUBE\n          vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n      #else\n          vec4 envColor = vec4( 0.0 );\n      #endif\n      #ifdef ENVMAP_BLENDING_MULTIPLY\n          outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n      #elif defined( ENVMAP_BLENDING_MIX )\n          outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n      #elif defined( ENVMAP_BLENDING_ADD )\n          outgoingLight += envColor.xyz * specularStrength * reflectivity;\n      #endif\n  #endif",
          envmap_common_pars_fragment:
            "#ifdef USE_ENVMAP\n      uniform float envMapIntensity;\n      uniform float flipEnvMap;\n      #ifdef ENVMAP_TYPE_CUBE\n          uniform samplerCube envMap;\n      #else\n          uniform sampler2D envMap;\n      #endif\n      \n  #endif",
          envmap_pars_fragment:
            "#ifdef USE_ENVMAP\n      uniform float reflectivity;\n      #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n          #define ENV_WORLDPOS\n      #endif\n      #ifdef ENV_WORLDPOS\n          varying vec3 vWorldPosition;\n          uniform float refractionRatio;\n      #else\n          varying vec3 vReflect;\n      #endif\n  #endif",
          envmap_pars_vertex:
            "#ifdef USE_ENVMAP\n      #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n          #define ENV_WORLDPOS\n      #endif\n      #ifdef ENV_WORLDPOS\n          \n          varying vec3 vWorldPosition;\n      #else\n          varying vec3 vReflect;\n          uniform float refractionRatio;\n      #endif\n  #endif",
          envmap_physical_pars_fragment:
            "#if defined( USE_ENVMAP )\n      vec3 getIBLIrradiance( const in vec3 normal ) {\n          #if defined( ENVMAP_TYPE_CUBE_UV )\n              vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n              vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n              return PI * envMapColor.rgb * envMapIntensity;\n          #else\n              return vec3( 0.0 );\n          #endif\n      }\n      vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n          #if defined( ENVMAP_TYPE_CUBE_UV )\n              vec3 reflectVec = reflect( - viewDir, normal );\n              reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n              reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n              vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n              return envMapColor.rgb * envMapIntensity;\n          #else\n              return vec3( 0.0 );\n          #endif\n      }\n  #endif",
          envmap_vertex:
            "#ifdef USE_ENVMAP\n      #ifdef ENV_WORLDPOS\n          vWorldPosition = worldPosition.xyz;\n      #else\n          vec3 cameraToVertex;\n          if ( isOrthographic ) {\n              cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n          } else {\n              cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n          }\n          vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n          #ifdef ENVMAP_MODE_REFLECTION\n              vReflect = reflect( cameraToVertex, worldNormal );\n          #else\n              vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n          #endif\n      #endif\n  #endif",
          fog_vertex:
            "#ifdef USE_FOG\n      vFogDepth = - mvPosition.z;\n  #endif",
          fog_pars_vertex:
            "#ifdef USE_FOG\n      varying float vFogDepth;\n  #endif",
          fog_fragment:
            "#ifdef USE_FOG\n      #ifdef FOG_EXP2\n          float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n      #else\n          float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n      #endif\n      gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n  #endif",
          fog_pars_fragment:
            "#ifdef USE_FOG\n      uniform vec3 fogColor;\n      varying float vFogDepth;\n      #ifdef FOG_EXP2\n          uniform float fogDensity;\n      #else\n          uniform float fogNear;\n          uniform float fogFar;\n      #endif\n  #endif",
          gradientmap_pars_fragment:
            "#ifdef USE_GRADIENTMAP\n      uniform sampler2D gradientMap;\n  #endif\n  vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n      float dotNL = dot( normal, lightDirection );\n      vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n      #ifdef USE_GRADIENTMAP\n          return vec3( texture2D( gradientMap, coord ).r );\n      #else\n          vec2 fw = fwidth( coord ) * 0.5;\n          return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n      #endif\n  }",
          lightmap_fragment:
            "#ifdef USE_LIGHTMAP\n      vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n      vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n      reflectedLight.indirectDiffuse += lightMapIrradiance;\n  #endif",
          lightmap_pars_fragment:
            "#ifdef USE_LIGHTMAP\n      uniform sampler2D lightMap;\n      uniform float lightMapIntensity;\n  #endif",
          lights_lambert_fragment:
            "LambertMaterial material;\n  material.diffuseColor = diffuseColor.rgb;\n  material.specularStrength = specularStrength;",
          lights_lambert_pars_fragment:
            "varying vec3 vViewPosition;\n  struct LambertMaterial {\n      vec3 diffuseColor;\n      float specularStrength;\n  };\n  void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n      float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n      vec3 irradiance = dotNL * directLight.color;\n      reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n  }\n  void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n      reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n  }\n  #define RE_Direct\t\t\t\tRE_Direct_Lambert\n  #define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",
          lights_pars_begin:
            "uniform bool receiveShadow;\n  uniform vec3 ambientLightColor;\n  uniform vec3 lightProbe[ 9 ];\n  vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n      float x = normal.x, y = normal.y, z = normal.z;\n      vec3 result = shCoefficients[ 0 ] * 0.886227;\n      result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n      result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n      result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n      result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n      result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n      result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n      result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n      result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n      return result;\n  }\n  vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n      vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n      vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n      return irradiance;\n  }\n  vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n      vec3 irradiance = ambientLightColor;\n      return irradiance;\n  }\n  float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n      #if defined ( LEGACY_LIGHTS )\n          if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n              return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n          }\n          return 1.0;\n      #else\n          float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n          if ( cutoffDistance > 0.0 ) {\n              distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n          }\n          return distanceFalloff;\n      #endif\n  }\n  float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n      return smoothstep( coneCosine, penumbraCosine, angleCosine );\n  }\n  #if NUM_DIR_LIGHTS > 0\n      struct DirectionalLight {\n          vec3 direction;\n          vec3 color;\n      };\n      uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n      void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n          light.color = directionalLight.color;\n          light.direction = directionalLight.direction;\n          light.visible = true;\n      }\n  #endif\n  #if NUM_POINT_LIGHTS > 0\n      struct PointLight {\n          vec3 position;\n          vec3 color;\n          float distance;\n          float decay;\n      };\n      uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n      void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n          vec3 lVector = pointLight.position - geometry.position;\n          light.direction = normalize( lVector );\n          float lightDistance = length( lVector );\n          light.color = pointLight.color;\n          light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n          light.visible = ( light.color != vec3( 0.0 ) );\n      }\n  #endif\n  #if NUM_SPOT_LIGHTS > 0\n      struct SpotLight {\n          vec3 position;\n          vec3 direction;\n          vec3 color;\n          float distance;\n          float decay;\n          float coneCos;\n          float penumbraCos;\n      };\n      uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n      void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n          vec3 lVector = spotLight.position - geometry.position;\n          light.direction = normalize( lVector );\n          float angleCos = dot( light.direction, spotLight.direction );\n          float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n          if ( spotAttenuation > 0.0 ) {\n              float lightDistance = length( lVector );\n              light.color = spotLight.color * spotAttenuation;\n              light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n              light.visible = ( light.color != vec3( 0.0 ) );\n          } else {\n              light.color = vec3( 0.0 );\n              light.visible = false;\n          }\n      }\n  #endif\n  #if NUM_RECT_AREA_LIGHTS > 0\n      struct RectAreaLight {\n          vec3 color;\n          vec3 position;\n          vec3 halfWidth;\n          vec3 halfHeight;\n      };\n      uniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n      uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n  #endif\n  #if NUM_HEMI_LIGHTS > 0\n      struct HemisphereLight {\n          vec3 direction;\n          vec3 skyColor;\n          vec3 groundColor;\n      };\n      uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n      vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n          float dotNL = dot( normal, hemiLight.direction );\n          float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n          vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n          return irradiance;\n      }\n  #endif",
          lights_toon_fragment:
            "ToonMaterial material;\n  material.diffuseColor = diffuseColor.rgb;",
          lights_toon_pars_fragment:
            "varying vec3 vViewPosition;\n  struct ToonMaterial {\n      vec3 diffuseColor;\n  };\n  void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n      vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n      reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n  }\n  void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n      reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n  }\n  #define RE_Direct\t\t\t\tRE_Direct_Toon\n  #define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",
          lights_phong_fragment:
            "BlinnPhongMaterial material;\n  material.diffuseColor = diffuseColor.rgb;\n  material.specularColor = specular;\n  material.specularShininess = shininess;\n  material.specularStrength = specularStrength;",
          lights_phong_pars_fragment:
            "varying vec3 vViewPosition;\n  struct BlinnPhongMaterial {\n      vec3 diffuseColor;\n      vec3 specularColor;\n      float specularShininess;\n      float specularStrength;\n  };\n  void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n      float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n      vec3 irradiance = dotNL * directLight.color;\n      reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n      reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n  }\n  void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n      reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n  }\n  #define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n  #define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",
          lights_physical_fragment:
            "PhysicalMaterial material;\n  material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n  vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\n  float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n  material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\n  material.roughness = min( material.roughness, 1.0 );\n  #ifdef IOR\n      material.ior = ior;\n      #ifdef USE_SPECULAR\n          float specularIntensityFactor = specularIntensity;\n          vec3 specularColorFactor = specularColor;\n          #ifdef USE_SPECULAR_COLORMAP\n              specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n          #endif\n          #ifdef USE_SPECULAR_INTENSITYMAP\n              specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n          #endif\n          material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n      #else\n          float specularIntensityFactor = 1.0;\n          vec3 specularColorFactor = vec3( 1.0 );\n          material.specularF90 = 1.0;\n      #endif\n      material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n  #else\n      material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n      material.specularF90 = 1.0;\n  #endif\n  #ifdef USE_CLEARCOAT\n      material.clearcoat = clearcoat;\n      material.clearcoatRoughness = clearcoatRoughness;\n      material.clearcoatF0 = vec3( 0.04 );\n      material.clearcoatF90 = 1.0;\n      #ifdef USE_CLEARCOATMAP\n          material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n      #endif\n      #ifdef USE_CLEARCOAT_ROUGHNESSMAP\n          material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n      #endif\n      material.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n      material.clearcoatRoughness += geometryRoughness;\n      material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n  #endif\n  #ifdef USE_IRIDESCENCE\n      material.iridescence = iridescence;\n      material.iridescenceIOR = iridescenceIOR;\n      #ifdef USE_IRIDESCENCEMAP\n          material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n      #endif\n      #ifdef USE_IRIDESCENCE_THICKNESSMAP\n          material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n      #else\n          material.iridescenceThickness = iridescenceThicknessMaximum;\n      #endif\n  #endif\n  #ifdef USE_SHEEN\n      material.sheenColor = sheenColor;\n      #ifdef USE_SHEEN_COLORMAP\n          material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n      #endif\n      material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n      #ifdef USE_SHEEN_ROUGHNESSMAP\n          material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n      #endif\n  #endif",
          lights_physical_pars_fragment:
            "struct PhysicalMaterial {\n      vec3 diffuseColor;\n      float roughness;\n      vec3 specularColor;\n      float specularF90;\n      #ifdef USE_CLEARCOAT\n          float clearcoat;\n          float clearcoatRoughness;\n          vec3 clearcoatF0;\n          float clearcoatF90;\n      #endif\n      #ifdef USE_IRIDESCENCE\n          float iridescence;\n          float iridescenceIOR;\n          float iridescenceThickness;\n          vec3 iridescenceFresnel;\n          vec3 iridescenceF0;\n      #endif\n      #ifdef USE_SHEEN\n          vec3 sheenColor;\n          float sheenRoughness;\n      #endif\n      #ifdef IOR\n          float ior;\n      #endif\n      #ifdef USE_TRANSMISSION\n          float transmission;\n          float transmissionAlpha;\n          float thickness;\n          float attenuationDistance;\n          vec3 attenuationColor;\n      #endif\n  };\n  vec3 clearcoatSpecular = vec3( 0.0 );\n  vec3 sheenSpecular = vec3( 0.0 );\n  vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n      float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n      float x2 = x * x;\n      float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n      return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n  }\n  float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n      float a2 = pow2( alpha );\n      float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n      float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n      return 0.5 / max( gv + gl, EPSILON );\n  }\n  float D_GGX( const in float alpha, const in float dotNH ) {\n      float a2 = pow2( alpha );\n      float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n      return RECIPROCAL_PI * a2 / pow2( denom );\n  }\n  #ifdef USE_CLEARCOAT\n      vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n          vec3 f0 = material.clearcoatF0;\n          float f90 = material.clearcoatF90;\n          float roughness = material.clearcoatRoughness;\n          float alpha = pow2( roughness );\n          vec3 halfDir = normalize( lightDir + viewDir );\n          float dotNL = saturate( dot( normal, lightDir ) );\n          float dotNV = saturate( dot( normal, viewDir ) );\n          float dotNH = saturate( dot( normal, halfDir ) );\n          float dotVH = saturate( dot( viewDir, halfDir ) );\n          vec3 F = F_Schlick( f0, f90, dotVH );\n          float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n          float D = D_GGX( alpha, dotNH );\n          return F * ( V * D );\n      }\n  #endif\n  vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n      vec3 f0 = material.specularColor;\n      float f90 = material.specularF90;\n      float roughness = material.roughness;\n      float alpha = pow2( roughness );\n      vec3 halfDir = normalize( lightDir + viewDir );\n      float dotNL = saturate( dot( normal, lightDir ) );\n      float dotNV = saturate( dot( normal, viewDir ) );\n      float dotNH = saturate( dot( normal, halfDir ) );\n      float dotVH = saturate( dot( viewDir, halfDir ) );\n      vec3 F = F_Schlick( f0, f90, dotVH );\n      #ifdef USE_IRIDESCENCE\n          F = mix( F, material.iridescenceFresnel, material.iridescence );\n      #endif\n      float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n      float D = D_GGX( alpha, dotNH );\n      return F * ( V * D );\n  }\n  vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n      const float LUT_SIZE = 64.0;\n      const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n      const float LUT_BIAS = 0.5 / LUT_SIZE;\n      float dotNV = saturate( dot( N, V ) );\n      vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n      uv = uv * LUT_SCALE + LUT_BIAS;\n      return uv;\n  }\n  float LTC_ClippedSphereFormFactor( const in vec3 f ) {\n      float l = length( f );\n      return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n  }\n  vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n      float x = dot( v1, v2 );\n      float y = abs( x );\n      float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n      float b = 3.4175940 + ( 4.1616724 + y ) * y;\n      float v = a / b;\n      float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n      return cross( v1, v2 ) * theta_sintheta;\n  }\n  vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n      vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n      vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n      vec3 lightNormal = cross( v1, v2 );\n      if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n      vec3 T1, T2;\n      T1 = normalize( V - N * dot( V, N ) );\n      T2 = - cross( N, T1 );\n      mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n      vec3 coords[ 4 ];\n      coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n      coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n      coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n      coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n      coords[ 0 ] = normalize( coords[ 0 ] );\n      coords[ 1 ] = normalize( coords[ 1 ] );\n      coords[ 2 ] = normalize( coords[ 2 ] );\n      coords[ 3 ] = normalize( coords[ 3 ] );\n      vec3 vectorFormFactor = vec3( 0.0 );\n      vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n      vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n      vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n      vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n      float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n      return vec3( result );\n  }\n  #if defined( USE_SHEEN )\n  float D_Charlie( float roughness, float dotNH ) {\n      float alpha = pow2( roughness );\n      float invAlpha = 1.0 / alpha;\n      float cos2h = dotNH * dotNH;\n      float sin2h = max( 1.0 - cos2h, 0.0078125 );\n      return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n  }\n  float V_Neubelt( float dotNV, float dotNL ) {\n      return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n  }\n  vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n      vec3 halfDir = normalize( lightDir + viewDir );\n      float dotNL = saturate( dot( normal, lightDir ) );\n      float dotNV = saturate( dot( normal, viewDir ) );\n      float dotNH = saturate( dot( normal, halfDir ) );\n      float D = D_Charlie( sheenRoughness, dotNH );\n      float V = V_Neubelt( dotNV, dotNL );\n      return sheenColor * ( D * V );\n  }\n  #endif\n  float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n      float dotNV = saturate( dot( normal, viewDir ) );\n      float r2 = roughness * roughness;\n      float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n      float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n      float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n      return saturate( DG * RECIPROCAL_PI );\n  }\n  vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n      float dotNV = saturate( dot( normal, viewDir ) );\n      const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n      const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n      vec4 r = roughness * c0 + c1;\n      float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n      vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n      return fab;\n  }\n  vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n      vec2 fab = DFGApprox( normal, viewDir, roughness );\n      return specularColor * fab.x + specularF90 * fab.y;\n  }\n  #ifdef USE_IRIDESCENCE\n  void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n  #else\n  void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n  #endif\n      vec2 fab = DFGApprox( normal, viewDir, roughness );\n      #ifdef USE_IRIDESCENCE\n          vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n      #else\n          vec3 Fr = specularColor;\n      #endif\n      vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n      float Ess = fab.x + fab.y;\n      float Ems = 1.0 - Ess;\n      vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n      singleScatter += FssEss;\n      multiScatter += Fms * Ems;\n  }\n  #if NUM_RECT_AREA_LIGHTS > 0\n      void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n          vec3 normal = geometry.normal;\n          vec3 viewDir = geometry.viewDir;\n          vec3 position = geometry.position;\n          vec3 lightPos = rectAreaLight.position;\n          vec3 halfWidth = rectAreaLight.halfWidth;\n          vec3 halfHeight = rectAreaLight.halfHeight;\n          vec3 lightColor = rectAreaLight.color;\n          float roughness = material.roughness;\n          vec3 rectCoords[ 4 ];\n          rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n          rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n          rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n          vec2 uv = LTC_Uv( normal, viewDir, roughness );\n          vec4 t1 = texture2D( ltc_1, uv );\n          vec4 t2 = texture2D( ltc_2, uv );\n          mat3 mInv = mat3(\n              vec3( t1.x, 0, t1.y ),\n              vec3(    0, 1,    0 ),\n              vec3( t1.z, 0, t1.w )\n          );\n          vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n          reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n          reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n      }\n  #endif\n  void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n      float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n      vec3 irradiance = dotNL * directLight.color;\n      #ifdef USE_CLEARCOAT\n          float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n          vec3 ccIrradiance = dotNLcc * directLight.color;\n          clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n      #endif\n      #ifdef USE_SHEEN\n          sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n      #endif\n      reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n      reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n  }\n  void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n      reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n  }\n  void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n      #ifdef USE_CLEARCOAT\n          clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n      #endif\n      #ifdef USE_SHEEN\n          sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n      #endif\n      vec3 singleScattering = vec3( 0.0 );\n      vec3 multiScattering = vec3( 0.0 );\n      vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n      #ifdef USE_IRIDESCENCE\n          computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n      #else\n          computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n      #endif\n      vec3 totalScattering = singleScattering + multiScattering;\n      vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n      reflectedLight.indirectSpecular += radiance * singleScattering;\n      reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n      reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n  }\n  #define RE_Direct\t\t\t\tRE_Direct_Physical\n  #define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n  #define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n  #define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n  float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n      return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n  }",
          lights_fragment_begin:
            "\n  GeometricContext geometry;\n  geometry.position = - vViewPosition;\n  geometry.normal = normal;\n  geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n  #ifdef USE_CLEARCOAT\n      geometry.clearcoatNormal = clearcoatNormal;\n  #endif\n  #ifdef USE_IRIDESCENCE\n      float dotNVi = saturate( dot( normal, geometry.viewDir ) );\n      if ( material.iridescenceThickness == 0.0 ) {\n          material.iridescence = 0.0;\n      } else {\n          material.iridescence = saturate( material.iridescence );\n      }\n      if ( material.iridescence > 0.0 ) {\n          material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n          material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n      }\n  #endif\n  IncidentLight directLight;\n  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n      PointLight pointLight;\n      #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n      PointLightShadow pointLightShadow;\n      #endif\n      #pragma unroll_loop_start\n      for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n          pointLight = pointLights[ i ];\n          getPointLightInfo( pointLight, geometry, directLight );\n          #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n          pointLightShadow = pointLightShadows[ i ];\n          directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n          #endif\n          RE_Direct( directLight, geometry, material, reflectedLight );\n      }\n      #pragma unroll_loop_end\n  #endif\n  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n      SpotLight spotLight;\n      vec4 spotColor;\n      vec3 spotLightCoord;\n      bool inSpotLightMap;\n      #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n      SpotLightShadow spotLightShadow;\n      #endif\n      #pragma unroll_loop_start\n      for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n          spotLight = spotLights[ i ];\n          getSpotLightInfo( spotLight, geometry, directLight );\n          #if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n          #define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n          #elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n          #define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n          #else\n          #define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n          #endif\n          #if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n              spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n              inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n              spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n              directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n          #endif\n          #undef SPOT_LIGHT_MAP_INDEX\n          #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n          spotLightShadow = spotLightShadows[ i ];\n          directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n          #endif\n          RE_Direct( directLight, geometry, material, reflectedLight );\n      }\n      #pragma unroll_loop_end\n  #endif\n  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n      DirectionalLight directionalLight;\n      #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n      DirectionalLightShadow directionalLightShadow;\n      #endif\n      #pragma unroll_loop_start\n      for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n          directionalLight = directionalLights[ i ];\n          getDirectionalLightInfo( directionalLight, geometry, directLight );\n          #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n          directionalLightShadow = directionalLightShadows[ i ];\n          directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n          #endif\n          RE_Direct( directLight, geometry, material, reflectedLight );\n      }\n      #pragma unroll_loop_end\n  #endif\n  #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n      RectAreaLight rectAreaLight;\n      #pragma unroll_loop_start\n      for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n          rectAreaLight = rectAreaLights[ i ];\n          RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n      }\n      #pragma unroll_loop_end\n  #endif\n  #if defined( RE_IndirectDiffuse )\n      vec3 iblIrradiance = vec3( 0.0 );\n      vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n      #if ( NUM_HEMI_LIGHTS > 0 )\n          #pragma unroll_loop_start\n          for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n              irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n          }\n          #pragma unroll_loop_end\n      #endif\n  #endif\n  #if defined( RE_IndirectSpecular )\n      vec3 radiance = vec3( 0.0 );\n      vec3 clearcoatRadiance = vec3( 0.0 );\n  #endif",
          lights_fragment_maps:
            "#if defined( RE_IndirectDiffuse )\n      #ifdef USE_LIGHTMAP\n          vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n          vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n          irradiance += lightMapIrradiance;\n      #endif\n      #if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n          iblIrradiance += getIBLIrradiance( geometry.normal );\n      #endif\n  #endif\n  #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n      radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n      #ifdef USE_CLEARCOAT\n          clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n      #endif\n  #endif",
          lights_fragment_end:
            "#if defined( RE_IndirectDiffuse )\n      RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n  #endif\n  #if defined( RE_IndirectSpecular )\n      RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n  #endif",
          logdepthbuf_fragment:
            "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n      gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n  #endif",
          logdepthbuf_pars_fragment:
            "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n      uniform float logDepthBufFC;\n      varying float vFragDepth;\n      varying float vIsPerspective;\n  #endif",
          logdepthbuf_pars_vertex:
            "#ifdef USE_LOGDEPTHBUF\n      #ifdef USE_LOGDEPTHBUF_EXT\n          varying float vFragDepth;\n          varying float vIsPerspective;\n      #else\n          uniform float logDepthBufFC;\n      #endif\n  #endif",
          logdepthbuf_vertex:
            "#ifdef USE_LOGDEPTHBUF\n      #ifdef USE_LOGDEPTHBUF_EXT\n          vFragDepth = 1.0 + gl_Position.w;\n          vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n      #else\n          if ( isPerspectiveMatrix( projectionMatrix ) ) {\n              gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n              gl_Position.z *= gl_Position.w;\n          }\n      #endif\n  #endif",
          map_fragment:
            "#ifdef USE_MAP\n      vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n      #ifdef DECODE_VIDEO_TEXTURE\n          sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n      #endif\n      diffuseColor *= sampledDiffuseColor;\n  #endif",
          map_pars_fragment:
            "#ifdef USE_MAP\n      uniform sampler2D map;\n  #endif",
          map_particle_fragment:
            "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n      #if defined( USE_POINTS_UV )\n          vec2 uv = vUv;\n      #else\n          vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n      #endif\n  #endif\n  #ifdef USE_MAP\n      diffuseColor *= texture2D( map, uv );\n  #endif\n  #ifdef USE_ALPHAMAP\n      diffuseColor.a *= texture2D( alphaMap, uv ).g;\n  #endif",
          map_particle_pars_fragment:
            "#if defined( USE_POINTS_UV )\n      varying vec2 vUv;\n  #else\n      #if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n          uniform mat3 uvTransform;\n      #endif\n  #endif\n  #ifdef USE_MAP\n      uniform sampler2D map;\n  #endif\n  #ifdef USE_ALPHAMAP\n      uniform sampler2D alphaMap;\n  #endif",
          metalnessmap_fragment:
            "float metalnessFactor = metalness;\n  #ifdef USE_METALNESSMAP\n      vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n      metalnessFactor *= texelMetalness.b;\n  #endif",
          metalnessmap_pars_fragment:
            "#ifdef USE_METALNESSMAP\n      uniform sampler2D metalnessMap;\n  #endif",
          morphcolor_vertex:
            "#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n      vColor *= morphTargetBaseInfluence;\n      for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n          #if defined( USE_COLOR_ALPHA )\n              if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n          #elif defined( USE_COLOR )\n              if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n          #endif\n      }\n  #endif",
          morphnormal_vertex:
            "#ifdef USE_MORPHNORMALS\n      objectNormal *= morphTargetBaseInfluence;\n      #ifdef MORPHTARGETS_TEXTURE\n          for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n              if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n          }\n      #else\n          objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n          objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n          objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n          objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n      #endif\n  #endif",
          morphtarget_pars_vertex:
            "#ifdef USE_MORPHTARGETS\n      uniform float morphTargetBaseInfluence;\n      #ifdef MORPHTARGETS_TEXTURE\n          uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n          uniform sampler2DArray morphTargetsTexture;\n          uniform ivec2 morphTargetsTextureSize;\n          vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n              int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n              int y = texelIndex / morphTargetsTextureSize.x;\n              int x = texelIndex - y * morphTargetsTextureSize.x;\n              ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n              return texelFetch( morphTargetsTexture, morphUV, 0 );\n          }\n      #else\n          #ifndef USE_MORPHNORMALS\n              uniform float morphTargetInfluences[ 8 ];\n          #else\n              uniform float morphTargetInfluences[ 4 ];\n          #endif\n      #endif\n  #endif",
          morphtarget_vertex:
            "#ifdef USE_MORPHTARGETS\n      transformed *= morphTargetBaseInfluence;\n      #ifdef MORPHTARGETS_TEXTURE\n          for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n              if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n          }\n      #else\n          transformed += morphTarget0 * morphTargetInfluences[ 0 ];\n          transformed += morphTarget1 * morphTargetInfluences[ 1 ];\n          transformed += morphTarget2 * morphTargetInfluences[ 2 ];\n          transformed += morphTarget3 * morphTargetInfluences[ 3 ];\n          #ifndef USE_MORPHNORMALS\n              transformed += morphTarget4 * morphTargetInfluences[ 4 ];\n              transformed += morphTarget5 * morphTargetInfluences[ 5 ];\n              transformed += morphTarget6 * morphTargetInfluences[ 6 ];\n              transformed += morphTarget7 * morphTargetInfluences[ 7 ];\n          #endif\n      #endif\n  #endif",
          normal_fragment_begin:
            "float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n  #ifdef FLAT_SHADED\n      vec3 fdx = dFdx( vViewPosition );\n      vec3 fdy = dFdy( vViewPosition );\n      vec3 normal = normalize( cross( fdx, fdy ) );\n  #else\n      vec3 normal = normalize( vNormal );\n      #ifdef DOUBLE_SIDED\n          normal *= faceDirection;\n      #endif\n  #endif\n  #ifdef USE_NORMALMAP_TANGENTSPACE\n      #ifdef USE_TANGENT\n          mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n      #else\n          mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n      #endif\n      #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n          tbn[0] *= faceDirection;\n          tbn[1] *= faceDirection;\n      #endif\n  #endif\n  #ifdef USE_CLEARCOAT_NORMALMAP\n      #ifdef USE_TANGENT\n          mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n      #else\n          mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n      #endif\n      #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n          tbn2[0] *= faceDirection;\n          tbn2[1] *= faceDirection;\n      #endif\n  #endif\n  vec3 geometryNormal = normal;",
          normal_fragment_maps:
            "#ifdef USE_NORMALMAP_OBJECTSPACE\n      normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n      #ifdef FLIP_SIDED\n          normal = - normal;\n      #endif\n      #ifdef DOUBLE_SIDED\n          normal = normal * faceDirection;\n      #endif\n      normal = normalize( normalMatrix * normal );\n  #elif defined( USE_NORMALMAP_TANGENTSPACE )\n      vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n      mapN.xy *= normalScale;\n      normal = normalize( tbn * mapN );\n  #elif defined( USE_BUMPMAP )\n      normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n  #endif",
          normal_pars_fragment:
            "#ifndef FLAT_SHADED\n      varying vec3 vNormal;\n      #ifdef USE_TANGENT\n          varying vec3 vTangent;\n          varying vec3 vBitangent;\n      #endif\n  #endif",
          normal_pars_vertex:
            "#ifndef FLAT_SHADED\n      varying vec3 vNormal;\n      #ifdef USE_TANGENT\n          varying vec3 vTangent;\n          varying vec3 vBitangent;\n      #endif\n  #endif",
          normal_vertex:
            "#ifndef FLAT_SHADED\n      vNormal = normalize( transformedNormal );\n      #ifdef USE_TANGENT\n          vTangent = normalize( transformedTangent );\n          vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n      #endif\n  #endif",
          normalmap_pars_fragment:
            "#ifdef USE_NORMALMAP\n      uniform sampler2D normalMap;\n      uniform vec2 normalScale;\n  #endif\n  #ifdef USE_NORMALMAP_OBJECTSPACE\n      uniform mat3 normalMatrix;\n  #endif\n  #if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n      mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n          vec3 q0 = dFdx( eye_pos.xyz );\n          vec3 q1 = dFdy( eye_pos.xyz );\n          vec2 st0 = dFdx( uv.st );\n          vec2 st1 = dFdy( uv.st );\n          vec3 N = surf_norm;\n          vec3 q1perp = cross( q1, N );\n          vec3 q0perp = cross( N, q0 );\n          vec3 T = q1perp * st0.x + q0perp * st1.x;\n          vec3 B = q1perp * st0.y + q0perp * st1.y;\n          float det = max( dot( T, T ), dot( B, B ) );\n          float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n          return mat3( T * scale, B * scale, N );\n      }\n  #endif",
          clearcoat_normal_fragment_begin:
            "#ifdef USE_CLEARCOAT\n      vec3 clearcoatNormal = geometryNormal;\n  #endif",
          clearcoat_normal_fragment_maps:
            "#ifdef USE_CLEARCOAT_NORMALMAP\n      vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n      clearcoatMapN.xy *= clearcoatNormalScale;\n      clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n  #endif",
          clearcoat_pars_fragment:
            "#ifdef USE_CLEARCOATMAP\n      uniform sampler2D clearcoatMap;\n  #endif\n  #ifdef USE_CLEARCOAT_NORMALMAP\n      uniform sampler2D clearcoatNormalMap;\n      uniform vec2 clearcoatNormalScale;\n  #endif\n  #ifdef USE_CLEARCOAT_ROUGHNESSMAP\n      uniform sampler2D clearcoatRoughnessMap;\n  #endif",
          iridescence_pars_fragment:
            "#ifdef USE_IRIDESCENCEMAP\n      uniform sampler2D iridescenceMap;\n  #endif\n  #ifdef USE_IRIDESCENCE_THICKNESSMAP\n      uniform sampler2D iridescenceThicknessMap;\n  #endif",
          output_fragment:
            "#ifdef OPAQUE\n  diffuseColor.a = 1.0;\n  #endif\n  #ifdef USE_TRANSMISSION\n  diffuseColor.a *= material.transmissionAlpha + 0.1;\n  #endif\n  gl_FragColor = vec4( outgoingLight, diffuseColor.a );",
          packing:
            "vec3 packNormalToRGB( const in vec3 normal ) {\n      return normalize( normal ) * 0.5 + 0.5;\n  }\n  vec3 unpackRGBToNormal( const in vec3 rgb ) {\n      return 2.0 * rgb.xyz - 1.0;\n  }\n  const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\n  const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\n  const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n  const float ShiftRight8 = 1. / 256.;\n  vec4 packDepthToRGBA( const in float v ) {\n      vec4 r = vec4( fract( v * PackFactors ), v );\n      r.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n  }\n  float unpackRGBAToDepth( const in vec4 v ) {\n      return dot( v, UnpackFactors );\n  }\n  vec2 packDepthToRG( in highp float v ) {\n      return packDepthToRGBA( v ).yx;\n  }\n  float unpackRGToDepth( const in highp vec2 v ) {\n      return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n  }\n  vec4 pack2HalfToRGBA( vec2 v ) {\n      vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n      return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n  }\n  vec2 unpackRGBATo2Half( vec4 v ) {\n      return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n  }\n  float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n      return ( viewZ + near ) / ( near - far );\n  }\n  float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n      return depth * ( near - far ) - near;\n  }\n  float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n      return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n  }\n  float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n      return ( near * far ) / ( ( far - near ) * depth - far );\n  }",
          premultiplied_alpha_fragment:
            "#ifdef PREMULTIPLIED_ALPHA\n      gl_FragColor.rgb *= gl_FragColor.a;\n  #endif",
          project_vertex:
            "vec4 mvPosition = vec4( transformed, 1.0 );\n  #ifdef USE_INSTANCING\n      mvPosition = instanceMatrix * mvPosition;\n  #endif\n  mvPosition = modelViewMatrix * mvPosition;\n  gl_Position = projectionMatrix * mvPosition;",
          dithering_fragment:
            "#ifdef DITHERING\n      gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n  #endif",
          dithering_pars_fragment:
            "#ifdef DITHERING\n      vec3 dithering( vec3 color ) {\n          float grid_position = rand( gl_FragCoord.xy );\n          vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n          dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n          return color + dither_shift_RGB;\n      }\n  #endif",
          roughnessmap_fragment:
            "float roughnessFactor = roughness;\n  #ifdef USE_ROUGHNESSMAP\n      vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n      roughnessFactor *= texelRoughness.g;\n  #endif",
          roughnessmap_pars_fragment:
            "#ifdef USE_ROUGHNESSMAP\n      uniform sampler2D roughnessMap;\n  #endif",
          shadowmap_pars_fragment:
            "#if NUM_SPOT_LIGHT_COORDS > 0\n      varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n  #endif\n  #if NUM_SPOT_LIGHT_MAPS > 0\n      uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n  #endif\n  #ifdef USE_SHADOWMAP\n      #if NUM_DIR_LIGHT_SHADOWS > 0\n          uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n          varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n          struct DirectionalLightShadow {\n              float shadowBias;\n              float shadowNormalBias;\n              float shadowRadius;\n              vec2 shadowMapSize;\n          };\n          uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n      #endif\n      #if NUM_SPOT_LIGHT_SHADOWS > 0\n          uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n          struct SpotLightShadow {\n              float shadowBias;\n              float shadowNormalBias;\n              float shadowRadius;\n              vec2 shadowMapSize;\n          };\n          uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n      #endif\n      #if NUM_POINT_LIGHT_SHADOWS > 0\n          uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n          varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n          struct PointLightShadow {\n              float shadowBias;\n              float shadowNormalBias;\n              float shadowRadius;\n              vec2 shadowMapSize;\n              float shadowCameraNear;\n              float shadowCameraFar;\n          };\n          uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n      #endif\n      float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n          return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n      }\n      vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n          return unpackRGBATo2Half( texture2D( shadow, uv ) );\n      }\n      float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n          float occlusion = 1.0;\n          vec2 distribution = texture2DDistribution( shadow, uv );\n          float hard_shadow = step( compare , distribution.x );\n          if (hard_shadow != 1.0 ) {\n              float distance = compare - distribution.x ;\n              float variance = max( 0.00000, distribution.y * distribution.y );\n              float softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n          }\n          return occlusion;\n      }\n      float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n          float shadow = 1.0;\n          shadowCoord.xyz /= shadowCoord.w;\n          shadowCoord.z += shadowBias;\n          bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n          bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n          if ( frustumTest ) {\n          #if defined( SHADOWMAP_TYPE_PCF )\n              vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n              float dx0 = - texelSize.x * shadowRadius;\n              float dy0 = - texelSize.y * shadowRadius;\n              float dx1 = + texelSize.x * shadowRadius;\n              float dy1 = + texelSize.y * shadowRadius;\n              float dx2 = dx0 / 2.0;\n              float dy2 = dy0 / 2.0;\n              float dx3 = dx1 / 2.0;\n              float dy3 = dy1 / 2.0;\n              shadow = (\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n              ) * ( 1.0 / 17.0 );\n          #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n              vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n              float dx = texelSize.x;\n              float dy = texelSize.y;\n              vec2 uv = shadowCoord.xy;\n              vec2 f = fract( uv * shadowMapSize + 0.5 );\n              uv -= f * texelSize;\n              shadow = (\n                  texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n                  texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n                  texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n                  mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n                       texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n                       f.x ) +\n                  mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n                       texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n                       f.x ) +\n                  mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n                       texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n                       f.y ) +\n                  mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n                       texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n                       f.y ) +\n                  mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n                            texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n                            f.x ),\n                       mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n                            texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n                            f.x ),\n                       f.y )\n              ) * ( 1.0 / 9.0 );\n          #elif defined( SHADOWMAP_TYPE_VSM )\n              shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n          #else\n              shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n          #endif\n          }\n          return shadow;\n      }\n      vec2 cubeToUV( vec3 v, float texelSizeY ) {\n          vec3 absV = abs( v );\n          float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n          absV *= scaleToCube;\n          v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n          vec2 planar = v.xy;\n          float almostATexel = 1.5 * texelSizeY;\n          float almostOne = 1.0 - almostATexel;\n          if ( absV.z >= almostOne ) {\n              if ( v.z > 0.0 )\n                  planar.x = 4.0 - v.x;\n          } else if ( absV.x >= almostOne ) {\n              float signX = sign( v.x );\n              planar.x = v.z * signX + 2.0 * signX;\n          } else if ( absV.y >= almostOne ) {\n              float signY = sign( v.y );\n              planar.x = v.x + 2.0 * signY + 2.0;\n              planar.y = v.z * signY - 2.0;\n          }\n          return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n      }\n      float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n          vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n          vec3 lightToPosition = shadowCoord.xyz;\n          float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n          vec3 bd3D = normalize( lightToPosition );\n          #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n              vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n              return (\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n                  texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n                  texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n              ) * ( 1.0 / 9.0 );\n          #else\n              return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n          #endif\n      }\n  #endif",
          shadowmap_pars_vertex:
            "#if NUM_SPOT_LIGHT_COORDS > 0\n      uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n      varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n  #endif\n  #ifdef USE_SHADOWMAP\n      #if NUM_DIR_LIGHT_SHADOWS > 0\n          uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n          varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n          struct DirectionalLightShadow {\n              float shadowBias;\n              float shadowNormalBias;\n              float shadowRadius;\n              vec2 shadowMapSize;\n          };\n          uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n      #endif\n      #if NUM_SPOT_LIGHT_SHADOWS > 0\n          struct SpotLightShadow {\n              float shadowBias;\n              float shadowNormalBias;\n              float shadowRadius;\n              vec2 shadowMapSize;\n          };\n          uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n      #endif\n      #if NUM_POINT_LIGHT_SHADOWS > 0\n          uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n          varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n          struct PointLightShadow {\n              float shadowBias;\n              float shadowNormalBias;\n              float shadowRadius;\n              vec2 shadowMapSize;\n              float shadowCameraNear;\n              float shadowCameraFar;\n          };\n          uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n      #endif\n  #endif",
          shadowmap_vertex:
            "#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n      vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n      vec4 shadowWorldPosition;\n  #endif\n  #if defined( USE_SHADOWMAP )\n      #if NUM_DIR_LIGHT_SHADOWS > 0\n          #pragma unroll_loop_start\n          for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n              shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n              vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n          }\n          #pragma unroll_loop_end\n      #endif\n      #if NUM_POINT_LIGHT_SHADOWS > 0\n          #pragma unroll_loop_start\n          for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n              shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n              vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n          }\n          #pragma unroll_loop_end\n      #endif\n  #endif\n  #if NUM_SPOT_LIGHT_COORDS > 0\n      #pragma unroll_loop_start\n      for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n          shadowWorldPosition = worldPosition;\n          #if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n              shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n          #endif\n          vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n      }\n      #pragma unroll_loop_end\n  #endif",
          shadowmask_pars_fragment:
            "float getShadowMask() {\n      float shadow = 1.0;\n      #ifdef USE_SHADOWMAP\n      #if NUM_DIR_LIGHT_SHADOWS > 0\n      DirectionalLightShadow directionalLight;\n      #pragma unroll_loop_start\n      for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n          directionalLight = directionalLightShadows[ i ];\n          shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n      }\n      #pragma unroll_loop_end\n      #endif\n      #if NUM_SPOT_LIGHT_SHADOWS > 0\n      SpotLightShadow spotLight;\n      #pragma unroll_loop_start\n      for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n          spotLight = spotLightShadows[ i ];\n          shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n      }\n      #pragma unroll_loop_end\n      #endif\n      #if NUM_POINT_LIGHT_SHADOWS > 0\n      PointLightShadow pointLight;\n      #pragma unroll_loop_start\n      for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n          pointLight = pointLightShadows[ i ];\n          shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n      }\n      #pragma unroll_loop_end\n      #endif\n      #endif\n      return shadow;\n  }",
          skinbase_vertex:
            "#ifdef USE_SKINNING\n      mat4 boneMatX = getBoneMatrix( skinIndex.x );\n      mat4 boneMatY = getBoneMatrix( skinIndex.y );\n      mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n      mat4 boneMatW = getBoneMatrix( skinIndex.w );\n  #endif",
          skinning_pars_vertex:
            "#ifdef USE_SKINNING\n      uniform mat4 bindMatrix;\n      uniform mat4 bindMatrixInverse;\n      uniform highp sampler2D boneTexture;\n      uniform int boneTextureSize;\n      mat4 getBoneMatrix( const in float i ) {\n          float j = i * 4.0;\n          float x = mod( j, float( boneTextureSize ) );\n          float y = floor( j / float( boneTextureSize ) );\n          float dx = 1.0 / float( boneTextureSize );\n          float dy = 1.0 / float( boneTextureSize );\n          y = dy * ( y + 0.5 );\n          vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n          vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n          vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n          vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n          mat4 bone = mat4( v1, v2, v3, v4 );\n          return bone;\n      }\n  #endif",
          skinning_vertex:
            "#ifdef USE_SKINNING\n      vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n      vec4 skinned = vec4( 0.0 );\n      skinned += boneMatX * skinVertex * skinWeight.x;\n      skinned += boneMatY * skinVertex * skinWeight.y;\n      skinned += boneMatZ * skinVertex * skinWeight.z;\n      skinned += boneMatW * skinVertex * skinWeight.w;\n      transformed = ( bindMatrixInverse * skinned ).xyz;\n  #endif",
          skinnormal_vertex:
            "#ifdef USE_SKINNING\n      mat4 skinMatrix = mat4( 0.0 );\n      skinMatrix += skinWeight.x * boneMatX;\n      skinMatrix += skinWeight.y * boneMatY;\n      skinMatrix += skinWeight.z * boneMatZ;\n      skinMatrix += skinWeight.w * boneMatW;\n      skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n      objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n      #ifdef USE_TANGENT\n          objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n      #endif\n  #endif",
          specularmap_fragment:
            "float specularStrength;\n  #ifdef USE_SPECULARMAP\n      vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n      specularStrength = texelSpecular.r;\n  #else\n      specularStrength = 1.0;\n  #endif",
          specularmap_pars_fragment:
            "#ifdef USE_SPECULARMAP\n      uniform sampler2D specularMap;\n  #endif",
          tonemapping_fragment:
            "#if defined( TONE_MAPPING )\n      gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n  #endif",
          tonemapping_pars_fragment:
            "#ifndef saturate\n  #define saturate( a ) clamp( a, 0.0, 1.0 )\n  #endif\n  uniform float toneMappingExposure;\n  vec3 LinearToneMapping( vec3 color ) {\n      return toneMappingExposure * color;\n  }\n  vec3 ReinhardToneMapping( vec3 color ) {\n      color *= toneMappingExposure;\n      return saturate( color / ( vec3( 1.0 ) + color ) );\n  }\n  vec3 OptimizedCineonToneMapping( vec3 color ) {\n      color *= toneMappingExposure;\n      color = max( vec3( 0.0 ), color - 0.004 );\n      return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n  }\n  vec3 RRTAndODTFit( vec3 v ) {\n      vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n      vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n      return a / b;\n  }\n  vec3 ACESFilmicToneMapping( vec3 color ) {\n      const mat3 ACESInputMat = mat3(\n          vec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n          vec3( 0.04823, 0.01566, 0.83777 )\n      );\n      const mat3 ACESOutputMat = mat3(\n          vec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n          vec3( -0.07367, -0.00605,  1.07602 )\n      );\n      color *= toneMappingExposure / 0.6;\n      color = ACESInputMat * color;\n      color = RRTAndODTFit( color );\n      color = ACESOutputMat * color;\n      return saturate( color );\n  }\n  vec3 CustomToneMapping( vec3 color ) { return color; }",
          transmission_fragment:
            "#ifdef USE_TRANSMISSION\n      material.transmission = transmission;\n      material.transmissionAlpha = 1.0;\n      material.thickness = thickness;\n      material.attenuationDistance = attenuationDistance;\n      material.attenuationColor = attenuationColor;\n      #ifdef USE_TRANSMISSIONMAP\n          material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n      #endif\n      #ifdef USE_THICKNESSMAP\n          material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n      #endif\n      vec3 pos = vWorldPosition;\n      vec3 v = normalize( cameraPosition - pos );\n      vec3 n = inverseTransformDirection( normal, viewMatrix );\n      vec4 transmission = getIBLVolumeRefraction(\n          n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n          pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n          material.attenuationColor, material.attenuationDistance );\n      material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n      totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n  #endif",
          transmission_pars_fragment:
            "#ifdef USE_TRANSMISSION\n      uniform float transmission;\n      uniform float thickness;\n      uniform float attenuationDistance;\n      uniform vec3 attenuationColor;\n      #ifdef USE_TRANSMISSIONMAP\n          uniform sampler2D transmissionMap;\n      #endif\n      #ifdef USE_THICKNESSMAP\n          uniform sampler2D thicknessMap;\n      #endif\n      uniform vec2 transmissionSamplerSize;\n      uniform sampler2D transmissionSamplerMap;\n      uniform mat4 modelMatrix;\n      uniform mat4 projectionMatrix;\n      varying vec3 vWorldPosition;\n      float w0( float a ) {\n          return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n      }\n      float w1( float a ) {\n          return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n      }\n      float w2( float a ){\n          return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n      }\n      float w3( float a ) {\n          return ( 1.0 / 6.0 ) * ( a * a * a );\n      }\n      float g0( float a ) {\n          return w0( a ) + w1( a );\n      }\n      float g1( float a ) {\n          return w2( a ) + w3( a );\n      }\n      float h0( float a ) {\n          return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n      }\n      float h1( float a ) {\n          return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n      }\n      vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n          uv = uv * texelSize.zw + 0.5;\n          vec2 iuv = floor( uv );\n          vec2 fuv = fract( uv );\n          float g0x = g0( fuv.x );\n          float g1x = g1( fuv.x );\n          float h0x = h0( fuv.x );\n          float h1x = h1( fuv.x );\n          float h0y = h0( fuv.y );\n          float h1y = h1( fuv.y );\n          vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n          vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n          vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n          vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n          \n          vec2 lodFudge = pow( 1.95, lod ) / fullSize;\n          return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n              g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n      }\n      vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n          vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n          vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n          vec2 fLodSizeInv = 1.0 / fLodSize;\n          vec2 cLodSizeInv = 1.0 / cLodSize;\n          vec2 fullSize = vec2( textureSize( sampler, 0 ) );\n          vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n          vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n          return mix( fSample, cSample, fract( lod ) );\n      }\n      vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n          vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n          vec3 modelScale;\n          modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n          modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n          modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n          return normalize( refractionVector ) * thickness * modelScale;\n      }\n      float applyIorToRoughness( const in float roughness, const in float ior ) {\n          return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n      }\n      vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n          float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n          return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n      }\n      vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n          if ( isinf( attenuationDistance ) ) {\n              return radiance;\n          } else {\n              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n          }\n      }\n      vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n          const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n          const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n          const in vec3 attenuationColor, const in float attenuationDistance ) {\n          vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n          vec3 refractedRayExit = position + transmissionRay;\n          vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n          vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n          refractionCoords += 1.0;\n          refractionCoords /= 2.0;\n          vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n          vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n          vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n          return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n      }\n  #endif",
          uv_pars_fragment:
            "#ifdef USE_UV\n      varying vec2 vUv;\n  #endif\n  #ifdef USE_MAP\n      varying vec2 vMapUv;\n  #endif\n  #ifdef USE_ALPHAMAP\n      varying vec2 vAlphaMapUv;\n  #endif\n  #ifdef USE_LIGHTMAP\n      varying vec2 vLightMapUv;\n  #endif\n  #ifdef USE_AOMAP\n      varying vec2 vAoMapUv;\n  #endif\n  #ifdef USE_BUMPMAP\n      varying vec2 vBumpMapUv;\n  #endif\n  #ifdef USE_NORMALMAP\n      varying vec2 vNormalMapUv;\n  #endif\n  #ifdef USE_EMISSIVEMAP\n      varying vec2 vEmissiveMapUv;\n  #endif\n  #ifdef USE_METALNESSMAP\n      varying vec2 vMetalnessMapUv;\n  #endif\n  #ifdef USE_ROUGHNESSMAP\n      varying vec2 vRoughnessMapUv;\n  #endif\n  #ifdef USE_CLEARCOATMAP\n      varying vec2 vClearcoatMapUv;\n  #endif\n  #ifdef USE_CLEARCOAT_NORMALMAP\n      varying vec2 vClearcoatNormalMapUv;\n  #endif\n  #ifdef USE_CLEARCOAT_ROUGHNESSMAP\n      varying vec2 vClearcoatRoughnessMapUv;\n  #endif\n  #ifdef USE_IRIDESCENCEMAP\n      varying vec2 vIridescenceMapUv;\n  #endif\n  #ifdef USE_IRIDESCENCE_THICKNESSMAP\n      varying vec2 vIridescenceThicknessMapUv;\n  #endif\n  #ifdef USE_SHEEN_COLORMAP\n      varying vec2 vSheenColorMapUv;\n  #endif\n  #ifdef USE_SHEEN_ROUGHNESSMAP\n      varying vec2 vSheenRoughnessMapUv;\n  #endif\n  #ifdef USE_SPECULARMAP\n      varying vec2 vSpecularMapUv;\n  #endif\n  #ifdef USE_SPECULAR_COLORMAP\n      varying vec2 vSpecularColorMapUv;\n  #endif\n  #ifdef USE_SPECULAR_INTENSITYMAP\n      varying vec2 vSpecularIntensityMapUv;\n  #endif\n  #ifdef USE_TRANSMISSIONMAP\n      uniform mat3 transmissionMapTransform;\n      varying vec2 vTransmissionMapUv;\n  #endif\n  #ifdef USE_THICKNESSMAP\n      uniform mat3 thicknessMapTransform;\n      varying vec2 vThicknessMapUv;\n  #endif",
          uv_pars_vertex:
            "#ifdef USE_UV\n      varying vec2 vUv;\n  #endif\n  #ifdef USE_UV2\n      attribute vec2 uv2;\n  #endif\n  #ifdef USE_MAP\n      uniform mat3 mapTransform;\n      varying vec2 vMapUv;\n  #endif\n  #ifdef USE_ALPHAMAP\n      uniform mat3 alphaMapTransform;\n      varying vec2 vAlphaMapUv;\n  #endif\n  #ifdef USE_LIGHTMAP\n      uniform mat3 lightMapTransform;\n      varying vec2 vLightMapUv;\n  #endif\n  #ifdef USE_AOMAP\n      uniform mat3 aoMapTransform;\n      varying vec2 vAoMapUv;\n  #endif\n  #ifdef USE_BUMPMAP\n      uniform mat3 bumpMapTransform;\n      varying vec2 vBumpMapUv;\n  #endif\n  #ifdef USE_NORMALMAP\n      uniform mat3 normalMapTransform;\n      varying vec2 vNormalMapUv;\n  #endif\n  #ifdef USE_DISPLACEMENTMAP\n      uniform mat3 displacementMapTransform;\n      varying vec2 vDisplacementMapUv;\n  #endif\n  #ifdef USE_EMISSIVEMAP\n      uniform mat3 emissiveMapTransform;\n      varying vec2 vEmissiveMapUv;\n  #endif\n  #ifdef USE_METALNESSMAP\n      uniform mat3 metalnessMapTransform;\n      varying vec2 vMetalnessMapUv;\n  #endif\n  #ifdef USE_ROUGHNESSMAP\n      uniform mat3 roughnessMapTransform;\n      varying vec2 vRoughnessMapUv;\n  #endif\n  #ifdef USE_CLEARCOATMAP\n      uniform mat3 clearcoatMapTransform;\n      varying vec2 vClearcoatMapUv;\n  #endif\n  #ifdef USE_CLEARCOAT_NORMALMAP\n      uniform mat3 clearcoatNormalMapTransform;\n      varying vec2 vClearcoatNormalMapUv;\n  #endif\n  #ifdef USE_CLEARCOAT_ROUGHNESSMAP\n      uniform mat3 clearcoatRoughnessMapTransform;\n      varying vec2 vClearcoatRoughnessMapUv;\n  #endif\n  #ifdef USE_SHEEN_COLORMAP\n      uniform mat3 sheenColorMapTransform;\n      varying vec2 vSheenColorMapUv;\n  #endif\n  #ifdef USE_SHEEN_ROUGHNESSMAP\n      uniform mat3 sheenRoughnessMapTransform;\n      varying vec2 vSheenRoughnessMapUv;\n  #endif\n  #ifdef USE_IRIDESCENCEMAP\n      uniform mat3 iridescenceMapTransform;\n      varying vec2 vIridescenceMapUv;\n  #endif\n  #ifdef USE_IRIDESCENCE_THICKNESSMAP\n      uniform mat3 iridescenceThicknessMapTransform;\n      varying vec2 vIridescenceThicknessMapUv;\n  #endif\n  #ifdef USE_SPECULARMAP\n      uniform mat3 specularMapTransform;\n      varying vec2 vSpecularMapUv;\n  #endif\n  #ifdef USE_SPECULAR_COLORMAP\n      uniform mat3 specularColorMapTransform;\n      varying vec2 vSpecularColorMapUv;\n  #endif\n  #ifdef USE_SPECULAR_INTENSITYMAP\n      uniform mat3 specularIntensityMapTransform;\n      varying vec2 vSpecularIntensityMapUv;\n  #endif\n  #ifdef USE_TRANSMISSIONMAP\n      uniform mat3 transmissionMapTransform;\n      varying vec2 vTransmissionMapUv;\n  #endif\n  #ifdef USE_THICKNESSMAP\n      uniform mat3 thicknessMapTransform;\n      varying vec2 vThicknessMapUv;\n  #endif",
          uv_vertex:
            "#ifdef USE_UV\n      vUv = vec3( uv, 1 ).xy;\n  #endif\n  #ifdef USE_MAP\n      vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_ALPHAMAP\n      vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_LIGHTMAP\n      vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_AOMAP\n      vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_BUMPMAP\n      vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_NORMALMAP\n      vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_DISPLACEMENTMAP\n      vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_EMISSIVEMAP\n      vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_METALNESSMAP\n      vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_ROUGHNESSMAP\n      vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_CLEARCOATMAP\n      vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_CLEARCOAT_NORMALMAP\n      vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_CLEARCOAT_ROUGHNESSMAP\n      vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_IRIDESCENCEMAP\n      vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_IRIDESCENCE_THICKNESSMAP\n      vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_SHEEN_COLORMAP\n      vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_SHEEN_ROUGHNESSMAP\n      vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_SPECULARMAP\n      vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_SPECULAR_COLORMAP\n      vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_SPECULAR_INTENSITYMAP\n      vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_TRANSMISSIONMAP\n      vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n  #endif\n  #ifdef USE_THICKNESSMAP\n      vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n  #endif",
          worldpos_vertex:
            "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n      vec4 worldPosition = vec4( transformed, 1.0 );\n      #ifdef USE_INSTANCING\n          worldPosition = instanceMatrix * worldPosition;\n      #endif\n      worldPosition = modelMatrix * worldPosition;\n  #endif",
          background_vert:
            "varying vec2 vUv;\n  uniform mat3 uvTransform;\n  void main() {\n      vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n      gl_Position = vec4( position.xy, 1.0, 1.0 );\n  }",
          background_frag:
            "uniform sampler2D t2D;\n  uniform float backgroundIntensity;\n  varying vec2 vUv;\n  void main() {\n      vec4 texColor = texture2D( t2D, vUv );\n      #ifdef DECODE_VIDEO_TEXTURE\n          texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n      #endif\n      texColor.rgb *= backgroundIntensity;\n      gl_FragColor = texColor;\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n  }",
          backgroundCube_vert:
            "varying vec3 vWorldDirection;\n  #include <common>\n  void main() {\n      vWorldDirection = transformDirection( position, modelMatrix );\n      #include <begin_vertex>\n      #include <project_vertex>\n      gl_Position.z = gl_Position.w;\n  }",
          backgroundCube_frag:
            "#ifdef ENVMAP_TYPE_CUBE\n      uniform samplerCube envMap;\n  #elif defined( ENVMAP_TYPE_CUBE_UV )\n      uniform sampler2D envMap;\n  #endif\n  uniform float flipEnvMap;\n  uniform float backgroundBlurriness;\n  uniform float backgroundIntensity;\n  varying vec3 vWorldDirection;\n  #include <cube_uv_reflection_fragment>\n  void main() {\n      #ifdef ENVMAP_TYPE_CUBE\n          vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n      #elif defined( ENVMAP_TYPE_CUBE_UV )\n          vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n      #else\n          vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n      #endif\n      texColor.rgb *= backgroundIntensity;\n      gl_FragColor = texColor;\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n  }",
          cube_vert:
            "varying vec3 vWorldDirection;\n  #include <common>\n  void main() {\n      vWorldDirection = transformDirection( position, modelMatrix );\n      #include <begin_vertex>\n      #include <project_vertex>\n      gl_Position.z = gl_Position.w;\n  }",
          cube_frag:
            "uniform samplerCube tCube;\n  uniform float tFlip;\n  uniform float opacity;\n  varying vec3 vWorldDirection;\n  void main() {\n      vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n      gl_FragColor = texColor;\n      gl_FragColor.a *= opacity;\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n  }",
          depth_vert:
            "#include <common>\n  #include <uv_pars_vertex>\n  #include <displacementmap_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  varying vec2 vHighPrecisionZW;\n  void main() {\n      #include <uv_vertex>\n      #include <skinbase_vertex>\n      #ifdef USE_DISPLACEMENTMAP\n          #include <beginnormal_vertex>\n          #include <morphnormal_vertex>\n          #include <skinnormal_vertex>\n      #endif\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <displacementmap_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      vHighPrecisionZW = gl_Position.zw;\n  }",
          depth_frag:
            "#if DEPTH_PACKING == 3200\n      uniform float opacity;\n  #endif\n  #include <common>\n  #include <packing>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  varying vec2 vHighPrecisionZW;\n  void main() {\n      #include <clipping_planes_fragment>\n      vec4 diffuseColor = vec4( 1.0 );\n      #if DEPTH_PACKING == 3200\n          diffuseColor.a = opacity;\n      #endif\n      #include <map_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      #include <logdepthbuf_fragment>\n      float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n      #if DEPTH_PACKING == 3200\n          gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n      #elif DEPTH_PACKING == 3201\n          gl_FragColor = packDepthToRGBA( fragCoordZ );\n      #endif\n  }",
          distanceRGBA_vert:
            "#define DISTANCE\n  varying vec3 vWorldPosition;\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <displacementmap_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      #include <skinbase_vertex>\n      #ifdef USE_DISPLACEMENTMAP\n          #include <beginnormal_vertex>\n          #include <morphnormal_vertex>\n          #include <skinnormal_vertex>\n      #endif\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <displacementmap_vertex>\n      #include <project_vertex>\n      #include <worldpos_vertex>\n      #include <clipping_planes_vertex>\n      vWorldPosition = worldPosition.xyz;\n  }",
          distanceRGBA_frag:
            "#define DISTANCE\n  uniform vec3 referencePosition;\n  uniform float nearDistance;\n  uniform float farDistance;\n  varying vec3 vWorldPosition;\n  #include <common>\n  #include <packing>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main () {\n      #include <clipping_planes_fragment>\n      vec4 diffuseColor = vec4( 1.0 );\n      #include <map_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      float dist = length( vWorldPosition - referencePosition );\n      dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n      dist = saturate( dist );\n      gl_FragColor = packDepthToRGBA( dist );\n  }",
          equirect_vert:
            "varying vec3 vWorldDirection;\n  #include <common>\n  void main() {\n      vWorldDirection = transformDirection( position, modelMatrix );\n      #include <begin_vertex>\n      #include <project_vertex>\n  }",
          equirect_frag:
            "uniform sampler2D tEquirect;\n  varying vec3 vWorldDirection;\n  #include <common>\n  void main() {\n      vec3 direction = normalize( vWorldDirection );\n      vec2 sampleUV = equirectUv( direction );\n      gl_FragColor = texture2D( tEquirect, sampleUV );\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n  }",
          linedashed_vert:
            "uniform float scale;\n  attribute float lineDistance;\n  varying float vLineDistance;\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <color_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      vLineDistance = scale * lineDistance;\n      #include <uv_vertex>\n      #include <color_vertex>\n      #include <morphcolor_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      #include <fog_vertex>\n  }",
          linedashed_frag:
            "uniform vec3 diffuse;\n  uniform float opacity;\n  uniform float dashSize;\n  uniform float totalSize;\n  varying float vLineDistance;\n  #include <common>\n  #include <color_pars_fragment>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      if ( mod( vLineDistance, totalSize ) > dashSize ) {\n          discard;\n      }\n      vec3 outgoingLight = vec3( 0.0 );\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      #include <logdepthbuf_fragment>\n      #include <map_fragment>\n      #include <color_fragment>\n      outgoingLight = diffuseColor.rgb;\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n      #include <premultiplied_alpha_fragment>\n  }",
          meshbasic_vert:
            "#include <common>\n  #include <uv_pars_vertex>\n  #include <envmap_pars_vertex>\n  #include <color_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      #include <color_vertex>\n      #include <morphcolor_vertex>\n      #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n          #include <beginnormal_vertex>\n          #include <morphnormal_vertex>\n          #include <skinbase_vertex>\n          #include <skinnormal_vertex>\n          #include <defaultnormal_vertex>\n      #endif\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      #include <worldpos_vertex>\n      #include <envmap_vertex>\n      #include <fog_vertex>\n  }",
          meshbasic_frag:
            "uniform vec3 diffuse;\n  uniform float opacity;\n  #ifndef FLAT_SHADED\n      varying vec3 vNormal;\n  #endif\n  #include <common>\n  #include <dithering_pars_fragment>\n  #include <color_pars_fragment>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <aomap_pars_fragment>\n  #include <lightmap_pars_fragment>\n  #include <envmap_common_pars_fragment>\n  #include <envmap_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <specularmap_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      #include <logdepthbuf_fragment>\n      #include <map_fragment>\n      #include <color_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      #include <specularmap_fragment>\n      ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n      #ifdef USE_LIGHTMAP\n          vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n          reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n      #else\n          reflectedLight.indirectDiffuse += vec3( 1.0 );\n      #endif\n      #include <aomap_fragment>\n      reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n      vec3 outgoingLight = reflectedLight.indirectDiffuse;\n      #include <envmap_fragment>\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n      #include <premultiplied_alpha_fragment>\n      #include <dithering_fragment>\n  }",
          meshlambert_vert:
            "#define LAMBERT\n  varying vec3 vViewPosition;\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <displacementmap_pars_vertex>\n  #include <envmap_pars_vertex>\n  #include <color_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <normal_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <shadowmap_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      #include <color_vertex>\n      #include <morphcolor_vertex>\n      #include <beginnormal_vertex>\n      #include <morphnormal_vertex>\n      #include <skinbase_vertex>\n      #include <skinnormal_vertex>\n      #include <defaultnormal_vertex>\n      #include <normal_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <displacementmap_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      vViewPosition = - mvPosition.xyz;\n      #include <worldpos_vertex>\n      #include <envmap_vertex>\n      #include <shadowmap_vertex>\n      #include <fog_vertex>\n  }",
          meshlambert_frag:
            "#define LAMBERT\n  uniform vec3 diffuse;\n  uniform vec3 emissive;\n  uniform float opacity;\n  #include <common>\n  #include <packing>\n  #include <dithering_pars_fragment>\n  #include <color_pars_fragment>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <aomap_pars_fragment>\n  #include <lightmap_pars_fragment>\n  #include <emissivemap_pars_fragment>\n  #include <envmap_common_pars_fragment>\n  #include <envmap_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <bsdfs>\n  #include <lights_pars_begin>\n  #include <normal_pars_fragment>\n  #include <lights_lambert_pars_fragment>\n  #include <shadowmap_pars_fragment>\n  #include <bumpmap_pars_fragment>\n  #include <normalmap_pars_fragment>\n  #include <specularmap_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n      vec3 totalEmissiveRadiance = emissive;\n      #include <logdepthbuf_fragment>\n      #include <map_fragment>\n      #include <color_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      #include <specularmap_fragment>\n      #include <normal_fragment_begin>\n      #include <normal_fragment_maps>\n      #include <emissivemap_fragment>\n      #include <lights_lambert_fragment>\n      #include <lights_fragment_begin>\n      #include <lights_fragment_maps>\n      #include <lights_fragment_end>\n      #include <aomap_fragment>\n      vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n      #include <envmap_fragment>\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n      #include <premultiplied_alpha_fragment>\n      #include <dithering_fragment>\n  }",
          meshmatcap_vert:
            "#define MATCAP\n  varying vec3 vViewPosition;\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <color_pars_vertex>\n  #include <displacementmap_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <normal_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      #include <color_vertex>\n      #include <morphcolor_vertex>\n      #include <beginnormal_vertex>\n      #include <morphnormal_vertex>\n      #include <skinbase_vertex>\n      #include <skinnormal_vertex>\n      #include <defaultnormal_vertex>\n      #include <normal_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <displacementmap_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      #include <fog_vertex>\n      vViewPosition = - mvPosition.xyz;\n  }",
          meshmatcap_frag:
            "#define MATCAP\n  uniform vec3 diffuse;\n  uniform float opacity;\n  uniform sampler2D matcap;\n  varying vec3 vViewPosition;\n  #include <common>\n  #include <dithering_pars_fragment>\n  #include <color_pars_fragment>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <normal_pars_fragment>\n  #include <bumpmap_pars_fragment>\n  #include <normalmap_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      #include <logdepthbuf_fragment>\n      #include <map_fragment>\n      #include <color_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      #include <normal_fragment_begin>\n      #include <normal_fragment_maps>\n      vec3 viewDir = normalize( vViewPosition );\n      vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n      vec3 y = cross( viewDir, x );\n      vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n      #ifdef USE_MATCAP\n          vec4 matcapColor = texture2D( matcap, uv );\n      #else\n          vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n      #endif\n      vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n      #include <premultiplied_alpha_fragment>\n      #include <dithering_fragment>\n  }",
          meshnormal_vert:
            "#define NORMAL\n  #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n      varying vec3 vViewPosition;\n  #endif\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <displacementmap_pars_vertex>\n  #include <normal_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      #include <beginnormal_vertex>\n      #include <morphnormal_vertex>\n      #include <skinbase_vertex>\n      #include <skinnormal_vertex>\n      #include <defaultnormal_vertex>\n      #include <normal_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <displacementmap_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n  #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n      vViewPosition = - mvPosition.xyz;\n  #endif\n  }",
          meshnormal_frag:
            "#define NORMAL\n  uniform float opacity;\n  #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n      varying vec3 vViewPosition;\n  #endif\n  #include <packing>\n  #include <uv_pars_fragment>\n  #include <normal_pars_fragment>\n  #include <bumpmap_pars_fragment>\n  #include <normalmap_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      #include <logdepthbuf_fragment>\n      #include <normal_fragment_begin>\n      #include <normal_fragment_maps>\n      gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n      #ifdef OPAQUE\n          gl_FragColor.a = 1.0;\n      #endif\n  }",
          meshphong_vert:
            "#define PHONG\n  varying vec3 vViewPosition;\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <displacementmap_pars_vertex>\n  #include <envmap_pars_vertex>\n  #include <color_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <normal_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <shadowmap_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      #include <color_vertex>\n      #include <morphcolor_vertex>\n      #include <beginnormal_vertex>\n      #include <morphnormal_vertex>\n      #include <skinbase_vertex>\n      #include <skinnormal_vertex>\n      #include <defaultnormal_vertex>\n      #include <normal_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <displacementmap_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      vViewPosition = - mvPosition.xyz;\n      #include <worldpos_vertex>\n      #include <envmap_vertex>\n      #include <shadowmap_vertex>\n      #include <fog_vertex>\n  }",
          meshphong_frag:
            "#define PHONG\n  uniform vec3 diffuse;\n  uniform vec3 emissive;\n  uniform vec3 specular;\n  uniform float shininess;\n  uniform float opacity;\n  #include <common>\n  #include <packing>\n  #include <dithering_pars_fragment>\n  #include <color_pars_fragment>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <aomap_pars_fragment>\n  #include <lightmap_pars_fragment>\n  #include <emissivemap_pars_fragment>\n  #include <envmap_common_pars_fragment>\n  #include <envmap_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <bsdfs>\n  #include <lights_pars_begin>\n  #include <normal_pars_fragment>\n  #include <lights_phong_pars_fragment>\n  #include <shadowmap_pars_fragment>\n  #include <bumpmap_pars_fragment>\n  #include <normalmap_pars_fragment>\n  #include <specularmap_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n      vec3 totalEmissiveRadiance = emissive;\n      #include <logdepthbuf_fragment>\n      #include <map_fragment>\n      #include <color_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      #include <specularmap_fragment>\n      #include <normal_fragment_begin>\n      #include <normal_fragment_maps>\n      #include <emissivemap_fragment>\n      #include <lights_phong_fragment>\n      #include <lights_fragment_begin>\n      #include <lights_fragment_maps>\n      #include <lights_fragment_end>\n      #include <aomap_fragment>\n      vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n      #include <envmap_fragment>\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n      #include <premultiplied_alpha_fragment>\n      #include <dithering_fragment>\n  }",
          meshphysical_vert:
            "#define STANDARD\n  varying vec3 vViewPosition;\n  #ifdef USE_TRANSMISSION\n      varying vec3 vWorldPosition;\n  #endif\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <displacementmap_pars_vertex>\n  #include <color_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <normal_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <shadowmap_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      #include <color_vertex>\n      #include <morphcolor_vertex>\n      #include <beginnormal_vertex>\n      #include <morphnormal_vertex>\n      #include <skinbase_vertex>\n      #include <skinnormal_vertex>\n      #include <defaultnormal_vertex>\n      #include <normal_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <displacementmap_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      vViewPosition = - mvPosition.xyz;\n      #include <worldpos_vertex>\n      #include <shadowmap_vertex>\n      #include <fog_vertex>\n  #ifdef USE_TRANSMISSION\n      vWorldPosition = worldPosition.xyz;\n  #endif\n  }",
          meshphysical_frag:
            "#define STANDARD\n  #ifdef PHYSICAL\n      #define IOR\n      #define USE_SPECULAR\n  #endif\n  uniform vec3 diffuse;\n  uniform vec3 emissive;\n  uniform float roughness;\n  uniform float metalness;\n  uniform float opacity;\n  #ifdef IOR\n      uniform float ior;\n  #endif\n  #ifdef USE_SPECULAR\n      uniform float specularIntensity;\n      uniform vec3 specularColor;\n      #ifdef USE_SPECULAR_COLORMAP\n          uniform sampler2D specularColorMap;\n      #endif\n      #ifdef USE_SPECULAR_INTENSITYMAP\n          uniform sampler2D specularIntensityMap;\n      #endif\n  #endif\n  #ifdef USE_CLEARCOAT\n      uniform float clearcoat;\n      uniform float clearcoatRoughness;\n  #endif\n  #ifdef USE_IRIDESCENCE\n      uniform float iridescence;\n      uniform float iridescenceIOR;\n      uniform float iridescenceThicknessMinimum;\n      uniform float iridescenceThicknessMaximum;\n  #endif\n  #ifdef USE_SHEEN\n      uniform vec3 sheenColor;\n      uniform float sheenRoughness;\n      #ifdef USE_SHEEN_COLORMAP\n          uniform sampler2D sheenColorMap;\n      #endif\n      #ifdef USE_SHEEN_ROUGHNESSMAP\n          uniform sampler2D sheenRoughnessMap;\n      #endif\n  #endif\n  varying vec3 vViewPosition;\n  #include <common>\n  #include <packing>\n  #include <dithering_pars_fragment>\n  #include <color_pars_fragment>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <aomap_pars_fragment>\n  #include <lightmap_pars_fragment>\n  #include <emissivemap_pars_fragment>\n  #include <iridescence_fragment>\n  #include <cube_uv_reflection_fragment>\n  #include <envmap_common_pars_fragment>\n  #include <envmap_physical_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <lights_pars_begin>\n  #include <normal_pars_fragment>\n  #include <lights_physical_pars_fragment>\n  #include <transmission_pars_fragment>\n  #include <shadowmap_pars_fragment>\n  #include <bumpmap_pars_fragment>\n  #include <normalmap_pars_fragment>\n  #include <clearcoat_pars_fragment>\n  #include <iridescence_pars_fragment>\n  #include <roughnessmap_pars_fragment>\n  #include <metalnessmap_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n      vec3 totalEmissiveRadiance = emissive;\n      #include <logdepthbuf_fragment>\n      #include <map_fragment>\n      #include <color_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      #include <roughnessmap_fragment>\n      #include <metalnessmap_fragment>\n      #include <normal_fragment_begin>\n      #include <normal_fragment_maps>\n      #include <clearcoat_normal_fragment_begin>\n      #include <clearcoat_normal_fragment_maps>\n      #include <emissivemap_fragment>\n      #include <lights_physical_fragment>\n      #include <lights_fragment_begin>\n      #include <lights_fragment_maps>\n      #include <lights_fragment_end>\n      #include <aomap_fragment>\n      vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n      vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n      #include <transmission_fragment>\n      vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n      #ifdef USE_SHEEN\n          float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n          outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n      #endif\n      #ifdef USE_CLEARCOAT\n          float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n          vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n          outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n      #endif\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n      #include <premultiplied_alpha_fragment>\n      #include <dithering_fragment>\n  }",
          meshtoon_vert:
            "#define TOON\n  varying vec3 vViewPosition;\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <displacementmap_pars_vertex>\n  #include <color_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <normal_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <shadowmap_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      #include <color_vertex>\n      #include <morphcolor_vertex>\n      #include <beginnormal_vertex>\n      #include <morphnormal_vertex>\n      #include <skinbase_vertex>\n      #include <skinnormal_vertex>\n      #include <defaultnormal_vertex>\n      #include <normal_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <displacementmap_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      vViewPosition = - mvPosition.xyz;\n      #include <worldpos_vertex>\n      #include <shadowmap_vertex>\n      #include <fog_vertex>\n  }",
          meshtoon_frag:
            "#define TOON\n  uniform vec3 diffuse;\n  uniform vec3 emissive;\n  uniform float opacity;\n  #include <common>\n  #include <packing>\n  #include <dithering_pars_fragment>\n  #include <color_pars_fragment>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <aomap_pars_fragment>\n  #include <lightmap_pars_fragment>\n  #include <emissivemap_pars_fragment>\n  #include <gradientmap_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <bsdfs>\n  #include <lights_pars_begin>\n  #include <normal_pars_fragment>\n  #include <lights_toon_pars_fragment>\n  #include <shadowmap_pars_fragment>\n  #include <bumpmap_pars_fragment>\n  #include <normalmap_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n      vec3 totalEmissiveRadiance = emissive;\n      #include <logdepthbuf_fragment>\n      #include <map_fragment>\n      #include <color_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      #include <normal_fragment_begin>\n      #include <normal_fragment_maps>\n      #include <emissivemap_fragment>\n      #include <lights_toon_fragment>\n      #include <lights_fragment_begin>\n      #include <lights_fragment_maps>\n      #include <lights_fragment_end>\n      #include <aomap_fragment>\n      vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n      #include <premultiplied_alpha_fragment>\n      #include <dithering_fragment>\n  }",
          points_vert:
            "uniform float size;\n  uniform float scale;\n  #include <common>\n  #include <color_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  #ifdef USE_POINTS_UV\n      varying vec2 vUv;\n      uniform mat3 uvTransform;\n  #endif\n  void main() {\n      #ifdef USE_POINTS_UV\n          vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n      #endif\n      #include <color_vertex>\n      #include <morphcolor_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <project_vertex>\n      gl_PointSize = size;\n      #ifdef USE_SIZEATTENUATION\n          bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n          if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n      #endif\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      #include <worldpos_vertex>\n      #include <fog_vertex>\n  }",
          points_frag:
            "uniform vec3 diffuse;\n  uniform float opacity;\n  #include <common>\n  #include <color_pars_fragment>\n  #include <map_particle_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      vec3 outgoingLight = vec3( 0.0 );\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      #include <logdepthbuf_fragment>\n      #include <map_particle_fragment>\n      #include <color_fragment>\n      #include <alphatest_fragment>\n      outgoingLight = diffuseColor.rgb;\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n      #include <premultiplied_alpha_fragment>\n  }",
          shadow_vert:
            "#include <common>\n  #include <fog_pars_vertex>\n  #include <morphtarget_pars_vertex>\n  #include <skinning_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <shadowmap_pars_vertex>\n  void main() {\n      #include <beginnormal_vertex>\n      #include <morphnormal_vertex>\n      #include <skinbase_vertex>\n      #include <skinnormal_vertex>\n      #include <defaultnormal_vertex>\n      #include <begin_vertex>\n      #include <morphtarget_vertex>\n      #include <skinning_vertex>\n      #include <project_vertex>\n      #include <logdepthbuf_vertex>\n      #include <worldpos_vertex>\n      #include <shadowmap_vertex>\n      #include <fog_vertex>\n  }",
          shadow_frag:
            "uniform vec3 color;\n  uniform float opacity;\n  #include <common>\n  #include <packing>\n  #include <fog_pars_fragment>\n  #include <bsdfs>\n  #include <lights_pars_begin>\n  #include <logdepthbuf_pars_fragment>\n  #include <shadowmap_pars_fragment>\n  #include <shadowmask_pars_fragment>\n  void main() {\n      #include <logdepthbuf_fragment>\n      gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n  }",
          sprite_vert:
            "uniform float rotation;\n  uniform vec2 center;\n  #include <common>\n  #include <uv_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <logdepthbuf_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n  void main() {\n      #include <uv_vertex>\n      vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n      vec2 scale;\n      scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n      scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n      #ifndef USE_SIZEATTENUATION\n          bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n          if ( isPerspective ) scale *= - mvPosition.z;\n      #endif\n      vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n      vec2 rotatedPosition;\n      rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n      rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n      mvPosition.xy += rotatedPosition;\n      gl_Position = projectionMatrix * mvPosition;\n      #include <logdepthbuf_vertex>\n      #include <clipping_planes_vertex>\n      #include <fog_vertex>\n  }",
          sprite_frag:
            "uniform vec3 diffuse;\n  uniform float opacity;\n  #include <common>\n  #include <uv_pars_fragment>\n  #include <map_pars_fragment>\n  #include <alphamap_pars_fragment>\n  #include <alphatest_pars_fragment>\n  #include <fog_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  void main() {\n      #include <clipping_planes_fragment>\n      vec3 outgoingLight = vec3( 0.0 );\n      vec4 diffuseColor = vec4( diffuse, opacity );\n      #include <logdepthbuf_fragment>\n      #include <map_fragment>\n      #include <alphamap_fragment>\n      #include <alphatest_fragment>\n      outgoingLight = diffuseColor.rgb;\n      #include <output_fragment>\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n      #include <fog_fragment>\n  }"
        },
        yv = {
          common: {
            diffuse: { value: new ff(16777215) },
            opacity: { value: 1 },
            map: { value: null },
            mapTransform: { value: new Td() },
            alphaMap: { value: null },
            alphaMapTransform: { value: new Td() },
            alphaTest: { value: 0 }
          },
          specularmap: {
            specularMap: { value: null },
            specularMapTransform: { value: new Td() }
          },
          envmap: {
            envMap: { value: null },
            flipEnvMap: { value: -1 },
            reflectivity: { value: 1 },
            ior: { value: 1.5 },
            refractionRatio: { value: 0.98 }
          },
          aomap: {
            aoMap: { value: null },
            aoMapIntensity: { value: 1 },
            aoMapTransform: { value: new Td() }
          },
          lightmap: {
            lightMap: { value: null },
            lightMapIntensity: { value: 1 },
            lightMapTransform: { value: new Td() }
          },
          bumpmap: {
            bumpMap: { value: null },
            bumpMapTransform: { value: new Td() },
            bumpScale: { value: 1 }
          },
          normalmap: {
            normalMap: { value: null },
            normalMapTransform: { value: new Td() },
            normalScale: { value: new Md(1, 1) }
          },
          displacementmap: {
            displacementMap: { value: null },
            displacementMapTransform: { value: new Td() },
            displacementScale: { value: 1 },
            displacementBias: { value: 0 }
          },
          emissivemap: {
            emissiveMap: { value: null },
            emissiveMapTransform: { value: new Td() }
          },
          metalnessmap: {
            metalnessMap: { value: null },
            metalnessMapTransform: { value: new Td() }
          },
          roughnessmap: {
            roughnessMap: { value: null },
            roughnessMapTransform: { value: new Td() }
          },
          gradientmap: { gradientMap: { value: null } },
          fog: {
            fogDensity: { value: 25e-5 },
            fogNear: { value: 1 },
            fogFar: { value: 2e3 },
            fogColor: { value: new ff(16777215) }
          },
          lights: {
            ambientLightColor: { value: [] },
            lightProbe: { value: [] },
            directionalLights: {
              value: [],
              properties: { direction: {}, color: {} }
            },
            directionalLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {}
              }
            },
            directionalShadowMap: { value: [] },
            directionalShadowMatrix: { value: [] },
            spotLights: {
              value: [],
              properties: {
                color: {},
                position: {},
                direction: {},
                distance: {},
                coneCos: {},
                penumbraCos: {},
                decay: {}
              }
            },
            spotLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {}
              }
            },
            spotLightMap: { value: [] },
            spotShadowMap: { value: [] },
            spotLightMatrix: { value: [] },
            pointLights: {
              value: [],
              properties: { color: {}, position: {}, decay: {}, distance: {} }
            },
            pointLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {},
                shadowCameraNear: {},
                shadowCameraFar: {}
              }
            },
            pointShadowMap: { value: [] },
            pointShadowMatrix: { value: [] },
            hemisphereLights: {
              value: [],
              properties: { direction: {}, skyColor: {}, groundColor: {} }
            },
            rectAreaLights: {
              value: [],
              properties: { color: {}, position: {}, width: {}, height: {} }
            },
            ltc_1: { value: null },
            ltc_2: { value: null }
          },
          points: {
            diffuse: { value: new ff(16777215) },
            opacity: { value: 1 },
            size: { value: 1 },
            scale: { value: 1 },
            map: { value: null },
            alphaMap: { value: null },
            alphaTest: { value: 0 },
            uvTransform: { value: new Td() }
          },
          sprite: {
            diffuse: { value: new ff(16777215) },
            opacity: { value: 1 },
            center: { value: new Md(0.5, 0.5) },
            rotation: { value: 0 },
            map: { value: null },
            mapTransform: { value: new Td() },
            alphaMap: { value: null },
            alphaTest: { value: 0 }
          }
        },
        bv = {
          basic: {
            uniforms: Qf([
              yv.common,
              yv.specularmap,
              yv.envmap,
              yv.aomap,
              yv.lightmap,
              yv.fog
            ]),
            vertexShader: _v.meshbasic_vert,
            fragmentShader: _v.meshbasic_frag
          },
          lambert: {
            uniforms: Qf([
              yv.common,
              yv.specularmap,
              yv.envmap,
              yv.aomap,
              yv.lightmap,
              yv.emissivemap,
              yv.bumpmap,
              yv.normalmap,
              yv.displacementmap,
              yv.fog,
              yv.lights,
              { emissive: { value: new ff(0) } }
            ]),
            vertexShader: _v.meshlambert_vert,
            fragmentShader: _v.meshlambert_frag
          },
          phong: {
            uniforms: Qf([
              yv.common,
              yv.specularmap,
              yv.envmap,
              yv.aomap,
              yv.lightmap,
              yv.emissivemap,
              yv.bumpmap,
              yv.normalmap,
              yv.displacementmap,
              yv.fog,
              yv.lights,
              {
                emissive: { value: new ff(0) },
                specular: { value: new ff(1118481) },
                shininess: { value: 30 }
              }
            ]),
            vertexShader: _v.meshphong_vert,
            fragmentShader: _v.meshphong_frag
          },
          standard: {
            uniforms: Qf([
              yv.common,
              yv.envmap,
              yv.aomap,
              yv.lightmap,
              yv.emissivemap,
              yv.bumpmap,
              yv.normalmap,
              yv.displacementmap,
              yv.roughnessmap,
              yv.metalnessmap,
              yv.fog,
              yv.lights,
              {
                emissive: { value: new ff(0) },
                roughness: { value: 1 },
                metalness: { value: 0 },
                envMapIntensity: { value: 1 }
              }
            ]),
            vertexShader: _v.meshphysical_vert,
            fragmentShader: _v.meshphysical_frag
          },
          toon: {
            uniforms: Qf([
              yv.common,
              yv.aomap,
              yv.lightmap,
              yv.emissivemap,
              yv.bumpmap,
              yv.normalmap,
              yv.displacementmap,
              yv.gradientmap,
              yv.fog,
              yv.lights,
              { emissive: { value: new ff(0) } }
            ]),
            vertexShader: _v.meshtoon_vert,
            fragmentShader: _v.meshtoon_frag
          },
          matcap: {
            uniforms: Qf([
              yv.common,
              yv.bumpmap,
              yv.normalmap,
              yv.displacementmap,
              yv.fog,
              { matcap: { value: null } }
            ]),
            vertexShader: _v.meshmatcap_vert,
            fragmentShader: _v.meshmatcap_frag
          },
          points: {
            uniforms: Qf([yv.points, yv.fog]),
            vertexShader: _v.points_vert,
            fragmentShader: _v.points_frag
          },
          dashed: {
            uniforms: Qf([
              yv.common,
              yv.fog,
              {
                scale: { value: 1 },
                dashSize: { value: 1 },
                totalSize: { value: 2 }
              }
            ]),
            vertexShader: _v.linedashed_vert,
            fragmentShader: _v.linedashed_frag
          },
          depth: {
            uniforms: Qf([yv.common, yv.displacementmap]),
            vertexShader: _v.depth_vert,
            fragmentShader: _v.depth_frag
          },
          normal: {
            uniforms: Qf([
              yv.common,
              yv.bumpmap,
              yv.normalmap,
              yv.displacementmap,
              { opacity: { value: 1 } }
            ]),
            vertexShader: _v.meshnormal_vert,
            fragmentShader: _v.meshnormal_frag
          },
          sprite: {
            uniforms: Qf([yv.sprite, yv.fog]),
            vertexShader: _v.sprite_vert,
            fragmentShader: _v.sprite_frag
          },
          background: {
            uniforms: {
              uvTransform: { value: new Td() },
              t2D: { value: null },
              backgroundIntensity: { value: 1 }
            },
            vertexShader: _v.background_vert,
            fragmentShader: _v.background_frag
          },
          backgroundCube: {
            uniforms: {
              envMap: { value: null },
              flipEnvMap: { value: -1 },
              backgroundBlurriness: { value: 0 },
              backgroundIntensity: { value: 1 }
            },
            vertexShader: _v.backgroundCube_vert,
            fragmentShader: _v.backgroundCube_frag
          },
          cube: {
            uniforms: {
              tCube: { value: null },
              tFlip: { value: -1 },
              opacity: { value: 1 }
            },
            vertexShader: _v.cube_vert,
            fragmentShader: _v.cube_frag
          },
          equirect: {
            uniforms: { tEquirect: { value: null } },
            vertexShader: _v.equirect_vert,
            fragmentShader: _v.equirect_frag
          },
          distanceRGBA: {
            uniforms: Qf([
              yv.common,
              yv.displacementmap,
              {
                referencePosition: { value: new Kd() },
                nearDistance: { value: 1 },
                farDistance: { value: 1e3 }
              }
            ]),
            vertexShader: _v.distanceRGBA_vert,
            fragmentShader: _v.distanceRGBA_frag
          },
          shadow: {
            uniforms: Qf([
              yv.lights,
              yv.fog,
              { color: { value: new ff(0) }, opacity: { value: 1 } }
            ]),
            vertexShader: _v.shadow_vert,
            fragmentShader: _v.shadow_frag
          }
        };
      bv.physical = {
        uniforms: Qf([
          bv.standard.uniforms,
          {
            clearcoat: { value: 0 },
            clearcoatMap: { value: null },
            clearcoatMapTransform: { value: new Td() },
            clearcoatNormalMap: { value: null },
            clearcoatNormalMapTransform: { value: new Td() },
            clearcoatNormalScale: { value: new Md(1, 1) },
            clearcoatRoughness: { value: 0 },
            clearcoatRoughnessMap: { value: null },
            clearcoatRoughnessMapTransform: { value: new Td() },
            iridescence: { value: 0 },
            iridescenceMap: { value: null },
            iridescenceMapTransform: { value: new Td() },
            iridescenceIOR: { value: 1.3 },
            iridescenceThicknessMinimum: { value: 100 },
            iridescenceThicknessMaximum: { value: 400 },
            iridescenceThicknessMap: { value: null },
            iridescenceThicknessMapTransform: { value: new Td() },
            sheen: { value: 0 },
            sheenColor: { value: new ff(0) },
            sheenColorMap: { value: null },
            sheenColorMapTransform: { value: new Td() },
            sheenRoughness: { value: 1 },
            sheenRoughnessMap: { value: null },
            sheenRoughnessMapTransform: { value: new Td() },
            transmission: { value: 0 },
            transmissionMap: { value: null },
            transmissionMapTransform: { value: new Td() },
            transmissionSamplerSize: { value: new Md() },
            transmissionSamplerMap: { value: null },
            thickness: { value: 0 },
            thicknessMap: { value: null },
            thicknessMapTransform: { value: new Td() },
            attenuationDistance: { value: 0 },
            attenuationColor: { value: new ff(0) },
            specularColor: { value: new ff(1, 1, 1) },
            specularColorMap: { value: null },
            specularColorMapTransform: { value: new Td() },
            specularIntensity: { value: 1 },
            specularIntensityMap: { value: null },
            specularIntensityMapTransform: { value: new Td() }
          }
        ]),
        vertexShader: _v.meshphysical_vert,
        fragmentShader: _v.meshphysical_frag
      };
      var xv = { r: 0, b: 0, g: 0 };
      function wv(e, t, n, i, r, a, o) {
        var s,
          l,
          u = new ff(0),
          c = !0 === a ? 0 : 1,
          h = null,
          d = 0,
          p = null;
        function f(t, n) {
          t.getRGB(xv, $f(e)), i.buffers.color.setClear(xv.r, xv.g, xv.b, n, o);
        }
        return {
          getClearColor: function () {
            return u;
          },
          setClearColor: function (e) {
            var t =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : 1;
            u.set(e), f(u, (c = t));
          },
          getClearAlpha: function () {
            return c;
          },
          setClearAlpha: function (e) {
            f(u, (c = e));
          },
          render: function (i, a) {
            var o = !1,
              v = !0 === a.isScene ? a.background : null;
            v &&
              v.isTexture &&
              (v = (a.backgroundBlurriness > 0 ? n : t).get(v));
            var m = e.xr,
              g = m.getSession && m.getSession();
            g && "additive" === g.environmentBlendMode && (v = null),
              null === v ? f(u, c) : v && v.isColor && (f(v, 1), (o = !0)),
              (e.autoClear || o) &&
                e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil),
              v && (v.isCubeTexture || v.mapping === Eh)
                ? (void 0 === l &&
                    ((l = new Xf(
                      new Zf(1, 1, 1),
                      new tv({
                        name: "BackgroundCubeMaterial",
                        uniforms: Jf(bv.backgroundCube.uniforms),
                        vertexShader: bv.backgroundCube.vertexShader,
                        fragmentShader: bv.backgroundCube.fragmentShader,
                        side: 1,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1
                      })
                    )).geometry.deleteAttribute("normal"),
                    l.geometry.deleteAttribute("uv"),
                    (l.onBeforeRender = function (e, t, n) {
                      this.matrixWorld.copyPosition(n.matrixWorld);
                    }),
                    Object.defineProperty(l.material, "envMap", {
                      get: function () {
                        return this.uniforms.envMap.value;
                      }
                    }),
                    r.update(l)),
                  (l.material.uniforms.envMap.value = v),
                  (l.material.uniforms.flipEnvMap.value =
                    v.isCubeTexture && !1 === v.isRenderTargetTexture ? -1 : 1),
                  (l.material.uniforms.backgroundBlurriness.value =
                    a.backgroundBlurriness),
                  (l.material.uniforms.backgroundIntensity.value =
                    a.backgroundIntensity),
                  (l.material.toneMapped = v.encoding !== nd),
                  (h !== v || d !== v.version || p !== e.toneMapping) &&
                    ((l.material.needsUpdate = !0),
                    (h = v),
                    (d = v.version),
                    (p = e.toneMapping)),
                  l.layers.enableAll(),
                  i.unshift(l, l.geometry, l.material, 0, 0, null))
                : v &&
                  v.isTexture &&
                  (void 0 === s &&
                    ((s = new Xf(
                      new gv(2, 2),
                      new tv({
                        name: "BackgroundMaterial",
                        uniforms: Jf(bv.background.uniforms),
                        vertexShader: bv.background.vertexShader,
                        fragmentShader: bv.background.fragmentShader,
                        side: 0,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1
                      })
                    )).geometry.deleteAttribute("normal"),
                    Object.defineProperty(s.material, "map", {
                      get: function () {
                        return this.uniforms.t2D.value;
                      }
                    }),
                    r.update(s)),
                  (s.material.uniforms.t2D.value = v),
                  (s.material.uniforms.backgroundIntensity.value =
                    a.backgroundIntensity),
                  (s.material.toneMapped = v.encoding !== nd),
                  !0 === v.matrixAutoUpdate && v.updateMatrix(),
                  s.material.uniforms.uvTransform.value.copy(v.matrix),
                  (h !== v || d !== v.version || p !== e.toneMapping) &&
                    ((s.material.needsUpdate = !0),
                    (h = v),
                    (d = v.version),
                    (p = e.toneMapping)),
                  s.layers.enableAll(),
                  i.unshift(s, s.geometry, s.material, 0, 0, null));
          }
        };
      }
      function Sv(e, t, n, i) {
        var r = e.getParameter(34921),
          a = i.isWebGL2 ? null : t.get("OES_vertex_array_object"),
          o = i.isWebGL2 || null !== a,
          s = {},
          l = p(null),
          u = l,
          c = !1;
        function h(t) {
          return i.isWebGL2 ? e.bindVertexArray(t) : a.bindVertexArrayOES(t);
        }
        function d(t) {
          return i.isWebGL2
            ? e.deleteVertexArray(t)
            : a.deleteVertexArrayOES(t);
        }
        function p(e) {
          for (var t = [], n = [], i = [], a = 0; a < r; a++)
            (t[a] = 0), (n[a] = 0), (i[a] = 0);
          return {
            geometry: null,
            program: null,
            wireframe: !1,
            newAttributes: t,
            enabledAttributes: n,
            attributeDivisors: i,
            object: e,
            attributes: {},
            index: null
          };
        }
        function f() {
          for (var e = u.newAttributes, t = 0, n = e.length; t < n; t++)
            e[t] = 0;
        }
        function v(e) {
          m(e, 0);
        }
        function m(n, r) {
          var a = u.newAttributes,
            o = u.enabledAttributes,
            s = u.attributeDivisors;
          (a[n] = 1),
            0 === o[n] && (e.enableVertexAttribArray(n), (o[n] = 1)),
            s[n] !== r &&
              ((i.isWebGL2 ? e : t.get("ANGLE_instanced_arrays"))[
                i.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"
              ](n, r),
              (s[n] = r));
        }
        function g() {
          for (
            var t = u.newAttributes,
              n = u.enabledAttributes,
              i = 0,
              r = n.length;
            i < r;
            i++
          )
            n[i] !== t[i] && (e.disableVertexAttribArray(i), (n[i] = 0));
        }
        function _(t, n, r, a, o, s) {
          !0 !== i.isWebGL2 || (5124 !== r && 5125 !== r)
            ? e.vertexAttribPointer(t, n, r, a, o, s)
            : e.vertexAttribIPointer(t, n, r, o, s);
        }
        function y() {
          b(), (c = !0), u !== l && h((u = l).object);
        }
        function b() {
          (l.geometry = null), (l.program = null), (l.wireframe = !1);
        }
        return {
          setup: function (r, l, d, y, b) {
            var x = !1;
            if (o) {
              var w = (function (t, n, r) {
                var o = !0 === r.wireframe,
                  l = s[t.id];
                void 0 === l && ((l = {}), (s[t.id] = l));
                var u = l[n.id];
                void 0 === u && ((u = {}), (l[n.id] = u));
                var c = u[o];
                return (
                  void 0 === c &&
                    ((c = p(
                      i.isWebGL2
                        ? e.createVertexArray()
                        : a.createVertexArrayOES()
                    )),
                    (u[o] = c)),
                  c
                );
              })(y, d, l);
              u !== w && h((u = w).object),
                (x = (function (e, t, n, i) {
                  var r = u.attributes,
                    a = t.attributes,
                    o = 0,
                    s = n.getAttributes();
                  for (var l in s)
                    if (s[l].location >= 0) {
                      var c = r[l],
                        h = a[l];
                      if (
                        (void 0 === h &&
                          ("instanceMatrix" === l &&
                            e.instanceMatrix &&
                            (h = e.instanceMatrix),
                          "instanceColor" === l &&
                            e.instanceColor &&
                            (h = e.instanceColor)),
                        void 0 === c ||
                          c.attribute !== h ||
                          (h && c.data !== h.data))
                      )
                        return !0;
                      o++;
                    }
                  return u.attributesNum !== o || u.index !== i;
                })(r, y, d, b)),
                x &&
                  (function (e, t, n, i) {
                    var r = {},
                      a = t.attributes,
                      o = 0,
                      s = n.getAttributes();
                    for (var l in s)
                      if (s[l].location >= 0) {
                        var c = a[l];
                        void 0 === c &&
                          ("instanceMatrix" === l &&
                            e.instanceMatrix &&
                            (c = e.instanceMatrix),
                          "instanceColor" === l &&
                            e.instanceColor &&
                            (c = e.instanceColor));
                        var h = {};
                        (h.attribute = c),
                          c && c.data && (h.data = c.data),
                          (r[l] = h),
                          o++;
                      }
                    (u.attributes = r), (u.attributesNum = o), (u.index = i);
                  })(r, y, d, b);
            } else {
              var S = !0 === l.wireframe;
              (u.geometry !== y.id ||
                u.program !== d.id ||
                u.wireframe !== S) &&
                ((u.geometry = y.id),
                (u.program = d.id),
                (u.wireframe = S),
                (x = !0));
            }
            null !== b && n.update(b, 34963),
              (x || c) &&
                ((c = !1),
                (function (r, a, o, s) {
                  if (
                    !1 !== i.isWebGL2 ||
                    (!r.isInstancedMesh && !s.isInstancedBufferGeometry) ||
                    null !== t.get("ANGLE_instanced_arrays")
                  ) {
                    f();
                    var l = s.attributes,
                      u = o.getAttributes(),
                      c = a.defaultAttributeValues;
                    for (var h in u) {
                      var d = u[h];
                      if (d.location >= 0) {
                        var p = l[h];
                        if (
                          (void 0 === p &&
                            ("instanceMatrix" === h &&
                              r.instanceMatrix &&
                              (p = r.instanceMatrix),
                            "instanceColor" === h &&
                              r.instanceColor &&
                              (p = r.instanceColor)),
                          void 0 !== p)
                        ) {
                          var y = p.normalized,
                            b = p.itemSize,
                            x = n.get(p);
                          if (void 0 === x) continue;
                          var w = x.buffer,
                            S = x.type,
                            M = x.bytesPerElement;
                          if (p.isInterleavedBufferAttribute) {
                            var T = p.data,
                              k = T.stride,
                              E = p.offset;
                            if (T.isInstancedInterleavedBuffer) {
                              for (var C = 0; C < d.locationSize; C++)
                                m(d.location + C, T.meshPerAttribute);
                              !0 !== r.isInstancedMesh &&
                                void 0 === s._maxInstanceCount &&
                                (s._maxInstanceCount =
                                  T.meshPerAttribute * T.count);
                            } else
                              for (var D = 0; D < d.locationSize; D++)
                                v(d.location + D);
                            e.bindBuffer(34962, w);
                            for (var A = 0; A < d.locationSize; A++)
                              _(
                                d.location + A,
                                b / d.locationSize,
                                S,
                                y,
                                k * M,
                                (E + (b / d.locationSize) * A) * M
                              );
                          } else {
                            if (p.isInstancedBufferAttribute) {
                              for (var P = 0; P < d.locationSize; P++)
                                m(d.location + P, p.meshPerAttribute);
                              !0 !== r.isInstancedMesh &&
                                void 0 === s._maxInstanceCount &&
                                (s._maxInstanceCount =
                                  p.meshPerAttribute * p.count);
                            } else
                              for (var L = 0; L < d.locationSize; L++)
                                v(d.location + L);
                            e.bindBuffer(34962, w);
                            for (var R = 0; R < d.locationSize; R++)
                              _(
                                d.location + R,
                                b / d.locationSize,
                                S,
                                y,
                                b * M,
                                (b / d.locationSize) * R * M
                              );
                          }
                        } else if (void 0 !== c) {
                          var I = c[h];
                          if (void 0 !== I)
                            switch (I.length) {
                              case 2:
                                e.vertexAttrib2fv(d.location, I);
                                break;
                              case 3:
                                e.vertexAttrib3fv(d.location, I);
                                break;
                              case 4:
                                e.vertexAttrib4fv(d.location, I);
                                break;
                              default:
                                e.vertexAttrib1fv(d.location, I);
                            }
                        }
                      }
                    }
                    g();
                  }
                })(r, l, d, y),
                null !== b && e.bindBuffer(34963, n.get(b).buffer));
          },
          reset: y,
          resetDefaultState: b,
          dispose: function () {
            for (var e in (y(), s)) {
              var t = s[e];
              for (var n in t) {
                var i = t[n];
                for (var r in i) d(i[r].object), delete i[r];
                delete t[n];
              }
              delete s[e];
            }
          },
          releaseStatesOfGeometry: function (e) {
            if (void 0 !== s[e.id]) {
              var t = s[e.id];
              for (var n in t) {
                var i = t[n];
                for (var r in i) d(i[r].object), delete i[r];
                delete t[n];
              }
              delete s[e.id];
            }
          },
          releaseStatesOfProgram: function (e) {
            for (var t in s) {
              var n = s[t];
              if (void 0 !== n[e.id]) {
                var i = n[e.id];
                for (var r in i) d(i[r].object), delete i[r];
                delete n[e.id];
              }
            }
          },
          initAttributes: f,
          enableAttribute: v,
          disableUnusedAttributes: g
        };
      }
      function Mv(e, t, n, i) {
        var r,
          a = i.isWebGL2;
        (this.setMode = function (e) {
          r = e;
        }),
          (this.render = function (t, i) {
            e.drawArrays(r, t, i), n.update(i, r, 1);
          }),
          (this.renderInstances = function (i, o, s) {
            if (0 !== s) {
              var l, u;
              if (a) (l = e), (u = "drawArraysInstanced");
              else if (
                ((u = "drawArraysInstancedANGLE"),
                null === (l = t.get("ANGLE_instanced_arrays")))
              )
                return void console.error(
                  "THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
                );
              l[u](r, i, o, s), n.update(o, r, s);
            }
          });
      }
      function Tv(e, t, n) {
        var i;
        function r(t) {
          if ("highp" === t) {
            if (
              e.getShaderPrecisionFormat(35633, 36338).precision > 0 &&
              e.getShaderPrecisionFormat(35632, 36338).precision > 0
            )
              return "highp";
            t = "mediump";
          }
          return "mediump" === t &&
            e.getShaderPrecisionFormat(35633, 36337).precision > 0 &&
            e.getShaderPrecisionFormat(35632, 36337).precision > 0
            ? "mediump"
            : "lowp";
        }
        var a =
            ("undefined" == typeof WebGL2RenderingContext
              ? "undefined"
              : xh(WebGL2RenderingContext)) < "u" &&
            "WebGL2RenderingContext" === e.constructor.name,
          o = void 0 !== n.precision ? n.precision : "highp",
          s = r(o);
        s !== o &&
          (console.warn(
            "THREE.WebGLRenderer:",
            o,
            "not supported, using",
            s,
            "instead."
          ),
          (o = s));
        var l = a || t.has("WEBGL_draw_buffers"),
          u = !0 === n.logarithmicDepthBuffer,
          c = e.getParameter(34930),
          h = e.getParameter(35660),
          d = e.getParameter(3379),
          p = e.getParameter(34076),
          f = e.getParameter(34921),
          v = e.getParameter(36347),
          m = e.getParameter(36348),
          g = e.getParameter(36349),
          _ = h > 0,
          y = a || t.has("OES_texture_float");
        return {
          isWebGL2: a,
          drawBuffers: l,
          getMaxAnisotropy: function () {
            if (void 0 !== i) return i;
            if (!0 === t.has("EXT_texture_filter_anisotropic")) {
              var n = t.get("EXT_texture_filter_anisotropic");
              i = e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
            } else i = 0;
            return i;
          },
          getMaxPrecision: r,
          precision: o,
          logarithmicDepthBuffer: u,
          maxTextures: c,
          maxVertexTextures: h,
          maxTextureSize: d,
          maxCubemapSize: p,
          maxAttributes: f,
          maxVertexUniforms: v,
          maxVaryings: m,
          maxFragmentUniforms: g,
          vertexTextures: _,
          floatFragmentTextures: y,
          floatVertexTextures: _ && y,
          maxSamples: a ? e.getParameter(36183) : 0
        };
      }
      function kv(e) {
        var t = this,
          n = null,
          i = 0,
          r = !1,
          a = !1,
          o = new hv(),
          s = new Td(),
          l = { value: null, needsUpdate: !1 };
        function u(e, n, i, r) {
          var a = null !== e ? e.length : 0,
            u = null;
          if (0 !== a) {
            if (((u = l.value), !0 !== r || null === u)) {
              var c = i + 4 * a,
                h = n.matrixWorldInverse;
              s.getNormalMatrix(h),
                (null === u || u.length < c) && (u = new Float32Array(c));
              for (var d = 0, p = i; d !== a; ++d, p += 4)
                o.copy(e[d]).applyMatrix4(h, s),
                  o.normal.toArray(u, p),
                  (u[p + 3] = o.constant);
            }
            (l.value = u), (l.needsUpdate = !0);
          }
          return (t.numPlanes = a), (t.numIntersection = 0), u;
        }
        (this.uniform = l),
          (this.numPlanes = 0),
          (this.numIntersection = 0),
          (this.init = function (e, t) {
            var n = 0 !== e.length || t || 0 !== i || r;
            return (r = t), (i = e.length), n;
          }),
          (this.beginShadows = function () {
            (a = !0), u(null);
          }),
          (this.endShadows = function () {
            a = !1;
          }),
          (this.setGlobalState = function (e, t) {
            n = u(e, t, 0);
          }),
          (this.setState = function (o, s, c) {
            var h = o.clippingPlanes,
              d = o.clipIntersection,
              p = o.clipShadows,
              f = e.get(o);
            if (!r || null === h || 0 === h.length || (a && !p))
              a
                ? u(null)
                : (l.value !== n && ((l.value = n), (l.needsUpdate = i > 0)),
                  (t.numPlanes = i),
                  (t.numIntersection = 0));
            else {
              var v = a ? 0 : i,
                m = 4 * v,
                g = f.clippingState || null;
              (l.value = g), (g = u(h, s, m, c));
              for (var _ = 0; _ !== m; ++_) g[_] = n[_];
              (f.clippingState = g),
                (this.numIntersection = d ? this.numPlanes : 0),
                (this.numPlanes += v);
            }
          });
      }
      function Ev(e) {
        var t = new WeakMap();
        function n(e, t) {
          return (
            303 === t ? (e.mapping = Th) : 304 === t && (e.mapping = kh), e
          );
        }
        function i(e) {
          var n = e.target;
          n.removeEventListener("dispose", i);
          var r = t.get(n);
          void 0 !== r && (t.delete(n), r.dispose());
        }
        return {
          get: function (r) {
            if (r && r.isTexture && !1 === r.isRenderTargetTexture) {
              var a = r.mapping;
              if (303 === a || 304 === a) {
                if (t.has(r)) return n(t.get(r).texture, r.mapping);
                var o = r.image;
                if (o && o.height > 0) {
                  var s = new sv(o.height / 2);
                  return (
                    s.fromEquirectangularTexture(e, r),
                    t.set(r, s),
                    r.addEventListener("dispose", i),
                    n(s.texture, r.mapping)
                  );
                }
                return null;
              }
            }
            return r;
          },
          dispose: function () {
            t = new WeakMap();
          }
        };
      }
      var Cv = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : -1,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : -1,
              o =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : 0.1,
              s =
                arguments.length > 5 && void 0 !== arguments[5]
                  ? arguments[5]
                  : 2e3;
            return (
              gh(this, t),
              ((e = uh(this, t)).isOrthographicCamera = !0),
              (e.type = "OrthographicCamera"),
              (e.zoom = 1),
              (e.view = null),
              (e.left = n),
              (e.right = i),
              (e.top = r),
              (e.bottom = a),
              (e.near = o),
              (e.far = s),
              e.updateProjectionMatrix(),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    (this.left = e.left),
                    (this.right = e.right),
                    (this.top = e.top),
                    (this.bottom = e.bottom),
                    (this.near = e.near),
                    (this.far = e.far),
                    (this.zoom = e.zoom),
                    (this.view =
                      null === e.view ? null : Object.assign({}, e.view)),
                    this
                  );
                }
              },
              {
                key: "setViewOffset",
                value: function (e, t, n, i, r, a) {
                  null === this.view &&
                    (this.view = {
                      enabled: !0,
                      fullWidth: 1,
                      fullHeight: 1,
                      offsetX: 0,
                      offsetY: 0,
                      width: 1,
                      height: 1
                    }),
                    (this.view.enabled = !0),
                    (this.view.fullWidth = e),
                    (this.view.fullHeight = t),
                    (this.view.offsetX = n),
                    (this.view.offsetY = i),
                    (this.view.width = r),
                    (this.view.height = a),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "clearViewOffset",
                value: function () {
                  null !== this.view && (this.view.enabled = !1),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "updateProjectionMatrix",
                value: function () {
                  var e = (this.right - this.left) / (2 * this.zoom),
                    t = (this.top - this.bottom) / (2 * this.zoom),
                    n = (this.right + this.left) / 2,
                    i = (this.top + this.bottom) / 2,
                    r = n - e,
                    a = n + e,
                    o = i + t,
                    s = i - t;
                  if (null !== this.view && this.view.enabled) {
                    var l =
                        (this.right - this.left) /
                        this.view.fullWidth /
                        this.zoom,
                      u =
                        (this.top - this.bottom) /
                        this.view.fullHeight /
                        this.zoom;
                    (a = (r += l * this.view.offsetX) + l * this.view.width),
                      (s = (o -= u * this.view.offsetY) - u * this.view.height);
                  }
                  this.projectionMatrix.makeOrthographic(
                    r,
                    a,
                    o,
                    s,
                    this.near,
                    this.far
                  ),
                    this.projectionMatrixInverse
                      .copy(this.projectionMatrix)
                      .invert();
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = sh(t, "toJSON", this, 3)([e]);
                  return (
                    (n.object.zoom = this.zoom),
                    (n.object.left = this.left),
                    (n.object.right = this.right),
                    (n.object.top = this.top),
                    (n.object.bottom = this.bottom),
                    (n.object.near = this.near),
                    (n.object.far = this.far),
                    null !== this.view &&
                      (n.object.view = Object.assign({}, this.view)),
                    n
                  );
                }
              }
            ])
          );
        })(nv),
        Dv = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582],
        Av = 20,
        Pv = new Cv(),
        Lv = new ff(),
        Rv = null,
        Iv = (1 + Math.sqrt(5)) / 2,
        Ov = 1 / Iv,
        Nv = [
          new Kd(1, 1, 1),
          new Kd(-1, 1, 1),
          new Kd(1, 1, -1),
          new Kd(-1, 1, -1),
          new Kd(0, Iv, Ov),
          new Kd(0, Iv, -Ov),
          new Kd(Ov, 0, Iv),
          new Kd(-Ov, 0, Iv),
          new Kd(Iv, Ov, 0),
          new Kd(-Iv, Ov, 0)
        ],
        Fv = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this._renderer = t),
                (this._pingPongRenderTarget = null),
                (this._lodMax = 0),
                (this._cubeSize = 0),
                (this._lodPlanes = []),
                (this._sizeLods = []),
                (this._sigmas = []),
                (this._blurMaterial = null),
                (this._cubemapMaterial = null),
                (this._equirectMaterial = null),
                this._compileMaterial(this._blurMaterial);
            },
            [
              {
                key: "fromScene",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0.1,
                    i =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 100;
                  (Rv = this._renderer.getRenderTarget()), this._setSize(256);
                  var r = this._allocateTargets();
                  return (
                    (r.depthBuffer = !0),
                    this._sceneToCubeUV(e, n, i, r),
                    t > 0 && this._blur(r, 0, 0, t),
                    this._applyPMREM(r),
                    this._cleanup(r),
                    r
                  );
                }
              },
              {
                key: "fromEquirectangular",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : null;
                  return this._fromTexture(e, t);
                }
              },
              {
                key: "fromCubemap",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : null;
                  return this._fromTexture(e, t);
                }
              },
              {
                key: "compileCubemapShader",
                value: function () {
                  null === this._cubemapMaterial &&
                    ((this._cubemapMaterial = Vv()),
                    this._compileMaterial(this._cubemapMaterial));
                }
              },
              {
                key: "compileEquirectangularShader",
                value: function () {
                  null === this._equirectMaterial &&
                    ((this._equirectMaterial = zv()),
                    this._compileMaterial(this._equirectMaterial));
                }
              },
              {
                key: "dispose",
                value: function () {
                  this._dispose(),
                    null !== this._cubemapMaterial &&
                      this._cubemapMaterial.dispose(),
                    null !== this._equirectMaterial &&
                      this._equirectMaterial.dispose();
                }
              },
              {
                key: "_setSize",
                value: function (e) {
                  (this._lodMax = Math.floor(Math.log2(e))),
                    (this._cubeSize = Math.pow(2, this._lodMax));
                }
              },
              {
                key: "_dispose",
                value: function () {
                  null !== this._blurMaterial && this._blurMaterial.dispose(),
                    null !== this._pingPongRenderTarget &&
                      this._pingPongRenderTarget.dispose();
                  for (var e = 0; e < this._lodPlanes.length; e++)
                    this._lodPlanes[e].dispose();
                }
              },
              {
                key: "_cleanup",
                value: function (e) {
                  this._renderer.setRenderTarget(Rv),
                    (e.scissorTest = !1),
                    Bv(e, 0, 0, e.width, e.height);
                }
              },
              {
                key: "_fromTexture",
                value: function (e, t) {
                  e.mapping === Th || e.mapping === kh
                    ? this._setSize(
                        0 === e.image.length
                          ? 16
                          : e.image[0].width || e.image[0].image.width
                      )
                    : this._setSize(e.image.width / 4),
                    (Rv = this._renderer.getRenderTarget());
                  var n = t || this._allocateTargets();
                  return (
                    this._textureToCubeUV(e, n),
                    this._applyPMREM(n),
                    this._cleanup(n),
                    n
                  );
                }
              },
              {
                key: "_allocateTargets",
                value: function () {
                  var e = 3 * Math.max(this._cubeSize, 112),
                    t = 4 * this._cubeSize,
                    n = {
                      magFilter: Ih,
                      minFilter: Ih,
                      generateMipmaps: !1,
                      type: Bh,
                      format: Vh,
                      encoding: td,
                      depthBuffer: !1
                    },
                    i = Uv(e, t, n);
                  if (
                    null === this._pingPongRenderTarget ||
                    this._pingPongRenderTarget.width !== e ||
                    this._pingPongRenderTarget.height !== t
                  ) {
                    var r;
                    null !== this._pingPongRenderTarget && this._dispose(),
                      (this._pingPongRenderTarget = Uv(e, t, n));
                    var a = this._lodMax;
                    (r = (function (e) {
                      for (
                        var t = [],
                          n = [],
                          i = [],
                          r = e,
                          a = e - 4 + 1 + Dv.length,
                          o = 0;
                        o < a;
                        o++
                      ) {
                        var s = Math.pow(2, r);
                        n.push(s);
                        var l = 1 / s;
                        o > e - 4
                          ? (l = Dv[o - e + 4 - 1])
                          : 0 === o && (l = 0),
                          i.push(l);
                        for (
                          var u = 1 / (s - 2),
                            c = -u,
                            h = 1 + u,
                            d = [c, c, h, c, h, h, c, c, h, h, c, h],
                            p = new Float32Array(108),
                            f = new Float32Array(72),
                            v = new Float32Array(36),
                            m = 0;
                          m < 6;
                          m++
                        ) {
                          var g = ((m % 3) * 2) / 3 - 1,
                            _ = m > 2 ? 0 : -1,
                            y = [
                              g,
                              _,
                              0,
                              g + 2 / 3,
                              _,
                              0,
                              g + 2 / 3,
                              _ + 1,
                              0,
                              g,
                              _,
                              0,
                              g + 2 / 3,
                              _ + 1,
                              0,
                              g,
                              _ + 1,
                              0
                            ];
                          p.set(y, 18 * m), f.set(d, 12 * m);
                          var b = [m, m, m, m, m, m];
                          v.set(b, 6 * m);
                        }
                        var x = new Af();
                        x.setAttribute("position", new yf(p, 3)),
                          x.setAttribute("uv", new yf(f, 2)),
                          x.setAttribute("faceIndex", new yf(v, 1)),
                          t.push(x),
                          r > 4 && r--;
                      }
                      return { lodPlanes: t, sizeLods: n, sigmas: i };
                    })(a)),
                      (this._sizeLods = r.sizeLods),
                      (this._lodPlanes = r.lodPlanes),
                      (this._sigmas = r.sigmas),
                      (this._blurMaterial = (function (e, t, n) {
                        var i = new Float32Array(Av),
                          r = new Kd(0, 1, 0);
                        return new tv({
                          name: "SphericalGaussianBlur",
                          defines: {
                            n: Av,
                            CUBEUV_TEXEL_WIDTH: 1 / t,
                            CUBEUV_TEXEL_HEIGHT: 1 / n,
                            CUBEUV_MAX_MIP: "".concat(e, ".0")
                          },
                          uniforms: {
                            envMap: { value: null },
                            samples: { value: 1 },
                            weights: { value: i },
                            latitudinal: { value: !1 },
                            dTheta: { value: 0 },
                            mipInt: { value: 0 },
                            poleAxis: { value: r }
                          },
                          vertexShader:
                            "\n  \n          precision mediump float;\n          precision mediump int;\n  \n          attribute float faceIndex;\n  \n          varying vec3 vOutputDirection;\n  \n          // RH coordinate system; PMREM face-indexing convention\n          vec3 getDirection( vec2 uv, float face ) {\n  \n              uv = 2.0 * uv - 1.0;\n  \n              vec3 direction = vec3( uv, 1.0 );\n  \n              if ( face == 0.0 ) {\n  \n                  direction = direction.zyx; // ( 1, v, u ) pos x\n  \n              } else if ( face == 1.0 ) {\n  \n                  direction = direction.xzy;\n                  direction.xz *= -1.0; // ( -u, 1, -v ) pos y\n  \n              } else if ( face == 2.0 ) {\n  \n                  direction.x *= -1.0; // ( -u, v, 1 ) pos z\n  \n              } else if ( face == 3.0 ) {\n  \n                  direction = direction.zyx;\n                  direction.xz *= -1.0; // ( -1, v, -u ) neg x\n  \n              } else if ( face == 4.0 ) {\n  \n                  direction = direction.xzy;\n                  direction.xy *= -1.0; // ( -u, -1, v ) neg y\n  \n              } else if ( face == 5.0 ) {\n  \n                  direction.z *= -1.0; // ( u, v, -1 ) neg z\n  \n              }\n  \n              return direction;\n  \n          }\n  \n          void main() {\n  \n              vOutputDirection = getDirection( uv, faceIndex );\n              gl_Position = vec4( position, 1.0 );\n  \n          }\n      ",
                          fragmentShader:
                            "\n  \n              precision mediump float;\n              precision mediump int;\n  \n              varying vec3 vOutputDirection;\n  \n              uniform sampler2D envMap;\n              uniform int samples;\n              uniform float weights[ n ];\n              uniform bool latitudinal;\n              uniform float dTheta;\n              uniform float mipInt;\n              uniform vec3 poleAxis;\n  \n              #define ENVMAP_TYPE_CUBE_UV\n              #include <cube_uv_reflection_fragment>\n  \n              vec3 getSample( float theta, vec3 axis ) {\n  \n                  float cosTheta = cos( theta );\n                  // Rodrigues' axis-angle rotation\n                  vec3 sampleDirection = vOutputDirection * cosTheta\n                      + cross( axis, vOutputDirection ) * sin( theta )\n                      + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n                  return bilinearCubeUV( envMap, sampleDirection, mipInt );\n  \n              }\n  \n              void main() {\n  \n                  vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n                  if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n                      axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n                  }\n  \n                  axis = normalize( axis );\n  \n                  gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n                  gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n                  for ( int i = 1; i < n; i++ ) {\n  \n                      if ( i >= samples ) {\n  \n                          break;\n  \n                      }\n  \n                      float theta = dTheta * float( i );\n                      gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n                      gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n                  }\n  \n              }\n          ",
                          blending: 0,
                          depthTest: !1,
                          depthWrite: !1
                        });
                      })(a, e, t));
                  }
                  return i;
                }
              },
              {
                key: "_compileMaterial",
                value: function (e) {
                  var t = new Xf(this._lodPlanes[0], e);
                  this._renderer.compile(t, Pv);
                }
              },
              {
                key: "_sceneToCubeUV",
                value: function (e, t, n, i) {
                  var r = new iv(90, 1, t, n),
                    a = [1, -1, 1, 1, 1, 1],
                    o = [1, 1, 1, -1, -1, -1],
                    s = this._renderer,
                    l = s.autoClear,
                    u = s.toneMapping;
                  s.getClearColor(Lv), (s.toneMapping = 0), (s.autoClear = !1);
                  var c = new mf({
                      name: "PMREM.Background",
                      side: 1,
                      depthWrite: !1,
                      depthTest: !1
                    }),
                    h = new Xf(new Zf(), c),
                    d = !1,
                    p = e.background;
                  p
                    ? p.isColor &&
                      (c.color.copy(p), (e.background = null), (d = !0))
                    : (c.color.copy(Lv), (d = !0));
                  for (var f = 0; f < 6; f++) {
                    var v = f % 3;
                    0 === v
                      ? (r.up.set(0, a[f], 0), r.lookAt(o[f], 0, 0))
                      : 1 === v
                      ? (r.up.set(0, 0, a[f]), r.lookAt(0, o[f], 0))
                      : (r.up.set(0, a[f], 0), r.lookAt(0, 0, o[f]));
                    var m = this._cubeSize;
                    Bv(i, v * m, f > 2 ? m : 0, m, m),
                      s.setRenderTarget(i),
                      d && s.render(h, r),
                      s.render(e, r);
                  }
                  h.geometry.dispose(),
                    h.material.dispose(),
                    (s.toneMapping = u),
                    (s.autoClear = l),
                    (e.background = p);
                }
              },
              {
                key: "_textureToCubeUV",
                value: function (e, t) {
                  var n = this._renderer,
                    i = e.mapping === Th || e.mapping === kh;
                  i
                    ? (null === this._cubemapMaterial &&
                        (this._cubemapMaterial = Vv()),
                      (this._cubemapMaterial.uniforms.flipEnvMap.value =
                        !1 === e.isRenderTargetTexture ? -1 : 1))
                    : null === this._equirectMaterial &&
                      (this._equirectMaterial = zv());
                  var r = i ? this._cubemapMaterial : this._equirectMaterial,
                    a = new Xf(this._lodPlanes[0], r);
                  r.uniforms.envMap.value = e;
                  var o = this._cubeSize;
                  Bv(t, 0, 0, 3 * o, 2 * o),
                    n.setRenderTarget(t),
                    n.render(a, Pv);
                }
              },
              {
                key: "_applyPMREM",
                value: function (e) {
                  var t = this._renderer,
                    n = t.autoClear;
                  t.autoClear = !1;
                  for (var i = 1; i < this._lodPlanes.length; i++) {
                    var r = Math.sqrt(
                        this._sigmas[i] * this._sigmas[i] -
                          this._sigmas[i - 1] * this._sigmas[i - 1]
                      ),
                      a = Nv[(i - 1) % Nv.length];
                    this._blur(e, i - 1, i, r, a);
                  }
                  t.autoClear = n;
                }
              },
              {
                key: "_blur",
                value: function (e, t, n, i, r) {
                  var a = this._pingPongRenderTarget;
                  this._halfBlur(e, a, t, n, i, "latitudinal", r),
                    this._halfBlur(a, e, n, n, i, "longitudinal", r);
                }
              },
              {
                key: "_halfBlur",
                value: function (e, t, n, i, r, a, o) {
                  var s = this._renderer,
                    l = this._blurMaterial;
                  "latitudinal" !== a &&
                    "longitudinal" !== a &&
                    console.error(
                      "blur direction must be either latitudinal or longitudinal!"
                    );
                  var u = new Xf(this._lodPlanes[i], l),
                    c = l.uniforms,
                    h = this._sizeLods[n] - 1,
                    d = isFinite(r) ? Math.PI / (2 * h) : (2 * Math.PI) / 39,
                    p = r / d,
                    f = isFinite(r) ? 1 + Math.floor(3 * p) : Av;
                  f > Av &&
                    console.warn(
                      "sigmaRadians, "
                        .concat(
                          r,
                          ", is too large and will clip, as it requested "
                        )
                        .concat(f, " samples when the maximum is set to ")
                        .concat(Av)
                    );
                  for (var v = [], m = 0, g = 0; g < Av; ++g) {
                    var _ = g / p,
                      y = Math.exp((-_ * _) / 2);
                    v.push(y), 0 === g ? (m += y) : g < f && (m += 2 * y);
                  }
                  for (var b = 0; b < v.length; b++) v[b] = v[b] / m;
                  (c.envMap.value = e.texture),
                    (c.samples.value = f),
                    (c.weights.value = v),
                    (c.latitudinal.value = "latitudinal" === a),
                    o && (c.poleAxis.value = o);
                  var x = this._lodMax;
                  (c.dTheta.value = d), (c.mipInt.value = x - n);
                  var w = this._sizeLods[i];
                  Bv(
                    t,
                    3 * w * (i > x - 4 ? i - x + 4 : 0),
                    4 * (this._cubeSize - w),
                    3 * w,
                    2 * w
                  ),
                    s.setRenderTarget(t),
                    s.render(u, Pv);
                }
              }
            ]
          );
        })();
      function Uv(e, t, n) {
        var i = new Gd(e, t, n);
        return (
          (i.texture.mapping = Eh),
          (i.texture.name = "PMREM.cubeUv"),
          (i.scissorTest = !0),
          i
        );
      }
      function Bv(e, t, n, i, r) {
        e.viewport.set(t, n, i, r), e.scissor.set(t, n, i, r);
      }
      function zv() {
        return new tv({
          name: "EquirectangularToCubeUV",
          uniforms: { envMap: { value: null } },
          vertexShader:
            "\n  \n          precision mediump float;\n          precision mediump int;\n  \n          attribute float faceIndex;\n  \n          varying vec3 vOutputDirection;\n  \n          // RH coordinate system; PMREM face-indexing convention\n          vec3 getDirection( vec2 uv, float face ) {\n  \n              uv = 2.0 * uv - 1.0;\n  \n              vec3 direction = vec3( uv, 1.0 );\n  \n              if ( face == 0.0 ) {\n  \n                  direction = direction.zyx; // ( 1, v, u ) pos x\n  \n              } else if ( face == 1.0 ) {\n  \n                  direction = direction.xzy;\n                  direction.xz *= -1.0; // ( -u, 1, -v ) pos y\n  \n              } else if ( face == 2.0 ) {\n  \n                  direction.x *= -1.0; // ( -u, v, 1 ) pos z\n  \n              } else if ( face == 3.0 ) {\n  \n                  direction = direction.zyx;\n                  direction.xz *= -1.0; // ( -1, v, -u ) neg x\n  \n              } else if ( face == 4.0 ) {\n  \n                  direction = direction.xzy;\n                  direction.xy *= -1.0; // ( -u, -1, v ) neg y\n  \n              } else if ( face == 5.0 ) {\n  \n                  direction.z *= -1.0; // ( u, v, -1 ) neg z\n  \n              }\n  \n              return direction;\n  \n          }\n  \n          void main() {\n  \n              vOutputDirection = getDirection( uv, faceIndex );\n              gl_Position = vec4( position, 1.0 );\n  \n          }\n      ",
          fragmentShader:
            "\n  \n              precision mediump float;\n              precision mediump int;\n  \n              varying vec3 vOutputDirection;\n  \n              uniform sampler2D envMap;\n  \n              #include <common>\n  \n              void main() {\n  \n                  vec3 outputDirection = normalize( vOutputDirection );\n                  vec2 uv = equirectUv( outputDirection );\n  \n                  gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n  \n              }\n          ",
          blending: 0,
          depthTest: !1,
          depthWrite: !1
        });
      }
      function Vv() {
        return new tv({
          name: "CubemapToCubeUV",
          uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 } },
          vertexShader:
            "\n  \n          precision mediump float;\n          precision mediump int;\n  \n          attribute float faceIndex;\n  \n          varying vec3 vOutputDirection;\n  \n          // RH coordinate system; PMREM face-indexing convention\n          vec3 getDirection( vec2 uv, float face ) {\n  \n              uv = 2.0 * uv - 1.0;\n  \n              vec3 direction = vec3( uv, 1.0 );\n  \n              if ( face == 0.0 ) {\n  \n                  direction = direction.zyx; // ( 1, v, u ) pos x\n  \n              } else if ( face == 1.0 ) {\n  \n                  direction = direction.xzy;\n                  direction.xz *= -1.0; // ( -u, 1, -v ) pos y\n  \n              } else if ( face == 2.0 ) {\n  \n                  direction.x *= -1.0; // ( -u, v, 1 ) pos z\n  \n              } else if ( face == 3.0 ) {\n  \n                  direction = direction.zyx;\n                  direction.xz *= -1.0; // ( -1, v, -u ) neg x\n  \n              } else if ( face == 4.0 ) {\n  \n                  direction = direction.xzy;\n                  direction.xy *= -1.0; // ( -u, -1, v ) neg y\n  \n              } else if ( face == 5.0 ) {\n  \n                  direction.z *= -1.0; // ( u, v, -1 ) neg z\n  \n              }\n  \n              return direction;\n  \n          }\n  \n          void main() {\n  \n              vOutputDirection = getDirection( uv, faceIndex );\n              gl_Position = vec4( position, 1.0 );\n  \n          }\n      ",
          fragmentShader:
            "\n  \n              precision mediump float;\n              precision mediump int;\n  \n              uniform float flipEnvMap;\n  \n              varying vec3 vOutputDirection;\n  \n              uniform samplerCube envMap;\n  \n              void main() {\n  \n                  gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n  \n              }\n          ",
          blending: 0,
          depthTest: !1,
          depthWrite: !1
        });
      }
      function Hv(e) {
        var t = new WeakMap(),
          n = null;
        function i(e) {
          var n = e.target;
          n.removeEventListener("dispose", i);
          var r = t.get(n);
          void 0 !== r && (t.delete(n), r.dispose());
        }
        return {
          get: function (r) {
            if (r && r.isTexture) {
              var a = r.mapping,
                o = 303 === a || 304 === a,
                s = a === Th || a === kh;
              if (o || s) {
                if (r.isRenderTargetTexture && !0 === r.needsPMREMUpdate) {
                  r.needsPMREMUpdate = !1;
                  var l = t.get(r);
                  return (
                    null === n && (n = new Fv(e)),
                    (l = o ? n.fromEquirectangular(r, l) : n.fromCubemap(r, l)),
                    t.set(r, l),
                    l.texture
                  );
                }
                if (t.has(r)) return t.get(r).texture;
                var u = r.image;
                if (
                  (o && u && u.height > 0) ||
                  (s &&
                    u &&
                    (function (e) {
                      for (var t = 0, n = 0; n < 6; n++) void 0 !== e[n] && t++;
                      return 6 === t;
                    })(u))
                ) {
                  null === n && (n = new Fv(e));
                  var c = o ? n.fromEquirectangular(r) : n.fromCubemap(r);
                  return (
                    t.set(r, c), r.addEventListener("dispose", i), c.texture
                  );
                }
                return null;
              }
            }
            return r;
          },
          dispose: function () {
            (t = new WeakMap()), null !== n && (n.dispose(), (n = null));
          }
        };
      }
      function Gv(e) {
        var t = {};
        function n(n) {
          if (void 0 !== t[n]) return t[n];
          var i;
          switch (n) {
            case "WEBGL_depth_texture":
              i =
                e.getExtension("WEBGL_depth_texture") ||
                e.getExtension("MOZ_WEBGL_depth_texture") ||
                e.getExtension("WEBKIT_WEBGL_depth_texture");
              break;
            case "EXT_texture_filter_anisotropic":
              i =
                e.getExtension("EXT_texture_filter_anisotropic") ||
                e.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
                e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
              break;
            case "WEBGL_compressed_texture_s3tc":
              i =
                e.getExtension("WEBGL_compressed_texture_s3tc") ||
                e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") ||
                e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
              break;
            case "WEBGL_compressed_texture_pvrtc":
              i =
                e.getExtension("WEBGL_compressed_texture_pvrtc") ||
                e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
              break;
            default:
              i = e.getExtension(n);
          }
          return (t[n] = i), i;
        }
        return {
          has: function (e) {
            return null !== n(e);
          },
          init: function (e) {
            e.isWebGL2
              ? n("EXT_color_buffer_float")
              : (n("WEBGL_depth_texture"),
                n("OES_texture_float"),
                n("OES_texture_half_float"),
                n("OES_texture_half_float_linear"),
                n("OES_standard_derivatives"),
                n("OES_element_index_uint"),
                n("OES_vertex_array_object"),
                n("ANGLE_instanced_arrays")),
              n("OES_texture_float_linear"),
              n("EXT_color_buffer_half_float"),
              n("WEBGL_multisampled_render_to_texture");
          },
          get: function (e) {
            var t = n(e);
            return (
              null === t &&
                console.warn(
                  "THREE.WebGLRenderer: " + e + " extension not supported."
                ),
              t
            );
          }
        };
      }
      function Wv(e, t, n, i) {
        var r = {},
          a = new WeakMap();
        function o(e) {
          var s = e.target;
          for (var l in (null !== s.index && t.remove(s.index), s.attributes))
            t.remove(s.attributes[l]);
          s.removeEventListener("dispose", o), delete r[s.id];
          var u = a.get(s);
          u && (t.remove(u), a.delete(s)),
            i.releaseStatesOfGeometry(s),
            !0 === s.isInstancedBufferGeometry && delete s._maxInstanceCount,
            n.memory.geometries--;
        }
        function s(e) {
          var n = [],
            i = e.index,
            r = e.attributes.position,
            o = 0;
          if (null !== i) {
            var s = i.array;
            o = i.version;
            for (var l = 0, u = s.length; l < u; l += 3) {
              var c = s[l + 0],
                h = s[l + 1],
                d = s[l + 2];
              n.push(c, h, h, d, d, c);
            }
          } else {
            var p = r.array;
            o = r.version;
            for (var f = 0, v = p.length / 3 - 1; f < v; f += 3) {
              var m = f + 0,
                g = f + 1,
                _ = f + 2;
              n.push(m, g, g, _, _, m);
            }
          }
          var y = new (Ed(n) ? xf : bf)(n, 1);
          y.version = o;
          var b = a.get(e);
          b && t.remove(b), a.set(e, y);
        }
        return {
          get: function (e, t) {
            return (
              !0 === r[t.id] ||
                (t.addEventListener("dispose", o),
                (r[t.id] = !0),
                n.memory.geometries++),
              t
            );
          },
          update: function (e) {
            var n = e.attributes;
            for (var i in n) t.update(n[i], 34962);
            var r = e.morphAttributes;
            for (var a in r)
              for (var o = r[a], s = 0, l = o.length; s < l; s++)
                t.update(o[s], 34962);
          },
          getWireframeAttribute: function (e) {
            var t = a.get(e);
            if (t) {
              var n = e.index;
              null !== n && t.version < n.version && s(e);
            } else s(e);
            return a.get(e);
          }
        };
      }
      function jv(e, t, n, i) {
        var r,
          a,
          o,
          s = i.isWebGL2;
        (this.setMode = function (e) {
          r = e;
        }),
          (this.setIndex = function (e) {
            (a = e.type), (o = e.bytesPerElement);
          }),
          (this.render = function (t, i) {
            e.drawElements(r, i, a, t * o), n.update(i, r, 1);
          }),
          (this.renderInstances = function (i, l, u) {
            if (0 !== u) {
              var c, h;
              if (s) (c = e), (h = "drawElementsInstanced");
              else if (
                ((h = "drawElementsInstancedANGLE"),
                null === (c = t.get("ANGLE_instanced_arrays")))
              )
                return void console.error(
                  "THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
                );
              c[h](r, l, a, i * o, u), n.update(l, r, u);
            }
          });
      }
      function qv(e) {
        var t = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
        return {
          memory: { geometries: 0, textures: 0 },
          render: t,
          programs: null,
          autoReset: !0,
          reset: function () {
            t.frame++,
              (t.calls = 0),
              (t.triangles = 0),
              (t.points = 0),
              (t.lines = 0);
          },
          update: function (e, n, i) {
            switch ((t.calls++, n)) {
              case 4:
                t.triangles += i * (e / 3);
                break;
              case 1:
                t.lines += i * (e / 2);
                break;
              case 3:
                t.lines += i * (e - 1);
                break;
              case 2:
                t.lines += i * e;
                break;
              case 0:
                t.points += i * e;
                break;
              default:
                console.error("THREE.WebGLInfo: Unknown draw mode:", n);
            }
          }
        };
      }
      function Kv(e, t) {
        return e[0] - t[0];
      }
      function Xv(e, t) {
        return Math.abs(t[1]) - Math.abs(e[1]);
      }
      function Yv(e, t, n) {
        for (
          var i = {},
            r = new Float32Array(8),
            a = new WeakMap(),
            o = new Hd(),
            s = [],
            l = 0;
          l < 8;
          l++
        )
          s[l] = [l, 0];
        return {
          update: function (l, u, c) {
            var h = l.morphTargetInfluences;
            if (!0 === t.isWebGL2) {
              var d =
                  u.morphAttributes.position ||
                  u.morphAttributes.normal ||
                  u.morphAttributes.color,
                p = void 0 !== d ? d.length : 0,
                f = a.get(u);
              if (void 0 === f || f.count !== p) {
                var v = function () {
                  k.dispose(), a.delete(u), u.removeEventListener("dispose", v);
                };
                void 0 !== f && f.texture.dispose();
                var m = void 0 !== u.morphAttributes.position,
                  g = void 0 !== u.morphAttributes.normal,
                  _ = void 0 !== u.morphAttributes.color,
                  y = u.morphAttributes.position || [],
                  b = u.morphAttributes.normal || [],
                  x = u.morphAttributes.color || [],
                  w = 0;
                !0 === m && (w = 1), !0 === g && (w = 2), !0 === _ && (w = 3);
                var S = u.attributes.position.count * w,
                  M = 1;
                S > t.maxTextureSize &&
                  ((M = Math.ceil(S / t.maxTextureSize)),
                  (S = t.maxTextureSize));
                var T = new Float32Array(S * M * 4 * p),
                  k = new Wd(T, S, M, p);
                (k.type = Uh), (k.needsUpdate = !0);
                for (var E = 4 * w, C = 0; C < p; C++)
                  for (
                    var D = y[C], A = b[C], P = x[C], L = S * M * 4 * C, R = 0;
                    R < D.count;
                    R++
                  ) {
                    var I = R * E;
                    !0 === m &&
                      (o.fromBufferAttribute(D, R),
                      (T[L + I + 0] = o.x),
                      (T[L + I + 1] = o.y),
                      (T[L + I + 2] = o.z),
                      (T[L + I + 3] = 0)),
                      !0 === g &&
                        (o.fromBufferAttribute(A, R),
                        (T[L + I + 4] = o.x),
                        (T[L + I + 5] = o.y),
                        (T[L + I + 6] = o.z),
                        (T[L + I + 7] = 0)),
                      !0 === _ &&
                        (o.fromBufferAttribute(P, R),
                        (T[L + I + 8] = o.x),
                        (T[L + I + 9] = o.y),
                        (T[L + I + 10] = o.z),
                        (T[L + I + 11] = 4 === P.itemSize ? o.w : 1));
                  }
                (f = { count: p, texture: k, size: new Md(S, M) }),
                  a.set(u, f),
                  u.addEventListener("dispose", v);
              }
              for (var O = 0, N = 0; N < h.length; N++) O += h[N];
              var F = u.morphTargetsRelative ? 1 : 1 - O;
              c.getUniforms().setValue(e, "morphTargetBaseInfluence", F),
                c.getUniforms().setValue(e, "morphTargetInfluences", h),
                c
                  .getUniforms()
                  .setValue(e, "morphTargetsTexture", f.texture, n),
                c.getUniforms().setValue(e, "morphTargetsTextureSize", f.size);
            } else {
              var U = void 0 === h ? 0 : h.length,
                B = i[u.id];
              if (void 0 === B || B.length !== U) {
                B = [];
                for (var z = 0; z < U; z++) B[z] = [z, 0];
                i[u.id] = B;
              }
              for (var V = 0; V < U; V++) {
                var H = B[V];
                (H[0] = V), (H[1] = h[V]);
              }
              B.sort(Xv);
              for (var G = 0; G < 8; G++)
                G < U && B[G][1]
                  ? ((s[G][0] = B[G][0]), (s[G][1] = B[G][1]))
                  : ((s[G][0] = Number.MAX_SAFE_INTEGER), (s[G][1] = 0));
              s.sort(Kv);
              for (
                var W = u.morphAttributes.position,
                  j = u.morphAttributes.normal,
                  q = 0,
                  K = 0;
                K < 8;
                K++
              ) {
                var X = s[K],
                  Y = X[0],
                  Z = X[1];
                Y !== Number.MAX_SAFE_INTEGER && Z
                  ? (W &&
                      u.getAttribute("morphTarget" + K) !== W[Y] &&
                      u.setAttribute("morphTarget" + K, W[Y]),
                    j &&
                      u.getAttribute("morphNormal" + K) !== j[Y] &&
                      u.setAttribute("morphNormal" + K, j[Y]),
                    (r[K] = Z),
                    (q += Z))
                  : (W &&
                      !0 === u.hasAttribute("morphTarget" + K) &&
                      u.deleteAttribute("morphTarget" + K),
                    j &&
                      !0 === u.hasAttribute("morphNormal" + K) &&
                      u.deleteAttribute("morphNormal" + K),
                    (r[K] = 0));
              }
              var J = u.morphTargetsRelative ? 1 : 1 - q;
              c.getUniforms().setValue(e, "morphTargetBaseInfluence", J),
                c.getUniforms().setValue(e, "morphTargetInfluences", r);
            }
          }
        };
      }
      function Zv(e, t, n, i) {
        var r = new WeakMap();
        function a(e) {
          var t = e.target;
          t.removeEventListener("dispose", a),
            n.remove(t.instanceMatrix),
            null !== t.instanceColor && n.remove(t.instanceColor);
        }
        return {
          update: function (e) {
            var o = i.render.frame,
              s = e.geometry,
              l = t.get(e, s);
            return (
              r.get(l) !== o && (t.update(l), r.set(l, o)),
              e.isInstancedMesh &&
                (!1 === e.hasEventListener("dispose", a) &&
                  e.addEventListener("dispose", a),
                n.update(e.instanceMatrix, 34962),
                null !== e.instanceColor && n.update(e.instanceColor, 34962)),
              l
            );
          },
          dispose: function () {
            r = new WeakMap();
          }
        };
      }
      var Jv = new Vd(),
        Qv = new Wd(),
        $v = new jd(),
        em = new ov(),
        tm = [],
        nm = [],
        im = new Float32Array(16),
        rm = new Float32Array(9),
        am = new Float32Array(4);
      function om(e, t, n) {
        var i = e[0];
        if (i <= 0 || i > 0) return e;
        var r = t * n,
          a = tm[r];
        if (
          (void 0 === a && ((a = new Float32Array(r)), (tm[r] = a)), 0 !== t)
        ) {
          i.toArray(a, 0);
          for (var o = 1, s = 0; o !== t; ++o) (s += n), e[o].toArray(a, s);
        }
        return a;
      }
      function sm(e, t) {
        if (e.length !== t.length) return !1;
        for (var n = 0, i = e.length; n < i; n++) if (e[n] !== t[n]) return !1;
        return !0;
      }
      function lm(e, t) {
        for (var n = 0, i = t.length; n < i; n++) e[n] = t[n];
      }
      function um(e, t) {
        var n = nm[t];
        void 0 === n && ((n = new Int32Array(t)), (nm[t] = n));
        for (var i = 0; i !== t; ++i) n[i] = e.allocateTextureUnit();
        return n;
      }
      function cm(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1f(this.addr, t), (n[0] = t));
      }
      function hm(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y) &&
            (e.uniform2f(this.addr, t.x, t.y), (n[0] = t.x), (n[1] = t.y));
        else {
          if (sm(n, t)) return;
          e.uniform2fv(this.addr, t), lm(n, t);
        }
      }
      function dm(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y || n[2] !== t.z) &&
            (e.uniform3f(this.addr, t.x, t.y, t.z),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z));
        else if (void 0 !== t.r)
          (n[0] !== t.r || n[1] !== t.g || n[2] !== t.b) &&
            (e.uniform3f(this.addr, t.r, t.g, t.b),
            (n[0] = t.r),
            (n[1] = t.g),
            (n[2] = t.b));
        else {
          if (sm(n, t)) return;
          e.uniform3fv(this.addr, t), lm(n, t);
        }
      }
      function pm(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y || n[2] !== t.z || n[3] !== t.w) &&
            (e.uniform4f(this.addr, t.x, t.y, t.z, t.w),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z),
            (n[3] = t.w));
        else {
          if (sm(n, t)) return;
          e.uniform4fv(this.addr, t), lm(n, t);
        }
      }
      function fm(e, t) {
        var n = this.cache,
          i = t.elements;
        if (void 0 === i) {
          if (sm(n, t)) return;
          e.uniformMatrix2fv(this.addr, !1, t), lm(n, t);
        } else {
          if (sm(n, i)) return;
          am.set(i), e.uniformMatrix2fv(this.addr, !1, am), lm(n, i);
        }
      }
      function vm(e, t) {
        var n = this.cache,
          i = t.elements;
        if (void 0 === i) {
          if (sm(n, t)) return;
          e.uniformMatrix3fv(this.addr, !1, t), lm(n, t);
        } else {
          if (sm(n, i)) return;
          rm.set(i), e.uniformMatrix3fv(this.addr, !1, rm), lm(n, i);
        }
      }
      function mm(e, t) {
        var n = this.cache,
          i = t.elements;
        if (void 0 === i) {
          if (sm(n, t)) return;
          e.uniformMatrix4fv(this.addr, !1, t), lm(n, t);
        } else {
          if (sm(n, i)) return;
          im.set(i), e.uniformMatrix4fv(this.addr, !1, im), lm(n, i);
        }
      }
      function gm(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1i(this.addr, t), (n[0] = t));
      }
      function _m(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y) &&
            (e.uniform2i(this.addr, t.x, t.y), (n[0] = t.x), (n[1] = t.y));
        else {
          if (sm(n, t)) return;
          e.uniform2iv(this.addr, t), lm(n, t);
        }
      }
      function ym(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y || n[2] !== t.z) &&
            (e.uniform3i(this.addr, t.x, t.y, t.z),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z));
        else {
          if (sm(n, t)) return;
          e.uniform3iv(this.addr, t), lm(n, t);
        }
      }
      function bm(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y || n[2] !== t.z || n[3] !== t.w) &&
            (e.uniform4i(this.addr, t.x, t.y, t.z, t.w),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z),
            (n[3] = t.w));
        else {
          if (sm(n, t)) return;
          e.uniform4iv(this.addr, t), lm(n, t);
        }
      }
      function xm(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1ui(this.addr, t), (n[0] = t));
      }
      function wm(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y) &&
            (e.uniform2ui(this.addr, t.x, t.y), (n[0] = t.x), (n[1] = t.y));
        else {
          if (sm(n, t)) return;
          e.uniform2uiv(this.addr, t), lm(n, t);
        }
      }
      function Sm(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y || n[2] !== t.z) &&
            (e.uniform3ui(this.addr, t.x, t.y, t.z),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z));
        else {
          if (sm(n, t)) return;
          e.uniform3uiv(this.addr, t), lm(n, t);
        }
      }
      function Mm(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] !== t.x || n[1] !== t.y || n[2] !== t.z || n[3] !== t.w) &&
            (e.uniform4ui(this.addr, t.x, t.y, t.z, t.w),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z),
            (n[3] = t.w));
        else {
          if (sm(n, t)) return;
          e.uniform4uiv(this.addr, t), lm(n, t);
        }
      }
      function Tm(e, t, n) {
        var i = this.cache,
          r = n.allocateTextureUnit();
        i[0] !== r && (e.uniform1i(this.addr, r), (i[0] = r)),
          n.setTexture2D(t || Jv, r);
      }
      function km(e, t, n) {
        var i = this.cache,
          r = n.allocateTextureUnit();
        i[0] !== r && (e.uniform1i(this.addr, r), (i[0] = r)),
          n.setTexture3D(t || $v, r);
      }
      function Em(e, t, n) {
        var i = this.cache,
          r = n.allocateTextureUnit();
        i[0] !== r && (e.uniform1i(this.addr, r), (i[0] = r)),
          n.setTextureCube(t || em, r);
      }
      function Cm(e, t, n) {
        var i = this.cache,
          r = n.allocateTextureUnit();
        i[0] !== r && (e.uniform1i(this.addr, r), (i[0] = r)),
          n.setTexture2DArray(t || Qv, r);
      }
      function Dm(e, t) {
        e.uniform1fv(this.addr, t);
      }
      function Am(e, t) {
        var n = om(t, this.size, 2);
        e.uniform2fv(this.addr, n);
      }
      function Pm(e, t) {
        var n = om(t, this.size, 3);
        e.uniform3fv(this.addr, n);
      }
      function Lm(e, t) {
        var n = om(t, this.size, 4);
        e.uniform4fv(this.addr, n);
      }
      function Rm(e, t) {
        var n = om(t, this.size, 4);
        e.uniformMatrix2fv(this.addr, !1, n);
      }
      function Im(e, t) {
        var n = om(t, this.size, 9);
        e.uniformMatrix3fv(this.addr, !1, n);
      }
      function Om(e, t) {
        var n = om(t, this.size, 16);
        e.uniformMatrix4fv(this.addr, !1, n);
      }
      function Nm(e, t) {
        e.uniform1iv(this.addr, t);
      }
      function Fm(e, t) {
        e.uniform2iv(this.addr, t);
      }
      function Um(e, t) {
        e.uniform3iv(this.addr, t);
      }
      function Bm(e, t) {
        e.uniform4iv(this.addr, t);
      }
      function zm(e, t) {
        e.uniform1uiv(this.addr, t);
      }
      function Vm(e, t) {
        e.uniform2uiv(this.addr, t);
      }
      function Hm(e, t) {
        e.uniform3uiv(this.addr, t);
      }
      function Gm(e, t) {
        e.uniform4uiv(this.addr, t);
      }
      function Wm(e, t, n) {
        var i = this.cache,
          r = t.length,
          a = um(n, r);
        sm(i, a) || (e.uniform1iv(this.addr, a), lm(i, a));
        for (var o = 0; o !== r; ++o) n.setTexture2D(t[o] || Jv, a[o]);
      }
      function jm(e, t, n) {
        var i = this.cache,
          r = t.length,
          a = um(n, r);
        sm(i, a) || (e.uniform1iv(this.addr, a), lm(i, a));
        for (var o = 0; o !== r; ++o) n.setTexture3D(t[o] || $v, a[o]);
      }
      function qm(e, t, n) {
        var i = this.cache,
          r = t.length,
          a = um(n, r);
        sm(i, a) || (e.uniform1iv(this.addr, a), lm(i, a));
        for (var o = 0; o !== r; ++o) n.setTextureCube(t[o] || em, a[o]);
      }
      function Km(e, t, n) {
        var i = this.cache,
          r = t.length,
          a = um(n, r);
        sm(i, a) || (e.uniform1iv(this.addr, a), lm(i, a));
        for (var o = 0; o !== r; ++o) n.setTexture2DArray(t[o] || Qv, a[o]);
      }
      var Xm = yh(function e(t, n, i) {
          gh(this, e),
            (this.id = t),
            (this.addr = i),
            (this.cache = []),
            (this.setValue = (function (e) {
              switch (e) {
                case 5126:
                  return cm;
                case 35664:
                  return hm;
                case 35665:
                  return dm;
                case 35666:
                  return pm;
                case 35674:
                  return fm;
                case 35675:
                  return vm;
                case 35676:
                  return mm;
                case 5124:
                case 35670:
                  return gm;
                case 35667:
                case 35671:
                  return _m;
                case 35668:
                case 35672:
                  return ym;
                case 35669:
                case 35673:
                  return bm;
                case 5125:
                  return xm;
                case 36294:
                  return wm;
                case 36295:
                  return Sm;
                case 36296:
                  return Mm;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return Tm;
                case 35679:
                case 36299:
                case 36307:
                  return km;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return Em;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return Cm;
              }
            })(n.type));
        }),
        Ym = yh(function e(t, n, i) {
          gh(this, e),
            (this.id = t),
            (this.addr = i),
            (this.cache = []),
            (this.size = n.size),
            (this.setValue = (function (e) {
              switch (e) {
                case 5126:
                  return Dm;
                case 35664:
                  return Am;
                case 35665:
                  return Pm;
                case 35666:
                  return Lm;
                case 35674:
                  return Rm;
                case 35675:
                  return Im;
                case 35676:
                  return Om;
                case 5124:
                case 35670:
                  return Nm;
                case 35667:
                case 35671:
                  return Fm;
                case 35668:
                case 35672:
                  return Um;
                case 35669:
                case 35673:
                  return Bm;
                case 5125:
                  return zm;
                case 36294:
                  return Vm;
                case 36295:
                  return Hm;
                case 36296:
                  return Gm;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return Wm;
                case 35679:
                case 36299:
                case 36307:
                  return jm;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return qm;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return Km;
              }
            })(n.type));
        }),
        Zm = (function () {
          return yh(
            function e(t) {
              gh(this, e), (this.id = t), (this.seq = []), (this.map = {});
            },
            [
              {
                key: "setValue",
                value: function (e, t, n) {
                  for (var i = this.seq, r = 0, a = i.length; r !== a; ++r) {
                    var o = i[r];
                    o.setValue(e, t[o.id], n);
                  }
                }
              }
            ]
          );
        })(),
        Jm = /(\w+)(\])?(\[|\.)?/g;
      function Qm(e, t) {
        e.seq.push(t), (e.map[t.id] = t);
      }
      function $m(e, t, n) {
        var i = e.name,
          r = i.length;
        for (Jm.lastIndex = 0; ; ) {
          var a = Jm.exec(i),
            o = Jm.lastIndex,
            s = a[1],
            l = "]" === a[2],
            u = a[3];
          if ((l && (s |= 0), void 0 === u || ("[" === u && o + 2 === r))) {
            Qm(n, void 0 === u ? new Xm(s, e, t) : new Ym(s, e, t));
            break;
          }
          var c = n.map[s];
          void 0 === c && Qm(n, (c = new Zm(s))), (n = c);
        }
      }
      var eg = (function () {
        return yh(
          function e(t, n) {
            gh(this, e), (this.seq = []), (this.map = {});
            for (var i = t.getProgramParameter(n, 35718), r = 0; r < i; ++r) {
              var a = t.getActiveUniform(n, r);
              $m(a, t.getUniformLocation(n, a.name), this);
            }
          },
          [
            {
              key: "setValue",
              value: function (e, t, n, i) {
                var r = this.map[t];
                void 0 !== r && r.setValue(e, n, i);
              }
            },
            {
              key: "setOptional",
              value: function (e, t, n) {
                var i = t[n];
                void 0 !== i && this.setValue(e, n, i);
              }
            }
          ],
          [
            {
              key: "upload",
              value: function (e, t, n, i) {
                for (var r = 0, a = t.length; r !== a; ++r) {
                  var o = t[r],
                    s = n[o.id];
                  !1 !== s.needsUpdate && o.setValue(e, s.value, i);
                }
              }
            },
            {
              key: "seqWithValue",
              value: function (e, t) {
                for (var n = [], i = 0, r = e.length; i !== r; ++i) {
                  var a = e[i];
                  a.id in t && n.push(a);
                }
                return n;
              }
            }
          ]
        );
      })();
      function tg(e, t, n) {
        var i = e.createShader(t);
        return e.shaderSource(i, n), e.compileShader(i), i;
      }
      var ng = 0;
      function ig(e, t, n) {
        var i = e.getShaderParameter(t, 35713),
          r = e.getShaderInfoLog(t).trim();
        if (i && "" === r) return "";
        var a = /ERROR: 0:(\d+)/.exec(r);
        if (a) {
          var o = parseInt(a[1]);
          return (
            n.toUpperCase() +
            "\n  \n  " +
            r +
            "\n  \n  " +
            (function (e, t) {
              for (
                var n = e.split("\n  "),
                  i = [],
                  r = Math.max(t - 6, 0),
                  a = Math.min(t + 6, n.length),
                  o = r;
                o < a;
                o++
              ) {
                var s = o + 1;
                i.push(
                  ""
                    .concat(s === t ? ">" : " ", " ")
                    .concat(s, ": ")
                    .concat(n[o])
                );
              }
              return i.join("\n  ");
            })(e.getShaderSource(t), o)
          );
        }
        return r;
      }
      function rg(e, t) {
        var n = (function (e) {
          switch (e) {
            case td:
              return ["Linear", "( value )"];
            case nd:
              return ["sRGB", "( value )"];
            default:
              return (
                console.warn("THREE.WebGLProgram: Unsupported encoding:", e),
                ["Linear", "( value )"]
              );
          }
        })(t);
        return (
          "vec4 " + e + "( vec4 value ) { return LinearTo" + n[0] + n[1] + "; }"
        );
      }
      function ag(e, t) {
        var n;
        switch (t) {
          case 1:
            n = "Linear";
            break;
          case 2:
            n = "Reinhard";
            break;
          case 3:
            n = "OptimizedCineon";
            break;
          case 4:
            n = "ACESFilmic";
            break;
          case 5:
            n = "Custom";
            break;
          default:
            console.warn("THREE.WebGLProgram: Unsupported toneMapping:", t),
              (n = "Linear");
        }
        return (
          "vec3 " +
          e +
          "( vec3 color ) { return " +
          n +
          "ToneMapping( color ); }"
        );
      }
      function og(e) {
        return "" !== e;
      }
      function sg(e, t) {
        var n =
          t.numSpotLightShadows +
          t.numSpotLightMaps -
          t.numSpotLightShadowsWithMaps;
        return e
          .replace(/NUM_DIR_LIGHTS/g, t.numDirLights)
          .replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights)
          .replace(/NUM_SPOT_LIGHT_MAPS/g, t.numSpotLightMaps)
          .replace(/NUM_SPOT_LIGHT_COORDS/g, n)
          .replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights)
          .replace(/NUM_POINT_LIGHTS/g, t.numPointLights)
          .replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights)
          .replace(/NUM_DIR_LIGHT_SHADOWS/g, t.numDirLightShadows)
          .replace(
            /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,
            t.numSpotLightShadowsWithMaps
          )
          .replace(/NUM_SPOT_LIGHT_SHADOWS/g, t.numSpotLightShadows)
          .replace(/NUM_POINT_LIGHT_SHADOWS/g, t.numPointLightShadows);
      }
      function lg(e, t) {
        return e
          .replace(/NUM_CLIPPING_PLANES/g, t.numClippingPlanes)
          .replace(
            /UNION_CLIPPING_PLANES/g,
            t.numClippingPlanes - t.numClipIntersection
          );
      }
      var ug = /^[ \t]*#include +<([\w\d./]+)>/gm;
      function cg(e) {
        return e.replace(ug, hg);
      }
      function hg(e, t) {
        var n = _v[t];
        if (void 0 === n)
          throw new Error("Can not resolve #include <" + t + ">");
        return cg(n);
      }
      var dg =
        /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
      function pg(e) {
        return e.replace(dg, fg);
      }
      function fg(e, t, n, i) {
        for (var r = "", a = parseInt(t); a < parseInt(n); a++)
          r += i
            .replace(/\[\s*i\s*\]/g, "[ " + a + " ]")
            .replace(/UNROLLED_LOOP_INDEX/g, a);
        return r;
      }
      function vg(e) {
        var t =
          "precision " +
          e.precision +
          " float;\n  precision " +
          e.precision +
          " int;";
        return (
          "highp" === e.precision
            ? (t += "\n  #define HIGH_PRECISION")
            : "mediump" === e.precision
            ? (t += "\n  #define MEDIUM_PRECISION")
            : "lowp" === e.precision && (t += "\n  #define LOW_PRECISION"),
          t
        );
      }
      function mg(e, t, n, i) {
        var r,
          a,
          o = e.getContext(),
          s = n.defines,
          l = n.vertexShader,
          u = n.fragmentShader,
          c = (function (e) {
            var t = "SHADOWMAP_TYPE_BASIC";
            return (
              1 === e.shadowMapType
                ? (t = "SHADOWMAP_TYPE_PCF")
                : 2 === e.shadowMapType
                ? (t = "SHADOWMAP_TYPE_PCF_SOFT")
                : 3 === e.shadowMapType && (t = "SHADOWMAP_TYPE_VSM"),
              t
            );
          })(n),
          h = (function (e) {
            var t = "ENVMAP_TYPE_CUBE";
            if (e.envMap)
              switch (e.envMapMode) {
                case Th:
                case kh:
                  t = "ENVMAP_TYPE_CUBE";
                  break;
                case Eh:
                  t = "ENVMAP_TYPE_CUBE_UV";
              }
            return t;
          })(n),
          d = (function (e) {
            var t = "ENVMAP_MODE_REFLECTION";
            return (
              e.envMap && e.envMapMode === kh && (t = "ENVMAP_MODE_REFRACTION"),
              t
            );
          })(n),
          p = (function (e) {
            var t = "ENVMAP_BLENDING_NONE";
            if (e.envMap)
              switch (e.combine) {
                case 0:
                  t = "ENVMAP_BLENDING_MULTIPLY";
                  break;
                case 1:
                  t = "ENVMAP_BLENDING_MIX";
                  break;
                case 2:
                  t = "ENVMAP_BLENDING_ADD";
              }
            return t;
          })(n),
          f = (function (e) {
            var t = e.envMapCubeUVHeight;
            if (null === t) return null;
            var n = Math.log2(t) - 2,
              i = 1 / t;
            return {
              texelWidth: 1 / (3 * Math.max(Math.pow(2, n), 112)),
              texelHeight: i,
              maxMip: n
            };
          })(n),
          v = n.isWebGL2
            ? ""
            : (function (e) {
                return [
                  e.extensionDerivatives ||
                  e.envMapCubeUVHeight ||
                  e.bumpMap ||
                  e.normalMapTangentSpace ||
                  e.clearcoatNormalMap ||
                  e.flatShading ||
                  "physical" === e.shaderID
                    ? "#extension GL_OES_standard_derivatives : enable"
                    : "",
                  (e.extensionFragDepth || e.logarithmicDepthBuffer) &&
                  e.rendererExtensionFragDepth
                    ? "#extension GL_EXT_frag_depth : enable"
                    : "",
                  e.extensionDrawBuffers && e.rendererExtensionDrawBuffers
                    ? "#extension GL_EXT_draw_buffers : require"
                    : "",
                  (e.extensionShaderTextureLOD || e.envMap || e.transmission) &&
                  e.rendererExtensionShaderTextureLod
                    ? "#extension GL_EXT_shader_texture_lod : enable"
                    : ""
                ]
                  .filter(og)
                  .join("\n  ");
              })(n),
          m = (function (e) {
            var t = [];
            for (var n in e) {
              var i = e[n];
              !1 !== i && t.push("#define " + n + " " + i);
            }
            return t.join("\n  ");
          })(s),
          g = o.createProgram(),
          _ = n.glslVersion ? "#version " + n.glslVersion + "\n  " : "";
        n.isRawShaderMaterial
          ? ((r = [m].filter(og).join("\n  ")).length > 0 && (r += "\n  "),
            (a = [v, m].filter(og).join("\n  ")).length > 0 && (a += "\n  "))
          : ((r = [
              vg(n),
              "#define SHADER_NAME " + n.shaderName,
              m,
              n.instancing ? "#define USE_INSTANCING" : "",
              n.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
              n.useFog && n.fog ? "#define USE_FOG" : "",
              n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
              n.map ? "#define USE_MAP" : "",
              n.envMap ? "#define USE_ENVMAP" : "",
              n.envMap ? "#define " + d : "",
              n.lightMap ? "#define USE_LIGHTMAP" : "",
              n.aoMap ? "#define USE_AOMAP" : "",
              n.bumpMap ? "#define USE_BUMPMAP" : "",
              n.normalMap ? "#define USE_NORMALMAP" : "",
              n.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
              n.normalMapTangentSpace
                ? "#define USE_NORMALMAP_TANGENTSPACE"
                : "",
              n.displacementMap ? "#define USE_DISPLACEMENTMAP" : "",
              n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
              n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
              n.clearcoatRoughnessMap
                ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                : "",
              n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
              n.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
              n.iridescenceThicknessMap
                ? "#define USE_IRIDESCENCE_THICKNESSMAP"
                : "",
              n.specularMap ? "#define USE_SPECULARMAP" : "",
              n.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
              n.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
              n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
              n.metalnessMap ? "#define USE_METALNESSMAP" : "",
              n.alphaMap ? "#define USE_ALPHAMAP" : "",
              n.transmission ? "#define USE_TRANSMISSION" : "",
              n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
              n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
              n.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
              n.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
              n.mapUv ? "#define MAP_UV " + n.mapUv : "",
              n.alphaMapUv ? "#define ALPHAMAP_UV " + n.alphaMapUv : "",
              n.lightMapUv ? "#define LIGHTMAP_UV " + n.lightMapUv : "",
              n.aoMapUv ? "#define AOMAP_UV " + n.aoMapUv : "",
              n.emissiveMapUv
                ? "#define EMISSIVEMAP_UV " + n.emissiveMapUv
                : "",
              n.bumpMapUv ? "#define BUMPMAP_UV " + n.bumpMapUv : "",
              n.normalMapUv ? "#define NORMALMAP_UV " + n.normalMapUv : "",
              n.displacementMapUv
                ? "#define DISPLACEMENTMAP_UV " + n.displacementMapUv
                : "",
              n.metalnessMapUv
                ? "#define METALNESSMAP_UV " + n.metalnessMapUv
                : "",
              n.roughnessMapUv
                ? "#define ROUGHNESSMAP_UV " + n.roughnessMapUv
                : "",
              n.clearcoatMapUv
                ? "#define CLEARCOATMAP_UV " + n.clearcoatMapUv
                : "",
              n.clearcoatNormalMapUv
                ? "#define CLEARCOAT_NORMALMAP_UV " + n.clearcoatNormalMapUv
                : "",
              n.clearcoatRoughnessMapUv
                ? "#define CLEARCOAT_ROUGHNESSMAP_UV " +
                  n.clearcoatRoughnessMapUv
                : "",
              n.iridescenceMapUv
                ? "#define IRIDESCENCEMAP_UV " + n.iridescenceMapUv
                : "",
              n.iridescenceThicknessMapUv
                ? "#define IRIDESCENCE_THICKNESSMAP_UV " +
                  n.iridescenceThicknessMapUv
                : "",
              n.sheenColorMapUv
                ? "#define SHEEN_COLORMAP_UV " + n.sheenColorMapUv
                : "",
              n.sheenRoughnessMapUv
                ? "#define SHEEN_ROUGHNESSMAP_UV " + n.sheenRoughnessMapUv
                : "",
              n.specularMapUv
                ? "#define SPECULARMAP_UV " + n.specularMapUv
                : "",
              n.specularColorMapUv
                ? "#define SPECULAR_COLORMAP_UV " + n.specularColorMapUv
                : "",
              n.specularIntensityMapUv
                ? "#define SPECULAR_INTENSITYMAP_UV " + n.specularIntensityMapUv
                : "",
              n.transmissionMapUv
                ? "#define TRANSMISSIONMAP_UV " + n.transmissionMapUv
                : "",
              n.thicknessMapUv
                ? "#define THICKNESSMAP_UV " + n.thicknessMapUv
                : "",
              n.vertexTangents ? "#define USE_TANGENT" : "",
              n.vertexColors ? "#define USE_COLOR" : "",
              n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
              n.vertexUvs2 ? "#define USE_UV2" : "",
              n.pointsUvs ? "#define USE_POINTS_UV" : "",
              n.flatShading ? "#define FLAT_SHADED" : "",
              n.skinning ? "#define USE_SKINNING" : "",
              n.morphTargets ? "#define USE_MORPHTARGETS" : "",
              n.morphNormals && !1 === n.flatShading
                ? "#define USE_MORPHNORMALS"
                : "",
              n.morphColors && n.isWebGL2 ? "#define USE_MORPHCOLORS" : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_TEXTURE"
                : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_TEXTURE_STRIDE " + n.morphTextureStride
                : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_COUNT " + n.morphTargetsCount
                : "",
              n.doubleSided ? "#define DOUBLE_SIDED" : "",
              n.flipSided ? "#define FLIP_SIDED" : "",
              n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
              n.shadowMapEnabled ? "#define " + c : "",
              n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
              n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
              n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                ? "#define USE_LOGDEPTHBUF_EXT"
                : "",
              "uniform mat4 modelMatrix;",
              "uniform mat4 modelViewMatrix;",
              "uniform mat4 projectionMatrix;",
              "uniform mat4 viewMatrix;",
              "uniform mat3 normalMatrix;",
              "uniform vec3 cameraPosition;",
              "uniform bool isOrthographic;",
              "#ifdef USE_INSTANCING",
              "\tattribute mat4 instanceMatrix;",
              "#endif",
              "#ifdef USE_INSTANCING_COLOR",
              "\tattribute vec3 instanceColor;",
              "#endif",
              "attribute vec3 position;",
              "attribute vec3 normal;",
              "attribute vec2 uv;",
              "#ifdef USE_TANGENT",
              "\tattribute vec4 tangent;",
              "#endif",
              "#if defined( USE_COLOR_ALPHA )",
              "\tattribute vec4 color;",
              "#elif defined( USE_COLOR )",
              "\tattribute vec3 color;",
              "#endif",
              "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )",
              "\tattribute vec3 morphTarget0;",
              "\tattribute vec3 morphTarget1;",
              "\tattribute vec3 morphTarget2;",
              "\tattribute vec3 morphTarget3;",
              "\t#ifdef USE_MORPHNORMALS",
              "\t\tattribute vec3 morphNormal0;",
              "\t\tattribute vec3 morphNormal1;",
              "\t\tattribute vec3 morphNormal2;",
              "\t\tattribute vec3 morphNormal3;",
              "\t#else",
              "\t\tattribute vec3 morphTarget4;",
              "\t\tattribute vec3 morphTarget5;",
              "\t\tattribute vec3 morphTarget6;",
              "\t\tattribute vec3 morphTarget7;",
              "\t#endif",
              "#endif",
              "#ifdef USE_SKINNING",
              "\tattribute vec4 skinIndex;",
              "\tattribute vec4 skinWeight;",
              "#endif",
              "\n  "
            ]
              .filter(og)
              .join("\n  ")),
            (a = [
              v,
              vg(n),
              "#define SHADER_NAME " + n.shaderName,
              m,
              n.useFog && n.fog ? "#define USE_FOG" : "",
              n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
              n.map ? "#define USE_MAP" : "",
              n.matcap ? "#define USE_MATCAP" : "",
              n.envMap ? "#define USE_ENVMAP" : "",
              n.envMap ? "#define " + h : "",
              n.envMap ? "#define " + d : "",
              n.envMap ? "#define " + p : "",
              f ? "#define CUBEUV_TEXEL_WIDTH " + f.texelWidth : "",
              f ? "#define CUBEUV_TEXEL_HEIGHT " + f.texelHeight : "",
              f ? "#define CUBEUV_MAX_MIP " + f.maxMip + ".0" : "",
              n.lightMap ? "#define USE_LIGHTMAP" : "",
              n.aoMap ? "#define USE_AOMAP" : "",
              n.bumpMap ? "#define USE_BUMPMAP" : "",
              n.normalMap ? "#define USE_NORMALMAP" : "",
              n.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
              n.normalMapTangentSpace
                ? "#define USE_NORMALMAP_TANGENTSPACE"
                : "",
              n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
              n.clearcoat ? "#define USE_CLEARCOAT" : "",
              n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
              n.clearcoatRoughnessMap
                ? "#define USE_CLEARCOAT_ROUGHNESSMAP"
                : "",
              n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
              n.iridescence ? "#define USE_IRIDESCENCE" : "",
              n.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
              n.iridescenceThicknessMap
                ? "#define USE_IRIDESCENCE_THICKNESSMAP"
                : "",
              n.specularMap ? "#define USE_SPECULARMAP" : "",
              n.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
              n.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
              n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
              n.metalnessMap ? "#define USE_METALNESSMAP" : "",
              n.alphaMap ? "#define USE_ALPHAMAP" : "",
              n.alphaTest ? "#define USE_ALPHATEST" : "",
              n.sheen ? "#define USE_SHEEN" : "",
              n.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
              n.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
              n.transmission ? "#define USE_TRANSMISSION" : "",
              n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
              n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
              n.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "",
              n.vertexTangents ? "#define USE_TANGENT" : "",
              n.vertexColors || n.instancingColor ? "#define USE_COLOR" : "",
              n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
              n.vertexUvs2 ? "#define USE_UV2" : "",
              n.pointsUvs ? "#define USE_POINTS_UV" : "",
              n.gradientMap ? "#define USE_GRADIENTMAP" : "",
              n.flatShading ? "#define FLAT_SHADED" : "",
              n.doubleSided ? "#define DOUBLE_SIDED" : "",
              n.flipSided ? "#define FLIP_SIDED" : "",
              n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
              n.shadowMapEnabled ? "#define " + c : "",
              n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
              n.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
              n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
              n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                ? "#define USE_LOGDEPTHBUF_EXT"
                : "",
              "uniform mat4 viewMatrix;",
              "uniform vec3 cameraPosition;",
              "uniform bool isOrthographic;",
              0 !== n.toneMapping ? "#define TONE_MAPPING" : "",
              0 !== n.toneMapping ? _v.tonemapping_pars_fragment : "",
              0 !== n.toneMapping ? ag("toneMapping", n.toneMapping) : "",
              n.dithering ? "#define DITHERING" : "",
              n.opaque ? "#define OPAQUE" : "",
              _v.encodings_pars_fragment,
              rg("linearToOutputTexel", n.outputEncoding),
              n.useDepthPacking
                ? "#define DEPTH_PACKING " + n.depthPacking
                : "",
              "\n  "
            ]
              .filter(og)
              .join("\n  "))),
          (l = lg((l = sg((l = cg(l)), n)), n)),
          (u = lg((u = sg((u = cg(u)), n)), n)),
          (l = pg(l)),
          (u = pg(u)),
          n.isWebGL2 &&
            !0 !== n.isRawShaderMaterial &&
            ((_ = "#version 300 es\n  "),
            (r =
              [
                "precision mediump sampler2DArray;",
                "#define attribute in",
                "#define varying out",
                "#define texture2D texture"
              ].join("\n  ") +
              "\n  " +
              r),
            (a =
              [
                "#define varying in",
                n.glslVersion === ld
                  ? ""
                  : "layout(location = 0) out highp vec4 pc_fragColor;",
                n.glslVersion === ld ? "" : "#define gl_FragColor pc_fragColor",
                "#define gl_FragDepthEXT gl_FragDepth",
                "#define texture2D texture",
                "#define textureCube texture",
                "#define texture2DProj textureProj",
                "#define texture2DLodEXT textureLod",
                "#define texture2DProjLodEXT textureProjLod",
                "#define textureCubeLodEXT textureLod",
                "#define texture2DGradEXT textureGrad",
                "#define texture2DProjGradEXT textureProjGrad",
                "#define textureCubeGradEXT textureGrad"
              ].join("\n  ") +
              "\n  " +
              a));
        var y,
          b,
          x = _ + a + u,
          w = tg(o, 35633, _ + r + l),
          S = tg(o, 35632, x);
        if (
          (o.attachShader(g, w),
          o.attachShader(g, S),
          void 0 !== n.index0AttributeName
            ? o.bindAttribLocation(g, 0, n.index0AttributeName)
            : !0 === n.morphTargets && o.bindAttribLocation(g, 0, "position"),
          o.linkProgram(g),
          e.debug.checkShaderErrors)
        ) {
          var M = o.getProgramInfoLog(g).trim(),
            T = o.getShaderInfoLog(w).trim(),
            k = o.getShaderInfoLog(S).trim(),
            E = !0,
            C = !0;
          if (!1 === o.getProgramParameter(g, 35714)) {
            if (((E = !1), "function" == typeof e.debug.onShaderError))
              e.debug.onShaderError(o, g, w, S);
            else {
              var D = ig(o, w, "vertex"),
                A = ig(o, S, "fragment");
              console.error(
                "THREE.WebGLProgram: Shader Error " +
                  o.getError() +
                  " - VALIDATE_STATUS " +
                  o.getProgramParameter(g, 35715) +
                  "\n  \n  Program Info Log: " +
                  M +
                  "\n  " +
                  D +
                  "\n  " +
                  A
              );
            }
          } else
            "" !== M
              ? console.warn("THREE.WebGLProgram: Program Info Log:", M)
              : ("" === T || "" === k) && (C = !1);
          C &&
            (this.diagnostics = {
              runnable: E,
              programLog: M,
              vertexShader: { log: T, prefix: r },
              fragmentShader: { log: k, prefix: a }
            });
        }
        return (
          o.deleteShader(w),
          o.deleteShader(S),
          (this.getUniforms = function () {
            return void 0 === y && (y = new eg(o, g)), y;
          }),
          (this.getAttributes = function () {
            return (
              void 0 === b &&
                (b = (function (e, t) {
                  for (
                    var n = {}, i = e.getProgramParameter(t, 35721), r = 0;
                    r < i;
                    r++
                  ) {
                    var a = e.getActiveAttrib(t, r),
                      o = a.name,
                      s = 1;
                    35674 === a.type && (s = 2),
                      35675 === a.type && (s = 3),
                      35676 === a.type && (s = 4),
                      (n[o] = {
                        type: a.type,
                        location: e.getAttribLocation(t, o),
                        locationSize: s
                      });
                  }
                  return n;
                })(o, g)),
              b
            );
          }),
          (this.destroy = function () {
            i.releaseStatesOfProgram(this),
              o.deleteProgram(g),
              (this.program = void 0);
          }),
          (this.name = n.shaderName),
          (this.id = ng++),
          (this.cacheKey = t),
          (this.usedTimes = 1),
          (this.program = g),
          (this.vertexShader = w),
          (this.fragmentShader = S),
          this
        );
      }
      var gg = 0,
        _g = (function () {
          return yh(
            function e() {
              gh(this, e),
                (this.shaderCache = new Map()),
                (this.materialCache = new Map());
            },
            [
              {
                key: "update",
                value: function (e) {
                  var t = e.vertexShader,
                    n = e.fragmentShader,
                    i = this._getShaderStage(t),
                    r = this._getShaderStage(n),
                    a = this._getShaderCacheForMaterial(e);
                  return (
                    !1 === a.has(i) && (a.add(i), i.usedTimes++),
                    !1 === a.has(r) && (a.add(r), r.usedTimes++),
                    this
                  );
                }
              },
              {
                key: "remove",
                value: function (e) {
                  var t,
                    n = ih(this.materialCache.get(e));
                  try {
                    for (n.s(); !(t = n.n()).done; ) {
                      var i = t.value;
                      i.usedTimes--,
                        0 === i.usedTimes && this.shaderCache.delete(i.code);
                    }
                  } catch (e) {
                    n.e(e);
                  } finally {
                    n.f();
                  }
                  return this.materialCache.delete(e), this;
                }
              },
              {
                key: "getVertexShaderID",
                value: function (e) {
                  return this._getShaderStage(e.vertexShader).id;
                }
              },
              {
                key: "getFragmentShaderID",
                value: function (e) {
                  return this._getShaderStage(e.fragmentShader).id;
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.shaderCache.clear(), this.materialCache.clear();
                }
              },
              {
                key: "_getShaderCacheForMaterial",
                value: function (e) {
                  var t = this.materialCache,
                    n = t.get(e);
                  return void 0 === n && ((n = new Set()), t.set(e, n)), n;
                }
              },
              {
                key: "_getShaderStage",
                value: function (e) {
                  var t = this.shaderCache,
                    n = t.get(e);
                  return void 0 === n && ((n = new yg(e)), t.set(e, n)), n;
                }
              }
            ]
          );
        })(),
        yg = yh(function e(t) {
          gh(this, e), (this.id = gg++), (this.code = t), (this.usedTimes = 0);
        });
      function bg(e, t, n, i, r, a, o) {
        var s = new Ip(),
          l = new _g(),
          u = [],
          c = r.isWebGL2,
          h = r.logarithmicDepthBuffer,
          d = r.vertexTextures,
          p = r.precision,
          f = {
            MeshDepthMaterial: "depth",
            MeshDistanceMaterial: "distanceRGBA",
            MeshNormalMaterial: "normal",
            MeshBasicMaterial: "basic",
            MeshLambertMaterial: "lambert",
            MeshPhongMaterial: "phong",
            MeshToonMaterial: "toon",
            MeshStandardMaterial: "physical",
            MeshPhysicalMaterial: "physical",
            MeshMatcapMaterial: "matcap",
            LineBasicMaterial: "basic",
            LineDashedMaterial: "dashed",
            PointsMaterial: "points",
            ShadowMaterial: "shadow",
            SpriteMaterial: "sprite"
          };
        function v(e) {
          return 1 === e ? "uv2" : "uv";
        }
        return {
          getParameters: function (a, s, u, m, g) {
            var _ = m.fog,
              y = g.geometry,
              b = a.isMeshStandardMaterial ? m.environment : null,
              x = (a.isMeshStandardMaterial ? n : t).get(a.envMap || b),
              w = x && x.mapping === Eh ? x.image.height : null,
              S = f[a.type];
            null !== a.precision &&
              (p = r.getMaxPrecision(a.precision)) !== a.precision &&
              console.warn(
                "THREE.WebGLProgram.getParameters:",
                a.precision,
                "not supported, using",
                p,
                "instead."
              );
            var M,
              T,
              k,
              E,
              C =
                y.morphAttributes.position ||
                y.morphAttributes.normal ||
                y.morphAttributes.color,
              D = void 0 !== C ? C.length : 0,
              A = 0;
            if (
              (void 0 !== y.morphAttributes.position && (A = 1),
              void 0 !== y.morphAttributes.normal && (A = 2),
              void 0 !== y.morphAttributes.color && (A = 3),
              S)
            ) {
              var P = bv[S];
              (M = P.vertexShader), (T = P.fragmentShader);
            } else
              (M = a.vertexShader),
                (T = a.fragmentShader),
                l.update(a),
                (k = l.getVertexShaderID(a)),
                (E = l.getFragmentShaderID(a));
            var L = e.getRenderTarget(),
              R = !0 === g.isInstancedMesh,
              I = !!a.map,
              O = !!a.matcap,
              N = !!x,
              F = !!a.aoMap,
              U = !!a.lightMap,
              B = !!a.bumpMap,
              z = !!a.normalMap,
              V = !!a.displacementMap,
              H = !!a.emissiveMap,
              G = !!a.metalnessMap,
              W = !!a.roughnessMap,
              j = a.clearcoat > 0,
              q = a.iridescence > 0,
              K = a.sheen > 0,
              X = a.transmission > 0,
              Y = j && !!a.clearcoatMap,
              Z = j && !!a.clearcoatNormalMap,
              J = j && !!a.clearcoatRoughnessMap,
              Q = q && !!a.iridescenceMap,
              $ = q && !!a.iridescenceThicknessMap,
              ee = K && !!a.sheenColorMap,
              te = K && !!a.sheenRoughnessMap,
              ne = !!a.specularMap,
              ie = !!a.specularColorMap,
              re = !!a.specularIntensityMap,
              ae = X && !!a.transmissionMap,
              oe = X && !!a.thicknessMap,
              se = !!a.gradientMap,
              le = !!a.alphaMap,
              ue = a.alphaTest > 0,
              ce = !!a.extensions,
              he = !!y.attributes.uv2;
            return {
              isWebGL2: c,
              shaderID: S,
              shaderName: a.type,
              vertexShader: M,
              fragmentShader: T,
              defines: a.defines,
              customVertexShaderID: k,
              customFragmentShaderID: E,
              isRawShaderMaterial: !0 === a.isRawShaderMaterial,
              glslVersion: a.glslVersion,
              precision: p,
              instancing: R,
              instancingColor: R && null !== g.instanceColor,
              supportsVertexTextures: d,
              outputEncoding:
                null === L
                  ? e.outputEncoding
                  : !0 === L.isXRRenderTarget
                  ? L.texture.encoding
                  : td,
              map: I,
              matcap: O,
              envMap: N,
              envMapMode: N && x.mapping,
              envMapCubeUVHeight: w,
              aoMap: F,
              lightMap: U,
              bumpMap: B,
              normalMap: z,
              displacementMap: d && V,
              emissiveMap: H,
              normalMapObjectSpace: z && 1 === a.normalMapType,
              normalMapTangentSpace: z && 0 === a.normalMapType,
              decodeVideoTexture:
                I && !0 === a.map.isVideoTexture && a.map.encoding === nd,
              metalnessMap: G,
              roughnessMap: W,
              clearcoat: j,
              clearcoatMap: Y,
              clearcoatNormalMap: Z,
              clearcoatRoughnessMap: J,
              iridescence: q,
              iridescenceMap: Q,
              iridescenceThicknessMap: $,
              sheen: K,
              sheenColorMap: ee,
              sheenRoughnessMap: te,
              specularMap: ne,
              specularColorMap: ie,
              specularIntensityMap: re,
              transmission: X,
              transmissionMap: ae,
              thicknessMap: oe,
              gradientMap: se,
              opaque: !1 === a.transparent && 1 === a.blending,
              alphaMap: le,
              alphaTest: ue,
              combine: a.combine,
              mapUv: I && v(a.map.channel),
              aoMapUv: F && v(a.aoMap.channel),
              lightMapUv: U && v(a.lightMap.channel),
              bumpMapUv: B && v(a.bumpMap.channel),
              normalMapUv: z && v(a.normalMap.channel),
              displacementMapUv: V && v(a.displacementMap.channel),
              emissiveMapUv: H && v(a.emissiveMap.channel),
              metalnessMapUv: G && v(a.metalnessMap.channel),
              roughnessMapUv: W && v(a.roughnessMap.channel),
              clearcoatMapUv: Y && v(a.clearcoatMap.channel),
              clearcoatNormalMapUv: Z && v(a.clearcoatNormalMap.channel),
              clearcoatRoughnessMapUv: J && v(a.clearcoatRoughnessMap.channel),
              iridescenceMapUv: Q && v(a.iridescenceMap.channel),
              iridescenceThicknessMapUv:
                $ && v(a.iridescenceThicknessMap.channel),
              sheenColorMapUv: ee && v(a.sheenColorMap.channel),
              sheenRoughnessMapUv: te && v(a.sheenRoughnessMap.channel),
              specularMapUv: ne && v(a.specularMap.channel),
              specularColorMapUv: ie && v(a.specularColorMap.channel),
              specularIntensityMapUv: re && v(a.specularIntensityMap.channel),
              transmissionMapUv: ae && v(a.transmissionMap.channel),
              thicknessMapUv: oe && v(a.thicknessMap.channel),
              alphaMapUv: le && v(a.alphaMap.channel),
              vertexTangents: z && !!y.attributes.tangent,
              vertexColors: a.vertexColors,
              vertexAlphas:
                !0 === a.vertexColors &&
                !!y.attributes.color &&
                4 === y.attributes.color.itemSize,
              vertexUvs2: he,
              pointsUvs: !0 === g.isPoints && !!y.attributes.uv && (I || le),
              fog: !!_,
              useFog: !0 === a.fog,
              fogExp2: _ && _.isFogExp2,
              flatShading: !0 === a.flatShading,
              sizeAttenuation: !0 === a.sizeAttenuation,
              logarithmicDepthBuffer: h,
              skinning: !0 === g.isSkinnedMesh,
              morphTargets: void 0 !== y.morphAttributes.position,
              morphNormals: void 0 !== y.morphAttributes.normal,
              morphColors: void 0 !== y.morphAttributes.color,
              morphTargetsCount: D,
              morphTextureStride: A,
              numDirLights: s.directional.length,
              numPointLights: s.point.length,
              numSpotLights: s.spot.length,
              numSpotLightMaps: s.spotLightMap.length,
              numRectAreaLights: s.rectArea.length,
              numHemiLights: s.hemi.length,
              numDirLightShadows: s.directionalShadowMap.length,
              numPointLightShadows: s.pointShadowMap.length,
              numSpotLightShadows: s.spotShadowMap.length,
              numSpotLightShadowsWithMaps: s.numSpotLightShadowsWithMaps,
              numClippingPlanes: o.numPlanes,
              numClipIntersection: o.numIntersection,
              dithering: a.dithering,
              shadowMapEnabled: e.shadowMap.enabled && u.length > 0,
              shadowMapType: e.shadowMap.type,
              toneMapping: a.toneMapped ? e.toneMapping : 0,
              useLegacyLights: e.useLegacyLights,
              premultipliedAlpha: a.premultipliedAlpha,
              doubleSided: 2 === a.side,
              flipSided: 1 === a.side,
              useDepthPacking: a.depthPacking >= 0,
              depthPacking: a.depthPacking || 0,
              index0AttributeName: a.index0AttributeName,
              extensionDerivatives: ce && !0 === a.extensions.derivatives,
              extensionFragDepth: ce && !0 === a.extensions.fragDepth,
              extensionDrawBuffers: ce && !0 === a.extensions.drawBuffers,
              extensionShaderTextureLOD:
                ce && !0 === a.extensions.shaderTextureLOD,
              rendererExtensionFragDepth: c || i.has("EXT_frag_depth"),
              rendererExtensionDrawBuffers: c || i.has("WEBGL_draw_buffers"),
              rendererExtensionShaderTextureLod:
                c || i.has("EXT_shader_texture_lod"),
              customProgramCacheKey: a.customProgramCacheKey()
            };
          },
          getProgramCacheKey: function (t) {
            var n = [];
            if (
              (t.shaderID
                ? n.push(t.shaderID)
                : (n.push(t.customVertexShaderID),
                  n.push(t.customFragmentShaderID)),
              void 0 !== t.defines)
            )
              for (var i in t.defines) n.push(i), n.push(t.defines[i]);
            return (
              !1 === t.isRawShaderMaterial &&
                ((function (e, t) {
                  e.push(t.precision),
                    e.push(t.outputEncoding),
                    e.push(t.envMapMode),
                    e.push(t.envMapCubeUVHeight),
                    e.push(t.mapUv),
                    e.push(t.alphaMapUv),
                    e.push(t.lightMapUv),
                    e.push(t.aoMapUv),
                    e.push(t.bumpMapUv),
                    e.push(t.normalMapUv),
                    e.push(t.displacementMapUv),
                    e.push(t.emissiveMapUv),
                    e.push(t.metalnessMapUv),
                    e.push(t.roughnessMapUv),
                    e.push(t.clearcoatMapUv),
                    e.push(t.clearcoatNormalMapUv),
                    e.push(t.clearcoatRoughnessMapUv),
                    e.push(t.iridescenceMapUv),
                    e.push(t.iridescenceThicknessMapUv),
                    e.push(t.sheenColorMapUv),
                    e.push(t.sheenRoughnessMapUv),
                    e.push(t.specularMapUv),
                    e.push(t.specularColorMapUv),
                    e.push(t.specularIntensityMapUv),
                    e.push(t.transmissionMapUv),
                    e.push(t.thicknessMapUv),
                    e.push(t.combine),
                    e.push(t.fogExp2),
                    e.push(t.sizeAttenuation),
                    e.push(t.morphTargetsCount),
                    e.push(t.morphAttributeCount),
                    e.push(t.numDirLights),
                    e.push(t.numPointLights),
                    e.push(t.numSpotLights),
                    e.push(t.numSpotLightMaps),
                    e.push(t.numHemiLights),
                    e.push(t.numRectAreaLights),
                    e.push(t.numDirLightShadows),
                    e.push(t.numPointLightShadows),
                    e.push(t.numSpotLightShadows),
                    e.push(t.numSpotLightShadowsWithMaps),
                    e.push(t.shadowMapType),
                    e.push(t.toneMapping),
                    e.push(t.numClippingPlanes),
                    e.push(t.numClipIntersection),
                    e.push(t.depthPacking);
                })(n, t),
                (function (e, t) {
                  s.disableAll(),
                    t.isWebGL2 && s.enable(0),
                    t.supportsVertexTextures && s.enable(1),
                    t.instancing && s.enable(2),
                    t.instancingColor && s.enable(3),
                    t.matcap && s.enable(4),
                    t.envMap && s.enable(5),
                    t.normalMapObjectSpace && s.enable(6),
                    t.normalMapTangentSpace && s.enable(7),
                    t.clearcoat && s.enable(8),
                    t.iridescence && s.enable(9),
                    t.alphaTest && s.enable(10),
                    t.vertexColors && s.enable(11),
                    t.vertexAlphas && s.enable(12),
                    t.vertexUvs2 && s.enable(13),
                    t.vertexTangents && s.enable(14),
                    e.push(s.mask),
                    s.disableAll(),
                    t.fog && s.enable(0),
                    t.useFog && s.enable(1),
                    t.flatShading && s.enable(2),
                    t.logarithmicDepthBuffer && s.enable(3),
                    t.skinning && s.enable(4),
                    t.morphTargets && s.enable(5),
                    t.morphNormals && s.enable(6),
                    t.morphColors && s.enable(7),
                    t.premultipliedAlpha && s.enable(8),
                    t.shadowMapEnabled && s.enable(9),
                    t.useLegacyLights && s.enable(10),
                    t.doubleSided && s.enable(11),
                    t.flipSided && s.enable(12),
                    t.useDepthPacking && s.enable(13),
                    t.dithering && s.enable(14),
                    t.transmission && s.enable(15),
                    t.sheen && s.enable(16),
                    t.decodeVideoTexture && s.enable(17),
                    t.opaque && s.enable(18),
                    t.pointsUvs && s.enable(19),
                    e.push(s.mask);
                })(n, t),
                n.push(e.outputEncoding)),
              n.push(t.customProgramCacheKey),
              n.join()
            );
          },
          getUniforms: function (e) {
            var t,
              n = f[e.type];
            if (n) {
              var i = bv[n];
              t = ev.clone(i.uniforms);
            } else t = e.uniforms;
            return t;
          },
          acquireProgram: function (t, n) {
            for (var i, r = 0, o = u.length; r < o; r++) {
              var s = u[r];
              if (s.cacheKey === n) {
                ++(i = s).usedTimes;
                break;
              }
            }
            return void 0 === i && ((i = new mg(e, n, t, a)), u.push(i)), i;
          },
          releaseProgram: function (e) {
            if (0 == --e.usedTimes) {
              var t = u.indexOf(e);
              (u[t] = u[u.length - 1]), u.pop(), e.destroy();
            }
          },
          releaseShaderCache: function (e) {
            l.remove(e);
          },
          programs: u,
          dispose: function () {
            l.dispose();
          }
        };
      }
      function xg() {
        var e = new WeakMap();
        return {
          get: function (t) {
            var n = e.get(t);
            return void 0 === n && ((n = {}), e.set(t, n)), n;
          },
          remove: function (t) {
            e.delete(t);
          },
          update: function (t, n, i) {
            e.get(t)[n] = i;
          },
          dispose: function () {
            e = new WeakMap();
          }
        };
      }
      function wg(e, t) {
        return e.groupOrder !== t.groupOrder
          ? e.groupOrder - t.groupOrder
          : e.renderOrder !== t.renderOrder
          ? e.renderOrder - t.renderOrder
          : e.material.id !== t.material.id
          ? e.material.id - t.material.id
          : e.z !== t.z
          ? e.z - t.z
          : e.id - t.id;
      }
      function Sg(e, t) {
        return e.groupOrder !== t.groupOrder
          ? e.groupOrder - t.groupOrder
          : e.renderOrder !== t.renderOrder
          ? e.renderOrder - t.renderOrder
          : e.z !== t.z
          ? t.z - e.z
          : e.id - t.id;
      }
      function Mg() {
        var e = [],
          t = 0,
          n = [],
          i = [],
          r = [];
        function a(n, i, r, a, o, s) {
          var l = e[t];
          return (
            void 0 === l
              ? ((l = {
                  id: n.id,
                  object: n,
                  geometry: i,
                  material: r,
                  groupOrder: a,
                  renderOrder: n.renderOrder,
                  z: o,
                  group: s
                }),
                (e[t] = l))
              : ((l.id = n.id),
                (l.object = n),
                (l.geometry = i),
                (l.material = r),
                (l.groupOrder = a),
                (l.renderOrder = n.renderOrder),
                (l.z = o),
                (l.group = s)),
            t++,
            l
          );
        }
        return {
          opaque: n,
          transmissive: i,
          transparent: r,
          init: function () {
            (t = 0), (n.length = 0), (i.length = 0), (r.length = 0);
          },
          push: function (e, t, o, s, l, u) {
            var c = a(e, t, o, s, l, u);
            o.transmission > 0
              ? i.push(c)
              : !0 === o.transparent
              ? r.push(c)
              : n.push(c);
          },
          unshift: function (e, t, o, s, l, u) {
            var c = a(e, t, o, s, l, u);
            o.transmission > 0
              ? i.unshift(c)
              : !0 === o.transparent
              ? r.unshift(c)
              : n.unshift(c);
          },
          finish: function () {
            for (var n = t, i = e.length; n < i; n++) {
              var r = e[n];
              if (null === r.id) break;
              (r.id = null),
                (r.object = null),
                (r.geometry = null),
                (r.material = null),
                (r.group = null);
            }
          },
          sort: function (e, t) {
            n.length > 1 && n.sort(e || wg),
              i.length > 1 && i.sort(t || Sg),
              r.length > 1 && r.sort(t || Sg);
          }
        };
      }
      function Tg() {
        var e = new WeakMap();
        return {
          get: function (t, n) {
            var i,
              r = e.get(t);
            return (
              void 0 === r
                ? ((i = new Mg()), e.set(t, [i]))
                : n >= r.length
                ? ((i = new Mg()), r.push(i))
                : (i = r[n]),
              i
            );
          },
          dispose: function () {
            e = new WeakMap();
          }
        };
      }
      function kg() {
        var e = {};
        return {
          get: function (t) {
            if (void 0 !== e[t.id]) return e[t.id];
            var n;
            switch (t.type) {
              case "DirectionalLight":
                n = { direction: new Kd(), color: new ff() };
                break;
              case "SpotLight":
                n = {
                  position: new Kd(),
                  direction: new Kd(),
                  color: new ff(),
                  distance: 0,
                  coneCos: 0,
                  penumbraCos: 0,
                  decay: 0
                };
                break;
              case "PointLight":
                n = {
                  position: new Kd(),
                  color: new ff(),
                  distance: 0,
                  decay: 0
                };
                break;
              case "HemisphereLight":
                n = {
                  direction: new Kd(),
                  skyColor: new ff(),
                  groundColor: new ff()
                };
                break;
              case "RectAreaLight":
                n = {
                  color: new ff(),
                  position: new Kd(),
                  halfWidth: new Kd(),
                  halfHeight: new Kd()
                };
            }
            return (e[t.id] = n), n;
          }
        };
      }
      var Eg = 0;
      function Cg(e, t) {
        return (
          (t.castShadow ? 2 : 0) -
          (e.castShadow ? 2 : 0) +
          (t.map ? 1 : 0) -
          (e.map ? 1 : 0)
        );
      }
      function Dg(e, t) {
        for (
          var n = new kg(),
            i = (function () {
              var e = {};
              return {
                get: function (t) {
                  if (void 0 !== e[t.id]) return e[t.id];
                  var n;
                  switch (t.type) {
                    case "DirectionalLight":
                    case "SpotLight":
                      n = {
                        shadowBias: 0,
                        shadowNormalBias: 0,
                        shadowRadius: 1,
                        shadowMapSize: new Md()
                      };
                      break;
                    case "PointLight":
                      n = {
                        shadowBias: 0,
                        shadowNormalBias: 0,
                        shadowRadius: 1,
                        shadowMapSize: new Md(),
                        shadowCameraNear: 1,
                        shadowCameraFar: 1e3
                      };
                  }
                  return (e[t.id] = n), n;
                }
              };
            })(),
            r = {
              version: 0,
              hash: {
                directionalLength: -1,
                pointLength: -1,
                spotLength: -1,
                rectAreaLength: -1,
                hemiLength: -1,
                numDirectionalShadows: -1,
                numPointShadows: -1,
                numSpotShadows: -1,
                numSpotMaps: -1
              },
              ambient: [0, 0, 0],
              probe: [],
              directional: [],
              directionalShadow: [],
              directionalShadowMap: [],
              directionalShadowMatrix: [],
              spot: [],
              spotLightMap: [],
              spotShadow: [],
              spotShadowMap: [],
              spotLightMatrix: [],
              rectArea: [],
              rectAreaLTC1: null,
              rectAreaLTC2: null,
              point: [],
              pointShadow: [],
              pointShadowMap: [],
              pointShadowMatrix: [],
              hemi: [],
              numSpotLightShadowsWithMaps: 0
            },
            a = 0;
          a < 9;
          a++
        )
          r.probe.push(new Kd());
        var o = new Kd(),
          s = new Sp(),
          l = new Sp();
        return {
          setup: function (a, o) {
            for (var s = 0, l = 0, u = 0, c = 0; c < 9; c++)
              r.probe[c].set(0, 0, 0);
            var h = 0,
              d = 0,
              p = 0,
              f = 0,
              v = 0,
              m = 0,
              g = 0,
              _ = 0,
              y = 0,
              b = 0;
            a.sort(Cg);
            for (
              var x = !0 === o ? Math.PI : 1, w = 0, S = a.length;
              w < S;
              w++
            ) {
              var M = a[w],
                T = M.color,
                k = M.intensity,
                E = M.distance,
                C = M.shadow && M.shadow.map ? M.shadow.map.texture : null;
              if (M.isAmbientLight)
                (s += T.r * k * x), (l += T.g * k * x), (u += T.b * k * x);
              else if (M.isLightProbe)
                for (var D = 0; D < 9; D++)
                  r.probe[D].addScaledVector(M.sh.coefficients[D], k);
              else if (M.isDirectionalLight) {
                var A = n.get(M);
                if (
                  (A.color.copy(M.color).multiplyScalar(M.intensity * x),
                  M.castShadow)
                ) {
                  var P = M.shadow,
                    L = i.get(M);
                  (L.shadowBias = P.bias),
                    (L.shadowNormalBias = P.normalBias),
                    (L.shadowRadius = P.radius),
                    (L.shadowMapSize = P.mapSize),
                    (r.directionalShadow[h] = L),
                    (r.directionalShadowMap[h] = C),
                    (r.directionalShadowMatrix[h] = M.shadow.matrix),
                    m++;
                }
                (r.directional[h] = A), h++;
              } else if (M.isSpotLight) {
                var R = n.get(M);
                R.position.setFromMatrixPosition(M.matrixWorld),
                  R.color.copy(T).multiplyScalar(k * x),
                  (R.distance = E),
                  (R.coneCos = Math.cos(M.angle)),
                  (R.penumbraCos = Math.cos(M.angle * (1 - M.penumbra))),
                  (R.decay = M.decay),
                  (r.spot[p] = R);
                var I = M.shadow;
                if (
                  (M.map &&
                    ((r.spotLightMap[y] = M.map),
                    y++,
                    I.updateMatrices(M),
                    M.castShadow && b++),
                  (r.spotLightMatrix[p] = I.matrix),
                  M.castShadow)
                ) {
                  var O = i.get(M);
                  (O.shadowBias = I.bias),
                    (O.shadowNormalBias = I.normalBias),
                    (O.shadowRadius = I.radius),
                    (O.shadowMapSize = I.mapSize),
                    (r.spotShadow[p] = O),
                    (r.spotShadowMap[p] = C),
                    _++;
                }
                p++;
              } else if (M.isRectAreaLight) {
                var N = n.get(M);
                N.color.copy(T).multiplyScalar(k),
                  N.halfWidth.set(0.5 * M.width, 0, 0),
                  N.halfHeight.set(0, 0.5 * M.height, 0),
                  (r.rectArea[f] = N),
                  f++;
              } else if (M.isPointLight) {
                var F = n.get(M);
                if (
                  (F.color.copy(M.color).multiplyScalar(M.intensity * x),
                  (F.distance = M.distance),
                  (F.decay = M.decay),
                  M.castShadow)
                ) {
                  var U = M.shadow,
                    B = i.get(M);
                  (B.shadowBias = U.bias),
                    (B.shadowNormalBias = U.normalBias),
                    (B.shadowRadius = U.radius),
                    (B.shadowMapSize = U.mapSize),
                    (B.shadowCameraNear = U.camera.near),
                    (B.shadowCameraFar = U.camera.far),
                    (r.pointShadow[d] = B),
                    (r.pointShadowMap[d] = C),
                    (r.pointShadowMatrix[d] = M.shadow.matrix),
                    g++;
                }
                (r.point[d] = F), d++;
              } else if (M.isHemisphereLight) {
                var z = n.get(M);
                z.skyColor.copy(M.color).multiplyScalar(k * x),
                  z.groundColor.copy(M.groundColor).multiplyScalar(k * x),
                  (r.hemi[v] = z),
                  v++;
              }
            }
            f > 0 &&
              (t.isWebGL2 || !0 === e.has("OES_texture_float_linear")
                ? ((r.rectAreaLTC1 = yv.LTC_FLOAT_1),
                  (r.rectAreaLTC2 = yv.LTC_FLOAT_2))
                : !0 === e.has("OES_texture_half_float_linear")
                ? ((r.rectAreaLTC1 = yv.LTC_HALF_1),
                  (r.rectAreaLTC2 = yv.LTC_HALF_2))
                : console.error(
                    "THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."
                  )),
              (r.ambient[0] = s),
              (r.ambient[1] = l),
              (r.ambient[2] = u);
            var V = r.hash;
            (V.directionalLength !== h ||
              V.pointLength !== d ||
              V.spotLength !== p ||
              V.rectAreaLength !== f ||
              V.hemiLength !== v ||
              V.numDirectionalShadows !== m ||
              V.numPointShadows !== g ||
              V.numSpotShadows !== _ ||
              V.numSpotMaps !== y) &&
              ((r.directional.length = h),
              (r.spot.length = p),
              (r.rectArea.length = f),
              (r.point.length = d),
              (r.hemi.length = v),
              (r.directionalShadow.length = m),
              (r.directionalShadowMap.length = m),
              (r.pointShadow.length = g),
              (r.pointShadowMap.length = g),
              (r.spotShadow.length = _),
              (r.spotShadowMap.length = _),
              (r.directionalShadowMatrix.length = m),
              (r.pointShadowMatrix.length = g),
              (r.spotLightMatrix.length = _ + y - b),
              (r.spotLightMap.length = y),
              (r.numSpotLightShadowsWithMaps = b),
              (V.directionalLength = h),
              (V.pointLength = d),
              (V.spotLength = p),
              (V.rectAreaLength = f),
              (V.hemiLength = v),
              (V.numDirectionalShadows = m),
              (V.numPointShadows = g),
              (V.numSpotShadows = _),
              (V.numSpotMaps = y),
              (r.version = Eg++));
          },
          setupView: function (e, t) {
            for (
              var n = 0,
                i = 0,
                a = 0,
                u = 0,
                c = 0,
                h = t.matrixWorldInverse,
                d = 0,
                p = e.length;
              d < p;
              d++
            ) {
              var f = e[d];
              if (f.isDirectionalLight) {
                var v = r.directional[n];
                v.direction.setFromMatrixPosition(f.matrixWorld),
                  o.setFromMatrixPosition(f.target.matrixWorld),
                  v.direction.sub(o),
                  v.direction.transformDirection(h),
                  n++;
              } else if (f.isSpotLight) {
                var m = r.spot[a];
                m.position.setFromMatrixPosition(f.matrixWorld),
                  m.position.applyMatrix4(h),
                  m.direction.setFromMatrixPosition(f.matrixWorld),
                  o.setFromMatrixPosition(f.target.matrixWorld),
                  m.direction.sub(o),
                  m.direction.transformDirection(h),
                  a++;
              } else if (f.isRectAreaLight) {
                var g = r.rectArea[u];
                g.position.setFromMatrixPosition(f.matrixWorld),
                  g.position.applyMatrix4(h),
                  l.identity(),
                  s.copy(f.matrixWorld),
                  s.premultiply(h),
                  l.extractRotation(s),
                  g.halfWidth.set(0.5 * f.width, 0, 0),
                  g.halfHeight.set(0, 0.5 * f.height, 0),
                  g.halfWidth.applyMatrix4(l),
                  g.halfHeight.applyMatrix4(l),
                  u++;
              } else if (f.isPointLight) {
                var _ = r.point[i];
                _.position.setFromMatrixPosition(f.matrixWorld),
                  _.position.applyMatrix4(h),
                  i++;
              } else if (f.isHemisphereLight) {
                var y = r.hemi[c];
                y.direction.setFromMatrixPosition(f.matrixWorld),
                  y.direction.transformDirection(h),
                  c++;
              }
            }
          },
          state: r
        };
      }
      function Ag(e, t) {
        var n = new Dg(e, t),
          i = [],
          r = [];
        return {
          init: function () {
            (i.length = 0), (r.length = 0);
          },
          state: { lightsArray: i, shadowsArray: r, lights: n },
          setupLights: function (e) {
            n.setup(i, e);
          },
          setupLightsView: function (e) {
            n.setupView(i, e);
          },
          pushLight: function (e) {
            i.push(e);
          },
          pushShadow: function (e) {
            r.push(e);
          }
        };
      }
      function Pg(e, t) {
        var n = new WeakMap();
        return {
          get: function (i) {
            var r,
              a =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0,
              o = n.get(i);
            return (
              void 0 === o
                ? ((r = new Ag(e, t)), n.set(i, [r]))
                : a >= o.length
                ? ((r = new Ag(e, t)), o.push(r))
                : (r = o[a]),
              r
            );
          },
          dispose: function () {
            n = new WeakMap();
          }
        };
      }
      var Lg = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t)).isMeshDepthMaterial = !0),
              (n.type = "MeshDepthMaterial"),
              (n.depthPacking = 3200),
              (n.map = null),
              (n.alphaMap = null),
              (n.displacementMap = null),
              (n.displacementScale = 1),
              (n.displacementBias = 0),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              n.setValues(e),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    (this.depthPacking = e.depthPacking),
                    (this.map = e.map),
                    (this.alphaMap = e.alphaMap),
                    (this.displacementMap = e.displacementMap),
                    (this.displacementScale = e.displacementScale),
                    (this.displacementBias = e.displacementBias),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    this
                  );
                }
              }
            ])
          );
        })(uf),
        Rg = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t)).isMeshDistanceMaterial = !0),
              (n.type = "MeshDistanceMaterial"),
              (n.map = null),
              (n.alphaMap = null),
              (n.displacementMap = null),
              (n.displacementScale = 1),
              (n.displacementBias = 0),
              n.setValues(e),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    (this.map = e.map),
                    (this.alphaMap = e.alphaMap),
                    (this.displacementMap = e.displacementMap),
                    (this.displacementScale = e.displacementScale),
                    (this.displacementBias = e.displacementBias),
                    this
                  );
                }
              }
            ])
          );
        })(uf);
      function Ig(e, t, n) {
        var i = new fv(),
          r = new Md(),
          a = new Md(),
          o = new Hd(),
          s = new Lg({ depthPacking: 3201 }),
          l = new Rg(),
          u = {},
          c = n.maxTextureSize,
          h = vh(vh(vh({}, 0, 1), 1, 0), 2, 2),
          d = new tv({
            defines: { VSM_SAMPLES: 8 },
            uniforms: {
              shadow_pass: { value: null },
              resolution: { value: new Md() },
              radius: { value: 4 }
            },
            vertexShader:
              "void main() {\n      gl_Position = vec4( position, 1.0 );\n  }",
            fragmentShader:
              "uniform sampler2D shadow_pass;\n  uniform vec2 resolution;\n  uniform float radius;\n  #include <packing>\n  void main() {\n      const float samples = float( VSM_SAMPLES );\n      float mean = 0.0;\n      float squared_mean = 0.0;\n      float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n      float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n      for ( float i = 0.0; i < samples; i ++ ) {\n          float uvOffset = uvStart + i * uvStride;\n          #ifdef HORIZONTAL_PASS\n              vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n              mean += distribution.x;\n              squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n          #else\n              float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n              mean += depth;\n              squared_mean += depth * depth;\n          #endif\n      }\n      mean = mean / samples;\n      squared_mean = squared_mean / samples;\n      float std_dev = sqrt( squared_mean - mean * mean );\n      gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n  }"
          }),
          p = d.clone();
        p.defines.HORIZONTAL_PASS = 1;
        var f = new Af();
        f.setAttribute(
          "position",
          new yf(new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]), 3)
        );
        var v = new Xf(f, d),
          m = this;
        function g(n, i) {
          var a = t.update(v);
          d.defines.VSM_SAMPLES !== n.blurSamples &&
            ((d.defines.VSM_SAMPLES = n.blurSamples),
            (p.defines.VSM_SAMPLES = n.blurSamples),
            (d.needsUpdate = !0),
            (p.needsUpdate = !0)),
            null === n.mapPass && (n.mapPass = new Gd(r.x, r.y)),
            (d.uniforms.shadow_pass.value = n.map.texture),
            (d.uniforms.resolution.value = n.mapSize),
            (d.uniforms.radius.value = n.radius),
            e.setRenderTarget(n.mapPass),
            e.clear(),
            e.renderBufferDirect(i, null, a, d, v, null),
            (p.uniforms.shadow_pass.value = n.mapPass.texture),
            (p.uniforms.resolution.value = n.mapSize),
            (p.uniforms.radius.value = n.radius),
            e.setRenderTarget(n.map),
            e.clear(),
            e.renderBufferDirect(i, null, a, p, v, null);
        }
        function _(t, n, i, r) {
          var a = null,
            o =
              !0 === i.isPointLight
                ? t.customDistanceMaterial
                : t.customDepthMaterial;
          if (void 0 !== o) a = o;
          else if (
            ((a = !0 === i.isPointLight ? l : s),
            (e.localClippingEnabled &&
              !0 === n.clipShadows &&
              Array.isArray(n.clippingPlanes) &&
              0 !== n.clippingPlanes.length) ||
              (n.displacementMap && 0 !== n.displacementScale) ||
              (n.alphaMap && n.alphaTest > 0) ||
              (n.map && n.alphaTest > 0))
          ) {
            var c = a.uuid,
              d = n.uuid,
              p = u[c];
            void 0 === p && ((p = {}), (u[c] = p));
            var f = p[d];
            void 0 === f && ((f = a.clone()), (p[d] = f)), (a = f);
          }
          return (
            (a.visible = n.visible),
            (a.wireframe = n.wireframe),
            (a.side =
              3 === r
                ? null !== n.shadowSide
                  ? n.shadowSide
                  : n.side
                : null !== n.shadowSide
                ? n.shadowSide
                : h[n.side]),
            (a.alphaMap = n.alphaMap),
            (a.alphaTest = n.alphaTest),
            (a.map = n.map),
            (a.clipShadows = n.clipShadows),
            (a.clippingPlanes = n.clippingPlanes),
            (a.clipIntersection = n.clipIntersection),
            (a.displacementMap = n.displacementMap),
            (a.displacementScale = n.displacementScale),
            (a.displacementBias = n.displacementBias),
            (a.wireframeLinewidth = n.wireframeLinewidth),
            (a.linewidth = n.linewidth),
            !0 === i.isPointLight &&
              !0 === a.isMeshDistanceMaterial &&
              (e.properties.get(a).light = i),
            a
          );
        }
        function y(n, r, a, o, s) {
          if (!1 !== n.visible) {
            if (
              n.layers.test(r.layers) &&
              (n.isMesh || n.isLine || n.isPoints) &&
              (n.castShadow || (n.receiveShadow && 3 === s)) &&
              (!n.frustumCulled || i.intersectsObject(n))
            ) {
              n.modelViewMatrix.multiplyMatrices(
                a.matrixWorldInverse,
                n.matrixWorld
              );
              var l = t.update(n),
                u = n.material;
              if (Array.isArray(u))
                for (var c = l.groups, h = 0, d = c.length; h < d; h++) {
                  var p = c[h],
                    f = u[p.materialIndex];
                  if (f && f.visible) {
                    var v = _(n, f, o, s);
                    e.renderBufferDirect(a, null, l, v, n, p);
                  }
                }
              else if (u.visible) {
                var m = _(n, u, o, s);
                e.renderBufferDirect(a, null, l, m, n, null);
              }
            }
            for (var g = n.children, b = 0, x = g.length; b < x; b++)
              y(g[b], r, a, o, s);
          }
        }
        (this.enabled = !1),
          (this.autoUpdate = !0),
          (this.needsUpdate = !1),
          (this.type = 1),
          (this.render = function (t, n, s) {
            if (
              !1 !== m.enabled &&
              (!1 !== m.autoUpdate || !1 !== m.needsUpdate) &&
              0 !== t.length
            ) {
              var l = e.getRenderTarget(),
                u = e.getActiveCubeFace(),
                h = e.getActiveMipmapLevel(),
                d = e.state;
              d.setBlending(0),
                d.buffers.color.setClear(1, 1, 1, 1),
                d.buffers.depth.setTest(!0),
                d.setScissorTest(!1);
              for (var p = 0, f = t.length; p < f; p++) {
                var v = t[p],
                  _ = v.shadow;
                if (void 0 !== _) {
                  if (!1 !== _.autoUpdate || !1 !== _.needsUpdate) {
                    r.copy(_.mapSize);
                    var b = _.getFrameExtents();
                    if (
                      (r.multiply(b),
                      a.copy(_.mapSize),
                      (r.x > c || r.y > c) &&
                        (r.x > c &&
                          ((a.x = Math.floor(c / b.x)),
                          (r.x = a.x * b.x),
                          (_.mapSize.x = a.x)),
                        r.y > c &&
                          ((a.y = Math.floor(c / b.y)),
                          (r.y = a.y * b.y),
                          (_.mapSize.y = a.y))),
                      null === _.map)
                    ) {
                      var x =
                        3 !== this.type ? { minFilter: Ph, magFilter: Ph } : {};
                      (_.map = new Gd(r.x, r.y, x)),
                        (_.map.texture.name = v.name + ".shadowMap"),
                        _.camera.updateProjectionMatrix();
                    }
                    e.setRenderTarget(_.map), e.clear();
                    for (var w = _.getViewportCount(), S = 0; S < w; S++) {
                      var M = _.getViewport(S);
                      o.set(a.x * M.x, a.y * M.y, a.x * M.z, a.y * M.w),
                        d.viewport(o),
                        _.updateMatrices(v, S),
                        (i = _.getFrustum()),
                        y(n, s, _.camera, v, this.type);
                    }
                    !0 !== _.isPointLightShadow && 3 === this.type && g(_, s),
                      (_.needsUpdate = !1);
                  }
                } else
                  console.warn("THREE.WebGLShadowMap:", v, "has no shadow.");
              }
              (m.needsUpdate = !1), e.setRenderTarget(l, u, h);
            }
          });
      }
      function Og(e, t, n) {
        var i,
          r = n.isWebGL2,
          a = new (function () {
            var t = !1,
              n = new Hd(),
              i = null,
              r = new Hd(0, 0, 0, 0);
            return {
              setMask: function (n) {
                i !== n && !t && (e.colorMask(n, n, n, n), (i = n));
              },
              setLocked: function (e) {
                t = e;
              },
              setClear: function (t, i, a, o, s) {
                !0 === s && ((t *= o), (i *= o), (a *= o)),
                  n.set(t, i, a, o),
                  !1 === r.equals(n) && (e.clearColor(t, i, a, o), r.copy(n));
              },
              reset: function () {
                (t = !1), (i = null), r.set(-1, 0, 0, 0);
              }
            };
          })(),
          o = new (function () {
            var t = !1,
              n = null,
              i = null,
              r = null;
            return {
              setTest: function (e) {
                e ? V(2929) : H(2929);
              },
              setMask: function (i) {
                n !== i && !t && (e.depthMask(i), (n = i));
              },
              setFunc: function (t) {
                if (i !== t) {
                  switch (t) {
                    case 0:
                      e.depthFunc(512);
                      break;
                    case 1:
                      e.depthFunc(519);
                      break;
                    case 2:
                      e.depthFunc(513);
                      break;
                    case 3:
                    default:
                      e.depthFunc(515);
                      break;
                    case 4:
                      e.depthFunc(514);
                      break;
                    case 5:
                      e.depthFunc(518);
                      break;
                    case 6:
                      e.depthFunc(516);
                      break;
                    case 7:
                      e.depthFunc(517);
                  }
                  i = t;
                }
              },
              setLocked: function (e) {
                t = e;
              },
              setClear: function (t) {
                r !== t && (e.clearDepth(t), (r = t));
              },
              reset: function () {
                (t = !1), (n = null), (i = null), (r = null);
              }
            };
          })(),
          s = new (function () {
            var t = !1,
              n = null,
              i = null,
              r = null,
              a = null,
              o = null,
              s = null,
              l = null,
              u = null;
            return {
              setTest: function (e) {
                t || (e ? V(2960) : H(2960));
              },
              setMask: function (i) {
                n !== i && !t && (e.stencilMask(i), (n = i));
              },
              setFunc: function (t, n, o) {
                (i !== t || r !== n || a !== o) &&
                  (e.stencilFunc(t, n, o), (i = t), (r = n), (a = o));
              },
              setOp: function (t, n, i) {
                (o !== t || s !== n || l !== i) &&
                  (e.stencilOp(t, n, i), (o = t), (s = n), (l = i));
              },
              setLocked: function (e) {
                t = e;
              },
              setClear: function (t) {
                u !== t && (e.clearStencil(t), (u = t));
              },
              reset: function () {
                (t = !1),
                  (n = null),
                  (i = null),
                  (r = null),
                  (a = null),
                  (o = null),
                  (s = null),
                  (l = null),
                  (u = null);
              }
            };
          })(),
          l = new WeakMap(),
          u = new WeakMap(),
          c = {},
          h = {},
          d = new WeakMap(),
          p = [],
          f = null,
          v = !1,
          m = null,
          g = null,
          _ = null,
          y = null,
          b = null,
          x = null,
          w = null,
          S = !1,
          M = null,
          T = null,
          k = null,
          E = null,
          C = null,
          D = e.getParameter(35661),
          A = !1,
          P = 0,
          L = e.getParameter(7938);
        -1 !== L.indexOf("WebGL")
          ? ((P = parseFloat(/^WebGL (\d)/.exec(L)[1])), (A = P >= 1))
          : -1 !== L.indexOf("OpenGL ES") &&
            ((P = parseFloat(/^OpenGL ES (\d)/.exec(L)[1])), (A = P >= 2));
        var R = null,
          I = {},
          O = e.getParameter(3088),
          N = e.getParameter(2978),
          F = new Hd().fromArray(O),
          U = new Hd().fromArray(N);
        function B(t, n, i) {
          var r = new Uint8Array(4),
            a = e.createTexture();
          e.bindTexture(t, a),
            e.texParameteri(t, 10241, 9728),
            e.texParameteri(t, 10240, 9728);
          for (var o = 0; o < i; o++)
            e.texImage2D(n + o, 0, 6408, 1, 1, 0, 6408, 5121, r);
          return a;
        }
        var z = {};
        function V(t) {
          !0 !== c[t] && (e.enable(t), (c[t] = !0));
        }
        function H(t) {
          !1 !== c[t] && (e.disable(t), (c[t] = !1));
        }
        (z[3553] = B(3553, 3553, 1)),
          (z[34067] = B(34067, 34069, 6)),
          a.setClear(0, 0, 0, 1),
          o.setClear(1),
          s.setClear(0),
          V(2929),
          o.setFunc(3),
          K(!1),
          X(1),
          V(2884),
          q(0);
        var G = vh(vh(vh({}, Mh, 32774), 101, 32778), 102, 32779);
        if (r) (G[103] = 32775), (G[104] = 32776);
        else {
          var W = t.get("EXT_blend_minmax");
          null !== W && ((G[103] = W.MIN_EXT), (G[104] = W.MAX_EXT));
        }
        var j =
          (vh(
            vh(
              vh(
                vh(
                  vh(
                    vh(
                      vh(
                        vh(vh(vh((i = {}), 200, 0), 201, 1), 202, 768),
                        204,
                        770
                      ),
                      210,
                      776
                    ),
                    208,
                    774
                  ),
                  206,
                  772
                ),
                203,
                769
              ),
              205,
              771
            ),
            209,
            775
          ),
          vh(i, 207, 773));
        function q(t, n, i, r, a, o, s, l) {
          if (0 !== t) {
            if ((!1 === v && (V(3042), (v = !0)), 5 === t))
              (a = a || n),
                (o = o || i),
                (s = s || r),
                (n !== g || a !== b) &&
                  (e.blendEquationSeparate(G[n], G[a]), (g = n), (b = a)),
                (i !== _ || r !== y || o !== x || s !== w) &&
                  (e.blendFuncSeparate(j[i], j[r], j[o], j[s]),
                  (_ = i),
                  (y = r),
                  (x = o),
                  (w = s)),
                (m = t),
                (S = !1);
            else if (t !== m || l !== S) {
              if (
                ((g !== Mh || b !== Mh) &&
                  (e.blendEquation(32774), (g = Mh), (b = Mh)),
                l)
              )
                switch (t) {
                  case 1:
                    e.blendFuncSeparate(1, 771, 1, 771);
                    break;
                  case 2:
                    e.blendFunc(1, 1);
                    break;
                  case 3:
                    e.blendFuncSeparate(0, 769, 0, 1);
                    break;
                  case 4:
                    e.blendFuncSeparate(0, 768, 0, 770);
                    break;
                  default:
                    console.error("THREE.WebGLState: Invalid blending: ", t);
                }
              else
                switch (t) {
                  case 1:
                    e.blendFuncSeparate(770, 771, 1, 771);
                    break;
                  case 2:
                    e.blendFunc(770, 1);
                    break;
                  case 3:
                    e.blendFuncSeparate(0, 769, 0, 1);
                    break;
                  case 4:
                    e.blendFunc(0, 768);
                    break;
                  default:
                    console.error("THREE.WebGLState: Invalid blending: ", t);
                }
              (_ = null), (y = null), (x = null), (w = null), (m = t), (S = l);
            }
          } else !0 === v && (H(3042), (v = !1));
        }
        function K(t) {
          M !== t && (t ? e.frontFace(2304) : e.frontFace(2305), (M = t));
        }
        function X(t) {
          0 !== t
            ? (V(2884),
              t !== T &&
                (1 === t
                  ? e.cullFace(1029)
                  : 2 === t
                  ? e.cullFace(1028)
                  : e.cullFace(1032)))
            : H(2884),
            (T = t);
        }
        function Y(t, n, i) {
          t
            ? (V(32823),
              (E !== n || C !== i) && (e.polygonOffset(n, i), (E = n), (C = i)))
            : H(32823);
        }
        return {
          buffers: { color: a, depth: o, stencil: s },
          enable: V,
          disable: H,
          bindFramebuffer: function (t, n) {
            return (
              h[t] !== n &&
              (e.bindFramebuffer(t, n),
              (h[t] = n),
              r &&
                (36009 === t && (h[36160] = n), 36160 === t && (h[36009] = n)),
              !0)
            );
          },
          drawBuffers: function (i, r) {
            var a = p,
              o = !1;
            if (i) {
              if (
                (void 0 === (a = d.get(r)) && ((a = []), d.set(r, a)),
                i.isWebGLMultipleRenderTargets)
              ) {
                var s = i.texture;
                if (a.length !== s.length || 36064 !== a[0]) {
                  for (var l = 0, u = s.length; l < u; l++) a[l] = 36064 + l;
                  (a.length = s.length), (o = !0);
                }
              } else 36064 !== a[0] && ((a[0] = 36064), (o = !0));
            } else 1029 !== a[0] && ((a[0] = 1029), (o = !0));
            o &&
              (n.isWebGL2
                ? e.drawBuffers(a)
                : t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a));
          },
          useProgram: function (t) {
            return f !== t && (e.useProgram(t), (f = t), !0);
          },
          setBlending: q,
          setMaterial: function (e, t) {
            2 === e.side ? H(2884) : V(2884);
            var n = 1 === e.side;
            t && (n = !n),
              K(n),
              1 === e.blending && !1 === e.transparent
                ? q(0)
                : q(
                    e.blending,
                    e.blendEquation,
                    e.blendSrc,
                    e.blendDst,
                    e.blendEquationAlpha,
                    e.blendSrcAlpha,
                    e.blendDstAlpha,
                    e.premultipliedAlpha
                  ),
              o.setFunc(e.depthFunc),
              o.setTest(e.depthTest),
              o.setMask(e.depthWrite),
              a.setMask(e.colorWrite);
            var i = e.stencilWrite;
            s.setTest(i),
              i &&
                (s.setMask(e.stencilWriteMask),
                s.setFunc(e.stencilFunc, e.stencilRef, e.stencilFuncMask),
                s.setOp(e.stencilFail, e.stencilZFail, e.stencilZPass)),
              Y(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits),
              !0 === e.alphaToCoverage ? V(32926) : H(32926);
          },
          setFlipSided: K,
          setCullFace: X,
          setLineWidth: function (t) {
            t !== k && (A && e.lineWidth(t), (k = t));
          },
          setPolygonOffset: Y,
          setScissorTest: function (e) {
            e ? V(3089) : H(3089);
          },
          activeTexture: function (t) {
            void 0 === t && (t = 33984 + D - 1),
              R !== t && (e.activeTexture(t), (R = t));
          },
          bindTexture: function (t, n, i) {
            void 0 === i && (i = null === R ? 33984 + D - 1 : R);
            var r = I[i];
            void 0 === r &&
              ((r = { type: void 0, texture: void 0 }), (I[i] = r)),
              (r.type !== t || r.texture !== n) &&
                (R !== i && (e.activeTexture(i), (R = i)),
                e.bindTexture(t, n || z[t]),
                (r.type = t),
                (r.texture = n));
          },
          unbindTexture: function () {
            var t = I[R];
            void 0 !== t &&
              void 0 !== t.type &&
              (e.bindTexture(t.type, null),
              (t.type = void 0),
              (t.texture = void 0));
          },
          compressedTexImage2D: function () {
            try {
              e.compressedTexImage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          compressedTexImage3D: function () {
            try {
              e.compressedTexImage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texImage2D: function () {
            try {
              e.texImage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texImage3D: function () {
            try {
              e.texImage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          updateUBOMapping: function (t, n) {
            var i = u.get(n);
            void 0 === i && ((i = new WeakMap()), u.set(n, i));
            var r = i.get(t);
            void 0 === r &&
              ((r = e.getUniformBlockIndex(n, t.name)), i.set(t, r));
          },
          uniformBlockBinding: function (t, n) {
            var i = u.get(n).get(t);
            l.get(n) !== i &&
              (e.uniformBlockBinding(n, i, t.__bindingPointIndex), l.set(n, i));
          },
          texStorage2D: function () {
            try {
              e.texStorage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texStorage3D: function () {
            try {
              e.texStorage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texSubImage2D: function () {
            try {
              e.texSubImage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texSubImage3D: function () {
            try {
              e.texSubImage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          compressedTexSubImage2D: function () {
            try {
              e.compressedTexSubImage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          compressedTexSubImage3D: function () {
            try {
              e.compressedTexSubImage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          scissor: function (t) {
            !1 === F.equals(t) && (e.scissor(t.x, t.y, t.z, t.w), F.copy(t));
          },
          viewport: function (t) {
            !1 === U.equals(t) && (e.viewport(t.x, t.y, t.z, t.w), U.copy(t));
          },
          reset: function () {
            e.disable(3042),
              e.disable(2884),
              e.disable(2929),
              e.disable(32823),
              e.disable(3089),
              e.disable(2960),
              e.disable(32926),
              e.blendEquation(32774),
              e.blendFunc(1, 0),
              e.blendFuncSeparate(1, 0, 1, 0),
              e.colorMask(!0, !0, !0, !0),
              e.clearColor(0, 0, 0, 0),
              e.depthMask(!0),
              e.depthFunc(513),
              e.clearDepth(1),
              e.stencilMask(4294967295),
              e.stencilFunc(519, 0, 4294967295),
              e.stencilOp(7680, 7680, 7680),
              e.clearStencil(0),
              e.cullFace(1029),
              e.frontFace(2305),
              e.polygonOffset(0, 0),
              e.activeTexture(33984),
              e.bindFramebuffer(36160, null),
              !0 === r &&
                (e.bindFramebuffer(36009, null),
                e.bindFramebuffer(36008, null)),
              e.useProgram(null),
              e.lineWidth(1),
              e.scissor(0, 0, e.canvas.width, e.canvas.height),
              e.viewport(0, 0, e.canvas.width, e.canvas.height),
              (c = {}),
              (R = null),
              (I = {}),
              (h = {}),
              (d = new WeakMap()),
              (p = []),
              (f = null),
              (v = !1),
              (m = null),
              (g = null),
              (_ = null),
              (y = null),
              (b = null),
              (x = null),
              (w = null),
              (S = !1),
              (M = null),
              (T = null),
              (k = null),
              (E = null),
              (C = null),
              F.set(0, 0, e.canvas.width, e.canvas.height),
              U.set(0, 0, e.canvas.width, e.canvas.height),
              a.reset(),
              o.reset(),
              s.reset();
          }
        };
      }
      function Ng(e, t, n, i, r, a, o) {
        var s,
          l = r.isWebGL2,
          u = r.maxTextures,
          c = r.maxCubemapSize,
          h = r.maxTextureSize,
          d = r.maxSamples,
          p = t.has("WEBGL_multisampled_render_to_texture")
            ? t.get("WEBGL_multisampled_render_to_texture")
            : null,
          f =
            !(
              ("undefined" == typeof navigator ? "undefined" : xh(navigator)) >
              "u"
            ) && /OculusBrowser/g.test(navigator.userAgent),
          v = new WeakMap(),
          m = new WeakMap(),
          g = !1;
        try {
          g =
            ("undefined" == typeof OffscreenCanvas
              ? "undefined"
              : xh(OffscreenCanvas)) < "u" &&
            null !== new OffscreenCanvas(1, 1).getContext("2d");
        } catch (e) {}
        function _(e, t) {
          return g ? new OffscreenCanvas(e, t) : Cd("canvas");
        }
        function y(e, t, n, i) {
          var r = 1;
          if (
            ((e.width > i || e.height > i) &&
              (r = i / Math.max(e.width, e.height)),
            r < 1 || !0 === t)
          ) {
            if (
              (("undefined" == typeof HTMLImageElement
                ? "undefined"
                : xh(HTMLImageElement)) < "u" &&
                e instanceof HTMLImageElement) ||
              (("undefined" == typeof HTMLCanvasElement
                ? "undefined"
                : xh(HTMLCanvasElement)) < "u" &&
                e instanceof HTMLCanvasElement) ||
              (("undefined" == typeof ImageBitmap
                ? "undefined"
                : xh(ImageBitmap)) < "u" &&
                e instanceof ImageBitmap)
            ) {
              var a = t ? bd : Math.floor,
                o = a(r * e.width),
                l = a(r * e.height);
              void 0 === s && (s = _(o, l));
              var u = n ? _(o, l) : s;
              return (
                (u.width = o),
                (u.height = l),
                u.getContext("2d").drawImage(e, 0, 0, o, l),
                console.warn(
                  "THREE.WebGLRenderer: Texture has been resized from (" +
                    e.width +
                    "x" +
                    e.height +
                    ") to (" +
                    o +
                    "x" +
                    l +
                    ")."
                ),
                u
              );
            }
            return (
              "data" in e &&
                console.warn(
                  "THREE.WebGLRenderer: Image in DataTexture is too big (" +
                    e.width +
                    "x" +
                    e.height +
                    ")."
                ),
              e
            );
          }
          return e;
        }
        function b(e) {
          return _d(e.width) && _d(e.height);
        }
        function x(e, t) {
          return (
            e.generateMipmaps && t && e.minFilter !== Ph && e.minFilter !== Ih
          );
        }
        function w(t) {
          e.generateMipmap(t);
        }
        function S(n, i, r, a) {
          var o =
            arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
          if (!1 === l) return i;
          if (null !== n) {
            if (void 0 !== e[n]) return e[n];
            console.warn(
              "THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" +
                n +
                "'"
            );
          }
          var s = i;
          return (
            6403 === i &&
              (5126 === r && (s = 33326),
              5131 === r && (s = 33325),
              5121 === r && (s = 33321)),
            33319 === i &&
              (5126 === r && (s = 33328),
              5131 === r && (s = 33327),
              5121 === r && (s = 33323)),
            6408 === i &&
              (5126 === r && (s = 34836),
              5131 === r && (s = 34842),
              5121 === r && (s = a === nd && !1 === o ? 35907 : 32856),
              32819 === r && (s = 32854),
              32820 === r && (s = 32855)),
            (33325 === s ||
              33326 === s ||
              33327 === s ||
              33328 === s ||
              34842 === s ||
              34836 === s) &&
              t.get("EXT_color_buffer_float"),
            s
          );
        }
        function M(e, t, n) {
          return !0 === x(e, n) ||
            (e.isFramebufferTexture && e.minFilter !== Ph && e.minFilter !== Ih)
            ? Math.log2(Math.max(t.width, t.height)) + 1
            : void 0 !== e.mipmaps && e.mipmaps.length > 0
            ? e.mipmaps.length
            : e.isCompressedTexture && Array.isArray(e.image)
            ? t.mipmaps.length
            : 1;
        }
        function T(e) {
          return e === Ph || e === Lh || e === Rh ? 9728 : 9729;
        }
        function k(e) {
          var t = e.target;
          t.removeEventListener("dispose", k),
            (function (e) {
              var t = i.get(e);
              if (void 0 !== t.__webglInit) {
                var n = e.source,
                  r = m.get(n);
                if (r) {
                  var a = r[t.__cacheKey];
                  a.usedTimes--,
                    0 === a.usedTimes && C(e),
                    0 === Object.keys(r).length && m.delete(n);
                }
                i.remove(e);
              }
            })(t),
            t.isVideoTexture && v.delete(t);
        }
        function E(t) {
          var n = t.target;
          n.removeEventListener("dispose", E),
            (function (t) {
              var n = t.texture,
                r = i.get(t),
                a = i.get(n);
              if (
                (void 0 !== a.__webglTexture &&
                  (e.deleteTexture(a.__webglTexture), o.memory.textures--),
                t.depthTexture && t.depthTexture.dispose(),
                t.isWebGLCubeRenderTarget)
              )
                for (var s = 0; s < 6; s++)
                  e.deleteFramebuffer(r.__webglFramebuffer[s]),
                    r.__webglDepthbuffer &&
                      e.deleteRenderbuffer(r.__webglDepthbuffer[s]);
              else {
                if (
                  (e.deleteFramebuffer(r.__webglFramebuffer),
                  r.__webglDepthbuffer &&
                    e.deleteRenderbuffer(r.__webglDepthbuffer),
                  r.__webglMultisampledFramebuffer &&
                    e.deleteFramebuffer(r.__webglMultisampledFramebuffer),
                  r.__webglColorRenderbuffer)
                )
                  for (var l = 0; l < r.__webglColorRenderbuffer.length; l++)
                    r.__webglColorRenderbuffer[l] &&
                      e.deleteRenderbuffer(r.__webglColorRenderbuffer[l]);
                r.__webglDepthRenderbuffer &&
                  e.deleteRenderbuffer(r.__webglDepthRenderbuffer);
              }
              if (t.isWebGLMultipleRenderTargets)
                for (var u = 0, c = n.length; u < c; u++) {
                  var h = i.get(n[u]);
                  h.__webglTexture &&
                    (e.deleteTexture(h.__webglTexture), o.memory.textures--),
                    i.remove(n[u]);
                }
              i.remove(n), i.remove(t);
            })(n);
        }
        function C(t) {
          var n = i.get(t);
          e.deleteTexture(n.__webglTexture);
          var r = t.source;
          delete m.get(r)[n.__cacheKey], o.memory.textures--;
        }
        var D = 0;
        function A(e, t) {
          var r = i.get(e);
          if (
            (e.isVideoTexture &&
              (function (e) {
                var t = o.render.frame;
                v.get(e) !== t && (v.set(e, t), e.update());
              })(e),
            !1 === e.isRenderTargetTexture &&
              e.version > 0 &&
              r.__version !== e.version)
          ) {
            var a = e.image;
            if (null === a)
              console.warn(
                "THREE.WebGLRenderer: Texture marked for update but no image data found."
              );
            else {
              if (!1 !== a.complete) return void O(r, e, t);
              console.warn(
                "THREE.WebGLRenderer: Texture marked for update but image is incomplete"
              );
            }
          }
          n.bindTexture(3553, r.__webglTexture, 33984 + t);
        }
        var P = vh(vh(vh({}, Ch, 10497), Dh, 33071), Ah, 33648),
          L = vh(
            vh(
              vh(vh(vh(vh({}, Ph, 9728), Lh, 9984), Rh, 9986), Ih, 9729),
              1007,
              9985
            ),
            Oh,
            9987
          );
        function R(n, a, o) {
          if (
            (o
              ? (e.texParameteri(n, 10242, P[a.wrapS]),
                e.texParameteri(n, 10243, P[a.wrapT]),
                (32879 === n || 35866 === n) &&
                  e.texParameteri(n, 32882, P[a.wrapR]),
                e.texParameteri(n, 10240, L[a.magFilter]),
                e.texParameteri(n, 10241, L[a.minFilter]))
              : (e.texParameteri(n, 10242, 33071),
                e.texParameteri(n, 10243, 33071),
                (32879 === n || 35866 === n) &&
                  e.texParameteri(n, 32882, 33071),
                (a.wrapS !== Dh || a.wrapT !== Dh) &&
                  console.warn(
                    "THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."
                  ),
                e.texParameteri(n, 10240, T(a.magFilter)),
                e.texParameteri(n, 10241, T(a.minFilter)),
                a.minFilter !== Ph &&
                  a.minFilter !== Ih &&
                  console.warn(
                    "THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."
                  )),
            !0 === t.has("EXT_texture_filter_anisotropic"))
          ) {
            var s = t.get("EXT_texture_filter_anisotropic");
            if (
              a.magFilter === Ph ||
              (a.minFilter !== Rh && a.minFilter !== Oh) ||
              (a.type === Uh && !1 === t.has("OES_texture_float_linear")) ||
              (!1 === l &&
                a.type === Bh &&
                !1 === t.has("OES_texture_half_float_linear"))
            )
              return;
            (a.anisotropy > 1 || i.get(a).__currentAnisotropy) &&
              (e.texParameterf(
                n,
                s.TEXTURE_MAX_ANISOTROPY_EXT,
                Math.min(a.anisotropy, r.getMaxAnisotropy())
              ),
              (i.get(a).__currentAnisotropy = a.anisotropy));
          }
        }
        function I(t, n) {
          var i = !1;
          void 0 === t.__webglInit &&
            ((t.__webglInit = !0), n.addEventListener("dispose", k));
          var r = n.source,
            a = m.get(r);
          void 0 === a && ((a = {}), m.set(r, a));
          var s = (function (e) {
            var t = [];
            return (
              t.push(e.wrapS),
              t.push(e.wrapT),
              t.push(e.wrapR || 0),
              t.push(e.magFilter),
              t.push(e.minFilter),
              t.push(e.anisotropy),
              t.push(e.internalFormat),
              t.push(e.format),
              t.push(e.type),
              t.push(e.generateMipmaps),
              t.push(e.premultiplyAlpha),
              t.push(e.flipY),
              t.push(e.unpackAlignment),
              t.push(e.encoding),
              t.join()
            );
          })(n);
          if (s !== t.__cacheKey) {
            void 0 === a[s] &&
              ((a[s] = { texture: e.createTexture(), usedTimes: 0 }),
              o.memory.textures++,
              (i = !0)),
              a[s].usedTimes++;
            var l = a[t.__cacheKey];
            void 0 !== l &&
              (a[t.__cacheKey].usedTimes--, 0 === l.usedTimes && C(n)),
              (t.__cacheKey = s),
              (t.__webglTexture = a[s].texture);
          }
          return i;
        }
        function O(t, r, o) {
          var s = 3553;
          (r.isDataArrayTexture || r.isCompressedArrayTexture) && (s = 35866),
            r.isData3DTexture && (s = 32879);
          var u = I(t, r),
            c = r.source;
          n.bindTexture(s, t.__webglTexture, 33984 + o);
          var d = i.get(c);
          if (c.version !== d.__version || !0 === u) {
            n.activeTexture(33984 + o),
              e.pixelStorei(37440, r.flipY),
              e.pixelStorei(37441, r.premultiplyAlpha),
              e.pixelStorei(3317, r.unpackAlignment),
              e.pixelStorei(37443, 0);
            var p,
              f =
                (function (e) {
                  return (
                    !l &&
                    (e.wrapS !== Dh ||
                      e.wrapT !== Dh ||
                      (e.minFilter !== Ph && e.minFilter !== Ih))
                  );
                })(r) && !1 === b(r.image),
              v = y(r.image, f, !1, h),
              m = b((v = V(r, v))) || l,
              g = a.convert(r.format, r.encoding),
              _ = a.convert(r.type),
              T = S(r.internalFormat, g, _, r.encoding, r.isVideoTexture);
            R(s, r, m);
            var k = r.mipmaps,
              E = l && !0 !== r.isVideoTexture,
              C = void 0 === d.__version || !0 === u,
              D = M(r, v, m);
            if (r.isDepthTexture)
              (T = 6402),
                l
                  ? (T =
                      r.type === Uh
                        ? 36012
                        : r.type === Fh
                        ? 33190
                        : r.type === zh
                        ? 35056
                        : 33189)
                  : r.type === Uh &&
                    console.error(
                      "WebGLRenderer: Floating point depth texture requires WebGL2."
                    ),
                r.format === Hh &&
                  6402 === T &&
                  1012 !== r.type &&
                  r.type !== Fh &&
                  (console.warn(
                    "THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."
                  ),
                  (r.type = Fh),
                  (_ = a.convert(r.type))),
                r.format === Gh &&
                  6402 === T &&
                  ((T = 34041),
                  r.type !== zh &&
                    (console.warn(
                      "THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."
                    ),
                    (r.type = zh),
                    (_ = a.convert(r.type)))),
                C &&
                  (E
                    ? n.texStorage2D(3553, 1, T, v.width, v.height)
                    : n.texImage2D(
                        3553,
                        0,
                        T,
                        v.width,
                        v.height,
                        0,
                        g,
                        _,
                        null
                      ));
            else if (r.isDataTexture) {
              if (k.length > 0 && m) {
                E && C && n.texStorage2D(3553, D, T, k[0].width, k[0].height);
                for (var A = 0, P = k.length; A < P; A++)
                  (p = k[A]),
                    E
                      ? n.texSubImage2D(
                          3553,
                          A,
                          0,
                          0,
                          p.width,
                          p.height,
                          g,
                          _,
                          p.data
                        )
                      : n.texImage2D(
                          3553,
                          A,
                          T,
                          p.width,
                          p.height,
                          0,
                          g,
                          _,
                          p.data
                        );
                r.generateMipmaps = !1;
              } else
                E
                  ? (C && n.texStorage2D(3553, D, T, v.width, v.height),
                    n.texSubImage2D(
                      3553,
                      0,
                      0,
                      0,
                      v.width,
                      v.height,
                      g,
                      _,
                      v.data
                    ))
                  : n.texImage2D(
                      3553,
                      0,
                      T,
                      v.width,
                      v.height,
                      0,
                      g,
                      _,
                      v.data
                    );
            } else if (r.isCompressedTexture) {
              if (r.isCompressedArrayTexture) {
                E &&
                  C &&
                  n.texStorage3D(35866, D, T, k[0].width, k[0].height, v.depth);
                for (var L = 0, O = k.length; L < O; L++)
                  (p = k[L]),
                    r.format !== Vh
                      ? null !== g
                        ? E
                          ? n.compressedTexSubImage3D(
                              35866,
                              L,
                              0,
                              0,
                              0,
                              p.width,
                              p.height,
                              v.depth,
                              g,
                              p.data,
                              0,
                              0
                            )
                          : n.compressedTexImage3D(
                              35866,
                              L,
                              T,
                              p.width,
                              p.height,
                              v.depth,
                              0,
                              p.data,
                              0,
                              0
                            )
                        : console.warn(
                            "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"
                          )
                      : E
                      ? n.texSubImage3D(
                          35866,
                          L,
                          0,
                          0,
                          0,
                          p.width,
                          p.height,
                          v.depth,
                          g,
                          _,
                          p.data
                        )
                      : n.texImage3D(
                          35866,
                          L,
                          T,
                          p.width,
                          p.height,
                          v.depth,
                          0,
                          g,
                          _,
                          p.data
                        );
              } else {
                E && C && n.texStorage2D(3553, D, T, k[0].width, k[0].height);
                for (var N = 0, F = k.length; N < F; N++)
                  (p = k[N]),
                    r.format !== Vh
                      ? null !== g
                        ? E
                          ? n.compressedTexSubImage2D(
                              3553,
                              N,
                              0,
                              0,
                              p.width,
                              p.height,
                              g,
                              p.data
                            )
                          : n.compressedTexImage2D(
                              3553,
                              N,
                              T,
                              p.width,
                              p.height,
                              0,
                              p.data
                            )
                        : console.warn(
                            "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"
                          )
                      : E
                      ? n.texSubImage2D(
                          3553,
                          N,
                          0,
                          0,
                          p.width,
                          p.height,
                          g,
                          _,
                          p.data
                        )
                      : n.texImage2D(
                          3553,
                          N,
                          T,
                          p.width,
                          p.height,
                          0,
                          g,
                          _,
                          p.data
                        );
              }
            } else if (r.isDataArrayTexture)
              E
                ? (C && n.texStorage3D(35866, D, T, v.width, v.height, v.depth),
                  n.texSubImage3D(
                    35866,
                    0,
                    0,
                    0,
                    0,
                    v.width,
                    v.height,
                    v.depth,
                    g,
                    _,
                    v.data
                  ))
                : n.texImage3D(
                    35866,
                    0,
                    T,
                    v.width,
                    v.height,
                    v.depth,
                    0,
                    g,
                    _,
                    v.data
                  );
            else if (r.isData3DTexture)
              E
                ? (C && n.texStorage3D(32879, D, T, v.width, v.height, v.depth),
                  n.texSubImage3D(
                    32879,
                    0,
                    0,
                    0,
                    0,
                    v.width,
                    v.height,
                    v.depth,
                    g,
                    _,
                    v.data
                  ))
                : n.texImage3D(
                    32879,
                    0,
                    T,
                    v.width,
                    v.height,
                    v.depth,
                    0,
                    g,
                    _,
                    v.data
                  );
            else if (r.isFramebufferTexture) {
              if (C)
                if (E) n.texStorage2D(3553, D, T, v.width, v.height);
                else
                  for (var U = v.width, B = v.height, z = 0; z < D; z++)
                    n.texImage2D(3553, z, T, U, B, 0, g, _, null),
                      (U >>= 1),
                      (B >>= 1);
            } else if (k.length > 0 && m) {
              E && C && n.texStorage2D(3553, D, T, k[0].width, k[0].height);
              for (var H = 0, G = k.length; H < G; H++)
                (p = k[H]),
                  E
                    ? n.texSubImage2D(3553, H, 0, 0, g, _, p)
                    : n.texImage2D(3553, H, T, g, _, p);
              r.generateMipmaps = !1;
            } else
              E
                ? (C && n.texStorage2D(3553, D, T, v.width, v.height),
                  n.texSubImage2D(3553, 0, 0, 0, g, _, v))
                : n.texImage2D(3553, 0, T, g, _, v);
            x(r, m) && w(s),
              (d.__version = c.version),
              r.onUpdate && r.onUpdate(r);
          }
          t.__version = r.version;
        }
        function N(t, r, o, s, l) {
          var u = a.convert(o.format, o.encoding),
            c = a.convert(o.type),
            h = S(o.internalFormat, u, c, o.encoding);
          i.get(r).__hasExternalTextures ||
            (32879 === l || 35866 === l
              ? n.texImage3D(l, 0, h, r.width, r.height, r.depth, 0, u, c, null)
              : n.texImage2D(l, 0, h, r.width, r.height, 0, u, c, null)),
            n.bindFramebuffer(36160, t),
            z(r)
              ? p.framebufferTexture2DMultisampleEXT(
                  36160,
                  s,
                  l,
                  i.get(o).__webglTexture,
                  0,
                  B(r)
                )
              : (3553 === l || (l >= 34069 && l <= 34074)) &&
                e.framebufferTexture2D(36160, s, l, i.get(o).__webglTexture, 0),
            n.bindFramebuffer(36160, null);
        }
        function F(t, n, i) {
          if (
            (e.bindRenderbuffer(36161, t), n.depthBuffer && !n.stencilBuffer)
          ) {
            var r = 33189;
            if (i || z(n)) {
              var o = n.depthTexture;
              o &&
                o.isDepthTexture &&
                (o.type === Uh ? (r = 36012) : o.type === Fh && (r = 33190));
              var s = B(n);
              z(n)
                ? p.renderbufferStorageMultisampleEXT(
                    36161,
                    s,
                    r,
                    n.width,
                    n.height
                  )
                : e.renderbufferStorageMultisample(
                    36161,
                    s,
                    r,
                    n.width,
                    n.height
                  );
            } else e.renderbufferStorage(36161, r, n.width, n.height);
            e.framebufferRenderbuffer(36160, 36096, 36161, t);
          } else if (n.depthBuffer && n.stencilBuffer) {
            var l = B(n);
            i && !1 === z(n)
              ? e.renderbufferStorageMultisample(
                  36161,
                  l,
                  35056,
                  n.width,
                  n.height
                )
              : z(n)
              ? p.renderbufferStorageMultisampleEXT(
                  36161,
                  l,
                  35056,
                  n.width,
                  n.height
                )
              : e.renderbufferStorage(36161, 34041, n.width, n.height),
              e.framebufferRenderbuffer(36160, 33306, 36161, t);
          } else
            for (
              var u =
                  !0 === n.isWebGLMultipleRenderTargets
                    ? n.texture
                    : [n.texture],
                c = 0;
              c < u.length;
              c++
            ) {
              var h = u[c],
                d = a.convert(h.format, h.encoding),
                f = a.convert(h.type),
                v = S(h.internalFormat, d, f, h.encoding),
                m = B(n);
              i && !1 === z(n)
                ? e.renderbufferStorageMultisample(
                    36161,
                    m,
                    v,
                    n.width,
                    n.height
                  )
                : z(n)
                ? p.renderbufferStorageMultisampleEXT(
                    36161,
                    m,
                    v,
                    n.width,
                    n.height
                  )
                : e.renderbufferStorage(36161, v, n.width, n.height);
            }
          e.bindRenderbuffer(36161, null);
        }
        function U(t) {
          var r = i.get(t),
            a = !0 === t.isWebGLCubeRenderTarget;
          if (t.depthTexture && !r.__autoAllocateDepthBuffer) {
            if (a)
              throw new Error(
                "target.depthTexture not supported in Cube render targets"
              );
            !(function (t, r) {
              if (r && r.isWebGLCubeRenderTarget)
                throw new Error(
                  "Depth Texture with cube render targets is not supported"
                );
              if (
                (n.bindFramebuffer(36160, t),
                !r.depthTexture || !r.depthTexture.isDepthTexture)
              )
                throw new Error(
                  "renderTarget.depthTexture must be an instance of THREE.DepthTexture"
                );
              (!i.get(r.depthTexture).__webglTexture ||
                r.depthTexture.image.width !== r.width ||
                r.depthTexture.image.height !== r.height) &&
                ((r.depthTexture.image.width = r.width),
                (r.depthTexture.image.height = r.height),
                (r.depthTexture.needsUpdate = !0)),
                A(r.depthTexture, 0);
              var a = i.get(r.depthTexture).__webglTexture,
                o = B(r);
              if (r.depthTexture.format === Hh)
                z(r)
                  ? p.framebufferTexture2DMultisampleEXT(
                      36160,
                      36096,
                      3553,
                      a,
                      0,
                      o
                    )
                  : e.framebufferTexture2D(36160, 36096, 3553, a, 0);
              else {
                if (r.depthTexture.format !== Gh)
                  throw new Error("Unknown depthTexture format");
                z(r)
                  ? p.framebufferTexture2DMultisampleEXT(
                      36160,
                      33306,
                      3553,
                      a,
                      0,
                      o
                    )
                  : e.framebufferTexture2D(36160, 33306, 3553, a, 0);
              }
            })(r.__webglFramebuffer, t);
          } else if (a) {
            r.__webglDepthbuffer = [];
            for (var o = 0; o < 6; o++)
              n.bindFramebuffer(36160, r.__webglFramebuffer[o]),
                (r.__webglDepthbuffer[o] = e.createRenderbuffer()),
                F(r.__webglDepthbuffer[o], t, !1);
          } else
            n.bindFramebuffer(36160, r.__webglFramebuffer),
              (r.__webglDepthbuffer = e.createRenderbuffer()),
              F(r.__webglDepthbuffer, t, !1);
          n.bindFramebuffer(36160, null);
        }
        function B(e) {
          return Math.min(d, e.samples);
        }
        function z(e) {
          var n = i.get(e);
          return (
            l &&
            e.samples > 0 &&
            !0 === t.has("WEBGL_multisampled_render_to_texture") &&
            !1 !== n.__useRenderToTexture
          );
        }
        function V(e, n) {
          var i = e.encoding,
            r = e.format,
            a = e.type;
          return (
            !0 === e.isCompressedTexture ||
              !0 === e.isVideoTexture ||
              e.format === ud ||
              (i !== td &&
                (i === nd
                  ? !1 === l
                    ? !0 === t.has("EXT_sRGB") && r === Vh
                      ? ((e.format = ud),
                        (e.minFilter = Ih),
                        (e.generateMipmaps = !1))
                      : (n = Fd.sRGBToLinear(n))
                    : (r !== Vh || a !== Nh) &&
                      console.warn(
                        "THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."
                      )
                  : console.error(
                      "THREE.WebGLTextures: Unsupported texture encoding:",
                      i
                    ))),
            n
          );
        }
        (this.allocateTextureUnit = function () {
          var e = D;
          return (
            e >= u &&
              console.warn(
                "THREE.WebGLTextures: Trying to use " +
                  e +
                  " texture units while this GPU supports only " +
                  u
              ),
            (D += 1),
            e
          );
        }),
          (this.resetTextureUnits = function () {
            D = 0;
          }),
          (this.setTexture2D = A),
          (this.setTexture2DArray = function (e, t) {
            var r = i.get(e);
            e.version > 0 && r.__version !== e.version
              ? O(r, e, t)
              : n.bindTexture(35866, r.__webglTexture, 33984 + t);
          }),
          (this.setTexture3D = function (e, t) {
            var r = i.get(e);
            e.version > 0 && r.__version !== e.version
              ? O(r, e, t)
              : n.bindTexture(32879, r.__webglTexture, 33984 + t);
          }),
          (this.setTextureCube = function (t, r) {
            var o = i.get(t);
            t.version > 0 && o.__version !== t.version
              ? (function (t, r, o) {
                  if (6 === r.image.length) {
                    var s = I(t, r),
                      u = r.source;
                    n.bindTexture(34067, t.__webglTexture, 33984 + o);
                    var h = i.get(u);
                    if (u.version !== h.__version || !0 === s) {
                      n.activeTexture(33984 + o),
                        e.pixelStorei(37440, r.flipY),
                        e.pixelStorei(37441, r.premultiplyAlpha),
                        e.pixelStorei(3317, r.unpackAlignment),
                        e.pixelStorei(37443, 0);
                      for (
                        var d =
                            r.isCompressedTexture ||
                            r.image[0].isCompressedTexture,
                          p = r.image[0] && r.image[0].isDataTexture,
                          f = [],
                          v = 0;
                        v < 6;
                        v++
                      )
                        (f[v] =
                          d || p
                            ? p
                              ? r.image[v].image
                              : r.image[v]
                            : y(r.image[v], !1, !0, c)),
                          (f[v] = V(r, f[v]));
                      var m,
                        g = f[0],
                        _ = b(g) || l,
                        T = a.convert(r.format, r.encoding),
                        k = a.convert(r.type),
                        E = S(r.internalFormat, T, k, r.encoding),
                        C = l && !0 !== r.isVideoTexture,
                        D = void 0 === h.__version || !0 === s,
                        A = M(r, g, _);
                      if ((R(34067, r, _), d)) {
                        C &&
                          D &&
                          n.texStorage2D(34067, A, E, g.width, g.height);
                        for (var P = 0; P < 6; P++) {
                          m = f[P].mipmaps;
                          for (var L = 0; L < m.length; L++) {
                            var O = m[L];
                            r.format !== Vh
                              ? null !== T
                                ? C
                                  ? n.compressedTexSubImage2D(
                                      34069 + P,
                                      L,
                                      0,
                                      0,
                                      O.width,
                                      O.height,
                                      T,
                                      O.data
                                    )
                                  : n.compressedTexImage2D(
                                      34069 + P,
                                      L,
                                      E,
                                      O.width,
                                      O.height,
                                      0,
                                      O.data
                                    )
                                : console.warn(
                                    "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"
                                  )
                              : C
                              ? n.texSubImage2D(
                                  34069 + P,
                                  L,
                                  0,
                                  0,
                                  O.width,
                                  O.height,
                                  T,
                                  k,
                                  O.data
                                )
                              : n.texImage2D(
                                  34069 + P,
                                  L,
                                  E,
                                  O.width,
                                  O.height,
                                  0,
                                  T,
                                  k,
                                  O.data
                                );
                          }
                        }
                      } else {
                        (m = r.mipmaps),
                          C &&
                            D &&
                            (m.length > 0 && A++,
                            n.texStorage2D(
                              34067,
                              A,
                              E,
                              f[0].width,
                              f[0].height
                            ));
                        for (var N = 0; N < 6; N++)
                          if (p) {
                            C
                              ? n.texSubImage2D(
                                  34069 + N,
                                  0,
                                  0,
                                  0,
                                  f[N].width,
                                  f[N].height,
                                  T,
                                  k,
                                  f[N].data
                                )
                              : n.texImage2D(
                                  34069 + N,
                                  0,
                                  E,
                                  f[N].width,
                                  f[N].height,
                                  0,
                                  T,
                                  k,
                                  f[N].data
                                );
                            for (var F = 0; F < m.length; F++) {
                              var U = m[F].image[N].image;
                              C
                                ? n.texSubImage2D(
                                    34069 + N,
                                    F + 1,
                                    0,
                                    0,
                                    U.width,
                                    U.height,
                                    T,
                                    k,
                                    U.data
                                  )
                                : n.texImage2D(
                                    34069 + N,
                                    F + 1,
                                    E,
                                    U.width,
                                    U.height,
                                    0,
                                    T,
                                    k,
                                    U.data
                                  );
                            }
                          } else {
                            C
                              ? n.texSubImage2D(34069 + N, 0, 0, 0, T, k, f[N])
                              : n.texImage2D(34069 + N, 0, E, T, k, f[N]);
                            for (var B = 0; B < m.length; B++) {
                              var z = m[B];
                              C
                                ? n.texSubImage2D(
                                    34069 + N,
                                    B + 1,
                                    0,
                                    0,
                                    T,
                                    k,
                                    z.image[N]
                                  )
                                : n.texImage2D(
                                    34069 + N,
                                    B + 1,
                                    E,
                                    T,
                                    k,
                                    z.image[N]
                                  );
                            }
                          }
                      }
                      x(r, _) && w(34067),
                        (h.__version = u.version),
                        r.onUpdate && r.onUpdate(r);
                    }
                    t.__version = r.version;
                  }
                })(o, t, r)
              : n.bindTexture(34067, o.__webglTexture, 33984 + r);
          }),
          (this.rebindTextures = function (e, t, n) {
            var r = i.get(e);
            void 0 !== t && N(r.__webglFramebuffer, e, e.texture, 36064, 3553),
              void 0 !== n && U(e);
          }),
          (this.setupRenderTarget = function (t) {
            var s = t.texture,
              u = i.get(t),
              c = i.get(s);
            t.addEventListener("dispose", E),
              !0 !== t.isWebGLMultipleRenderTargets &&
                (void 0 === c.__webglTexture &&
                  (c.__webglTexture = e.createTexture()),
                (c.__version = s.version),
                o.memory.textures++);
            var h = !0 === t.isWebGLCubeRenderTarget,
              d = !0 === t.isWebGLMultipleRenderTargets,
              p = b(t) || l;
            if (h) {
              u.__webglFramebuffer = [];
              for (var f = 0; f < 6; f++)
                u.__webglFramebuffer[f] = e.createFramebuffer();
            } else {
              if (((u.__webglFramebuffer = e.createFramebuffer()), d))
                if (r.drawBuffers)
                  for (var v = t.texture, m = 0, g = v.length; m < g; m++) {
                    var _ = i.get(v[m]);
                    void 0 === _.__webglTexture &&
                      ((_.__webglTexture = e.createTexture()),
                      o.memory.textures++);
                  }
                else
                  console.warn(
                    "THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension."
                  );
              if (l && t.samples > 0 && !1 === z(t)) {
                var y = d ? s : [s];
                (u.__webglMultisampledFramebuffer = e.createFramebuffer()),
                  (u.__webglColorRenderbuffer = []),
                  n.bindFramebuffer(36160, u.__webglMultisampledFramebuffer);
                for (var M = 0; M < y.length; M++) {
                  var T = y[M];
                  (u.__webglColorRenderbuffer[M] = e.createRenderbuffer()),
                    e.bindRenderbuffer(36161, u.__webglColorRenderbuffer[M]);
                  var k = a.convert(T.format, T.encoding),
                    C = a.convert(T.type),
                    D = S(
                      T.internalFormat,
                      k,
                      C,
                      T.encoding,
                      !0 === t.isXRRenderTarget
                    ),
                    A = B(t);
                  e.renderbufferStorageMultisample(
                    36161,
                    A,
                    D,
                    t.width,
                    t.height
                  ),
                    e.framebufferRenderbuffer(
                      36160,
                      36064 + M,
                      36161,
                      u.__webglColorRenderbuffer[M]
                    );
                }
                e.bindRenderbuffer(36161, null),
                  t.depthBuffer &&
                    ((u.__webglDepthRenderbuffer = e.createRenderbuffer()),
                    F(u.__webglDepthRenderbuffer, t, !0)),
                  n.bindFramebuffer(36160, null);
              }
            }
            if (h) {
              n.bindTexture(34067, c.__webglTexture), R(34067, s, p);
              for (var P = 0; P < 6; P++)
                N(u.__webglFramebuffer[P], t, s, 36064, 34069 + P);
              x(s, p) && w(34067), n.unbindTexture();
            } else if (d) {
              for (var L = t.texture, I = 0, O = L.length; I < O; I++) {
                var V = L[I],
                  H = i.get(V);
                n.bindTexture(3553, H.__webglTexture),
                  R(3553, V, p),
                  N(u.__webglFramebuffer, t, V, 36064 + I, 3553),
                  x(V, p) && w(3553);
              }
              n.unbindTexture();
            } else {
              var G = 3553;
              (t.isWebGL3DRenderTarget || t.isWebGLArrayRenderTarget) &&
                (l
                  ? (G = t.isWebGL3DRenderTarget ? 32879 : 35866)
                  : console.error(
                      "THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2."
                    )),
                n.bindTexture(G, c.__webglTexture),
                R(G, s, p),
                N(u.__webglFramebuffer, t, s, 36064, G),
                x(s, p) && w(G),
                n.unbindTexture();
            }
            t.depthBuffer && U(t);
          }),
          (this.updateRenderTargetMipmap = function (e) {
            for (
              var t = b(e) || l,
                r =
                  !0 === e.isWebGLMultipleRenderTargets
                    ? e.texture
                    : [e.texture],
                a = 0,
                o = r.length;
              a < o;
              a++
            ) {
              var s = r[a];
              if (x(s, t)) {
                var u = e.isWebGLCubeRenderTarget ? 34067 : 3553,
                  c = i.get(s).__webglTexture;
                n.bindTexture(u, c), w(u), n.unbindTexture();
              }
            }
          }),
          (this.updateMultisampleRenderTarget = function (t) {
            if (l && t.samples > 0 && !1 === z(t)) {
              var r = t.isWebGLMultipleRenderTargets ? t.texture : [t.texture],
                a = t.width,
                o = t.height,
                s = 16384,
                u = [],
                c = t.stencilBuffer ? 33306 : 36096,
                h = i.get(t),
                d = !0 === t.isWebGLMultipleRenderTargets;
              if (d)
                for (var p = 0; p < r.length; p++)
                  n.bindFramebuffer(36160, h.__webglMultisampledFramebuffer),
                    e.framebufferRenderbuffer(36160, 36064 + p, 36161, null),
                    n.bindFramebuffer(36160, h.__webglFramebuffer),
                    e.framebufferTexture2D(36009, 36064 + p, 3553, null, 0);
              n.bindFramebuffer(36008, h.__webglMultisampledFramebuffer),
                n.bindFramebuffer(36009, h.__webglFramebuffer);
              for (var v = 0; v < r.length; v++) {
                u.push(36064 + v), t.depthBuffer && u.push(c);
                var m =
                  void 0 !== h.__ignoreDepthValues && h.__ignoreDepthValues;
                if (
                  (!1 === m &&
                    (t.depthBuffer && (s |= 256),
                    t.stencilBuffer && (s |= 1024)),
                  d &&
                    e.framebufferRenderbuffer(
                      36008,
                      36064,
                      36161,
                      h.__webglColorRenderbuffer[v]
                    ),
                  !0 === m &&
                    (e.invalidateFramebuffer(36008, [c]),
                    e.invalidateFramebuffer(36009, [c])),
                  d)
                ) {
                  var g = i.get(r[v]).__webglTexture;
                  e.framebufferTexture2D(36009, 36064, 3553, g, 0);
                }
                e.blitFramebuffer(0, 0, a, o, 0, 0, a, o, s, 9728),
                  f && e.invalidateFramebuffer(36008, u);
              }
              if (
                (n.bindFramebuffer(36008, null),
                n.bindFramebuffer(36009, null),
                d)
              )
                for (var _ = 0; _ < r.length; _++) {
                  n.bindFramebuffer(36160, h.__webglMultisampledFramebuffer),
                    e.framebufferRenderbuffer(
                      36160,
                      36064 + _,
                      36161,
                      h.__webglColorRenderbuffer[_]
                    );
                  var y = i.get(r[_]).__webglTexture;
                  n.bindFramebuffer(36160, h.__webglFramebuffer),
                    e.framebufferTexture2D(36009, 36064 + _, 3553, y, 0);
                }
              n.bindFramebuffer(36009, h.__webglMultisampledFramebuffer);
            }
          }),
          (this.setupDepthRenderbuffer = U),
          (this.setupFrameBufferTexture = N),
          (this.useMultisampledRTT = z);
      }
      function Fg(e, t, n) {
        var i = n.isWebGL2;
        return {
          convert: function (n) {
            var r,
              a =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : null;
            if (n === Nh) return 5121;
            if (1017 === n) return 32819;
            if (1018 === n) return 32820;
            if (1010 === n) return 5120;
            if (1011 === n) return 5122;
            if (1012 === n) return 5123;
            if (1013 === n) return 5124;
            if (n === Fh) return 5125;
            if (n === Uh) return 5126;
            if (n === Bh)
              return i
                ? 5131
                : null !== (r = t.get("OES_texture_half_float"))
                ? r.HALF_FLOAT_OES
                : null;
            if (1021 === n) return 6406;
            if (n === Vh) return 6408;
            if (1024 === n) return 6409;
            if (1025 === n) return 6410;
            if (n === Hh) return 6402;
            if (n === Gh) return 34041;
            if (n === ud)
              return null !== (r = t.get("EXT_sRGB")) ? r.SRGB_ALPHA_EXT : null;
            if (1028 === n) return 6403;
            if (1029 === n) return 36244;
            if (1030 === n) return 33319;
            if (1031 === n) return 33320;
            if (1033 === n) return 36249;
            if (n === Wh || n === jh || n === qh || n === Kh)
              if (a === nd) {
                if (null === (r = t.get("WEBGL_compressed_texture_s3tc_srgb")))
                  return null;
                if (n === Wh) return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;
                if (n === jh) return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
                if (n === qh) return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
                if (n === Kh) return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
              } else {
                if (null === (r = t.get("WEBGL_compressed_texture_s3tc")))
                  return null;
                if (n === Wh) return r.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (n === jh) return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (n === qh) return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (n === Kh) return r.COMPRESSED_RGBA_S3TC_DXT5_EXT;
              }
            if (35840 === n || 35841 === n || 35842 === n || 35843 === n) {
              if (null === (r = t.get("WEBGL_compressed_texture_pvrtc")))
                return null;
              if (35840 === n) return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
              if (35841 === n) return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
              if (35842 === n) return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
              if (35843 === n) return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
            }
            if (36196 === n)
              return null !== (r = t.get("WEBGL_compressed_texture_etc1"))
                ? r.COMPRESSED_RGB_ETC1_WEBGL
                : null;
            if (37492 === n || 37496 === n) {
              if (null === (r = t.get("WEBGL_compressed_texture_etc")))
                return null;
              if (37492 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ETC2
                  : r.COMPRESSED_RGB8_ETC2;
              if (37496 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC
                  : r.COMPRESSED_RGBA8_ETC2_EAC;
            }
            if (
              37808 === n ||
              37809 === n ||
              37810 === n ||
              37811 === n ||
              37812 === n ||
              37813 === n ||
              37814 === n ||
              37815 === n ||
              37816 === n ||
              37817 === n ||
              37818 === n ||
              37819 === n ||
              37820 === n ||
              37821 === n
            ) {
              if (null === (r = t.get("WEBGL_compressed_texture_astc")))
                return null;
              if (37808 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR
                  : r.COMPRESSED_RGBA_ASTC_4x4_KHR;
              if (37809 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR
                  : r.COMPRESSED_RGBA_ASTC_5x4_KHR;
              if (37810 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR
                  : r.COMPRESSED_RGBA_ASTC_5x5_KHR;
              if (37811 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR
                  : r.COMPRESSED_RGBA_ASTC_6x5_KHR;
              if (37812 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR
                  : r.COMPRESSED_RGBA_ASTC_6x6_KHR;
              if (37813 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR
                  : r.COMPRESSED_RGBA_ASTC_8x5_KHR;
              if (37814 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR
                  : r.COMPRESSED_RGBA_ASTC_8x6_KHR;
              if (37815 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR
                  : r.COMPRESSED_RGBA_ASTC_8x8_KHR;
              if (37816 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR
                  : r.COMPRESSED_RGBA_ASTC_10x5_KHR;
              if (37817 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR
                  : r.COMPRESSED_RGBA_ASTC_10x6_KHR;
              if (37818 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR
                  : r.COMPRESSED_RGBA_ASTC_10x8_KHR;
              if (37819 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR
                  : r.COMPRESSED_RGBA_ASTC_10x10_KHR;
              if (37820 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR
                  : r.COMPRESSED_RGBA_ASTC_12x10_KHR;
              if (37821 === n)
                return a === nd
                  ? r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR
                  : r.COMPRESSED_RGBA_ASTC_12x12_KHR;
            }
            if (n === Xh) {
              if (null === (r = t.get("EXT_texture_compression_bptc")))
                return null;
              if (n === Xh)
                return a === nd
                  ? r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT
                  : r.COMPRESSED_RGBA_BPTC_UNORM_EXT;
            }
            if (36283 === n || 36284 === n || 36285 === n || 36286 === n) {
              if (null === (r = t.get("EXT_texture_compression_rgtc")))
                return null;
              if (n === Xh) return r.COMPRESSED_RED_RGTC1_EXT;
              if (36284 === n) return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;
              if (36285 === n) return r.COMPRESSED_RED_GREEN_RGTC2_EXT;
              if (36286 === n) return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
            }
            return n === zh
              ? i
                ? 34042
                : null !== (r = t.get("WEBGL_depth_texture"))
                ? r.UNSIGNED_INT_24_8_WEBGL
                : null
              : void 0 !== e[n]
              ? e[n]
              : null;
          }
        };
      }
      var Ug = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : [];
            return (
              gh(this, t),
              ((e = uh(this, t)).isArrayCamera = !0),
              (e.cameras = n),
              e
            );
          }
          return ph(t, e), yh(t);
        })(iv),
        Bg = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t),
              ((e = uh(this, t)).isGroup = !0),
              (e.type = "Group"),
              e
            );
          }
          return ph(t, e), yh(t);
        })(Xp),
        zg = { type: "move" },
        Vg = (function () {
          return yh(
            function e() {
              gh(this, e),
                (this._targetRay = null),
                (this._grip = null),
                (this._hand = null);
            },
            [
              {
                key: "getHandSpace",
                value: function () {
                  return (
                    null === this._hand &&
                      ((this._hand = new Bg()),
                      (this._hand.matrixAutoUpdate = !1),
                      (this._hand.visible = !1),
                      (this._hand.joints = {}),
                      (this._hand.inputState = { pinching: !1 })),
                    this._hand
                  );
                }
              },
              {
                key: "getTargetRaySpace",
                value: function () {
                  return (
                    null === this._targetRay &&
                      ((this._targetRay = new Bg()),
                      (this._targetRay.matrixAutoUpdate = !1),
                      (this._targetRay.visible = !1),
                      (this._targetRay.hasLinearVelocity = !1),
                      (this._targetRay.linearVelocity = new Kd()),
                      (this._targetRay.hasAngularVelocity = !1),
                      (this._targetRay.angularVelocity = new Kd())),
                    this._targetRay
                  );
                }
              },
              {
                key: "getGripSpace",
                value: function () {
                  return (
                    null === this._grip &&
                      ((this._grip = new Bg()),
                      (this._grip.matrixAutoUpdate = !1),
                      (this._grip.visible = !1),
                      (this._grip.hasLinearVelocity = !1),
                      (this._grip.linearVelocity = new Kd()),
                      (this._grip.hasAngularVelocity = !1),
                      (this._grip.angularVelocity = new Kd())),
                    this._grip
                  );
                }
              },
              {
                key: "dispatchEvent",
                value: function (e) {
                  return (
                    null !== this._targetRay &&
                      this._targetRay.dispatchEvent(e),
                    null !== this._grip && this._grip.dispatchEvent(e),
                    null !== this._hand && this._hand.dispatchEvent(e),
                    this
                  );
                }
              },
              {
                key: "connect",
                value: function (e) {
                  if (e && e.hand) {
                    var t = this._hand;
                    if (t) {
                      var n,
                        i = ih(e.hand.values());
                      try {
                        for (i.s(); !(n = i.n()).done; ) {
                          var r = n.value;
                          this._getHandJoint(t, r);
                        }
                      } catch (e) {
                        i.e(e);
                      } finally {
                        i.f();
                      }
                    }
                  }
                  return (
                    this.dispatchEvent({ type: "connected", data: e }), this
                  );
                }
              },
              {
                key: "disconnect",
                value: function (e) {
                  return (
                    this.dispatchEvent({ type: "disconnected", data: e }),
                    null !== this._targetRay && (this._targetRay.visible = !1),
                    null !== this._grip && (this._grip.visible = !1),
                    null !== this._hand && (this._hand.visible = !1),
                    this
                  );
                }
              },
              {
                key: "update",
                value: function (e, t, n) {
                  var i = null,
                    r = null,
                    a = null,
                    o = this._targetRay,
                    s = this._grip,
                    l = this._hand;
                  if (e && "visible-blurred" !== t.session.visibilityState) {
                    if (l && e.hand) {
                      a = !0;
                      var u,
                        c = ih(e.hand.values());
                      try {
                        for (c.s(); !(u = c.n()).done; ) {
                          var h = u.value,
                            d = t.getJointPose(h, n),
                            p = this._getHandJoint(l, h);
                          null !== d &&
                            (p.matrix.fromArray(d.transform.matrix),
                            p.matrix.decompose(p.position, p.rotation, p.scale),
                            (p.jointRadius = d.radius)),
                            (p.visible = null !== d);
                        }
                      } catch (e) {
                        c.e(e);
                      } finally {
                        c.f();
                      }
                      var f = l.joints["index-finger-tip"],
                        v = l.joints["thumb-tip"],
                        m = f.position.distanceTo(v.position);
                      l.inputState.pinching && m > 0.025
                        ? ((l.inputState.pinching = !1),
                          this.dispatchEvent({
                            type: "pinchend",
                            handedness: e.handedness,
                            target: this
                          }))
                        : !l.inputState.pinching &&
                          m <= 0.015 &&
                          ((l.inputState.pinching = !0),
                          this.dispatchEvent({
                            type: "pinchstart",
                            handedness: e.handedness,
                            target: this
                          }));
                    } else
                      null !== s &&
                        e.gripSpace &&
                        null !== (r = t.getPose(e.gripSpace, n)) &&
                        (s.matrix.fromArray(r.transform.matrix),
                        s.matrix.decompose(s.position, s.rotation, s.scale),
                        r.linearVelocity
                          ? ((s.hasLinearVelocity = !0),
                            s.linearVelocity.copy(r.linearVelocity))
                          : (s.hasLinearVelocity = !1),
                        r.angularVelocity
                          ? ((s.hasAngularVelocity = !0),
                            s.angularVelocity.copy(r.angularVelocity))
                          : (s.hasAngularVelocity = !1));
                    null !== o &&
                      (null === (i = t.getPose(e.targetRaySpace, n)) &&
                        null !== r &&
                        (i = r),
                      null !== i &&
                        (o.matrix.fromArray(i.transform.matrix),
                        o.matrix.decompose(o.position, o.rotation, o.scale),
                        i.linearVelocity
                          ? ((o.hasLinearVelocity = !0),
                            o.linearVelocity.copy(i.linearVelocity))
                          : (o.hasLinearVelocity = !1),
                        i.angularVelocity
                          ? ((o.hasAngularVelocity = !0),
                            o.angularVelocity.copy(i.angularVelocity))
                          : (o.hasAngularVelocity = !1),
                        this.dispatchEvent(zg)));
                  }
                  return (
                    null !== o && (o.visible = null !== i),
                    null !== s && (s.visible = null !== r),
                    null !== l && (l.visible = null !== a),
                    this
                  );
                }
              },
              {
                key: "_getHandJoint",
                value: function (e, t) {
                  if (void 0 === e.joints[t.jointName]) {
                    var n = new Bg();
                    (n.matrixAutoUpdate = !1),
                      (n.visible = !1),
                      (e.joints[t.jointName] = n),
                      e.add(n);
                  }
                  return e.joints[t.jointName];
                }
              }
            ]
          );
        })(),
        Hg = (function (e) {
          function t(e, n, i, r, a, o, s, l, u, c) {
            var h;
            if ((gh(this, t), (c = void 0 !== c ? c : Hh) !== Hh && c !== Gh))
              throw new Error(
                "DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"
              );
            return (
              void 0 === i && c === Hh && (i = Fh),
              void 0 === i && c === Gh && (i = zh),
              ((h = uh(this, t, [
                null,
                r,
                a,
                o,
                s,
                l,
                c,
                i,
                u
              ])).isDepthTexture = !0),
              (h.image = { width: e, height: n }),
              (h.magFilter = void 0 !== s ? s : Ph),
              (h.minFilter = void 0 !== l ? l : Ph),
              (h.flipY = !1),
              (h.generateMipmaps = !1),
              h
            );
          }
          return ph(t, e), yh(t);
        })(Vd),
        Gg = (function (e) {
          function t(e, n) {
            var i;
            gh(this, t);
            var r = (i = uh(this, t)),
              a = null,
              o = 1,
              s = null,
              l = "local-floor",
              u = 1,
              c = null,
              h = null,
              d = null,
              p = null,
              f = null,
              v = null,
              m = n.getContextAttributes(),
              g = null,
              _ = null,
              y = [],
              b = [],
              x = new Set(),
              w = new Map(),
              S = new iv();
            S.layers.enable(1), (S.viewport = new Hd());
            var M = new iv();
            M.layers.enable(2), (M.viewport = new Hd());
            var T = [S, M],
              k = new Ug();
            k.layers.enable(1), k.layers.enable(2);
            var E = null,
              C = null;
            function D(e) {
              var t = b.indexOf(e.inputSource);
              if (-1 !== t) {
                var n = y[t];
                void 0 !== n &&
                  n.dispatchEvent({ type: e.type, data: e.inputSource });
              }
            }
            function A() {
              a.removeEventListener("select", D),
                a.removeEventListener("selectstart", D),
                a.removeEventListener("selectend", D),
                a.removeEventListener("squeeze", D),
                a.removeEventListener("squeezestart", D),
                a.removeEventListener("squeezeend", D),
                a.removeEventListener("end", A),
                a.removeEventListener("inputsourceschange", P);
              for (var t = 0; t < y.length; t++) {
                var n = b[t];
                null !== n && ((b[t] = null), y[t].disconnect(n));
              }
              (E = null),
                (C = null),
                e.setRenderTarget(g),
                (f = null),
                (p = null),
                (d = null),
                (a = null),
                (_ = null),
                N.stop(),
                (r.isPresenting = !1),
                r.dispatchEvent({ type: "sessionend" });
            }
            function P(e) {
              for (var t = 0; t < e.removed.length; t++) {
                var n = e.removed[t],
                  i = b.indexOf(n);
                i >= 0 && ((b[i] = null), y[i].disconnect(n));
              }
              for (var r = 0; r < e.added.length; r++) {
                var a = e.added[r],
                  o = b.indexOf(a);
                if (-1 === o) {
                  for (var s = 0; s < y.length; s++) {
                    if (s >= b.length) {
                      b.push(a), (o = s);
                      break;
                    }
                    if (null === b[s]) {
                      (b[s] = a), (o = s);
                      break;
                    }
                  }
                  if (-1 === o) break;
                }
                var l = y[o];
                l && l.connect(a);
              }
            }
            (i.cameraAutoUpdate = !0),
              (i.enabled = !1),
              (i.isPresenting = !1),
              (i.getController = function (e) {
                var t = y[e];
                return (
                  void 0 === t && ((t = new Vg()), (y[e] = t)),
                  t.getTargetRaySpace()
                );
              }),
              (i.getControllerGrip = function (e) {
                var t = y[e];
                return (
                  void 0 === t && ((t = new Vg()), (y[e] = t)), t.getGripSpace()
                );
              }),
              (i.getHand = function (e) {
                var t = y[e];
                return (
                  void 0 === t && ((t = new Vg()), (y[e] = t)), t.getHandSpace()
                );
              }),
              (i.setFramebufferScaleFactor = function (e) {
                (o = e),
                  !0 === r.isPresenting &&
                    console.warn(
                      "THREE.WebXRManager: Cannot change framebuffer scale while presenting."
                    );
              }),
              (i.setReferenceSpaceType = function (e) {
                (l = e),
                  !0 === r.isPresenting &&
                    console.warn(
                      "THREE.WebXRManager: Cannot change reference space type while presenting."
                    );
              }),
              (i.getReferenceSpace = function () {
                return c || s;
              }),
              (i.setReferenceSpace = function (e) {
                c = e;
              }),
              (i.getBaseLayer = function () {
                return null !== p ? p : f;
              }),
              (i.getBinding = function () {
                return d;
              }),
              (i.getFrame = function () {
                return v;
              }),
              (i.getSession = function () {
                return a;
              }),
              (i.setSession = (function () {
                var t = nh(
                  mh().mark(function t(i) {
                    var h, v, y, b, x;
                    return mh().wrap(
                      function (t) {
                        for (;;)
                          switch ((t.prev = t.next)) {
                            case 0:
                              if (null === (a = i)) {
                                t.next = 35;
                                break;
                              }
                              if (
                                ((g = e.getRenderTarget()),
                                a.addEventListener("select", D),
                                a.addEventListener("selectstart", D),
                                a.addEventListener("selectend", D),
                                a.addEventListener("squeeze", D),
                                a.addEventListener("squeezestart", D),
                                a.addEventListener("squeezeend", D),
                                a.addEventListener("end", A),
                                a.addEventListener("inputsourceschange", P),
                                (t.t0 = !0 !== m.xrCompatible),
                                !t.t0)
                              ) {
                                t.next = 14;
                                break;
                              }
                              return (t.next = 14), n.makeXRCompatible();
                            case 14:
                              if (
                                void 0 !== a.renderState.layers &&
                                !1 !== e.capabilities.isWebGL2
                              ) {
                                t.next = 19;
                                break;
                              }
                              (h = {
                                antialias:
                                  void 0 !== a.renderState.layers ||
                                  m.antialias,
                                alpha: m.alpha,
                                depth: m.depth,
                                stencil: m.stencil,
                                framebufferScaleFactor: o
                              }),
                                (f = new XRWebGLLayer(a, n, h)),
                                a.updateRenderState({ baseLayer: f }),
                                (_ = new Gd(
                                  f.framebufferWidth,
                                  f.framebufferHeight,
                                  {
                                    format: Vh,
                                    type: Nh,
                                    encoding: e.outputEncoding,
                                    stencilBuffer: m.stencil
                                  }
                                )),
                                (t.next = 25);
                              break;
                            case 19:
                              (v = null),
                                (y = null),
                                (b = null),
                                m.depth &&
                                  ((b = m.stencil ? 35056 : 33190),
                                  (v = m.stencil ? Gh : Hh),
                                  (y = m.stencil ? zh : Fh)),
                                (x = {
                                  colorFormat: 32856,
                                  depthFormat: b,
                                  scaleFactor: o
                                }),
                                (d = new XRWebGLBinding(a, n)),
                                (p = d.createProjectionLayer(x)),
                                a.updateRenderState({ layers: [p] }),
                                (_ = new Gd(p.textureWidth, p.textureHeight, {
                                  format: Vh,
                                  type: Nh,
                                  depthTexture: new Hg(
                                    p.textureWidth,
                                    p.textureHeight,
                                    y,
                                    void 0,
                                    void 0,
                                    void 0,
                                    void 0,
                                    void 0,
                                    void 0,
                                    v
                                  ),
                                  stencilBuffer: m.stencil,
                                  encoding: e.outputEncoding,
                                  samples: m.antialias ? 4 : 0
                                })),
                                (e.properties.get(_).__ignoreDepthValues =
                                  p.ignoreDepthValues);
                            case 25:
                              return (
                                (_.isXRRenderTarget = !0),
                                this.setFoveation(u),
                                (c = null),
                                (t.next = 30),
                                a.requestReferenceSpace(l)
                              );
                            case 30:
                              (s = t.sent),
                                N.setContext(a),
                                N.start(),
                                (r.isPresenting = !0),
                                r.dispatchEvent({ type: "sessionstart" });
                            case 35:
                            case "end":
                              return t.stop();
                          }
                      },
                      t,
                      this
                    );
                  })
                );
                return function (e) {
                  return t.apply(this, arguments);
                };
              })());
            var L = new Kd(),
              R = new Kd();
            function I(e, t) {
              null === t
                ? e.matrixWorld.copy(e.matrix)
                : e.matrixWorld.multiplyMatrices(t.matrixWorld, e.matrix),
                e.matrixWorldInverse.copy(e.matrixWorld).invert();
            }
            (i.updateCamera = function (e) {
              if (null !== a) {
                (k.near = M.near = S.near = e.near),
                  (k.far = M.far = S.far = e.far),
                  (E !== k.near || C !== k.far) &&
                    (a.updateRenderState({
                      depthNear: k.near,
                      depthFar: k.far
                    }),
                    (E = k.near),
                    (C = k.far));
                var t = e.parent,
                  n = k.cameras;
                I(k, t);
                for (var i = 0; i < n.length; i++) I(n[i], t);
                2 === n.length
                  ? (function (e, t, n) {
                      L.setFromMatrixPosition(t.matrixWorld),
                        R.setFromMatrixPosition(n.matrixWorld);
                      var i = L.distanceTo(R),
                        r = t.projectionMatrix.elements,
                        a = n.projectionMatrix.elements,
                        o = r[14] / (r[10] - 1),
                        s = r[14] / (r[10] + 1),
                        l = (r[9] + 1) / r[5],
                        u = (r[9] - 1) / r[5],
                        c = (r[8] - 1) / r[0],
                        h = (a[8] + 1) / a[0],
                        d = o * c,
                        p = o * h,
                        f = i / (-c + h),
                        v = f * -c;
                      t.matrixWorld.decompose(
                        e.position,
                        e.quaternion,
                        e.scale
                      ),
                        e.translateX(v),
                        e.translateZ(f),
                        e.matrixWorld.compose(
                          e.position,
                          e.quaternion,
                          e.scale
                        ),
                        e.matrixWorldInverse.copy(e.matrixWorld).invert();
                      var m = o + f,
                        g = s + f,
                        _ = d - v,
                        y = p + (i - v),
                        b = ((l * s) / g) * m,
                        x = ((u * s) / g) * m;
                      e.projectionMatrix.makePerspective(_, y, b, x, m, g),
                        e.projectionMatrixInverse
                          .copy(e.projectionMatrix)
                          .invert();
                    })(k, S, M)
                  : k.projectionMatrix.copy(S.projectionMatrix),
                  (function (e, t, n) {
                    null === n
                      ? e.matrix.copy(t.matrixWorld)
                      : (e.matrix.copy(n.matrixWorld),
                        e.matrix.invert(),
                        e.matrix.multiply(t.matrixWorld)),
                      e.matrix.decompose(e.position, e.quaternion, e.scale),
                      e.updateMatrixWorld(!0);
                    for (var i = e.children, r = 0, a = i.length; r < a; r++)
                      i[r].updateMatrixWorld(!0);
                    e.projectionMatrix.copy(t.projectionMatrix),
                      e.projectionMatrixInverse.copy(t.projectionMatrixInverse),
                      e.isPerspectiveCamera &&
                        ((e.fov =
                          2 *
                          pd *
                          Math.atan(1 / e.projectionMatrix.elements[5])),
                        (e.zoom = 1));
                  })(e, k, t);
              }
            }),
              (i.getCamera = function () {
                return k;
              }),
              (i.getFoveation = function () {
                if (null !== p || null !== f) return u;
              }),
              (i.setFoveation = function (e) {
                (u = e),
                  null !== p && (p.fixedFoveation = e),
                  null !== f &&
                    void 0 !== f.fixedFoveation &&
                    (f.fixedFoveation = e);
              }),
              (i.getPlanes = function () {
                return x;
              });
            var O = null,
              N = new vv();
            return (
              N.setAnimationLoop(function (t, n) {
                if (((h = n.getViewerPose(c || s)), (v = n), null !== h)) {
                  var i = h.views;
                  null !== f &&
                    (e.setRenderTargetFramebuffer(_, f.framebuffer),
                    e.setRenderTarget(_));
                  var a = !1;
                  i.length !== k.cameras.length &&
                    ((k.cameras.length = 0), (a = !0));
                  for (var o = 0; o < i.length; o++) {
                    var l = i[o],
                      u = null;
                    if (null !== f) u = f.getViewport(l);
                    else {
                      var m = d.getViewSubImage(p, l);
                      (u = m.viewport),
                        0 === o &&
                          (e.setRenderTargetTextures(
                            _,
                            m.colorTexture,
                            p.ignoreDepthValues ? void 0 : m.depthStencilTexture
                          ),
                          e.setRenderTarget(_));
                    }
                    var g = T[o];
                    void 0 === g &&
                      ((g = new iv()).layers.enable(o),
                      (g.viewport = new Hd()),
                      (T[o] = g)),
                      g.matrix.fromArray(l.transform.matrix),
                      g.matrix.decompose(g.position, g.quaternion, g.scale),
                      g.projectionMatrix.fromArray(l.projectionMatrix),
                      g.projectionMatrixInverse
                        .copy(g.projectionMatrix)
                        .invert(),
                      g.viewport.set(u.x, u.y, u.width, u.height),
                      0 === o &&
                        (k.matrix.copy(g.matrix),
                        k.matrix.decompose(k.position, k.quaternion, k.scale)),
                      !0 === a && k.cameras.push(g);
                  }
                }
                for (var S = 0; S < y.length; S++) {
                  var M = b[S],
                    E = y[S];
                  null !== M && void 0 !== E && E.update(M, n, c || s);
                }
                if ((O && O(t, n), n.detectedPlanes)) {
                  r.dispatchEvent({
                    type: "planesdetected",
                    data: n.detectedPlanes
                  });
                  var C,
                    D = null,
                    A = ih(x);
                  try {
                    for (A.s(); !(C = A.n()).done; ) {
                      var P = C.value;
                      n.detectedPlanes.has(P) ||
                        (null === D && (D = []), D.push(P));
                    }
                  } catch (e) {
                    A.e(e);
                  } finally {
                    A.f();
                  }
                  if (null !== D) {
                    var L,
                      R = ih(D);
                    try {
                      for (R.s(); !(L = R.n()).done; ) {
                        var I = L.value;
                        x.delete(I),
                          w.delete(I),
                          r.dispatchEvent({ type: "planeremoved", data: I });
                      }
                    } catch (e) {
                      R.e(e);
                    } finally {
                      R.f();
                    }
                  }
                  var N,
                    F = ih(n.detectedPlanes);
                  try {
                    for (F.s(); !(N = F.n()).done; ) {
                      var U = N.value;
                      if (x.has(U)) {
                        var B = w.get(U);
                        U.lastChangedTime > B &&
                          (w.set(U, U.lastChangedTime),
                          r.dispatchEvent({ type: "planechanged", data: U }));
                      } else
                        x.add(U),
                          w.set(U, n.lastChangedTime),
                          r.dispatchEvent({ type: "planeadded", data: U });
                    }
                  } catch (e) {
                    F.e(e);
                  } finally {
                    F.f();
                  }
                }
                v = null;
              }),
              (i.setAnimationLoop = function (e) {
                O = e;
              }),
              (i.dispose = function () {}),
              i
            );
          }
          return ph(t, e), yh(t);
        })(cd);
      function Wg(e, t) {
        function n(e, t) {
          !0 === e.matrixAutoUpdate && e.updateMatrix(), t.value.copy(e.matrix);
        }
        function i(i, r) {
          (i.opacity.value = r.opacity),
            r.color && i.diffuse.value.copy(r.color),
            r.emissive &&
              i.emissive.value
                .copy(r.emissive)
                .multiplyScalar(r.emissiveIntensity),
            r.map && ((i.map.value = r.map), n(r.map, i.mapTransform)),
            r.alphaMap &&
              ((i.alphaMap.value = r.alphaMap),
              n(r.alphaMap, i.alphaMapTransform)),
            r.bumpMap &&
              ((i.bumpMap.value = r.bumpMap),
              n(r.bumpMap, i.bumpMapTransform),
              (i.bumpScale.value = r.bumpScale),
              1 === r.side && (i.bumpScale.value *= -1)),
            r.normalMap &&
              ((i.normalMap.value = r.normalMap),
              n(r.normalMap, i.normalMapTransform),
              i.normalScale.value.copy(r.normalScale),
              1 === r.side && i.normalScale.value.negate()),
            r.displacementMap &&
              ((i.displacementMap.value = r.displacementMap),
              n(r.displacementMap, i.displacementMapTransform),
              (i.displacementScale.value = r.displacementScale),
              (i.displacementBias.value = r.displacementBias)),
            r.emissiveMap &&
              ((i.emissiveMap.value = r.emissiveMap),
              n(r.emissiveMap, i.emissiveMapTransform)),
            r.specularMap &&
              ((i.specularMap.value = r.specularMap),
              n(r.specularMap, i.specularMapTransform)),
            r.alphaTest > 0 && (i.alphaTest.value = r.alphaTest);
          var a = t.get(r).envMap;
          if (
            (a &&
              ((i.envMap.value = a),
              (i.flipEnvMap.value =
                a.isCubeTexture && !1 === a.isRenderTargetTexture ? -1 : 1),
              (i.reflectivity.value = r.reflectivity),
              (i.ior.value = r.ior),
              (i.refractionRatio.value = r.refractionRatio)),
            r.lightMap)
          ) {
            i.lightMap.value = r.lightMap;
            var o = !0 === e.useLegacyLights ? Math.PI : 1;
            (i.lightMapIntensity.value = r.lightMapIntensity * o),
              n(r.lightMap, i.lightMapTransform);
          }
          r.aoMap &&
            ((i.aoMap.value = r.aoMap),
            (i.aoMapIntensity.value = r.aoMapIntensity),
            n(r.aoMap, i.aoMapTransform));
        }
        return {
          refreshFogUniforms: function (t, n) {
            n.color.getRGB(t.fogColor.value, $f(e)),
              n.isFog
                ? ((t.fogNear.value = n.near), (t.fogFar.value = n.far))
                : n.isFogExp2 && (t.fogDensity.value = n.density);
          },
          refreshMaterialUniforms: function (e, r, a, o, s) {
            r.isMeshBasicMaterial || r.isMeshLambertMaterial
              ? i(e, r)
              : r.isMeshToonMaterial
              ? (i(e, r),
                (function (e, t) {
                  t.gradientMap && (e.gradientMap.value = t.gradientMap);
                })(e, r))
              : r.isMeshPhongMaterial
              ? (i(e, r),
                (function (e, t) {
                  e.specular.value.copy(t.specular),
                    (e.shininess.value = Math.max(t.shininess, 1e-4));
                })(e, r))
              : r.isMeshStandardMaterial
              ? (i(e, r),
                (function (e, i) {
                  (e.metalness.value = i.metalness),
                    i.metalnessMap &&
                      ((e.metalnessMap.value = i.metalnessMap),
                      n(i.metalnessMap, e.metalnessMapTransform)),
                    (e.roughness.value = i.roughness),
                    i.roughnessMap &&
                      ((e.roughnessMap.value = i.roughnessMap),
                      n(i.roughnessMap, e.roughnessMapTransform)),
                    t.get(i).envMap &&
                      (e.envMapIntensity.value = i.envMapIntensity);
                })(e, r),
                r.isMeshPhysicalMaterial &&
                  (function (e, t, i) {
                    (e.ior.value = t.ior),
                      t.sheen > 0 &&
                        (e.sheenColor.value
                          .copy(t.sheenColor)
                          .multiplyScalar(t.sheen),
                        (e.sheenRoughness.value = t.sheenRoughness),
                        t.sheenColorMap &&
                          ((e.sheenColorMap.value = t.sheenColorMap),
                          n(t.sheenColorMap, e.sheenColorMapTransform)),
                        t.sheenRoughnessMap &&
                          ((e.sheenRoughnessMap.value = t.sheenRoughnessMap),
                          n(
                            t.sheenRoughnessMap,
                            e.sheenRoughnessMapTransform
                          ))),
                      t.clearcoat > 0 &&
                        ((e.clearcoat.value = t.clearcoat),
                        (e.clearcoatRoughness.value = t.clearcoatRoughness),
                        t.clearcoatMap &&
                          ((e.clearcoatMap.value = t.clearcoatMap),
                          n(t.clearcoatMap, e.clearcoatMapTransform)),
                        t.clearcoatRoughnessMap &&
                          ((e.clearcoatRoughnessMap.value =
                            t.clearcoatRoughnessMap),
                          n(
                            t.clearcoatRoughnessMap,
                            e.clearcoatRoughnessMapTransform
                          )),
                        t.clearcoatNormalMap &&
                          ((e.clearcoatNormalMap.value = t.clearcoatNormalMap),
                          n(
                            t.clearcoatNormalMap,
                            e.clearcoatNormalMapTransform
                          ),
                          e.clearcoatNormalScale.value.copy(
                            t.clearcoatNormalScale
                          ),
                          1 === t.side &&
                            e.clearcoatNormalScale.value.negate())),
                      t.iridescence > 0 &&
                        ((e.iridescence.value = t.iridescence),
                        (e.iridescenceIOR.value = t.iridescenceIOR),
                        (e.iridescenceThicknessMinimum.value =
                          t.iridescenceThicknessRange[0]),
                        (e.iridescenceThicknessMaximum.value =
                          t.iridescenceThicknessRange[1]),
                        t.iridescenceMap &&
                          ((e.iridescenceMap.value = t.iridescenceMap),
                          n(t.iridescenceMap, e.iridescenceMapTransform)),
                        t.iridescenceThicknessMap &&
                          ((e.iridescenceThicknessMap.value =
                            t.iridescenceThicknessMap),
                          n(
                            t.iridescenceThicknessMap,
                            e.iridescenceThicknessMapTransform
                          ))),
                      t.transmission > 0 &&
                        ((e.transmission.value = t.transmission),
                        (e.transmissionSamplerMap.value = i.texture),
                        e.transmissionSamplerSize.value.set(i.width, i.height),
                        t.transmissionMap &&
                          ((e.transmissionMap.value = t.transmissionMap),
                          n(t.transmissionMap, e.transmissionMapTransform)),
                        (e.thickness.value = t.thickness),
                        t.thicknessMap &&
                          ((e.thicknessMap.value = t.thicknessMap),
                          n(t.thicknessMap, e.thicknessMapTransform)),
                        (e.attenuationDistance.value = t.attenuationDistance),
                        e.attenuationColor.value.copy(t.attenuationColor)),
                      (e.specularIntensity.value = t.specularIntensity),
                      e.specularColor.value.copy(t.specularColor),
                      t.specularColorMap &&
                        ((e.specularColorMap.value = t.specularColorMap),
                        n(t.specularColorMap, e.specularColorMapTransform)),
                      t.specularIntensityMap &&
                        ((e.specularIntensityMap.value =
                          t.specularIntensityMap),
                        n(
                          t.specularIntensityMap,
                          e.specularIntensityMapTransform
                        ));
                  })(e, r, s))
              : r.isMeshMatcapMaterial
              ? (i(e, r),
                (function (e, t) {
                  t.matcap && (e.matcap.value = t.matcap);
                })(e, r))
              : r.isMeshDepthMaterial
              ? i(e, r)
              : r.isMeshDistanceMaterial
              ? (i(e, r),
                (function (e, n) {
                  var i = t.get(n).light;
                  e.referencePosition.value.setFromMatrixPosition(
                    i.matrixWorld
                  ),
                    (e.nearDistance.value = i.shadow.camera.near),
                    (e.farDistance.value = i.shadow.camera.far);
                })(e, r))
              : r.isMeshNormalMaterial
              ? i(e, r)
              : r.isLineBasicMaterial
              ? ((function (e, t) {
                  e.diffuse.value.copy(t.color),
                    (e.opacity.value = t.opacity),
                    t.map && ((e.map.value = t.map), n(t.map, e.mapTransform));
                })(e, r),
                r.isLineDashedMaterial &&
                  (function (e, t) {
                    (e.dashSize.value = t.dashSize),
                      (e.totalSize.value = t.dashSize + t.gapSize),
                      (e.scale.value = t.scale);
                  })(e, r))
              : r.isPointsMaterial
              ? (function (e, t, i, r) {
                  e.diffuse.value.copy(t.color),
                    (e.opacity.value = t.opacity),
                    (e.size.value = t.size * i),
                    (e.scale.value = 0.5 * r),
                    t.map && ((e.map.value = t.map), n(t.map, e.uvTransform)),
                    t.alphaMap && (e.alphaMap.value = t.alphaMap),
                    t.alphaTest > 0 && (e.alphaTest.value = t.alphaTest);
                })(e, r, a, o)
              : r.isSpriteMaterial
              ? (function (e, t) {
                  e.diffuse.value.copy(t.color),
                    (e.opacity.value = t.opacity),
                    (e.rotation.value = t.rotation),
                    t.map && ((e.map.value = t.map), n(t.map, e.mapTransform)),
                    t.alphaMap && (e.alphaMap.value = t.alphaMap),
                    t.alphaTest > 0 && (e.alphaTest.value = t.alphaTest);
                })(e, r)
              : r.isShadowMaterial
              ? (e.color.value.copy(r.color), (e.opacity.value = r.opacity))
              : r.isShaderMaterial && (r.uniformsNeedUpdate = !1);
          }
        };
      }
      function jg(e, t, n, i) {
        var r = {},
          a = {},
          o = [],
          s = n.isWebGL2 ? e.getParameter(35375) : 0;
        function l(e, t, n) {
          var i = e.value;
          if (void 0 === n[t]) {
            if ("number" == typeof i) n[t] = i;
            else {
              for (
                var r = Array.isArray(i) ? i : [i], a = [], o = 0;
                o < r.length;
                o++
              )
                a.push(r[o].clone());
              n[t] = a;
            }
            return !0;
          }
          if ("number" == typeof i) {
            if (n[t] !== i) return (n[t] = i), !0;
          } else
            for (
              var s = Array.isArray(n[t]) ? n[t] : [n[t]],
                l = Array.isArray(i) ? i : [i],
                u = 0;
              u < s.length;
              u++
            ) {
              var c = s[u];
              if (!1 === c.equals(l[u])) return c.copy(l[u]), !0;
            }
          return !1;
        }
        function u(e) {
          var t = { boundary: 0, storage: 0 };
          return (
            "number" == typeof e
              ? ((t.boundary = 4), (t.storage = 4))
              : e.isVector2
              ? ((t.boundary = 8), (t.storage = 8))
              : e.isVector3 || e.isColor
              ? ((t.boundary = 16), (t.storage = 12))
              : e.isVector4
              ? ((t.boundary = 16), (t.storage = 16))
              : e.isMatrix3
              ? ((t.boundary = 48), (t.storage = 48))
              : e.isMatrix4
              ? ((t.boundary = 64), (t.storage = 64))
              : e.isTexture
              ? console.warn(
                  "THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."
                )
              : console.warn(
                  "THREE.WebGLRenderer: Unsupported uniform value type.",
                  e
                ),
            t
          );
        }
        function c(t) {
          var n = t.target;
          n.removeEventListener("dispose", c);
          var i = o.indexOf(n.__bindingPointIndex);
          o.splice(i, 1),
            e.deleteBuffer(r[n.id]),
            delete r[n.id],
            delete a[n.id];
        }
        return {
          bind: function (e, t) {
            var n = t.program;
            i.uniformBlockBinding(e, n);
          },
          update: function (n, h) {
            var d = r[n.id];
            void 0 === d &&
              ((function (e) {
                for (
                  var t = e.uniforms, n = 0, i = 0, r = 0, a = t.length;
                  r < a;
                  r++
                ) {
                  for (
                    var o = t[r],
                      s = { boundary: 0, storage: 0 },
                      l = Array.isArray(o.value) ? o.value : [o.value],
                      c = 0,
                      h = l.length;
                    c < h;
                    c++
                  ) {
                    var d = u(l[c]);
                    (s.boundary += d.boundary), (s.storage += d.storage);
                  }
                  (o.__data = new Float32Array(
                    s.storage / Float32Array.BYTES_PER_ELEMENT
                  )),
                    (o.__offset = n),
                    r > 0 &&
                      0 != (i = n % 16) &&
                      16 - i - s.boundary < 0 &&
                      ((n += 16 - i), (o.__offset = n)),
                    (n += s.storage);
                }
                (i = n % 16) > 0 && (n += 16 - i),
                  (e.__size = n),
                  (e.__cache = {});
              })(n),
              (d = (function (t) {
                var n = (function () {
                  for (var e = 0; e < s; e++)
                    if (-1 === o.indexOf(e)) return o.push(e), e;
                  return (
                    console.error(
                      "THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."
                    ),
                    0
                  );
                })();
                t.__bindingPointIndex = n;
                var i = e.createBuffer(),
                  r = t.__size,
                  a = t.usage;
                return (
                  e.bindBuffer(35345, i),
                  e.bufferData(35345, r, a),
                  e.bindBuffer(35345, null),
                  e.bindBufferBase(35345, n, i),
                  i
                );
              })(n)),
              (r[n.id] = d),
              n.addEventListener("dispose", c));
            var p = h.program;
            i.updateUBOMapping(n, p);
            var f = t.render.frame;
            a[n.id] !== f &&
              ((function (t) {
                var n = r[t.id],
                  i = t.uniforms,
                  a = t.__cache;
                e.bindBuffer(35345, n);
                for (var o = 0, s = i.length; o < s; o++) {
                  var c = i[o];
                  if (!0 === l(c, o, a)) {
                    for (
                      var h = c.__offset,
                        d = Array.isArray(c.value) ? c.value : [c.value],
                        p = 0,
                        f = 0;
                      f < d.length;
                      f++
                    ) {
                      var v = d[f],
                        m = u(v);
                      "number" == typeof v
                        ? ((c.__data[0] = v),
                          e.bufferSubData(35345, h + p, c.__data))
                        : v.isMatrix3
                        ? ((c.__data[0] = v.elements[0]),
                          (c.__data[1] = v.elements[1]),
                          (c.__data[2] = v.elements[2]),
                          (c.__data[3] = v.elements[0]),
                          (c.__data[4] = v.elements[3]),
                          (c.__data[5] = v.elements[4]),
                          (c.__data[6] = v.elements[5]),
                          (c.__data[7] = v.elements[0]),
                          (c.__data[8] = v.elements[6]),
                          (c.__data[9] = v.elements[7]),
                          (c.__data[10] = v.elements[8]),
                          (c.__data[11] = v.elements[0]))
                        : (v.toArray(c.__data, p),
                          (p += m.storage / Float32Array.BYTES_PER_ELEMENT));
                    }
                    e.bufferSubData(35345, h, c.__data);
                  }
                }
                e.bindBuffer(35345, null);
              })(n),
              (a[n.id] = f));
          },
          dispose: function () {
            for (var t in r) e.deleteBuffer(r[t]);
            (o = []), (r = {}), (a = {});
          }
        };
      }
      var qg = (function () {
          return yh(
            function e() {
              var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : {};
              gh(this, e);
              var n,
                i,
                r = t.canvas,
                a =
                  void 0 === r
                    ? (((i = Cd("canvas")).style.display = "block"), i)
                    : r,
                o = t.context,
                s = void 0 === o ? null : o,
                l = t.depth,
                u = void 0 === l || l,
                c = t.stencil,
                h = void 0 === c || c,
                d = t.alpha,
                p = void 0 !== d && d,
                f = t.antialias,
                v = void 0 !== f && f,
                m = t.premultipliedAlpha,
                g = void 0 === m || m,
                _ = t.preserveDrawingBuffer,
                y = void 0 !== _ && _,
                b = t.powerPreference,
                x = void 0 === b ? "default" : b,
                w = t.failIfMajorPerformanceCaveat,
                S = void 0 !== w && w;
              (this.isWebGLRenderer = !0),
                (n = null !== s ? s.getContextAttributes().alpha : p);
              var M = null,
                T = null,
                k = [],
                E = [];
              (this.domElement = a),
                (this.debug = { checkShaderErrors: !0, onShaderError: null }),
                (this.autoClear = !0),
                (this.autoClearColor = !0),
                (this.autoClearDepth = !0),
                (this.autoClearStencil = !0),
                (this.sortObjects = !0),
                (this.clippingPlanes = []),
                (this.localClippingEnabled = !1),
                (this.outputEncoding = td),
                (this.useLegacyLights = !0),
                (this.toneMapping = 0),
                (this.toneMappingExposure = 1);
              var C = this,
                D = !1,
                A = 0,
                P = 0,
                L = null,
                R = -1,
                I = null,
                O = new Hd(),
                N = new Hd(),
                F = null,
                U = a.width,
                B = a.height,
                z = 1,
                V = null,
                H = null,
                G = new Hd(0, 0, U, B),
                W = new Hd(0, 0, U, B),
                j = !1,
                q = new fv(),
                K = !1,
                X = !1,
                Y = null,
                Z = new Sp(),
                J = new Kd(),
                Q = {
                  background: null,
                  fog: null,
                  environment: null,
                  overrideMaterial: null,
                  isScene: !0
                };
              function $() {
                return null === L ? z : 1;
              }
              var ee,
                te,
                ne,
                ie,
                re,
                ae,
                oe,
                se,
                le,
                ue,
                ce,
                he,
                de,
                pe,
                fe,
                ve,
                me,
                ge,
                _e,
                ye,
                be,
                xe,
                we,
                Se,
                Me = s;
              function Te(e, t) {
                for (var n = 0; n < e.length; n++) {
                  var i = e[n],
                    r = a.getContext(i, t);
                  if (null !== r) return r;
                }
                return null;
              }
              try {
                var ke = {
                  alpha: !0,
                  depth: u,
                  stencil: h,
                  antialias: v,
                  premultipliedAlpha: g,
                  preserveDrawingBuffer: y,
                  powerPreference: x,
                  failIfMajorPerformanceCaveat: S
                };
                if (
                  ("setAttribute" in a &&
                    a.setAttribute("data-engine", "three.js r".concat(Sh)),
                  a.addEventListener("webglcontextlost", Ae, !1),
                  a.addEventListener("webglcontextrestored", Pe, !1),
                  a.addEventListener("webglcontextcreationerror", Le, !1),
                  null === Me)
                ) {
                  var Ee = ["webgl2", "webgl", "experimental-webgl"];
                  if (
                    (!0 === C.isWebGL1Renderer && Ee.shift(),
                    null === (Me = Te(Ee, ke)))
                  )
                    throw Te(Ee)
                      ? new Error(
                          "Error creating WebGL context with your selected attributes."
                        )
                      : new Error("Error creating WebGL context.");
                }
                void 0 === Me.getShaderPrecisionFormat &&
                  (Me.getShaderPrecisionFormat = function () {
                    return { rangeMin: 1, rangeMax: 1, precision: 1 };
                  });
              } catch (ke) {
                throw (console.error("THREE.WebGLRenderer: " + ke.message), ke);
              }
              function Ce() {
                (ee = new Gv(Me)),
                  (te = new Tv(Me, ee, t)),
                  ee.init(te),
                  (xe = new Fg(Me, ee, te)),
                  (ne = new Og(Me, ee, te)),
                  (ie = new qv()),
                  (re = new xg()),
                  (ae = new Ng(Me, ee, ne, re, te, xe, ie)),
                  (oe = new Ev(C)),
                  (se = new Hv(C)),
                  (le = new mv(Me, te)),
                  (we = new Sv(Me, ee, le, te)),
                  (ue = new Wv(Me, le, ie, we)),
                  (ce = new Zv(Me, ue, le, ie)),
                  (_e = new Yv(Me, te, ae)),
                  (ve = new kv(re)),
                  (he = new bg(C, oe, se, ee, te, we, ve)),
                  (de = new Wg(C, re)),
                  (pe = new Tg()),
                  (fe = new Pg(ee, te)),
                  (ge = new wv(C, oe, se, ne, ce, n, g)),
                  (me = new Ig(C, ce, te)),
                  (Se = new jg(Me, ie, te, ne)),
                  (ye = new Mv(Me, ee, ie, te)),
                  (be = new jv(Me, ee, ie, te)),
                  (ie.programs = he.programs),
                  (C.capabilities = te),
                  (C.extensions = ee),
                  (C.properties = re),
                  (C.renderLists = pe),
                  (C.shadowMap = me),
                  (C.state = ne),
                  (C.info = ie);
              }
              Ce();
              var De = new Gg(C, Me);
              function Ae(e) {
                e.preventDefault(),
                  console.log("THREE.WebGLRenderer: Context Lost."),
                  (D = !0);
              }
              function Pe() {
                console.log("THREE.WebGLRenderer: Context Restored."), (D = !1);
                var e = ie.autoReset,
                  t = me.enabled,
                  n = me.autoUpdate,
                  i = me.needsUpdate,
                  r = me.type;
                Ce(),
                  (ie.autoReset = e),
                  (me.enabled = t),
                  (me.autoUpdate = n),
                  (me.needsUpdate = i),
                  (me.type = r);
              }
              function Le(e) {
                console.error(
                  "THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",
                  e.statusMessage
                );
              }
              function Re(e) {
                var t = e.target;
                t.removeEventListener("dispose", Re),
                  (function (e) {
                    (function (e) {
                      var t = re.get(e).programs;
                      void 0 !== t &&
                        (t.forEach(function (e) {
                          he.releaseProgram(e);
                        }),
                        e.isShaderMaterial && he.releaseShaderCache(e));
                    })(e),
                      re.remove(e);
                  })(t);
              }
              (this.xr = De),
                (this.getContext = function () {
                  return Me;
                }),
                (this.getContextAttributes = function () {
                  return Me.getContextAttributes();
                }),
                (this.forceContextLoss = function () {
                  var e = ee.get("WEBGL_lose_context");
                  e && e.loseContext();
                }),
                (this.forceContextRestore = function () {
                  var e = ee.get("WEBGL_lose_context");
                  e && e.restoreContext();
                }),
                (this.getPixelRatio = function () {
                  return z;
                }),
                (this.setPixelRatio = function (e) {
                  void 0 !== e && ((z = e), this.setSize(U, B, !1));
                }),
                (this.getSize = function (e) {
                  return e.set(U, B);
                }),
                (this.setSize = function (e, t) {
                  var n =
                    !(arguments.length > 2 && void 0 !== arguments[2]) ||
                    arguments[2];
                  De.isPresenting
                    ? console.warn(
                        "THREE.WebGLRenderer: Can't change size while VR device is presenting."
                      )
                    : ((U = e),
                      (B = t),
                      (a.width = Math.floor(e * z)),
                      (a.height = Math.floor(t * z)),
                      !0 === n &&
                        ((a.style.width = e + "px"),
                        (a.style.height = t + "px")),
                      this.setViewport(0, 0, e, t));
                }),
                (this.getDrawingBufferSize = function (e) {
                  return e.set(U * z, B * z).floor();
                }),
                (this.setDrawingBufferSize = function (e, t, n) {
                  (U = e),
                    (B = t),
                    (z = n),
                    (a.width = Math.floor(e * n)),
                    (a.height = Math.floor(t * n)),
                    this.setViewport(0, 0, e, t);
                }),
                (this.getCurrentViewport = function (e) {
                  return e.copy(O);
                }),
                (this.getViewport = function (e) {
                  return e.copy(G);
                }),
                (this.setViewport = function (e, t, n, i) {
                  e.isVector4 ? G.set(e.x, e.y, e.z, e.w) : G.set(e, t, n, i),
                    ne.viewport(O.copy(G).multiplyScalar(z).floor());
                }),
                (this.getScissor = function (e) {
                  return e.copy(W);
                }),
                (this.setScissor = function (e, t, n, i) {
                  e.isVector4 ? W.set(e.x, e.y, e.z, e.w) : W.set(e, t, n, i),
                    ne.scissor(N.copy(W).multiplyScalar(z).floor());
                }),
                (this.getScissorTest = function () {
                  return j;
                }),
                (this.setScissorTest = function (e) {
                  ne.setScissorTest((j = e));
                }),
                (this.setOpaqueSort = function (e) {
                  V = e;
                }),
                (this.setTransparentSort = function (e) {
                  H = e;
                }),
                (this.getClearColor = function (e) {
                  return e.copy(ge.getClearColor());
                }),
                (this.setClearColor = function () {
                  ge.setClearColor.apply(ge, arguments);
                }),
                (this.getClearAlpha = function () {
                  return ge.getClearAlpha();
                }),
                (this.setClearAlpha = function () {
                  ge.setClearAlpha.apply(ge, arguments);
                }),
                (this.clear = function () {
                  var e = 0;
                  (!(arguments.length > 0 && void 0 !== arguments[0]) ||
                    arguments[0]) &&
                    (e |= 16384),
                    (!(arguments.length > 1 && void 0 !== arguments[1]) ||
                      arguments[1]) &&
                      (e |= 256),
                    (!(arguments.length > 2 && void 0 !== arguments[2]) ||
                      arguments[2]) &&
                      (e |= 1024),
                    Me.clear(e);
                }),
                (this.clearColor = function () {
                  this.clear(!0, !1, !1);
                }),
                (this.clearDepth = function () {
                  this.clear(!1, !0, !1);
                }),
                (this.clearStencil = function () {
                  this.clear(!1, !1, !0);
                }),
                (this.dispose = function () {
                  a.removeEventListener("webglcontextlost", Ae, !1),
                    a.removeEventListener("webglcontextrestored", Pe, !1),
                    a.removeEventListener("webglcontextcreationerror", Le, !1),
                    pe.dispose(),
                    fe.dispose(),
                    re.dispose(),
                    oe.dispose(),
                    se.dispose(),
                    ce.dispose(),
                    we.dispose(),
                    Se.dispose(),
                    he.dispose(),
                    De.dispose(),
                    De.removeEventListener("sessionstart", Oe),
                    De.removeEventListener("sessionend", Ne),
                    Y && (Y.dispose(), (Y = null)),
                    Fe.stop();
                }),
                (this.renderBufferDirect = function (e, t, n, i, r, a) {
                  null === t && (t = Q);
                  var o = r.isMesh && r.matrixWorld.determinant() < 0,
                    s = (function (e, t, n, i, r) {
                      !0 !== t.isScene && (t = Q), ae.resetTextureUnits();
                      var a = t.fog,
                        o = i.isMeshStandardMaterial ? t.environment : null,
                        s =
                          null === L
                            ? C.outputEncoding
                            : !0 === L.isXRRenderTarget
                            ? L.texture.encoding
                            : td,
                        l = (i.isMeshStandardMaterial ? se : oe).get(
                          i.envMap || o
                        ),
                        u =
                          !0 === i.vertexColors &&
                          !!n.attributes.color &&
                          4 === n.attributes.color.itemSize,
                        c = !!i.normalMap && !!n.attributes.tangent,
                        h = !!n.morphAttributes.position,
                        d = !!n.morphAttributes.normal,
                        p = !!n.morphAttributes.color,
                        f = i.toneMapped ? C.toneMapping : 0,
                        v =
                          n.morphAttributes.position ||
                          n.morphAttributes.normal ||
                          n.morphAttributes.color,
                        m = void 0 !== v ? v.length : 0,
                        g = re.get(i),
                        _ = T.state.lights;
                      if (!0 === K && (!0 === X || e !== I)) {
                        var y = e === I && i.id === R;
                        ve.setState(i, e, y);
                      }
                      var b = !1;
                      i.version === g.__version
                        ? ((g.needsLights &&
                            g.lightsStateVersion !== _.state.version) ||
                            g.outputEncoding !== s ||
                            (r.isInstancedMesh && !1 === g.instancing) ||
                            (!r.isInstancedMesh && !0 === g.instancing) ||
                            (r.isSkinnedMesh && !1 === g.skinning) ||
                            (!r.isSkinnedMesh && !0 === g.skinning) ||
                            g.envMap !== l ||
                            (!0 === i.fog && g.fog !== a) ||
                            (void 0 !== g.numClippingPlanes &&
                              (g.numClippingPlanes !== ve.numPlanes ||
                                g.numIntersection !== ve.numIntersection)) ||
                            g.vertexAlphas !== u ||
                            g.vertexTangents !== c ||
                            g.morphTargets !== h ||
                            g.morphNormals !== d ||
                            g.morphColors !== p ||
                            g.toneMapping !== f ||
                            (!0 === te.isWebGL2 &&
                              g.morphTargetsCount !== m)) &&
                          (b = !0)
                        : ((b = !0), (g.__version = i.version));
                      var x = g.currentProgram;
                      !0 === b && (x = He(i, t, r));
                      var w = !1,
                        S = !1,
                        M = !1,
                        k = x.getUniforms(),
                        E = g.uniforms;
                      if (
                        (ne.useProgram(x.program) &&
                          ((w = !0), (S = !0), (M = !0)),
                        i.id !== R && ((R = i.id), (S = !0)),
                        w || I !== e)
                      ) {
                        if (
                          (k.setValue(
                            Me,
                            "projectionMatrix",
                            e.projectionMatrix
                          ),
                          te.logarithmicDepthBuffer &&
                            k.setValue(
                              Me,
                              "logDepthBufFC",
                              2 / (Math.log(e.far + 1) / Math.LN2)
                            ),
                          I !== e && ((I = e), (S = !0), (M = !0)),
                          i.isShaderMaterial ||
                            i.isMeshPhongMaterial ||
                            i.isMeshToonMaterial ||
                            i.isMeshStandardMaterial ||
                            i.envMap)
                        ) {
                          var D = k.map.cameraPosition;
                          void 0 !== D &&
                            D.setValue(
                              Me,
                              J.setFromMatrixPosition(e.matrixWorld)
                            );
                        }
                        (i.isMeshPhongMaterial ||
                          i.isMeshToonMaterial ||
                          i.isMeshLambertMaterial ||
                          i.isMeshBasicMaterial ||
                          i.isMeshStandardMaterial ||
                          i.isShaderMaterial) &&
                          k.setValue(
                            Me,
                            "isOrthographic",
                            !0 === e.isOrthographicCamera
                          ),
                          (i.isMeshPhongMaterial ||
                            i.isMeshToonMaterial ||
                            i.isMeshLambertMaterial ||
                            i.isMeshBasicMaterial ||
                            i.isMeshStandardMaterial ||
                            i.isShaderMaterial ||
                            i.isShadowMaterial ||
                            r.isSkinnedMesh) &&
                            k.setValue(Me, "viewMatrix", e.matrixWorldInverse);
                      }
                      if (r.isSkinnedMesh) {
                        k.setOptional(Me, r, "bindMatrix"),
                          k.setOptional(Me, r, "bindMatrixInverse");
                        var A = r.skeleton;
                        A &&
                          (te.floatVertexTextures
                            ? (null === A.boneTexture && A.computeBoneTexture(),
                              k.setValue(Me, "boneTexture", A.boneTexture, ae),
                              k.setValue(
                                Me,
                                "boneTextureSize",
                                A.boneTextureSize
                              ))
                            : console.warn(
                                "THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."
                              ));
                      }
                      var P = n.morphAttributes;
                      if (
                        ((void 0 !== P.position ||
                          void 0 !== P.normal ||
                          (void 0 !== P.color && !0 === te.isWebGL2)) &&
                          _e.update(r, n, x),
                        (S || g.receiveShadow !== r.receiveShadow) &&
                          ((g.receiveShadow = r.receiveShadow),
                          k.setValue(Me, "receiveShadow", r.receiveShadow)),
                        i.isMeshGouraudMaterial &&
                          null !== i.envMap &&
                          ((E.envMap.value = l),
                          (E.flipEnvMap.value =
                            l.isCubeTexture && !1 === l.isRenderTargetTexture
                              ? -1
                              : 1)),
                        S &&
                          (k.setValue(
                            Me,
                            "toneMappingExposure",
                            C.toneMappingExposure
                          ),
                          g.needsLights &&
                            (function (e, t) {
                              (e.ambientLightColor.needsUpdate = t),
                                (e.lightProbe.needsUpdate = t),
                                (e.directionalLights.needsUpdate = t),
                                (e.directionalLightShadows.needsUpdate = t),
                                (e.pointLights.needsUpdate = t),
                                (e.pointLightShadows.needsUpdate = t),
                                (e.spotLights.needsUpdate = t),
                                (e.spotLightShadows.needsUpdate = t),
                                (e.rectAreaLights.needsUpdate = t),
                                (e.hemisphereLights.needsUpdate = t);
                            })(E, M),
                          a && !0 === i.fog && de.refreshFogUniforms(E, a),
                          de.refreshMaterialUniforms(E, i, z, B, Y),
                          eg.upload(Me, g.uniformsList, E, ae)),
                        i.isShaderMaterial &&
                          !0 === i.uniformsNeedUpdate &&
                          (eg.upload(Me, g.uniformsList, E, ae),
                          (i.uniformsNeedUpdate = !1)),
                        i.isSpriteMaterial &&
                          k.setValue(Me, "center", r.center),
                        k.setValue(Me, "modelViewMatrix", r.modelViewMatrix),
                        k.setValue(Me, "normalMatrix", r.normalMatrix),
                        k.setValue(Me, "modelMatrix", r.matrixWorld),
                        i.isShaderMaterial || i.isRawShaderMaterial)
                      )
                        for (
                          var O = i.uniformsGroups, N = 0, F = O.length;
                          N < F;
                          N++
                        )
                          if (te.isWebGL2) {
                            var U = O[N];
                            Se.update(U, x), Se.bind(U, x);
                          } else
                            console.warn(
                              "THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2."
                            );
                      return x;
                    })(e, t, n, i, r);
                  ne.setMaterial(i, o);
                  var l = n.index,
                    u = 1;
                  !0 === i.wireframe &&
                    ((l = ue.getWireframeAttribute(n)), (u = 2));
                  var c = n.drawRange,
                    h = n.attributes.position,
                    d = c.start * u,
                    p = (c.start + c.count) * u;
                  null !== a &&
                    ((d = Math.max(d, a.start * u)),
                    (p = Math.min(p, (a.start + a.count) * u))),
                    null !== l
                      ? ((d = Math.max(d, 0)), (p = Math.min(p, l.count)))
                      : null != h &&
                        ((d = Math.max(d, 0)), (p = Math.min(p, h.count)));
                  var f = p - d;
                  if (!(f < 0 || f === 1 / 0)) {
                    we.setup(r, i, s, n, l);
                    var v,
                      m = ye;
                    if (
                      (null !== l && ((v = le.get(l)), (m = be).setIndex(v)),
                      r.isMesh)
                    )
                      !0 === i.wireframe
                        ? (ne.setLineWidth(i.wireframeLinewidth * $()),
                          m.setMode(1))
                        : m.setMode(4);
                    else if (r.isLine) {
                      var g = i.linewidth;
                      void 0 === g && (g = 1),
                        ne.setLineWidth(g * $()),
                        r.isLineSegments
                          ? m.setMode(1)
                          : r.isLineLoop
                          ? m.setMode(2)
                          : m.setMode(3);
                    } else
                      r.isPoints ? m.setMode(0) : r.isSprite && m.setMode(4);
                    if (r.isInstancedMesh) m.renderInstances(d, f, r.count);
                    else if (n.isInstancedBufferGeometry) {
                      var _ =
                          void 0 !== n._maxInstanceCount
                            ? n._maxInstanceCount
                            : 1 / 0,
                        y = Math.min(n.instanceCount, _);
                      m.renderInstances(d, f, y);
                    } else m.render(d, f);
                  }
                }),
                (this.compile = function (e, t) {
                  function n(e, t, n) {
                    !0 === e.transparent &&
                    2 === e.side &&
                    !1 === e.forceSinglePass
                      ? ((e.side = 1),
                        (e.needsUpdate = !0),
                        He(e, t, n),
                        (e.side = 0),
                        (e.needsUpdate = !0),
                        He(e, t, n),
                        (e.side = 2))
                      : He(e, t, n);
                  }
                  (T = fe.get(e)).init(),
                    E.push(T),
                    e.traverseVisible(function (e) {
                      e.isLight &&
                        e.layers.test(t.layers) &&
                        (T.pushLight(e), e.castShadow && T.pushShadow(e));
                    }),
                    T.setupLights(C.useLegacyLights),
                    e.traverse(function (t) {
                      var i = t.material;
                      if (i)
                        if (Array.isArray(i))
                          for (var r = 0; r < i.length; r++) n(i[r], e, t);
                        else n(i, e, t);
                    }),
                    E.pop(),
                    (T = null);
                });
              var Ie = null;
              function Oe() {
                Fe.stop();
              }
              function Ne() {
                Fe.start();
              }
              var Fe = new vv();
              function Ue(e, t, n, i) {
                if (!1 !== e.visible) {
                  if (e.layers.test(t.layers))
                    if (e.isGroup) n = e.renderOrder;
                    else if (e.isLOD) !0 === e.autoUpdate && e.update(t);
                    else if (e.isLight)
                      T.pushLight(e), e.castShadow && T.pushShadow(e);
                    else if (e.isSprite) {
                      if (!e.frustumCulled || q.intersectsSprite(e)) {
                        i &&
                          J.setFromMatrixPosition(e.matrixWorld).applyMatrix4(
                            Z
                          );
                        var r = ce.update(e),
                          a = e.material;
                        a.visible && M.push(e, r, a, n, J.z, null);
                      }
                    } else if (
                      (e.isMesh || e.isLine || e.isPoints) &&
                      (e.isSkinnedMesh &&
                        e.skeleton.frame !== ie.render.frame &&
                        (e.skeleton.update(),
                        (e.skeleton.frame = ie.render.frame)),
                      !e.frustumCulled || q.intersectsObject(e))
                    ) {
                      i &&
                        J.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Z);
                      var o = ce.update(e),
                        s = e.material;
                      if (Array.isArray(s))
                        for (
                          var l = o.groups, u = 0, c = l.length;
                          u < c;
                          u++
                        ) {
                          var h = l[u],
                            d = s[h.materialIndex];
                          d && d.visible && M.push(e, o, d, n, J.z, h);
                        }
                      else s.visible && M.push(e, o, s, n, J.z, null);
                    }
                  for (var p = e.children, f = 0, v = p.length; f < v; f++)
                    Ue(p[f], t, n, i);
                }
              }
              function Be(e, t, n, i) {
                var r = e.opaque,
                  a = e.transmissive,
                  o = e.transparent;
                T.setupLightsView(n),
                  !0 === K && ve.setGlobalState(C.clippingPlanes, n),
                  a.length > 0 &&
                    (function (e, t, n, i) {
                      if (null === Y) {
                        var r = te.isWebGL2;
                        Y = new Gd(1024, 1024, {
                          generateMipmaps: !0,
                          type: ee.has("EXT_color_buffer_half_float") ? Bh : Nh,
                          minFilter: Oh,
                          samples: r && !0 === v ? 4 : 0
                        });
                      }
                      var a = C.getRenderTarget();
                      C.setRenderTarget(Y), C.clear();
                      var o = C.toneMapping;
                      (C.toneMapping = 0),
                        ze(e, n, i),
                        ae.updateMultisampleRenderTarget(Y),
                        ae.updateRenderTargetMipmap(Y);
                      for (var s = !1, l = 0, u = t.length; l < u; l++) {
                        var c = t[l],
                          h = c.object,
                          d = c.geometry,
                          p = c.material,
                          f = c.group;
                        if (2 === p.side && h.layers.test(i.layers)) {
                          var m = p.side;
                          (p.side = 1),
                            (p.needsUpdate = !0),
                            Ve(h, n, i, d, p, f),
                            (p.side = m),
                            (p.needsUpdate = !0),
                            (s = !0);
                        }
                      }
                      !0 === s &&
                        (ae.updateMultisampleRenderTarget(Y),
                        ae.updateRenderTargetMipmap(Y)),
                        C.setRenderTarget(a),
                        (C.toneMapping = o);
                    })(r, a, t, n),
                  i && ne.viewport(O.copy(i)),
                  r.length > 0 && ze(r, t, n),
                  a.length > 0 && ze(a, t, n),
                  o.length > 0 && ze(o, t, n),
                  ne.buffers.depth.setTest(!0),
                  ne.buffers.depth.setMask(!0),
                  ne.buffers.color.setMask(!0),
                  ne.setPolygonOffset(!1);
              }
              function ze(e, t, n) {
                for (
                  var i = !0 === t.isScene ? t.overrideMaterial : null,
                    r = 0,
                    a = e.length;
                  r < a;
                  r++
                ) {
                  var o = e[r],
                    s = o.object,
                    l = o.geometry,
                    u = null === i ? o.material : i,
                    c = o.group;
                  s.layers.test(n.layers) && Ve(s, t, n, l, u, c);
                }
              }
              function Ve(e, t, n, i, r, a) {
                e.onBeforeRender(C, t, n, i, r, a),
                  e.modelViewMatrix.multiplyMatrices(
                    n.matrixWorldInverse,
                    e.matrixWorld
                  ),
                  e.normalMatrix.getNormalMatrix(e.modelViewMatrix),
                  r.onBeforeRender(C, t, n, i, e, a),
                  !0 === r.transparent &&
                  2 === r.side &&
                  !1 === r.forceSinglePass
                    ? ((r.side = 1),
                      (r.needsUpdate = !0),
                      C.renderBufferDirect(n, t, i, r, e, a),
                      (r.side = 0),
                      (r.needsUpdate = !0),
                      C.renderBufferDirect(n, t, i, r, e, a),
                      (r.side = 2))
                    : C.renderBufferDirect(n, t, i, r, e, a),
                  e.onAfterRender(C, t, n, i, r, a);
              }
              function He(e, t, n) {
                !0 !== t.isScene && (t = Q);
                var i = re.get(e),
                  r = T.state.lights,
                  a = T.state.shadowsArray,
                  o = r.state.version,
                  s = he.getParameters(e, r.state, a, t, n),
                  l = he.getProgramCacheKey(s),
                  u = i.programs;
                (i.environment = e.isMeshStandardMaterial
                  ? t.environment
                  : null),
                  (i.fog = t.fog),
                  (i.envMap = (e.isMeshStandardMaterial ? se : oe).get(
                    e.envMap || i.environment
                  )),
                  void 0 === u &&
                    (e.addEventListener("dispose", Re),
                    (u = new Map()),
                    (i.programs = u));
                var c = u.get(l);
                if (void 0 !== c) {
                  if (i.currentProgram === c && i.lightsStateVersion === o)
                    return Ge(e, s), c;
                } else
                  (s.uniforms = he.getUniforms(e)),
                    e.onBuild(n, s, C),
                    e.onBeforeCompile(s, C),
                    (c = he.acquireProgram(s, l)),
                    u.set(l, c),
                    (i.uniforms = s.uniforms);
                var h = i.uniforms;
                ((!e.isShaderMaterial && !e.isRawShaderMaterial) ||
                  !0 === e.clipping) &&
                  (h.clippingPlanes = ve.uniform),
                  Ge(e, s),
                  (i.needsLights = (function (e) {
                    return (
                      e.isMeshLambertMaterial ||
                      e.isMeshToonMaterial ||
                      e.isMeshPhongMaterial ||
                      e.isMeshStandardMaterial ||
                      e.isShadowMaterial ||
                      (e.isShaderMaterial && !0 === e.lights)
                    );
                  })(e)),
                  (i.lightsStateVersion = o),
                  i.needsLights &&
                    ((h.ambientLightColor.value = r.state.ambient),
                    (h.lightProbe.value = r.state.probe),
                    (h.directionalLights.value = r.state.directional),
                    (h.directionalLightShadows.value =
                      r.state.directionalShadow),
                    (h.spotLights.value = r.state.spot),
                    (h.spotLightShadows.value = r.state.spotShadow),
                    (h.rectAreaLights.value = r.state.rectArea),
                    (h.ltc_1.value = r.state.rectAreaLTC1),
                    (h.ltc_2.value = r.state.rectAreaLTC2),
                    (h.pointLights.value = r.state.point),
                    (h.pointLightShadows.value = r.state.pointShadow),
                    (h.hemisphereLights.value = r.state.hemi),
                    (h.directionalShadowMap.value =
                      r.state.directionalShadowMap),
                    (h.directionalShadowMatrix.value =
                      r.state.directionalShadowMatrix),
                    (h.spotShadowMap.value = r.state.spotShadowMap),
                    (h.spotLightMatrix.value = r.state.spotLightMatrix),
                    (h.spotLightMap.value = r.state.spotLightMap),
                    (h.pointShadowMap.value = r.state.pointShadowMap),
                    (h.pointShadowMatrix.value = r.state.pointShadowMatrix));
                var d = c.getUniforms(),
                  p = eg.seqWithValue(d.seq, h);
                return (i.currentProgram = c), (i.uniformsList = p), c;
              }
              function Ge(e, t) {
                var n = re.get(e);
                (n.outputEncoding = t.outputEncoding),
                  (n.instancing = t.instancing),
                  (n.skinning = t.skinning),
                  (n.morphTargets = t.morphTargets),
                  (n.morphNormals = t.morphNormals),
                  (n.morphColors = t.morphColors),
                  (n.morphTargetsCount = t.morphTargetsCount),
                  (n.numClippingPlanes = t.numClippingPlanes),
                  (n.numIntersection = t.numClipIntersection),
                  (n.vertexAlphas = t.vertexAlphas),
                  (n.vertexTangents = t.vertexTangents),
                  (n.toneMapping = t.toneMapping);
              }
              Fe.setAnimationLoop(function (e) {
                Ie && Ie(e);
              }),
                ("undefined" == typeof self ? "undefined" : xh(self)) < "u" &&
                  Fe.setContext(self),
                (this.setAnimationLoop = function (e) {
                  (Ie = e),
                    De.setAnimationLoop(e),
                    null === e ? Fe.stop() : Fe.start();
                }),
                De.addEventListener("sessionstart", Oe),
                De.addEventListener("sessionend", Ne),
                (this.render = function (e, t) {
                  if (void 0 === t || !0 === t.isCamera) {
                    if (!0 !== D) {
                      !0 === e.matrixWorldAutoUpdate && e.updateMatrixWorld(),
                        null === t.parent &&
                          !0 === t.matrixWorldAutoUpdate &&
                          t.updateMatrixWorld(),
                        !0 === De.enabled &&
                          !0 === De.isPresenting &&
                          (!0 === De.cameraAutoUpdate && De.updateCamera(t),
                          (t = De.getCamera())),
                        !0 === e.isScene && e.onBeforeRender(C, e, t, L),
                        (T = fe.get(e, E.length)).init(),
                        E.push(T),
                        Z.multiplyMatrices(
                          t.projectionMatrix,
                          t.matrixWorldInverse
                        ),
                        q.setFromProjectionMatrix(Z),
                        (X = this.localClippingEnabled),
                        (K = ve.init(this.clippingPlanes, X)),
                        (M = pe.get(e, k.length)).init(),
                        k.push(M),
                        Ue(e, t, 0, C.sortObjects),
                        M.finish(),
                        !0 === C.sortObjects && M.sort(V, H),
                        !0 === K && ve.beginShadows();
                      var n = T.state.shadowsArray;
                      if (
                        (me.render(n, e, t),
                        !0 === K && ve.endShadows(),
                        !0 === this.info.autoReset && this.info.reset(),
                        ge.render(M, e),
                        T.setupLights(C.useLegacyLights),
                        t.isArrayCamera)
                      )
                        for (
                          var i = t.cameras, r = 0, a = i.length;
                          r < a;
                          r++
                        ) {
                          var o = i[r];
                          Be(M, e, o, o.viewport);
                        }
                      else Be(M, e, t);
                      null !== L &&
                        (ae.updateMultisampleRenderTarget(L),
                        ae.updateRenderTargetMipmap(L)),
                        !0 === e.isScene && e.onAfterRender(C, e, t),
                        we.resetDefaultState(),
                        (R = -1),
                        (I = null),
                        E.pop(),
                        (T = E.length > 0 ? E[E.length - 1] : null),
                        k.pop(),
                        (M = k.length > 0 ? k[k.length - 1] : null);
                    }
                  } else
                    console.error(
                      "THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."
                    );
                }),
                (this.getActiveCubeFace = function () {
                  return A;
                }),
                (this.getActiveMipmapLevel = function () {
                  return P;
                }),
                (this.getRenderTarget = function () {
                  return L;
                }),
                (this.setRenderTargetTextures = function (e, t, n) {
                  (re.get(e.texture).__webglTexture = t),
                    (re.get(e.depthTexture).__webglTexture = n);
                  var i = re.get(e);
                  (i.__hasExternalTextures = !0),
                    i.__hasExternalTextures &&
                      ((i.__autoAllocateDepthBuffer = void 0 === n),
                      i.__autoAllocateDepthBuffer ||
                        (!0 ===
                          ee.has("WEBGL_multisampled_render_to_texture") &&
                          (console.warn(
                            "THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"
                          ),
                          (i.__useRenderToTexture = !1))));
                }),
                (this.setRenderTargetFramebuffer = function (e, t) {
                  var n = re.get(e);
                  (n.__webglFramebuffer = t),
                    (n.__useDefaultFramebuffer = void 0 === t);
                }),
                (this.setRenderTarget = function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0;
                  (L = e), (A = t), (P = n);
                  var i = !0,
                    r = null,
                    a = !1,
                    o = !1;
                  if (e) {
                    var s = re.get(e);
                    void 0 !== s.__useDefaultFramebuffer
                      ? (ne.bindFramebuffer(36160, null), (i = !1))
                      : void 0 === s.__webglFramebuffer
                      ? ae.setupRenderTarget(e)
                      : s.__hasExternalTextures &&
                        ae.rebindTextures(
                          e,
                          re.get(e.texture).__webglTexture,
                          re.get(e.depthTexture).__webglTexture
                        );
                    var l = e.texture;
                    (l.isData3DTexture ||
                      l.isDataArrayTexture ||
                      l.isCompressedArrayTexture) &&
                      (o = !0);
                    var u = re.get(e).__webglFramebuffer;
                    e.isWebGLCubeRenderTarget
                      ? ((r = u[t]), (a = !0))
                      : (r =
                          te.isWebGL2 &&
                          e.samples > 0 &&
                          !1 === ae.useMultisampledRTT(e)
                            ? re.get(e).__webglMultisampledFramebuffer
                            : u),
                      O.copy(e.viewport),
                      N.copy(e.scissor),
                      (F = e.scissorTest);
                  } else
                    O.copy(G).multiplyScalar(z).floor(),
                      N.copy(W).multiplyScalar(z).floor(),
                      (F = j);
                  if (
                    (ne.bindFramebuffer(36160, r) &&
                      te.drawBuffers &&
                      i &&
                      ne.drawBuffers(e, r),
                    ne.viewport(O),
                    ne.scissor(N),
                    ne.setScissorTest(F),
                    a)
                  ) {
                    var c = re.get(e.texture);
                    Me.framebufferTexture2D(
                      36160,
                      36064,
                      34069 + t,
                      c.__webglTexture,
                      n
                    );
                  } else if (o) {
                    var h = re.get(e.texture),
                      d = t || 0;
                    Me.framebufferTextureLayer(
                      36160,
                      36064,
                      h.__webglTexture,
                      n || 0,
                      d
                    );
                  }
                  R = -1;
                }),
                (this.readRenderTargetPixels = function (e, t, n, i, r, a, o) {
                  if (e && e.isWebGLRenderTarget) {
                    var s = re.get(e).__webglFramebuffer;
                    if (
                      (e.isWebGLCubeRenderTarget && void 0 !== o && (s = s[o]),
                      s)
                    ) {
                      ne.bindFramebuffer(36160, s);
                      try {
                        var l = e.texture,
                          u = l.format,
                          c = l.type;
                        if (
                          u !== Vh &&
                          xe.convert(u) !== Me.getParameter(35739)
                        )
                          return void console.error(
                            "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."
                          );
                        var h =
                          c === Bh &&
                          (ee.has("EXT_color_buffer_half_float") ||
                            (te.isWebGL2 && ee.has("EXT_color_buffer_float")));
                        if (
                          !(
                            c === Nh ||
                            xe.convert(c) === Me.getParameter(35738) ||
                            (c === Uh &&
                              (te.isWebGL2 ||
                                ee.has("OES_texture_float") ||
                                ee.has("WEBGL_color_buffer_float"))) ||
                            h
                          )
                        )
                          return void console.error(
                            "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."
                          );
                        t >= 0 &&
                          t <= e.width - i &&
                          n >= 0 &&
                          n <= e.height - r &&
                          Me.readPixels(
                            t,
                            n,
                            i,
                            r,
                            xe.convert(u),
                            xe.convert(c),
                            a
                          );
                      } finally {
                        var d =
                          null !== L ? re.get(L).__webglFramebuffer : null;
                        ne.bindFramebuffer(36160, d);
                      }
                    }
                  } else
                    console.error(
                      "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget."
                    );
                }),
                (this.copyFramebufferToTexture = function (e, t) {
                  var n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0,
                    i = Math.pow(2, -n),
                    r = Math.floor(t.image.width * i),
                    a = Math.floor(t.image.height * i);
                  ae.setTexture2D(t, 0),
                    Me.copyTexSubImage2D(3553, n, 0, 0, e.x, e.y, r, a),
                    ne.unbindTexture();
                }),
                (this.copyTextureToTexture = function (e, t, n) {
                  var i =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 0,
                    r = t.image.width,
                    a = t.image.height,
                    o = xe.convert(n.format),
                    s = xe.convert(n.type);
                  ae.setTexture2D(n, 0),
                    Me.pixelStorei(37440, n.flipY),
                    Me.pixelStorei(37441, n.premultiplyAlpha),
                    Me.pixelStorei(3317, n.unpackAlignment),
                    t.isDataTexture
                      ? Me.texSubImage2D(
                          3553,
                          i,
                          e.x,
                          e.y,
                          r,
                          a,
                          o,
                          s,
                          t.image.data
                        )
                      : t.isCompressedTexture
                      ? Me.compressedTexSubImage2D(
                          3553,
                          i,
                          e.x,
                          e.y,
                          t.mipmaps[0].width,
                          t.mipmaps[0].height,
                          o,
                          t.mipmaps[0].data
                        )
                      : Me.texSubImage2D(3553, i, e.x, e.y, o, s, t.image),
                    0 === i && n.generateMipmaps && Me.generateMipmap(3553),
                    ne.unbindTexture();
                }),
                (this.copyTextureToTexture3D = function (e, t, n, i) {
                  var r =
                    arguments.length > 4 && void 0 !== arguments[4]
                      ? arguments[4]
                      : 0;
                  if (C.isWebGL1Renderer)
                    console.warn(
                      "THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2."
                    );
                  else {
                    var a,
                      o = e.max.x - e.min.x + 1,
                      s = e.max.y - e.min.y + 1,
                      l = e.max.z - e.min.z + 1,
                      u = xe.convert(i.format),
                      c = xe.convert(i.type);
                    if (i.isData3DTexture) ae.setTexture3D(i, 0), (a = 32879);
                    else {
                      if (!i.isDataArrayTexture)
                        return void console.warn(
                          "THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray."
                        );
                      ae.setTexture2DArray(i, 0), (a = 35866);
                    }
                    Me.pixelStorei(37440, i.flipY),
                      Me.pixelStorei(37441, i.premultiplyAlpha),
                      Me.pixelStorei(3317, i.unpackAlignment);
                    var h = Me.getParameter(3314),
                      d = Me.getParameter(32878),
                      p = Me.getParameter(3316),
                      f = Me.getParameter(3315),
                      v = Me.getParameter(32877),
                      m = n.isCompressedTexture ? n.mipmaps[0] : n.image;
                    Me.pixelStorei(3314, m.width),
                      Me.pixelStorei(32878, m.height),
                      Me.pixelStorei(3316, e.min.x),
                      Me.pixelStorei(3315, e.min.y),
                      Me.pixelStorei(32877, e.min.z),
                      n.isDataTexture || n.isData3DTexture
                        ? Me.texSubImage3D(
                            a,
                            r,
                            t.x,
                            t.y,
                            t.z,
                            o,
                            s,
                            l,
                            u,
                            c,
                            m.data
                          )
                        : n.isCompressedArrayTexture
                        ? (console.warn(
                            "THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."
                          ),
                          Me.compressedTexSubImage3D(
                            a,
                            r,
                            t.x,
                            t.y,
                            t.z,
                            o,
                            s,
                            l,
                            u,
                            m.data
                          ))
                        : Me.texSubImage3D(
                            a,
                            r,
                            t.x,
                            t.y,
                            t.z,
                            o,
                            s,
                            l,
                            u,
                            c,
                            m
                          ),
                      Me.pixelStorei(3314, h),
                      Me.pixelStorei(32878, d),
                      Me.pixelStorei(3316, p),
                      Me.pixelStorei(3315, f),
                      Me.pixelStorei(32877, v),
                      0 === r && i.generateMipmaps && Me.generateMipmap(a),
                      ne.unbindTexture();
                  }
                }),
                (this.initTexture = function (e) {
                  e.isCubeTexture
                    ? ae.setTextureCube(e, 0)
                    : e.isData3DTexture
                    ? ae.setTexture3D(e, 0)
                    : e.isDataArrayTexture || e.isCompressedArrayTexture
                    ? ae.setTexture2DArray(e, 0)
                    : ae.setTexture2D(e, 0),
                    ne.unbindTexture();
                }),
                (this.resetState = function () {
                  (A = 0), (P = 0), (L = null), ne.reset(), we.reset();
                }),
                ("undefined" == typeof __THREE_DEVTOOLS__
                  ? "undefined"
                  : xh(__THREE_DEVTOOLS__)) < "u" &&
                  __THREE_DEVTOOLS__.dispatchEvent(
                    new CustomEvent("observe", { detail: this })
                  );
            },
            [
              {
                key: "physicallyCorrectLights",
                get: function () {
                  return (
                    console.warn(
                      "THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."
                    ),
                    !this.useLegacyLights
                  );
                },
                set: function (e) {
                  console.warn(
                    "THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."
                  ),
                    (this.useLegacyLights = !e);
                }
              }
            ]
          );
        })(),
        Kg = (function (e) {
          function t() {
            return gh(this, t), uh(this, t, arguments);
          }
          return ph(t, e), yh(t);
        })(qg);
      Kg.prototype.isWebGL1Renderer = !0;
      var Xg = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t),
              ((e = uh(this, t)).isScene = !0),
              (e.type = "Scene"),
              (e.background = null),
              (e.environment = null),
              (e.fog = null),
              (e.backgroundBlurriness = 0),
              (e.backgroundIntensity = 1),
              (e.overrideMaterial = null),
              ("undefined" == typeof __THREE_DEVTOOLS__
                ? "undefined"
                : xh(__THREE_DEVTOOLS__)) < "u" &&
                __THREE_DEVTOOLS__.dispatchEvent(
                  new CustomEvent("observe", { detail: ch(e) })
                ),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    null !== e.background &&
                      (this.background = e.background.clone()),
                    null !== e.environment &&
                      (this.environment = e.environment.clone()),
                    null !== e.fog && (this.fog = e.fog.clone()),
                    (this.backgroundBlurriness = e.backgroundBlurriness),
                    (this.backgroundIntensity = e.backgroundIntensity),
                    null !== e.overrideMaterial &&
                      (this.overrideMaterial = e.overrideMaterial.clone()),
                    (this.matrixAutoUpdate = e.matrixAutoUpdate),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = sh(t, "toJSON", this, 3)([e]);
                  return (
                    null !== this.fog && (n.object.fog = this.fog.toJSON()),
                    this.backgroundBlurriness > 0 &&
                      (n.object.backgroundBlurriness =
                        this.backgroundBlurriness),
                    1 !== this.backgroundIntensity &&
                      (n.object.backgroundIntensity = this.backgroundIntensity),
                    n
                  );
                }
              },
              {
                key: "autoUpdate",
                get: function () {
                  return (
                    console.warn(
                      "THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."
                    ),
                    this.matrixWorldAutoUpdate
                  );
                },
                set: function (e) {
                  console.warn(
                    "THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."
                  ),
                    (this.matrixWorldAutoUpdate = e);
                }
              }
            ])
          );
        })(Xp),
        Yg = (function () {
          return yh(
            function e(t, n) {
              gh(this, e),
                (this.isInterleavedBuffer = !0),
                (this.array = t),
                (this.stride = n),
                (this.count = void 0 !== t ? t.length / n : 0),
                (this.usage = sd),
                (this.updateRange = { offset: 0, count: -1 }),
                (this.version = 0),
                (this.uuid = fd());
            },
            [
              { key: "onUploadCallback", value: function () {} },
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && this.version++;
                }
              },
              {
                key: "setUsage",
                value: function (e) {
                  return (this.usage = e), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.array = new e.array.constructor(e.array)),
                    (this.count = e.count),
                    (this.stride = e.stride),
                    (this.usage = e.usage),
                    this
                  );
                }
              },
              {
                key: "copyAt",
                value: function (e, t, n) {
                  (e *= this.stride), (n *= t.stride);
                  for (var i = 0, r = this.stride; i < r; i++)
                    this.array[e + i] = t.array[n + i];
                  return this;
                }
              },
              {
                key: "set",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return this.array.set(e, t), this;
                }
              },
              {
                key: "clone",
                value: function (e) {
                  void 0 === e.arrayBuffers && (e.arrayBuffers = {}),
                    void 0 === this.array.buffer._uuid &&
                      (this.array.buffer._uuid = fd()),
                    void 0 === e.arrayBuffers[this.array.buffer._uuid] &&
                      (e.arrayBuffers[this.array.buffer._uuid] =
                        this.array.slice(0).buffer);
                  var t = new this.array.constructor(
                      e.arrayBuffers[this.array.buffer._uuid]
                    ),
                    n = new this.constructor(t, this.stride);
                  return n.setUsage(this.usage), n;
                }
              },
              {
                key: "onUpload",
                value: function (e) {
                  return (this.onUploadCallback = e), this;
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  return (
                    void 0 === e.arrayBuffers && (e.arrayBuffers = {}),
                    void 0 === this.array.buffer._uuid &&
                      (this.array.buffer._uuid = fd()),
                    void 0 === e.arrayBuffers[this.array.buffer._uuid] &&
                      (e.arrayBuffers[this.array.buffer._uuid] = Array.from(
                        new Uint32Array(this.array.buffer)
                      )),
                    {
                      uuid: this.uuid,
                      buffer: this.array.buffer._uuid,
                      type: this.array.constructor.name,
                      stride: this.stride
                    }
                  );
                }
              }
            ]
          );
        })(),
        Zg = new Kd(),
        Jg = (function () {
          function e(t, n, i) {
            var r =
              arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
            gh(this, e),
              (this.isInterleavedBufferAttribute = !0),
              (this.name = ""),
              (this.data = t),
              (this.itemSize = n),
              (this.offset = i),
              (this.normalized = r);
          }
          return yh(e, [
            {
              key: "count",
              get: function () {
                return this.data.count;
              }
            },
            {
              key: "array",
              get: function () {
                return this.data.array;
              }
            },
            {
              key: "needsUpdate",
              set: function (e) {
                this.data.needsUpdate = e;
              }
            },
            {
              key: "applyMatrix4",
              value: function (e) {
                for (var t = 0, n = this.data.count; t < n; t++)
                  Zg.fromBufferAttribute(this, t),
                    Zg.applyMatrix4(e),
                    this.setXYZ(t, Zg.x, Zg.y, Zg.z);
                return this;
              }
            },
            {
              key: "applyNormalMatrix",
              value: function (e) {
                for (var t = 0, n = this.count; t < n; t++)
                  Zg.fromBufferAttribute(this, t),
                    Zg.applyNormalMatrix(e),
                    this.setXYZ(t, Zg.x, Zg.y, Zg.z);
                return this;
              }
            },
            {
              key: "transformDirection",
              value: function (e) {
                for (var t = 0, n = this.count; t < n; t++)
                  Zg.fromBufferAttribute(this, t),
                    Zg.transformDirection(e),
                    this.setXYZ(t, Zg.x, Zg.y, Zg.z);
                return this;
              }
            },
            {
              key: "setX",
              value: function (e, t) {
                return (
                  this.normalized && (t = wd(t, this.array)),
                  (this.data.array[e * this.data.stride + this.offset] = t),
                  this
                );
              }
            },
            {
              key: "setY",
              value: function (e, t) {
                return (
                  this.normalized && (t = wd(t, this.array)),
                  (this.data.array[e * this.data.stride + this.offset + 1] = t),
                  this
                );
              }
            },
            {
              key: "setZ",
              value: function (e, t) {
                return (
                  this.normalized && (t = wd(t, this.array)),
                  (this.data.array[e * this.data.stride + this.offset + 2] = t),
                  this
                );
              }
            },
            {
              key: "setW",
              value: function (e, t) {
                return (
                  this.normalized && (t = wd(t, this.array)),
                  (this.data.array[e * this.data.stride + this.offset + 3] = t),
                  this
                );
              }
            },
            {
              key: "getX",
              value: function (e) {
                var t = this.data.array[e * this.data.stride + this.offset];
                return this.normalized && (t = xd(t, this.array)), t;
              }
            },
            {
              key: "getY",
              value: function (e) {
                var t = this.data.array[e * this.data.stride + this.offset + 1];
                return this.normalized && (t = xd(t, this.array)), t;
              }
            },
            {
              key: "getZ",
              value: function (e) {
                var t = this.data.array[e * this.data.stride + this.offset + 2];
                return this.normalized && (t = xd(t, this.array)), t;
              }
            },
            {
              key: "getW",
              value: function (e) {
                var t = this.data.array[e * this.data.stride + this.offset + 3];
                return this.normalized && (t = xd(t, this.array)), t;
              }
            },
            {
              key: "setXY",
              value: function (e, t, n) {
                return (
                  (e = e * this.data.stride + this.offset),
                  this.normalized &&
                    ((t = wd(t, this.array)), (n = wd(n, this.array))),
                  (this.data.array[e + 0] = t),
                  (this.data.array[e + 1] = n),
                  this
                );
              }
            },
            {
              key: "setXYZ",
              value: function (e, t, n, i) {
                return (
                  (e = e * this.data.stride + this.offset),
                  this.normalized &&
                    ((t = wd(t, this.array)),
                    (n = wd(n, this.array)),
                    (i = wd(i, this.array))),
                  (this.data.array[e + 0] = t),
                  (this.data.array[e + 1] = n),
                  (this.data.array[e + 2] = i),
                  this
                );
              }
            },
            {
              key: "setXYZW",
              value: function (e, t, n, i, r) {
                return (
                  (e = e * this.data.stride + this.offset),
                  this.normalized &&
                    ((t = wd(t, this.array)),
                    (n = wd(n, this.array)),
                    (i = wd(i, this.array)),
                    (r = wd(r, this.array))),
                  (this.data.array[e + 0] = t),
                  (this.data.array[e + 1] = n),
                  (this.data.array[e + 2] = i),
                  (this.data.array[e + 3] = r),
                  this
                );
              }
            },
            {
              key: "clone",
              value: function (t) {
                if (void 0 === t) {
                  console.log(
                    "THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data."
                  );
                  for (var n = [], i = 0; i < this.count; i++)
                    for (
                      var r = i * this.data.stride + this.offset, a = 0;
                      a < this.itemSize;
                      a++
                    )
                      n.push(this.data.array[r + a]);
                  return new yf(
                    new this.array.constructor(n),
                    this.itemSize,
                    this.normalized
                  );
                }
                return (
                  void 0 === t.interleavedBuffers &&
                    (t.interleavedBuffers = {}),
                  void 0 === t.interleavedBuffers[this.data.uuid] &&
                    (t.interleavedBuffers[this.data.uuid] = this.data.clone(t)),
                  new e(
                    t.interleavedBuffers[this.data.uuid],
                    this.itemSize,
                    this.offset,
                    this.normalized
                  )
                );
              }
            },
            {
              key: "toJSON",
              value: function (e) {
                if (void 0 === e) {
                  console.log(
                    "THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data."
                  );
                  for (var t = [], n = 0; n < this.count; n++)
                    for (
                      var i = n * this.data.stride + this.offset, r = 0;
                      r < this.itemSize;
                      r++
                    )
                      t.push(this.data.array[i + r]);
                  return {
                    itemSize: this.itemSize,
                    type: this.array.constructor.name,
                    array: t,
                    normalized: this.normalized
                  };
                }
                return (
                  void 0 === e.interleavedBuffers &&
                    (e.interleavedBuffers = {}),
                  void 0 === e.interleavedBuffers[this.data.uuid] &&
                    (e.interleavedBuffers[this.data.uuid] =
                      this.data.toJSON(e)),
                  {
                    isInterleavedBufferAttribute: !0,
                    itemSize: this.itemSize,
                    data: this.data.uuid,
                    offset: this.offset,
                    normalized: this.normalized
                  }
                );
              }
            }
          ]);
        })(),
        Qg = new Kd(),
        $g = new Hd(),
        e_ = new Hd(),
        t_ = new Kd(),
        n_ = new Sp(),
        i_ = new Kd(),
        r_ = (function (e) {
          function t(e, n) {
            var i;
            return (
              gh(this, t),
              ((i = uh(this, t, [e, n])).isSkinnedMesh = !0),
              (i.type = "SkinnedMesh"),
              (i.bindMode = "attached"),
              (i.bindMatrix = new Sp()),
              (i.bindMatrixInverse = new Sp()),
              (i.boundingBox = null),
              (i.boundingSphere = null),
              i
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "computeBoundingBox",
                value: function () {
                  var e = this.geometry;
                  null === this.boundingBox && (this.boundingBox = new Zd()),
                    this.boundingBox.makeEmpty();
                  for (
                    var t = e.getAttribute("position"), n = 0;
                    n < t.count;
                    n++
                  )
                    i_.fromBufferAttribute(t, n),
                      this.applyBoneTransform(n, i_),
                      this.boundingBox.expandByPoint(i_);
                }
              },
              {
                key: "computeBoundingSphere",
                value: function () {
                  var e = this.geometry;
                  null === this.boundingSphere &&
                    (this.boundingSphere = new fp()),
                    this.boundingSphere.makeEmpty();
                  for (
                    var t = e.getAttribute("position"), n = 0;
                    n < t.count;
                    n++
                  )
                    i_.fromBufferAttribute(t, n),
                      this.applyBoneTransform(n, i_),
                      this.boundingSphere.expandByPoint(i_);
                }
              },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    (this.bindMode = e.bindMode),
                    this.bindMatrix.copy(e.bindMatrix),
                    this.bindMatrixInverse.copy(e.bindMatrixInverse),
                    (this.skeleton = e.skeleton),
                    this
                  );
                }
              },
              {
                key: "bind",
                value: function (e, t) {
                  (this.skeleton = e),
                    void 0 === t &&
                      (this.updateMatrixWorld(!0),
                      this.skeleton.calculateInverses(),
                      (t = this.matrixWorld)),
                    this.bindMatrix.copy(t),
                    this.bindMatrixInverse.copy(t).invert();
                }
              },
              {
                key: "pose",
                value: function () {
                  this.skeleton.pose();
                }
              },
              {
                key: "normalizeSkinWeights",
                value: function () {
                  for (
                    var e = new Hd(),
                      t = this.geometry.attributes.skinWeight,
                      n = 0,
                      i = t.count;
                    n < i;
                    n++
                  ) {
                    e.fromBufferAttribute(t, n);
                    var r = 1 / e.manhattanLength();
                    r !== 1 / 0 ? e.multiplyScalar(r) : e.set(1, 0, 0, 0),
                      t.setXYZW(n, e.x, e.y, e.z, e.w);
                  }
                }
              },
              {
                key: "updateMatrixWorld",
                value: function (e) {
                  sh(t, "updateMatrixWorld", this, 3)([e]),
                    "attached" === this.bindMode
                      ? this.bindMatrixInverse.copy(this.matrixWorld).invert()
                      : "detached" === this.bindMode
                      ? this.bindMatrixInverse.copy(this.bindMatrix).invert()
                      : console.warn(
                          "THREE.SkinnedMesh: Unrecognized bindMode: " +
                            this.bindMode
                        );
                }
              },
              {
                key: "applyBoneTransform",
                value: function (e, t) {
                  var n = this.skeleton,
                    i = this.geometry;
                  $g.fromBufferAttribute(i.attributes.skinIndex, e),
                    e_.fromBufferAttribute(i.attributes.skinWeight, e),
                    Qg.copy(t).applyMatrix4(this.bindMatrix),
                    t.set(0, 0, 0);
                  for (var r = 0; r < 4; r++) {
                    var a = e_.getComponent(r);
                    if (0 !== a) {
                      var o = $g.getComponent(r);
                      n_.multiplyMatrices(
                        n.bones[o].matrixWorld,
                        n.boneInverses[o]
                      ),
                        t.addScaledVector(t_.copy(Qg).applyMatrix4(n_), a);
                    }
                  }
                  return t.applyMatrix4(this.bindMatrixInverse);
                }
              },
              {
                key: "boneTransform",
                value: function (e, t) {
                  return (
                    console.warn(
                      "THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."
                    ),
                    this.applyBoneTransform(e, t)
                  );
                }
              }
            ])
          );
        })(Xf),
        a_ = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t), ((e = uh(this, t)).isBone = !0), (e.type = "Bone"), e
            );
          }
          return ph(t, e), yh(t);
        })(Xp),
        o_ = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : null,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a = arguments.length > 3 ? arguments[3] : void 0,
              o = arguments.length > 4 ? arguments[4] : void 0,
              s = arguments.length > 5 ? arguments[5] : void 0,
              l = arguments.length > 6 ? arguments[6] : void 0,
              u = arguments.length > 7 ? arguments[7] : void 0,
              c =
                arguments.length > 8 && void 0 !== arguments[8]
                  ? arguments[8]
                  : Ph,
              h =
                arguments.length > 9 && void 0 !== arguments[9]
                  ? arguments[9]
                  : Ph,
              d = arguments.length > 10 ? arguments[10] : void 0,
              p = arguments.length > 11 ? arguments[11] : void 0;
            return (
              gh(this, t),
              ((e = uh(this, t, [
                null,
                s,
                l,
                u,
                c,
                h,
                a,
                o,
                d,
                p
              ])).isDataTexture = !0),
              (e.image = { data: n, width: i, height: r }),
              (e.generateMipmaps = !1),
              (e.flipY = !1),
              (e.unpackAlignment = 1),
              e
            );
          }
          return ph(t, e), yh(t);
        })(Vd),
        s_ = new Sp(),
        l_ = new Sp(),
        u_ = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : [],
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : [];
            gh(this, e),
              (this.uuid = fd()),
              (this.bones = t.slice(0)),
              (this.boneInverses = n),
              (this.boneMatrices = null),
              (this.boneTexture = null),
              (this.boneTextureSize = 0),
              (this.frame = -1),
              this.init();
          }
          return yh(e, [
            {
              key: "init",
              value: function () {
                var e = this.bones,
                  t = this.boneInverses;
                if (
                  ((this.boneMatrices = new Float32Array(16 * e.length)),
                  0 === t.length)
                )
                  this.calculateInverses();
                else if (e.length !== t.length) {
                  console.warn(
                    "THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."
                  ),
                    (this.boneInverses = []);
                  for (var n = 0, i = this.bones.length; n < i; n++)
                    this.boneInverses.push(new Sp());
                }
              }
            },
            {
              key: "calculateInverses",
              value: function () {
                this.boneInverses.length = 0;
                for (var e = 0, t = this.bones.length; e < t; e++) {
                  var n = new Sp();
                  this.bones[e] && n.copy(this.bones[e].matrixWorld).invert(),
                    this.boneInverses.push(n);
                }
              }
            },
            {
              key: "pose",
              value: function () {
                for (var e = 0, t = this.bones.length; e < t; e++) {
                  var n = this.bones[e];
                  n && n.matrixWorld.copy(this.boneInverses[e]).invert();
                }
                for (var i = 0, r = this.bones.length; i < r; i++) {
                  var a = this.bones[i];
                  a &&
                    (a.parent && a.parent.isBone
                      ? (a.matrix.copy(a.parent.matrixWorld).invert(),
                        a.matrix.multiply(a.matrixWorld))
                      : a.matrix.copy(a.matrixWorld),
                    a.matrix.decompose(a.position, a.quaternion, a.scale));
                }
              }
            },
            {
              key: "update",
              value: function () {
                for (
                  var e = this.bones,
                    t = this.boneInverses,
                    n = this.boneMatrices,
                    i = this.boneTexture,
                    r = 0,
                    a = e.length;
                  r < a;
                  r++
                ) {
                  var o = e[r] ? e[r].matrixWorld : l_;
                  s_.multiplyMatrices(o, t[r]), s_.toArray(n, 16 * r);
                }
                null !== i && (i.needsUpdate = !0);
              }
            },
            {
              key: "clone",
              value: function () {
                return new e(this.bones, this.boneInverses);
              }
            },
            {
              key: "computeBoneTexture",
              value: function () {
                var e = Math.sqrt(4 * this.bones.length);
                (e = yd(e)), (e = Math.max(e, 4));
                var t = new Float32Array(e * e * 4);
                t.set(this.boneMatrices);
                var n = new o_(t, e, e, Vh, Uh);
                return (
                  (n.needsUpdate = !0),
                  (this.boneMatrices = t),
                  (this.boneTexture = n),
                  (this.boneTextureSize = e),
                  this
                );
              }
            },
            {
              key: "getBoneByName",
              value: function (e) {
                for (var t = 0, n = this.bones.length; t < n; t++) {
                  var i = this.bones[t];
                  if (i.name === e) return i;
                }
              }
            },
            {
              key: "dispose",
              value: function () {
                null !== this.boneTexture &&
                  (this.boneTexture.dispose(), (this.boneTexture = null));
              }
            },
            {
              key: "fromJSON",
              value: function (e, t) {
                this.uuid = e.uuid;
                for (var n = 0, i = e.bones.length; n < i; n++) {
                  var r = e.bones[n],
                    a = t[r];
                  void 0 === a &&
                    (console.warn(
                      "THREE.Skeleton: No bone found with UUID:",
                      r
                    ),
                    (a = new a_())),
                    this.bones.push(a),
                    this.boneInverses.push(
                      new Sp().fromArray(e.boneInverses[n])
                    );
                }
                return this.init(), this;
              }
            },
            {
              key: "toJSON",
              value: function () {
                var e = {
                  metadata: {
                    version: 4.5,
                    type: "Skeleton",
                    generator: "Skeleton.toJSON"
                  },
                  bones: [],
                  boneInverses: []
                };
                e.uuid = this.uuid;
                for (
                  var t = this.bones,
                    n = this.boneInverses,
                    i = 0,
                    r = t.length;
                  i < r;
                  i++
                ) {
                  var a = t[i];
                  e.bones.push(a.uuid);
                  var o = n[i];
                  e.boneInverses.push(o.toArray());
                }
                return e;
              }
            }
          ]);
        })(),
        c_ = (function (e) {
          function t(e, n, i) {
            var r,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            return (
              gh(this, t),
              ((r = uh(this, t, [e, n, i])).isInstancedBufferAttribute = !0),
              (r.meshPerAttribute = a),
              r
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    (this.meshPerAttribute = e.meshPerAttribute),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = sh(t, "toJSON", this, 3)([]);
                  return (
                    (e.meshPerAttribute = this.meshPerAttribute),
                    (e.isInstancedBufferAttribute = !0),
                    e
                  );
                }
              }
            ])
          );
        })(yf),
        h_ = new Sp(),
        d_ = new Sp(),
        p_ = [],
        f_ = new Zd(),
        v_ = new Sp(),
        m_ = new Xf(),
        g_ = new fp(),
        __ = (function (e) {
          function t(e, n, i) {
            var r;
            gh(this, t),
              ((r = uh(this, t, [e, n])).isInstancedMesh = !0),
              (r.instanceMatrix = new c_(new Float32Array(16 * i), 16)),
              (r.instanceColor = null),
              (r.count = i),
              (r.boundingBox = null),
              (r.boundingSphere = null);
            for (var a = 0; a < i; a++) r.setMatrixAt(a, v_);
            return r;
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "computeBoundingBox",
                value: function () {
                  var e = this.geometry,
                    t = this.count;
                  null === this.boundingBox && (this.boundingBox = new Zd()),
                    null === e.boundingBox && e.computeBoundingBox(),
                    this.boundingBox.makeEmpty();
                  for (var n = 0; n < t; n++)
                    this.getMatrixAt(n, h_),
                      f_.copy(e.boundingBox).applyMatrix4(h_),
                      this.boundingBox.union(f_);
                }
              },
              {
                key: "computeBoundingSphere",
                value: function () {
                  var e = this.geometry,
                    t = this.count;
                  null === this.boundingSphere &&
                    (this.boundingSphere = new fp()),
                    null === e.boundingSphere && e.computeBoundingSphere(),
                    this.boundingSphere.makeEmpty();
                  for (var n = 0; n < t; n++)
                    this.getMatrixAt(n, h_),
                      g_.copy(e.boundingSphere).applyMatrix4(h_),
                      this.boundingSphere.union(g_);
                }
              },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    this.instanceMatrix.copy(e.instanceMatrix),
                    null !== e.instanceColor &&
                      (this.instanceColor = e.instanceColor.clone()),
                    (this.count = e.count),
                    this
                  );
                }
              },
              {
                key: "getColorAt",
                value: function (e, t) {
                  t.fromArray(this.instanceColor.array, 3 * e);
                }
              },
              {
                key: "getMatrixAt",
                value: function (e, t) {
                  t.fromArray(this.instanceMatrix.array, 16 * e);
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.matrixWorld,
                    i = this.count;
                  if (
                    ((m_.geometry = this.geometry),
                    (m_.material = this.material),
                    void 0 !== m_.material &&
                      (null === this.boundingSphere &&
                        this.computeBoundingSphere(),
                      g_.copy(this.boundingSphere),
                      g_.applyMatrix4(n),
                      !1 !== e.ray.intersectsSphere(g_)))
                  )
                    for (var r = 0; r < i; r++) {
                      this.getMatrixAt(r, h_),
                        d_.multiplyMatrices(n, h_),
                        (m_.matrixWorld = d_),
                        m_.raycast(e, p_);
                      for (var a = 0, o = p_.length; a < o; a++) {
                        var s = p_[a];
                        (s.instanceId = r), (s.object = this), t.push(s);
                      }
                      p_.length = 0;
                    }
                }
              },
              {
                key: "setColorAt",
                value: function (e, t) {
                  null === this.instanceColor &&
                    (this.instanceColor = new c_(
                      new Float32Array(3 * this.instanceMatrix.count),
                      3
                    )),
                    t.toArray(this.instanceColor.array, 3 * e);
                }
              },
              {
                key: "setMatrixAt",
                value: function (e, t) {
                  t.toArray(this.instanceMatrix.array, 16 * e);
                }
              },
              { key: "updateMorphTargets", value: function () {} },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              }
            ])
          );
        })(Xf),
        y_ = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t)).isLineBasicMaterial = !0),
              (n.type = "LineBasicMaterial"),
              (n.color = new ff(16777215)),
              (n.map = null),
              (n.linewidth = 1),
              (n.linecap = "round"),
              (n.linejoin = "round"),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    this.color.copy(e.color),
                    (this.map = e.map),
                    (this.linewidth = e.linewidth),
                    (this.linecap = e.linecap),
                    (this.linejoin = e.linejoin),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ])
          );
        })(uf),
        b_ = new Kd(),
        x_ = new Kd(),
        w_ = new Sp(),
        S_ = new wp(),
        M_ = new fp(),
        T_ = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new Af(),
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new y_();
            return (
              gh(this, t),
              ((e = uh(this, t)).isLine = !0),
              (e.type = "Line"),
              (e.geometry = n),
              (e.material = i),
              e.updateMorphTargets(),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    (this.material = e.material),
                    (this.geometry = e.geometry),
                    this
                  );
                }
              },
              {
                key: "computeLineDistances",
                value: function () {
                  var e = this.geometry;
                  if (null === e.index) {
                    for (
                      var t = e.attributes.position,
                        n = [0],
                        i = 1,
                        r = t.count;
                      i < r;
                      i++
                    )
                      b_.fromBufferAttribute(t, i - 1),
                        x_.fromBufferAttribute(t, i),
                        (n[i] = n[i - 1]),
                        (n[i] += b_.distanceTo(x_));
                    e.setAttribute("lineDistance", new wf(n, 1));
                  } else
                    console.warn(
                      "THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
                    );
                  return this;
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.geometry,
                    i = this.matrixWorld,
                    r = e.params.Line.threshold,
                    a = n.drawRange;
                  if (
                    (null === n.boundingSphere && n.computeBoundingSphere(),
                    M_.copy(n.boundingSphere),
                    M_.applyMatrix4(i),
                    (M_.radius += r),
                    !1 !== e.ray.intersectsSphere(M_))
                  ) {
                    w_.copy(i).invert(), S_.copy(e.ray).applyMatrix4(w_);
                    var o =
                        r / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                      s = o * o,
                      l = new Kd(),
                      u = new Kd(),
                      c = new Kd(),
                      h = new Kd(),
                      d = this.isLineSegments ? 2 : 1,
                      p = n.index,
                      f = n.attributes.position;
                    if (null !== p)
                      for (
                        var v = Math.max(0, a.start),
                          m = Math.min(p.count, a.start + a.count) - 1;
                        v < m;
                        v += d
                      ) {
                        var g = p.getX(v),
                          _ = p.getX(v + 1);
                        if (
                          (l.fromBufferAttribute(f, g),
                          u.fromBufferAttribute(f, _),
                          !(S_.distanceSqToSegment(l, u, h, c) > s))
                        ) {
                          h.applyMatrix4(this.matrixWorld);
                          var y = e.ray.origin.distanceTo(h);
                          y < e.near ||
                            y > e.far ||
                            t.push({
                              distance: y,
                              point: c.clone().applyMatrix4(this.matrixWorld),
                              index: v,
                              face: null,
                              faceIndex: null,
                              object: this
                            });
                        }
                      }
                    else
                      for (
                        var b = Math.max(0, a.start),
                          x = Math.min(f.count, a.start + a.count) - 1;
                        b < x;
                        b += d
                      )
                        if (
                          (l.fromBufferAttribute(f, b),
                          u.fromBufferAttribute(f, b + 1),
                          !(S_.distanceSqToSegment(l, u, h, c) > s))
                        ) {
                          h.applyMatrix4(this.matrixWorld);
                          var w = e.ray.origin.distanceTo(h);
                          w < e.near ||
                            w > e.far ||
                            t.push({
                              distance: w,
                              point: c.clone().applyMatrix4(this.matrixWorld),
                              index: b,
                              face: null,
                              faceIndex: null,
                              object: this
                            });
                        }
                  }
                }
              },
              {
                key: "updateMorphTargets",
                value: function () {
                  var e = this.geometry.morphAttributes,
                    t = Object.keys(e);
                  if (t.length > 0) {
                    var n = e[t[0]];
                    if (void 0 !== n) {
                      (this.morphTargetInfluences = []),
                        (this.morphTargetDictionary = {});
                      for (var i = 0, r = n.length; i < r; i++) {
                        var a = n[i].name || String(i);
                        this.morphTargetInfluences.push(0),
                          (this.morphTargetDictionary[a] = i);
                      }
                    }
                  }
                }
              }
            ])
          );
        })(Xp),
        k_ = new Kd(),
        E_ = new Kd(),
        C_ = (function (e) {
          function t(e, n) {
            var i;
            return (
              gh(this, t),
              ((i = uh(this, t, [e, n])).isLineSegments = !0),
              (i.type = "LineSegments"),
              i
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "computeLineDistances",
                value: function () {
                  var e = this.geometry;
                  if (null === e.index) {
                    for (
                      var t = e.attributes.position, n = [], i = 0, r = t.count;
                      i < r;
                      i += 2
                    )
                      k_.fromBufferAttribute(t, i),
                        E_.fromBufferAttribute(t, i + 1),
                        (n[i] = 0 === i ? 0 : n[i - 1]),
                        (n[i + 1] = n[i] + k_.distanceTo(E_));
                    e.setAttribute("lineDistance", new wf(n, 1));
                  } else
                    console.warn(
                      "THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
                    );
                  return this;
                }
              }
            ])
          );
        })(T_),
        D_ = (function (e) {
          function t(e, n) {
            var i;
            return (
              gh(this, t),
              ((i = uh(this, t, [e, n])).isLineLoop = !0),
              (i.type = "LineLoop"),
              i
            );
          }
          return ph(t, e), yh(t);
        })(T_),
        A_ = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t)).isPointsMaterial = !0),
              (n.type = "PointsMaterial"),
              (n.color = new ff(16777215)),
              (n.map = null),
              (n.alphaMap = null),
              (n.size = 1),
              (n.sizeAttenuation = !0),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    this.color.copy(e.color),
                    (this.map = e.map),
                    (this.alphaMap = e.alphaMap),
                    (this.size = e.size),
                    (this.sizeAttenuation = e.sizeAttenuation),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ])
          );
        })(uf),
        P_ = new Sp(),
        L_ = new wp(),
        R_ = new fp(),
        I_ = new Kd(),
        O_ = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new Af(),
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new A_();
            return (
              gh(this, t),
              ((e = uh(this, t)).isPoints = !0),
              (e.type = "Points"),
              (e.geometry = n),
              (e.material = i),
              e.updateMorphTargets(),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    (this.material = e.material),
                    (this.geometry = e.geometry),
                    this
                  );
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.geometry,
                    i = this.matrixWorld,
                    r = e.params.Points.threshold,
                    a = n.drawRange;
                  if (
                    (null === n.boundingSphere && n.computeBoundingSphere(),
                    R_.copy(n.boundingSphere),
                    R_.applyMatrix4(i),
                    (R_.radius += r),
                    !1 !== e.ray.intersectsSphere(R_))
                  ) {
                    P_.copy(i).invert(), L_.copy(e.ray).applyMatrix4(P_);
                    var o =
                        r / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                      s = o * o,
                      l = n.index,
                      u = n.attributes.position;
                    if (null !== l)
                      for (
                        var c = Math.max(0, a.start),
                          h = Math.min(l.count, a.start + a.count);
                        c < h;
                        c++
                      ) {
                        var d = l.getX(c);
                        I_.fromBufferAttribute(u, d),
                          N_(I_, d, s, i, e, t, this);
                      }
                    else
                      for (
                        var p = Math.max(0, a.start),
                          f = Math.min(u.count, a.start + a.count);
                        p < f;
                        p++
                      )
                        I_.fromBufferAttribute(u, p),
                          N_(I_, p, s, i, e, t, this);
                  }
                }
              },
              {
                key: "updateMorphTargets",
                value: function () {
                  var e = this.geometry.morphAttributes,
                    t = Object.keys(e);
                  if (t.length > 0) {
                    var n = e[t[0]];
                    if (void 0 !== n) {
                      (this.morphTargetInfluences = []),
                        (this.morphTargetDictionary = {});
                      for (var i = 0, r = n.length; i < r; i++) {
                        var a = n[i].name || String(i);
                        this.morphTargetInfluences.push(0),
                          (this.morphTargetDictionary[a] = i);
                      }
                    }
                  }
                }
              }
            ])
          );
        })(Xp);
      function N_(e, t, n, i, r, a, o) {
        var s = L_.distanceSqToPoint(e);
        if (s < n) {
          var l = new Kd();
          L_.closestPointToPoint(e, l), l.applyMatrix4(i);
          var u = r.ray.origin.distanceTo(l);
          if (u < r.near || u > r.far) return;
          a.push({
            distance: u,
            distanceToRay: Math.sqrt(s),
            point: l,
            index: t,
            face: null,
            object: o
          });
        }
      }
      var F_ = (function (e) {
          function t(e, n, i, r, a, o, s, l, u) {
            var c;
            gh(this, t),
              ((c = uh(this, t, [e, n, i, r, a, o, s, l, u])).isVideoTexture =
                !0),
              (c.minFilter = void 0 !== o ? o : Ih),
              (c.magFilter = void 0 !== a ? a : Ih),
              (c.generateMipmaps = !1);
            var h = c;
            return (
              "requestVideoFrameCallback" in e &&
                e.requestVideoFrameCallback(function t() {
                  (h.needsUpdate = !0), e.requestVideoFrameCallback(t);
                }),
              c
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.image).copy(this);
                }
              },
              {
                key: "update",
                value: function () {
                  var e = this.image;
                  "requestVideoFrameCallback" in e == 0 &&
                    e.readyState >= e.HAVE_CURRENT_DATA &&
                    (this.needsUpdate = !0);
                }
              }
            ])
          );
        })(Vd),
        U_ = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t, [e])).isRawShaderMaterial = !0),
              (n.type = "RawShaderMaterial"),
              n
            );
          }
          return ph(t, e), yh(t);
        })(tv),
        B_ = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t)).isMeshStandardMaterial = !0),
              (n.defines = { STANDARD: "" }),
              (n.type = "MeshStandardMaterial"),
              (n.color = new ff(16777215)),
              (n.roughness = 1),
              (n.metalness = 0),
              (n.map = null),
              (n.lightMap = null),
              (n.lightMapIntensity = 1),
              (n.aoMap = null),
              (n.aoMapIntensity = 1),
              (n.emissive = new ff(0)),
              (n.emissiveIntensity = 1),
              (n.emissiveMap = null),
              (n.bumpMap = null),
              (n.bumpScale = 1),
              (n.normalMap = null),
              (n.normalMapType = 0),
              (n.normalScale = new Md(1, 1)),
              (n.displacementMap = null),
              (n.displacementScale = 1),
              (n.displacementBias = 0),
              (n.roughnessMap = null),
              (n.metalnessMap = null),
              (n.alphaMap = null),
              (n.envMap = null),
              (n.envMapIntensity = 1),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              (n.wireframeLinecap = "round"),
              (n.wireframeLinejoin = "round"),
              (n.flatShading = !1),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    (this.defines = { STANDARD: "" }),
                    this.color.copy(e.color),
                    (this.roughness = e.roughness),
                    (this.metalness = e.metalness),
                    (this.map = e.map),
                    (this.lightMap = e.lightMap),
                    (this.lightMapIntensity = e.lightMapIntensity),
                    (this.aoMap = e.aoMap),
                    (this.aoMapIntensity = e.aoMapIntensity),
                    this.emissive.copy(e.emissive),
                    (this.emissiveMap = e.emissiveMap),
                    (this.emissiveIntensity = e.emissiveIntensity),
                    (this.bumpMap = e.bumpMap),
                    (this.bumpScale = e.bumpScale),
                    (this.normalMap = e.normalMap),
                    (this.normalMapType = e.normalMapType),
                    this.normalScale.copy(e.normalScale),
                    (this.displacementMap = e.displacementMap),
                    (this.displacementScale = e.displacementScale),
                    (this.displacementBias = e.displacementBias),
                    (this.roughnessMap = e.roughnessMap),
                    (this.metalnessMap = e.metalnessMap),
                    (this.alphaMap = e.alphaMap),
                    (this.envMap = e.envMap),
                    (this.envMapIntensity = e.envMapIntensity),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    (this.wireframeLinecap = e.wireframeLinecap),
                    (this.wireframeLinejoin = e.wireframeLinejoin),
                    (this.flatShading = e.flatShading),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ])
          );
        })(uf),
        z_ = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t)).isMeshPhysicalMaterial = !0),
              (n.defines = { STANDARD: "", PHYSICAL: "" }),
              (n.type = "MeshPhysicalMaterial"),
              (n.clearcoatMap = null),
              (n.clearcoatRoughness = 0),
              (n.clearcoatRoughnessMap = null),
              (n.clearcoatNormalScale = new Md(1, 1)),
              (n.clearcoatNormalMap = null),
              (n.ior = 1.5),
              Object.defineProperty(ch(n), "reflectivity", {
                get: function () {
                  return vd((2.5 * (this.ior - 1)) / (this.ior + 1), 0, 1);
                },
                set: function (e) {
                  this.ior = (1 + 0.4 * e) / (1 - 0.4 * e);
                }
              }),
              (n.iridescenceMap = null),
              (n.iridescenceIOR = 1.3),
              (n.iridescenceThicknessRange = [100, 400]),
              (n.iridescenceThicknessMap = null),
              (n.sheenColor = new ff(0)),
              (n.sheenColorMap = null),
              (n.sheenRoughness = 1),
              (n.sheenRoughnessMap = null),
              (n.transmissionMap = null),
              (n.thickness = 0),
              (n.thicknessMap = null),
              (n.attenuationDistance = 1 / 0),
              (n.attenuationColor = new ff(1, 1, 1)),
              (n.specularIntensity = 1),
              (n.specularIntensityMap = null),
              (n.specularColor = new ff(1, 1, 1)),
              (n.specularColorMap = null),
              (n._sheen = 0),
              (n._clearcoat = 0),
              (n._iridescence = 0),
              (n._transmission = 0),
              n.setValues(e),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "sheen",
                get: function () {
                  return this._sheen;
                },
                set: function (e) {
                  this._sheen > 0 != e > 0 && this.version++, (this._sheen = e);
                }
              },
              {
                key: "clearcoat",
                get: function () {
                  return this._clearcoat;
                },
                set: function (e) {
                  this._clearcoat > 0 != e > 0 && this.version++,
                    (this._clearcoat = e);
                }
              },
              {
                key: "iridescence",
                get: function () {
                  return this._iridescence;
                },
                set: function (e) {
                  this._iridescence > 0 != e > 0 && this.version++,
                    (this._iridescence = e);
                }
              },
              {
                key: "transmission",
                get: function () {
                  return this._transmission;
                },
                set: function (e) {
                  this._transmission > 0 != e > 0 && this.version++,
                    (this._transmission = e);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    (this.defines = { STANDARD: "", PHYSICAL: "" }),
                    (this.clearcoat = e.clearcoat),
                    (this.clearcoatMap = e.clearcoatMap),
                    (this.clearcoatRoughness = e.clearcoatRoughness),
                    (this.clearcoatRoughnessMap = e.clearcoatRoughnessMap),
                    (this.clearcoatNormalMap = e.clearcoatNormalMap),
                    this.clearcoatNormalScale.copy(e.clearcoatNormalScale),
                    (this.ior = e.ior),
                    (this.iridescence = e.iridescence),
                    (this.iridescenceMap = e.iridescenceMap),
                    (this.iridescenceIOR = e.iridescenceIOR),
                    (this.iridescenceThicknessRange =
                      (function (e) {
                        if (Array.isArray(e)) return oh(e);
                      })((n = e.iridescenceThicknessRange)) ||
                      (function (e) {
                        if (
                          ("undefined" != typeof Symbol &&
                            null != e[Symbol.iterator]) ||
                          null != e["@@iterator"]
                        )
                          return Array.from(e);
                      })(n) ||
                      ah(n) ||
                      (function () {
                        throw new TypeError(
                          "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                      })()),
                    (this.iridescenceThicknessMap = e.iridescenceThicknessMap),
                    (this.sheen = e.sheen),
                    this.sheenColor.copy(e.sheenColor),
                    (this.sheenColorMap = e.sheenColorMap),
                    (this.sheenRoughness = e.sheenRoughness),
                    (this.sheenRoughnessMap = e.sheenRoughnessMap),
                    (this.transmission = e.transmission),
                    (this.transmissionMap = e.transmissionMap),
                    (this.thickness = e.thickness),
                    (this.thicknessMap = e.thicknessMap),
                    (this.attenuationDistance = e.attenuationDistance),
                    this.attenuationColor.copy(e.attenuationColor),
                    (this.specularIntensity = e.specularIntensity),
                    (this.specularIntensityMap = e.specularIntensityMap),
                    this.specularColor.copy(e.specularColor),
                    (this.specularColorMap = e.specularColorMap),
                    this
                  );
                  var n;
                }
              }
            ])
          );
        })(B_);
      function V_(e, t, n) {
        return G_(e)
          ? new e.constructor(e.subarray(t, void 0 !== n ? n : e.length))
          : e.slice(t, n);
      }
      function H_(e, t, n) {
        return !e || (!n && e.constructor === t)
          ? e
          : "number" == typeof t.BYTES_PER_ELEMENT
          ? new t(e)
          : Array.prototype.slice.call(e);
      }
      function G_(e) {
        return ArrayBuffer.isView(e) && !(e instanceof DataView);
      }
      function W_(e) {
        for (var t = e.length, n = new Array(t), i = 0; i !== t; ++i) n[i] = i;
        return (
          n.sort(function (t, n) {
            return e[t] - e[n];
          }),
          n
        );
      }
      function j_(e, t, n) {
        for (
          var i = e.length, r = new e.constructor(i), a = 0, o = 0;
          o !== i;
          ++a
        )
          for (var s = n[a] * t, l = 0; l !== t; ++l) r[o++] = e[s + l];
        return r;
      }
      function q_(e, t, n, i) {
        for (var r = 1, a = e[0]; void 0 !== a && void 0 === a[i]; ) a = e[r++];
        if (void 0 !== a) {
          var o = a[i];
          if (void 0 !== o)
            if (Array.isArray(o))
              do {
                void 0 !== (o = a[i]) && (t.push(a.time), n.push.apply(n, o)),
                  (a = e[r++]);
              } while (void 0 !== a);
            else if (void 0 !== o.toArray)
              do {
                void 0 !== (o = a[i]) &&
                  (t.push(a.time), o.toArray(n, n.length)),
                  (a = e[r++]);
              } while (void 0 !== a);
            else
              do {
                void 0 !== (o = a[i]) && (t.push(a.time), n.push(o)),
                  (a = e[r++]);
              } while (void 0 !== a);
        }
      }
      var K_ = (function () {
          return yh(
            function e(t, n, i, r) {
              gh(this, e),
                (this.parameterPositions = t),
                (this._cachedIndex = 0),
                (this.resultBuffer = void 0 !== r ? r : new n.constructor(i)),
                (this.sampleValues = n),
                (this.valueSize = i),
                (this.settings = null),
                (this.DefaultSettings_ = {});
            },
            [
              {
                key: "evaluate",
                value: function (e) {
                  var t = this.parameterPositions,
                    n = this._cachedIndex,
                    i = t[n],
                    r = t[n - 1];
                  e: {
                    t: {
                      var a;
                      n: {
                        i: if (!(e < i)) {
                          for (var o = n + 2; ; ) {
                            if (void 0 === i) {
                              if (e < r) break i;
                              return (
                                (n = t.length),
                                (this._cachedIndex = n),
                                this.copySampleValue_(n - 1)
                              );
                            }
                            if (n === o) break;
                            if (((r = i), e < (i = t[++n]))) break t;
                          }
                          a = t.length;
                          break n;
                        }
                        if (e >= r) break e;
                        var s = t[1];
                        e < s && ((n = 2), (r = s));
                        for (var l = n - 2; ; ) {
                          if (void 0 === r)
                            return (
                              (this._cachedIndex = 0), this.copySampleValue_(0)
                            );
                          if (n === l) break;
                          if (((i = r), e >= (r = t[--n - 1]))) break t;
                        }
                        (a = n), (n = 0);
                      }
                      for (; n < a; ) {
                        var u = (n + a) >>> 1;
                        e < t[u] ? (a = u) : (n = u + 1);
                      }
                      if (((i = t[n]), void 0 === (r = t[n - 1])))
                        return (
                          (this._cachedIndex = 0), this.copySampleValue_(0)
                        );
                      if (void 0 === i)
                        return (
                          (n = t.length),
                          (this._cachedIndex = n),
                          this.copySampleValue_(n - 1)
                        );
                    }
                    (this._cachedIndex = n), this.intervalChanged_(n, r, i);
                  }
                  return this.interpolate_(n, r, e, i);
                }
              },
              {
                key: "getSettings_",
                value: function () {
                  return this.settings || this.DefaultSettings_;
                }
              },
              {
                key: "copySampleValue_",
                value: function (e) {
                  for (
                    var t = this.resultBuffer,
                      n = this.sampleValues,
                      i = this.valueSize,
                      r = e * i,
                      a = 0;
                    a !== i;
                    ++a
                  )
                    t[a] = n[r + a];
                  return t;
                }
              },
              {
                key: "interpolate_",
                value: function () {
                  throw new Error("call to abstract method");
                }
              },
              { key: "intervalChanged_", value: function () {} }
            ]
          );
        })(),
        X_ = (function (e) {
          function t(e, n, i, r) {
            var a;
            return (
              gh(this, t),
              ((a = uh(this, t, [e, n, i, r]))._weightPrev = -0),
              (a._offsetPrev = -0),
              (a._weightNext = -0),
              (a._offsetNext = -0),
              (a.DefaultSettings_ = { endingStart: Qh, endingEnd: Qh }),
              a
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "intervalChanged_",
                value: function (e, t, n) {
                  var i = this.parameterPositions,
                    r = e - 2,
                    a = e + 1,
                    o = i[r],
                    s = i[a];
                  if (void 0 === o)
                    switch (this.getSettings_().endingStart) {
                      case $h:
                        (r = e), (o = 2 * t - n);
                        break;
                      case ed:
                        o = t + i[(r = i.length - 2)] - i[r + 1];
                        break;
                      default:
                        (r = e), (o = n);
                    }
                  if (void 0 === s)
                    switch (this.getSettings_().endingEnd) {
                      case $h:
                        (a = e), (s = 2 * n - t);
                        break;
                      case ed:
                        (a = 1), (s = n + i[1] - i[0]);
                        break;
                      default:
                        (a = e - 1), (s = t);
                    }
                  var l = 0.5 * (n - t),
                    u = this.valueSize;
                  (this._weightPrev = l / (t - o)),
                    (this._weightNext = l / (s - n)),
                    (this._offsetPrev = r * u),
                    (this._offsetNext = a * u);
                }
              },
              {
                key: "interpolate_",
                value: function (e, t, n, i) {
                  for (
                    var r = this.resultBuffer,
                      a = this.sampleValues,
                      o = this.valueSize,
                      s = e * o,
                      l = s - o,
                      u = this._offsetPrev,
                      c = this._offsetNext,
                      h = this._weightPrev,
                      d = this._weightNext,
                      p = (n - t) / (i - t),
                      f = p * p,
                      v = f * p,
                      m = -h * v + 2 * h * f - h * p,
                      g = (1 + h) * v + (-1.5 - 2 * h) * f + (-0.5 + h) * p + 1,
                      _ = (-1 - d) * v + (1.5 + d) * f + 0.5 * p,
                      y = d * v - d * f,
                      b = 0;
                    b !== o;
                    ++b
                  )
                    r[b] =
                      m * a[u + b] + g * a[l + b] + _ * a[s + b] + y * a[c + b];
                  return r;
                }
              }
            ])
          );
        })(K_),
        Y_ = (function (e) {
          function t(e, n, i, r) {
            return gh(this, t), uh(this, t, [e, n, i, r]);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "interpolate_",
                value: function (e, t, n, i) {
                  for (
                    var r = this.resultBuffer,
                      a = this.sampleValues,
                      o = this.valueSize,
                      s = e * o,
                      l = s - o,
                      u = (n - t) / (i - t),
                      c = 1 - u,
                      h = 0;
                    h !== o;
                    ++h
                  )
                    r[h] = a[l + h] * c + a[s + h] * u;
                  return r;
                }
              }
            ])
          );
        })(K_),
        Z_ = (function (e) {
          function t(e, n, i, r) {
            return gh(this, t), uh(this, t, [e, n, i, r]);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "interpolate_",
                value: function (e) {
                  return this.copySampleValue_(e - 1);
                }
              }
            ])
          );
        })(K_),
        J_ = (function () {
          return yh(
            function e(t, n, i, r) {
              if ((gh(this, e), void 0 === t))
                throw new Error("THREE.KeyframeTrack: track name is undefined");
              if (void 0 === n || 0 === n.length)
                throw new Error(
                  "THREE.KeyframeTrack: no keyframes in track named " + t
                );
              (this.name = t),
                (this.times = H_(n, this.TimeBufferType)),
                (this.values = H_(i, this.ValueBufferType)),
                this.setInterpolation(r || this.DefaultInterpolation);
            },
            [
              {
                key: "InterpolantFactoryMethodDiscrete",
                value: function (e) {
                  return new Z_(
                    this.times,
                    this.values,
                    this.getValueSize(),
                    e
                  );
                }
              },
              {
                key: "InterpolantFactoryMethodLinear",
                value: function (e) {
                  return new Y_(
                    this.times,
                    this.values,
                    this.getValueSize(),
                    e
                  );
                }
              },
              {
                key: "InterpolantFactoryMethodSmooth",
                value: function (e) {
                  return new X_(
                    this.times,
                    this.values,
                    this.getValueSize(),
                    e
                  );
                }
              },
              {
                key: "setInterpolation",
                value: function (e) {
                  var t;
                  switch (e) {
                    case Yh:
                      t = this.InterpolantFactoryMethodDiscrete;
                      break;
                    case Zh:
                      t = this.InterpolantFactoryMethodLinear;
                      break;
                    case Jh:
                      t = this.InterpolantFactoryMethodSmooth;
                  }
                  if (void 0 === t) {
                    var n =
                      "unsupported interpolation for " +
                      this.ValueTypeName +
                      " keyframe track named " +
                      this.name;
                    if (void 0 === this.createInterpolant) {
                      if (e === this.DefaultInterpolation) throw new Error(n);
                      this.setInterpolation(this.DefaultInterpolation);
                    }
                    return console.warn("THREE.KeyframeTrack:", n), this;
                  }
                  return (this.createInterpolant = t), this;
                }
              },
              {
                key: "getInterpolation",
                value: function () {
                  switch (this.createInterpolant) {
                    case this.InterpolantFactoryMethodDiscrete:
                      return Yh;
                    case this.InterpolantFactoryMethodLinear:
                      return Zh;
                    case this.InterpolantFactoryMethodSmooth:
                      return Jh;
                  }
                }
              },
              {
                key: "getValueSize",
                value: function () {
                  return this.values.length / this.times.length;
                }
              },
              {
                key: "shift",
                value: function (e) {
                  if (0 !== e)
                    for (var t = this.times, n = 0, i = t.length; n !== i; ++n)
                      t[n] += e;
                  return this;
                }
              },
              {
                key: "scale",
                value: function (e) {
                  if (1 !== e)
                    for (var t = this.times, n = 0, i = t.length; n !== i; ++n)
                      t[n] *= e;
                  return this;
                }
              },
              {
                key: "trim",
                value: function (e, t) {
                  for (
                    var n = this.times, i = n.length, r = 0, a = i - 1;
                    r !== i && n[r] < e;

                  )
                    ++r;
                  for (; -1 !== a && n[a] > t; ) --a;
                  if ((++a, 0 !== r || a !== i)) {
                    r >= a && (r = (a = Math.max(a, 1)) - 1);
                    var o = this.getValueSize();
                    (this.times = V_(n, r, a)),
                      (this.values = V_(this.values, r * o, a * o));
                  }
                  return this;
                }
              },
              {
                key: "validate",
                value: function () {
                  var e = !0,
                    t = this.getValueSize();
                  t - Math.floor(t) != 0 &&
                    (console.error(
                      "THREE.KeyframeTrack: Invalid value size in track.",
                      this
                    ),
                    (e = !1));
                  var n = this.times,
                    i = this.values,
                    r = n.length;
                  0 === r &&
                    (console.error(
                      "THREE.KeyframeTrack: Track is empty.",
                      this
                    ),
                    (e = !1));
                  for (var a = null, o = 0; o !== r; o++) {
                    var s = n[o];
                    if ("number" == typeof s && isNaN(s)) {
                      console.error(
                        "THREE.KeyframeTrack: Time is not a valid number.",
                        this,
                        o,
                        s
                      ),
                        (e = !1);
                      break;
                    }
                    if (null !== a && a > s) {
                      console.error(
                        "THREE.KeyframeTrack: Out of order keys.",
                        this,
                        o,
                        s,
                        a
                      ),
                        (e = !1);
                      break;
                    }
                    a = s;
                  }
                  if (void 0 !== i && G_(i))
                    for (var l = 0, u = i.length; l !== u; ++l) {
                      var c = i[l];
                      if (isNaN(c)) {
                        console.error(
                          "THREE.KeyframeTrack: Value is not a valid number.",
                          this,
                          l,
                          c
                        ),
                          (e = !1);
                        break;
                      }
                    }
                  return e;
                }
              },
              {
                key: "optimize",
                value: function () {
                  for (
                    var e = V_(this.times),
                      t = V_(this.values),
                      n = this.getValueSize(),
                      i = this.getInterpolation() === Jh,
                      r = e.length - 1,
                      a = 1,
                      o = 1;
                    o < r;
                    ++o
                  ) {
                    var s = !1,
                      l = e[o];
                    if (l !== e[o + 1] && (1 !== o || l !== e[0]))
                      if (i) s = !0;
                      else
                        for (
                          var u = o * n, c = u - n, h = u + n, d = 0;
                          d !== n;
                          ++d
                        ) {
                          var p = t[u + d];
                          if (p !== t[c + d] || p !== t[h + d]) {
                            s = !0;
                            break;
                          }
                        }
                    if (s) {
                      if (o !== a) {
                        e[a] = e[o];
                        for (var f = o * n, v = a * n, m = 0; m !== n; ++m)
                          t[v + m] = t[f + m];
                      }
                      ++a;
                    }
                  }
                  if (r > 0) {
                    e[a] = e[r];
                    for (var g = r * n, _ = a * n, y = 0; y !== n; ++y)
                      t[_ + y] = t[g + y];
                    ++a;
                  }
                  return (
                    a !== e.length
                      ? ((this.times = V_(e, 0, a)),
                        (this.values = V_(t, 0, a * n)))
                      : ((this.times = e), (this.values = t)),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  var e = V_(this.times, 0),
                    t = V_(this.values, 0),
                    n = new (0, this.constructor)(this.name, e, t);
                  return (n.createInterpolant = this.createInterpolant), n;
                }
              }
            ],
            [
              {
                key: "toJSON",
                value: function (e) {
                  var t,
                    n = e.constructor;
                  if (n.toJSON !== this.toJSON) t = n.toJSON(e);
                  else {
                    t = {
                      name: e.name,
                      times: H_(e.times, Array),
                      values: H_(e.values, Array)
                    };
                    var i = e.getInterpolation();
                    i !== e.DefaultInterpolation && (t.interpolation = i);
                  }
                  return (t.type = e.ValueTypeName), t;
                }
              }
            ]
          );
        })();
      (J_.prototype.TimeBufferType = Float32Array),
        (J_.prototype.ValueBufferType = Float32Array),
        (J_.prototype.DefaultInterpolation = Zh);
      var Q_ = (function (e) {
        function t() {
          return gh(this, t), uh(this, t, arguments);
        }
        return ph(t, e), yh(t);
      })(J_);
      (Q_.prototype.ValueTypeName = "bool"),
        (Q_.prototype.ValueBufferType = Array),
        (Q_.prototype.DefaultInterpolation = Yh),
        (Q_.prototype.InterpolantFactoryMethodLinear = void 0),
        (Q_.prototype.InterpolantFactoryMethodSmooth = void 0);
      var $_ = (function (e) {
        function t() {
          return gh(this, t), uh(this, t, arguments);
        }
        return ph(t, e), yh(t);
      })(J_);
      $_.prototype.ValueTypeName = "color";
      var ey = (function (e) {
        function t() {
          return gh(this, t), uh(this, t, arguments);
        }
        return ph(t, e), yh(t);
      })(J_);
      ey.prototype.ValueTypeName = "number";
      var ty = (function (e) {
          function t(e, n, i, r) {
            return gh(this, t), uh(this, t, [e, n, i, r]);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "interpolate_",
                value: function (e, t, n, i) {
                  for (
                    var r = this.resultBuffer,
                      a = this.sampleValues,
                      o = this.valueSize,
                      s = (n - t) / (i - t),
                      l = e * o,
                      u = l + o;
                    l !== u;
                    l += 4
                  )
                    qd.slerpFlat(r, 0, a, l - o, a, l, s);
                  return r;
                }
              }
            ])
          );
        })(K_),
        ny = (function (e) {
          function t() {
            return gh(this, t), uh(this, t, arguments);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "InterpolantFactoryMethodLinear",
                value: function (e) {
                  return new ty(
                    this.times,
                    this.values,
                    this.getValueSize(),
                    e
                  );
                }
              }
            ])
          );
        })(J_);
      (ny.prototype.ValueTypeName = "quaternion"),
        (ny.prototype.DefaultInterpolation = Zh),
        (ny.prototype.InterpolantFactoryMethodSmooth = void 0);
      var iy = (function (e) {
        function t() {
          return gh(this, t), uh(this, t, arguments);
        }
        return ph(t, e), yh(t);
      })(J_);
      (iy.prototype.ValueTypeName = "string"),
        (iy.prototype.ValueBufferType = Array),
        (iy.prototype.DefaultInterpolation = Yh),
        (iy.prototype.InterpolantFactoryMethodLinear = void 0),
        (iy.prototype.InterpolantFactoryMethodSmooth = void 0);
      var ry = (function (e) {
        function t() {
          return gh(this, t), uh(this, t, arguments);
        }
        return ph(t, e), yh(t);
      })(J_);
      ry.prototype.ValueTypeName = "vector";
      var ay = (function () {
        return yh(
          function e(t) {
            var n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : -1,
              i = arguments.length > 2 ? arguments[2] : void 0,
              r =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 2500;
            gh(this, e),
              (this.name = t),
              (this.tracks = i),
              (this.duration = n),
              (this.blendMode = r),
              (this.uuid = fd()),
              this.duration < 0 && this.resetDuration();
          },
          [
            {
              key: "resetDuration",
              value: function () {
                for (var e = 0, t = 0, n = this.tracks.length; t !== n; ++t) {
                  var i = this.tracks[t];
                  e = Math.max(e, i.times[i.times.length - 1]);
                }
                return (this.duration = e), this;
              }
            },
            {
              key: "trim",
              value: function () {
                for (var e = 0; e < this.tracks.length; e++)
                  this.tracks[e].trim(0, this.duration);
                return this;
              }
            },
            {
              key: "validate",
              value: function () {
                for (var e = !0, t = 0; t < this.tracks.length; t++)
                  e = e && this.tracks[t].validate();
                return e;
              }
            },
            {
              key: "optimize",
              value: function () {
                for (var e = 0; e < this.tracks.length; e++)
                  this.tracks[e].optimize();
                return this;
              }
            },
            {
              key: "clone",
              value: function () {
                for (var e = [], t = 0; t < this.tracks.length; t++)
                  e.push(this.tracks[t].clone());
                return new this.constructor(
                  this.name,
                  this.duration,
                  e,
                  this.blendMode
                );
              }
            },
            {
              key: "toJSON",
              value: function () {
                return this.constructor.toJSON(this);
              }
            }
          ],
          [
            {
              key: "parse",
              value: function (e) {
                for (
                  var t = [],
                    n = e.tracks,
                    i = 1 / (e.fps || 1),
                    r = 0,
                    a = n.length;
                  r !== a;
                  ++r
                )
                  t.push(oy(n[r]).scale(i));
                var o = new this(e.name, e.duration, t, e.blendMode);
                return (o.uuid = e.uuid), o;
              }
            },
            {
              key: "toJSON",
              value: function (e) {
                for (
                  var t = [],
                    n = e.tracks,
                    i = {
                      name: e.name,
                      duration: e.duration,
                      tracks: t,
                      uuid: e.uuid,
                      blendMode: e.blendMode
                    },
                    r = 0,
                    a = n.length;
                  r !== a;
                  ++r
                )
                  t.push(J_.toJSON(n[r]));
                return i;
              }
            },
            {
              key: "CreateFromMorphTargetSequence",
              value: function (e, t, n, i) {
                for (var r = t.length, a = [], o = 0; o < r; o++) {
                  var s = [],
                    l = [];
                  s.push((o + r - 1) % r, o, (o + 1) % r), l.push(0, 1, 0);
                  var u = W_(s);
                  (s = j_(s, 1, u)),
                    (l = j_(l, 1, u)),
                    !i && 0 === s[0] && (s.push(r), l.push(l[0])),
                    a.push(
                      new ey(
                        ".morphTargetInfluences[" + t[o].name + "]",
                        s,
                        l
                      ).scale(1 / n)
                    );
                }
                return new this(e, -1, a);
              }
            },
            {
              key: "findByName",
              value: function (e, t) {
                var n = e;
                if (!Array.isArray(e)) {
                  var i = e;
                  n = (i.geometry && i.geometry.animations) || i.animations;
                }
                for (var r = 0; r < n.length; r++)
                  if (n[r].name === t) return n[r];
                return null;
              }
            },
            {
              key: "CreateClipsFromMorphTargetSequences",
              value: function (e, t, n) {
                for (
                  var i = {}, r = /^([\w-]*?)([\d]+)$/, a = 0, o = e.length;
                  a < o;
                  a++
                ) {
                  var s = e[a],
                    l = s.name.match(r);
                  if (l && l.length > 1) {
                    var u = l[1],
                      c = i[u];
                    c || (i[u] = c = []), c.push(s);
                  }
                }
                var h = [];
                for (var d in i)
                  h.push(this.CreateFromMorphTargetSequence(d, i[d], t, n));
                return h;
              }
            },
            {
              key: "parseAnimation",
              value: function (e, t) {
                if (!e)
                  return (
                    console.error(
                      "THREE.AnimationClip: No animation in JSONLoader data."
                    ),
                    null
                  );
                for (
                  var n = function (e, t, n, i, r) {
                      if (0 !== n.length) {
                        var a = [],
                          o = [];
                        q_(n, a, o, i),
                          0 !== a.length && r.push(new e(t, a, o));
                      }
                    },
                    i = [],
                    r = e.name || "default",
                    a = e.fps || 30,
                    o = e.blendMode,
                    s = e.length || -1,
                    l = e.hierarchy || [],
                    u = 0;
                  u < l.length;
                  u++
                ) {
                  var c = l[u].keys;
                  if (c && 0 !== c.length)
                    if (c[0].morphTargets) {
                      var h = {},
                        d = void 0;
                      for (d = 0; d < c.length; d++)
                        if (c[d].morphTargets)
                          for (var p = 0; p < c[d].morphTargets.length; p++)
                            h[c[d].morphTargets[p]] = -1;
                      for (var f in h) {
                        for (
                          var v = [], m = [], g = 0;
                          g !== c[d].morphTargets.length;
                          ++g
                        ) {
                          var _ = c[d];
                          v.push(_.time), m.push(_.morphTarget === f ? 1 : 0);
                        }
                        i.push(
                          new ey(".morphTargetInfluence[" + f + "]", v, m)
                        );
                      }
                      s = h.length * a;
                    } else {
                      var y = ".bones[" + t[u].name + "]";
                      n(ry, y + ".position", c, "pos", i),
                        n(ny, y + ".quaternion", c, "rot", i),
                        n(ry, y + ".scale", c, "scl", i);
                    }
                }
                return 0 === i.length ? null : new this(r, s, i, o);
              }
            }
          ]
        );
      })();
      function oy(e) {
        if (void 0 === e.type)
          throw new Error(
            "THREE.KeyframeTrack: track type undefined, can not parse"
          );
        var t = (function (e) {
          switch (e.toLowerCase()) {
            case "scalar":
            case "double":
            case "float":
            case "number":
            case "integer":
              return ey;
            case "vector":
            case "vector2":
            case "vector3":
            case "vector4":
              return ry;
            case "color":
              return $_;
            case "quaternion":
              return ny;
            case "bool":
            case "boolean":
              return Q_;
            case "string":
              return iy;
          }
          throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + e);
        })(e.type);
        if (void 0 === e.times) {
          var n = [],
            i = [];
          q_(e.keys, n, i, "value"), (e.times = n), (e.values = i);
        }
        return void 0 !== t.parse
          ? t.parse(e)
          : new t(e.name, e.times, e.values, e.interpolation);
      }
      var sy = {
          enabled: !1,
          files: {},
          add: function (e, t) {
            !1 !== this.enabled && (this.files[e] = t);
          },
          get: function (e) {
            if (!1 !== this.enabled) return this.files[e];
          },
          remove: function (e) {
            delete this.files[e];
          },
          clear: function () {
            this.files = {};
          }
        },
        ly = yh(function e(t, n, i) {
          gh(this, e);
          var r,
            a = this,
            o = !1,
            s = 0,
            l = 0,
            u = [];
          (this.onStart = void 0),
            (this.onLoad = t),
            (this.onProgress = n),
            (this.onError = i),
            (this.itemStart = function (e) {
              l++,
                !1 === o && void 0 !== a.onStart && a.onStart(e, s, l),
                (o = !0);
            }),
            (this.itemEnd = function (e) {
              s++,
                void 0 !== a.onProgress && a.onProgress(e, s, l),
                s === l && ((o = !1), void 0 !== a.onLoad && a.onLoad());
            }),
            (this.itemError = function (e) {
              void 0 !== a.onError && a.onError(e);
            }),
            (this.resolveURL = function (e) {
              return r ? r(e) : e;
            }),
            (this.setURLModifier = function (e) {
              return (r = e), this;
            }),
            (this.addHandler = function (e, t) {
              return u.push(e, t), this;
            }),
            (this.removeHandler = function (e) {
              var t = u.indexOf(e);
              return -1 !== t && u.splice(t, 2), this;
            }),
            (this.getHandler = function (e) {
              for (var t = 0, n = u.length; t < n; t += 2) {
                var i = u[t],
                  r = u[t + 1];
                if ((i.global && (i.lastIndex = 0), i.test(e))) return r;
              }
              return null;
            });
        }),
        uy = new ly(),
        cy = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.manager = void 0 !== t ? t : uy),
                (this.crossOrigin = "anonymous"),
                (this.withCredentials = !1),
                (this.path = ""),
                (this.resourcePath = ""),
                (this.requestHeader = {});
            },
            [
              { key: "load", value: function () {} },
              {
                key: "loadAsync",
                value: function (e, t) {
                  var n = this;
                  return new Promise(function (i, r) {
                    n.load(e, i, t, r);
                  });
                }
              },
              { key: "parse", value: function () {} },
              {
                key: "setCrossOrigin",
                value: function (e) {
                  return (this.crossOrigin = e), this;
                }
              },
              {
                key: "setWithCredentials",
                value: function (e) {
                  return (this.withCredentials = e), this;
                }
              },
              {
                key: "setPath",
                value: function (e) {
                  return (this.path = e), this;
                }
              },
              {
                key: "setResourcePath",
                value: function (e) {
                  return (this.resourcePath = e), this;
                }
              },
              {
                key: "setRequestHeader",
                value: function (e) {
                  return (this.requestHeader = e), this;
                }
              }
            ]
          );
        })(),
        hy = {},
        dy = (function (e) {
          function t(e, n) {
            var i;
            return gh(this, t), ((i = uh(this, t, [e])).response = n), i;
          }
          return ph(t, e), yh(t);
        })(eh(Error)),
        py = (function (e) {
          function t(e) {
            return gh(this, t), uh(this, t, [e]);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "load",
                value: function (e, t, n, i) {
                  var r = this;
                  void 0 === e && (e = ""),
                    void 0 !== this.path && (e = this.path + e),
                    (e = this.manager.resolveURL(e));
                  var a = sy.get(e);
                  if (void 0 !== a)
                    return (
                      this.manager.itemStart(e),
                      setTimeout(function () {
                        t && t(a), r.manager.itemEnd(e);
                      }, 0),
                      a
                    );
                  if (void 0 === hy[e]) {
                    (hy[e] = []),
                      hy[e].push({ onLoad: t, onProgress: n, onError: i });
                    var o = new Request(e, {
                        headers: new Headers(this.requestHeader),
                        credentials: this.withCredentials
                          ? "include"
                          : "same-origin"
                      }),
                      s = this.mimeType,
                      l = this.responseType;
                    fetch(o)
                      .then(function (t) {
                        if (200 === t.status || 0 === t.status) {
                          if (
                            (0 === t.status &&
                              console.warn(
                                "THREE.FileLoader: HTTP Status 0 received."
                              ),
                            ("undefined" == typeof ReadableStream
                              ? "undefined"
                              : xh(ReadableStream)) > "u" ||
                              void 0 === t.body ||
                              void 0 === t.body.getReader)
                          )
                            return t;
                          var n = hy[e],
                            i = t.body.getReader(),
                            r =
                              t.headers.get("Content-Length") ||
                              t.headers.get("X-File-Size"),
                            a = r ? parseInt(r) : 0,
                            o = 0 !== a,
                            s = 0,
                            l = new ReadableStream({
                              start: function (e) {
                                !(function t() {
                                  i.read().then(function (i) {
                                    var r = i.done,
                                      l = i.value;
                                    if (r) e.close();
                                    else {
                                      s += l.byteLength;
                                      for (
                                        var u = new ProgressEvent("progress", {
                                            lengthComputable: o,
                                            loaded: s,
                                            total: a
                                          }),
                                          c = 0,
                                          h = n.length;
                                        c < h;
                                        c++
                                      ) {
                                        var d = n[c];
                                        d.onProgress && d.onProgress(u);
                                      }
                                      e.enqueue(l), t();
                                    }
                                  });
                                })();
                              }
                            });
                          return new Response(l);
                        }
                        throw new dy(
                          'fetch for "'
                            .concat(t.url, '" responded with ')
                            .concat(t.status, ": ")
                            .concat(t.statusText),
                          t
                        );
                      })
                      .then(function (e) {
                        switch (l) {
                          case "arraybuffer":
                            return e.arrayBuffer();
                          case "blob":
                            return e.blob();
                          case "document":
                            return e.text().then(function (e) {
                              return new DOMParser().parseFromString(e, s);
                            });
                          case "json":
                            return e.json();
                          default:
                            if (void 0 === s) return e.text();
                            var t = /charset="?([^;"\s]*)"?/i.exec(s),
                              n = t && t[1] ? t[1].toLowerCase() : void 0,
                              i = new TextDecoder(n);
                            return e.arrayBuffer().then(function (e) {
                              return i.decode(e);
                            });
                        }
                      })
                      .then(function (t) {
                        sy.add(e, t);
                        var n = hy[e];
                        delete hy[e];
                        for (var i = 0, r = n.length; i < r; i++) {
                          var a = n[i];
                          a.onLoad && a.onLoad(t);
                        }
                      })
                      .catch(function (t) {
                        var n = hy[e];
                        if (void 0 === n) throw (r.manager.itemError(e), t);
                        delete hy[e];
                        for (var i = 0, a = n.length; i < a; i++) {
                          var o = n[i];
                          o.onError && o.onError(t);
                        }
                        r.manager.itemError(e);
                      })
                      .finally(function () {
                        r.manager.itemEnd(e);
                      }),
                      this.manager.itemStart(e);
                  } else hy[e].push({ onLoad: t, onProgress: n, onError: i });
                }
              },
              {
                key: "setResponseType",
                value: function (e) {
                  return (this.responseType = e), this;
                }
              },
              {
                key: "setMimeType",
                value: function (e) {
                  return (this.mimeType = e), this;
                }
              }
            ])
          );
        })(cy),
        fy = (function (e) {
          function t(e) {
            return gh(this, t), uh(this, t, [e]);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "load",
                value: function (e, t, n, i) {
                  void 0 !== this.path && (e = this.path + e),
                    (e = this.manager.resolveURL(e));
                  var r = this,
                    a = sy.get(e);
                  if (void 0 !== a)
                    return (
                      r.manager.itemStart(e),
                      setTimeout(function () {
                        t && t(a), r.manager.itemEnd(e);
                      }, 0),
                      a
                    );
                  var o = Cd("img");
                  function s() {
                    u(), sy.add(e, this), t && t(this), r.manager.itemEnd(e);
                  }
                  function l(t) {
                    u(),
                      i && i(t),
                      r.manager.itemError(e),
                      r.manager.itemEnd(e);
                  }
                  function u() {
                    o.removeEventListener("load", s, !1),
                      o.removeEventListener("error", l, !1);
                  }
                  return (
                    o.addEventListener("load", s, !1),
                    o.addEventListener("error", l, !1),
                    "data:" !== e.slice(0, 5) &&
                      void 0 !== this.crossOrigin &&
                      (o.crossOrigin = this.crossOrigin),
                    r.manager.itemStart(e),
                    (o.src = e),
                    o
                  );
                }
              }
            ])
          );
        })(cy),
        vy = (function (e) {
          function t(e) {
            return gh(this, t), uh(this, t, [e]);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "load",
                value: function (e, t, n, i) {
                  var r = new Vd(),
                    a = new fy(this.manager);
                  return (
                    a.setCrossOrigin(this.crossOrigin),
                    a.setPath(this.path),
                    a.load(
                      e,
                      function (e) {
                        (r.image = e),
                          (r.needsUpdate = !0),
                          void 0 !== t && t(r);
                      },
                      n,
                      i
                    ),
                    r
                  );
                }
              }
            ])
          );
        })(cy),
        my = (function (e) {
          function t(e) {
            var n,
              i =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1;
            return (
              gh(this, t),
              ((n = uh(this, t)).isLight = !0),
              (n.type = "Light"),
              (n.color = new ff(e)),
              (n.intensity = i),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              { key: "dispose", value: function () {} },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    this.color.copy(e.color),
                    (this.intensity = e.intensity),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = sh(t, "toJSON", this, 3)([e]);
                  return (
                    (n.object.color = this.color.getHex()),
                    (n.object.intensity = this.intensity),
                    void 0 !== this.groundColor &&
                      (n.object.groundColor = this.groundColor.getHex()),
                    void 0 !== this.distance &&
                      (n.object.distance = this.distance),
                    void 0 !== this.angle && (n.object.angle = this.angle),
                    void 0 !== this.decay && (n.object.decay = this.decay),
                    void 0 !== this.penumbra &&
                      (n.object.penumbra = this.penumbra),
                    void 0 !== this.shadow &&
                      (n.object.shadow = this.shadow.toJSON()),
                    n
                  );
                }
              }
            ])
          );
        })(Xp),
        gy = (function (e) {
          function t(e, n, i) {
            var r;
            return (
              gh(this, t),
              ((r = uh(this, t, [e, i])).isHemisphereLight = !0),
              (r.type = "HemisphereLight"),
              r.position.copy(Xp.DEFAULT_UP),
              r.updateMatrix(),
              (r.groundColor = new ff(n)),
              r
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    this.groundColor.copy(e.groundColor),
                    this
                  );
                }
              }
            ])
          );
        })(my),
        _y = new Sp(),
        yy = new Kd(),
        by = new Kd(),
        xy = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.camera = t),
                (this.bias = 0),
                (this.normalBias = 0),
                (this.radius = 1),
                (this.blurSamples = 8),
                (this.mapSize = new Md(512, 512)),
                (this.map = null),
                (this.mapPass = null),
                (this.matrix = new Sp()),
                (this.autoUpdate = !0),
                (this.needsUpdate = !1),
                (this._frustum = new fv()),
                (this._frameExtents = new Md(1, 1)),
                (this._viewportCount = 1),
                (this._viewports = [new Hd(0, 0, 1, 1)]);
            },
            [
              {
                key: "getViewportCount",
                value: function () {
                  return this._viewportCount;
                }
              },
              {
                key: "getFrustum",
                value: function () {
                  return this._frustum;
                }
              },
              {
                key: "updateMatrices",
                value: function (e) {
                  var t = this.camera,
                    n = this.matrix;
                  yy.setFromMatrixPosition(e.matrixWorld),
                    t.position.copy(yy),
                    by.setFromMatrixPosition(e.target.matrixWorld),
                    t.lookAt(by),
                    t.updateMatrixWorld(),
                    _y.multiplyMatrices(
                      t.projectionMatrix,
                      t.matrixWorldInverse
                    ),
                    this._frustum.setFromProjectionMatrix(_y),
                    n.set(
                      0.5,
                      0,
                      0,
                      0.5,
                      0,
                      0.5,
                      0,
                      0.5,
                      0,
                      0,
                      0.5,
                      0.5,
                      0,
                      0,
                      0,
                      1
                    ),
                    n.multiply(_y);
                }
              },
              {
                key: "getViewport",
                value: function (e) {
                  return this._viewports[e];
                }
              },
              {
                key: "getFrameExtents",
                value: function () {
                  return this._frameExtents;
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.map && this.map.dispose(),
                    this.mapPass && this.mapPass.dispose();
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.camera = e.camera.clone()),
                    (this.bias = e.bias),
                    (this.radius = e.radius),
                    this.mapSize.copy(e.mapSize),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = {};
                  return (
                    0 !== this.bias && (e.bias = this.bias),
                    0 !== this.normalBias && (e.normalBias = this.normalBias),
                    1 !== this.radius && (e.radius = this.radius),
                    (512 !== this.mapSize.x || 512 !== this.mapSize.y) &&
                      (e.mapSize = this.mapSize.toArray()),
                    (e.camera = this.camera.toJSON(!1).object),
                    delete e.camera.matrix,
                    e
                  );
                }
              }
            ]
          );
        })(),
        wy = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t),
              ((e = uh(this, t, [new iv(50, 1, 0.5, 500)])).isSpotLightShadow =
                !0),
              (e.focus = 1),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "updateMatrices",
                value: function (e) {
                  var n = this.camera,
                    i = 2 * pd * e.angle * this.focus,
                    r = this.mapSize.width / this.mapSize.height,
                    a = e.distance || n.far;
                  (i !== n.fov || r !== n.aspect || a !== n.far) &&
                    ((n.fov = i),
                    (n.aspect = r),
                    (n.far = a),
                    n.updateProjectionMatrix()),
                    sh(t, "updateMatrices", this, 3)([e]);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]), (this.focus = e.focus), this
                  );
                }
              }
            ])
          );
        })(xy),
        Sy = (function (e) {
          function t(e, n) {
            var i,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : Math.PI / 3,
              o =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : 0,
              s =
                arguments.length > 5 && void 0 !== arguments[5]
                  ? arguments[5]
                  : 2;
            return (
              gh(this, t),
              ((i = uh(this, t, [e, n])).isSpotLight = !0),
              (i.type = "SpotLight"),
              i.position.copy(Xp.DEFAULT_UP),
              i.updateMatrix(),
              (i.target = new Xp()),
              (i.distance = r),
              (i.angle = a),
              (i.penumbra = o),
              (i.decay = s),
              (i.map = null),
              (i.shadow = new wy()),
              i
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "power",
                get: function () {
                  return this.intensity * Math.PI;
                },
                set: function (e) {
                  this.intensity = e / Math.PI;
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.shadow.dispose();
                }
              },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    (this.distance = e.distance),
                    (this.angle = e.angle),
                    (this.penumbra = e.penumbra),
                    (this.decay = e.decay),
                    (this.target = e.target.clone()),
                    (this.shadow = e.shadow.clone()),
                    this
                  );
                }
              }
            ])
          );
        })(my),
        My = new Sp(),
        Ty = new Kd(),
        ky = new Kd(),
        Ey = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t),
              ((e = uh(this, t, [new iv(90, 1, 0.5, 500)])).isPointLightShadow =
                !0),
              (e._frameExtents = new Md(4, 2)),
              (e._viewportCount = 6),
              (e._viewports = [
                new Hd(2, 1, 1, 1),
                new Hd(0, 1, 1, 1),
                new Hd(3, 1, 1, 1),
                new Hd(1, 1, 1, 1),
                new Hd(3, 0, 1, 1),
                new Hd(1, 0, 1, 1)
              ]),
              (e._cubeDirections = [
                new Kd(1, 0, 0),
                new Kd(-1, 0, 0),
                new Kd(0, 0, 1),
                new Kd(0, 0, -1),
                new Kd(0, 1, 0),
                new Kd(0, -1, 0)
              ]),
              (e._cubeUps = [
                new Kd(0, 1, 0),
                new Kd(0, 1, 0),
                new Kd(0, 1, 0),
                new Kd(0, 1, 0),
                new Kd(0, 0, 1),
                new Kd(0, 0, -1)
              ]),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "updateMatrices",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n = this.camera,
                    i = this.matrix,
                    r = e.distance || n.far;
                  r !== n.far && ((n.far = r), n.updateProjectionMatrix()),
                    Ty.setFromMatrixPosition(e.matrixWorld),
                    n.position.copy(Ty),
                    ky.copy(n.position),
                    ky.add(this._cubeDirections[t]),
                    n.up.copy(this._cubeUps[t]),
                    n.lookAt(ky),
                    n.updateMatrixWorld(),
                    i.makeTranslation(-Ty.x, -Ty.y, -Ty.z),
                    My.multiplyMatrices(
                      n.projectionMatrix,
                      n.matrixWorldInverse
                    ),
                    this._frustum.setFromProjectionMatrix(My);
                }
              }
            ])
          );
        })(xy),
        Cy = (function (e) {
          function t(e, n) {
            var i,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 2;
            return (
              gh(this, t),
              ((i = uh(this, t, [e, n])).isPointLight = !0),
              (i.type = "PointLight"),
              (i.distance = r),
              (i.decay = a),
              (i.shadow = new Ey()),
              i
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "power",
                get: function () {
                  return 4 * this.intensity * Math.PI;
                },
                set: function (e) {
                  this.intensity = e / (4 * Math.PI);
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.shadow.dispose();
                }
              },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    sh(t, "copy", this, 3)([e, n]),
                    (this.distance = e.distance),
                    (this.decay = e.decay),
                    (this.shadow = e.shadow.clone()),
                    this
                  );
                }
              }
            ])
          );
        })(my),
        Dy = (function (e) {
          function t() {
            var e;
            return (
              gh(this, t),
              ((e = uh(this, t, [
                new Cv(-5, 5, 5, -5, 0.5, 500)
              ])).isDirectionalLightShadow = !0),
              e
            );
          }
          return ph(t, e), yh(t);
        })(xy),
        Ay = (function (e) {
          function t(e, n) {
            var i;
            return (
              gh(this, t),
              ((i = uh(this, t, [e, n])).isDirectionalLight = !0),
              (i.type = "DirectionalLight"),
              i.position.copy(Xp.DEFAULT_UP),
              i.updateMatrix(),
              (i.target = new Xp()),
              (i.shadow = new Dy()),
              i
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "dispose",
                value: function () {
                  this.shadow.dispose();
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    sh(t, "copy", this, 3)([e]),
                    (this.target = e.target.clone()),
                    (this.shadow = e.shadow.clone()),
                    this
                  );
                }
              }
            ])
          );
        })(my),
        Py = (function () {
          return yh(
            function e() {
              gh(this, e);
            },
            null,
            [
              {
                key: "decodeText",
                value: function (e) {
                  if (
                    ("undefined" == typeof TextDecoder
                      ? "undefined"
                      : xh(TextDecoder)) < "u"
                  )
                    return new TextDecoder().decode(e);
                  for (var t = "", n = 0, i = e.length; n < i; n++)
                    t += String.fromCharCode(e[n]);
                  try {
                    return decodeURIComponent(escape(t));
                  } catch (e) {
                    return t;
                  }
                }
              },
              {
                key: "extractUrlBase",
                value: function (e) {
                  var t = e.lastIndexOf("/");
                  return -1 === t ? "./" : e.slice(0, t + 1);
                }
              },
              {
                key: "resolveURL",
                value: function (e, t) {
                  return "string" != typeof e || "" === e
                    ? ""
                    : (/^https?:\/\//i.test(t) &&
                        /^\//.test(e) &&
                        (t = t.replace(/(^https?:\/\/[^\/]+).*/i, "$1")),
                      /^(https?:)?\/\//i.test(e) ||
                      /^data:.*,.*$/i.test(e) ||
                      /^blob:.*$/i.test(e)
                        ? e
                        : t + e);
                }
              }
            ]
          );
        })(),
        Ly = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t, [e])).isImageBitmapLoader = !0),
              ("undefined" == typeof createImageBitmap
                ? "undefined"
                : xh(createImageBitmap)) > "u" &&
                console.warn(
                  "THREE.ImageBitmapLoader: createImageBitmap() not supported."
                ),
              ("undefined" == typeof fetch ? "undefined" : xh(fetch)) > "u" &&
                console.warn("THREE.ImageBitmapLoader: fetch() not supported."),
              (n.options = { premultiplyAlpha: "none" }),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "setOptions",
                value: function (e) {
                  return (this.options = e), this;
                }
              },
              {
                key: "load",
                value: function (e, t, n, i) {
                  void 0 === e && (e = ""),
                    void 0 !== this.path && (e = this.path + e),
                    (e = this.manager.resolveURL(e));
                  var r = this,
                    a = sy.get(e);
                  if (void 0 !== a)
                    return (
                      r.manager.itemStart(e),
                      setTimeout(function () {
                        t && t(a), r.manager.itemEnd(e);
                      }, 0),
                      a
                    );
                  var o = {};
                  (o.credentials =
                    "anonymous" === this.crossOrigin
                      ? "same-origin"
                      : "include"),
                    (o.headers = this.requestHeader),
                    fetch(e, o)
                      .then(function (e) {
                        return e.blob();
                      })
                      .then(function (e) {
                        return createImageBitmap(
                          e,
                          Object.assign(r.options, {
                            colorSpaceConversion: "none"
                          })
                        );
                      })
                      .then(function (n) {
                        sy.add(e, n), t && t(n), r.manager.itemEnd(e);
                      })
                      .catch(function (t) {
                        i && i(t), r.manager.itemError(e), r.manager.itemEnd(e);
                      }),
                    r.manager.itemStart(e);
                }
              }
            ])
          );
        })(cy),
        Ry = (function () {
          return yh(
            function e() {
              var t =
                !(arguments.length > 0 && void 0 !== arguments[0]) ||
                arguments[0];
              gh(this, e),
                (this.autoStart = t),
                (this.startTime = 0),
                (this.oldTime = 0),
                (this.elapsedTime = 0),
                (this.running = !1);
            },
            [
              {
                key: "start",
                value: function () {
                  (this.startTime = Iy()),
                    (this.oldTime = this.startTime),
                    (this.elapsedTime = 0),
                    (this.running = !0);
                }
              },
              {
                key: "stop",
                value: function () {
                  this.getElapsedTime(),
                    (this.running = !1),
                    (this.autoStart = !1);
                }
              },
              {
                key: "getElapsedTime",
                value: function () {
                  return this.getDelta(), this.elapsedTime;
                }
              },
              {
                key: "getDelta",
                value: function () {
                  var e = 0;
                  if (this.autoStart && !this.running) return this.start(), 0;
                  if (this.running) {
                    var t = Iy();
                    (e = (t - this.oldTime) / 1e3),
                      (this.oldTime = t),
                      (this.elapsedTime += e);
                  }
                  return e;
                }
              }
            ]
          );
        })();
      function Iy() {
        return (
          ("undefined" == typeof performance ? "undefined" : xh(performance)) >
          "u"
            ? Date
            : performance
        ).now();
      }
      var Oy = (function () {
          return yh(
            function e(t, n, i) {
              var r, a, o;
              switch (
                (gh(this, e), (this.binding = t), (this.valueSize = i), n)
              ) {
                case "quaternion":
                  (r = this._slerp),
                    (a = this._slerpAdditive),
                    (o = this._setAdditiveIdentityQuaternion),
                    (this.buffer = new Float64Array(6 * i)),
                    (this._workIndex = 5);
                  break;
                case "string":
                case "bool":
                  (r = this._select),
                    (a = this._select),
                    (o = this._setAdditiveIdentityOther),
                    (this.buffer = new Array(5 * i));
                  break;
                default:
                  (r = this._lerp),
                    (a = this._lerpAdditive),
                    (o = this._setAdditiveIdentityNumeric),
                    (this.buffer = new Float64Array(5 * i));
              }
              (this._mixBufferRegion = r),
                (this._mixBufferRegionAdditive = a),
                (this._setIdentity = o),
                (this._origIndex = 3),
                (this._addIndex = 4),
                (this.cumulativeWeight = 0),
                (this.cumulativeWeightAdditive = 0),
                (this.useCount = 0),
                (this.referenceCount = 0);
            },
            [
              {
                key: "accumulate",
                value: function (e, t) {
                  var n = this.buffer,
                    i = this.valueSize,
                    r = e * i + i,
                    a = this.cumulativeWeight;
                  if (0 === a) {
                    for (var o = 0; o !== i; ++o) n[r + o] = n[o];
                    a = t;
                  } else {
                    var s = t / (a += t);
                    this._mixBufferRegion(n, r, 0, s, i);
                  }
                  this.cumulativeWeight = a;
                }
              },
              {
                key: "accumulateAdditive",
                value: function (e) {
                  var t = this.buffer,
                    n = this.valueSize,
                    i = n * this._addIndex;
                  0 === this.cumulativeWeightAdditive && this._setIdentity(),
                    this._mixBufferRegionAdditive(t, i, 0, e, n),
                    (this.cumulativeWeightAdditive += e);
                }
              },
              {
                key: "apply",
                value: function (e) {
                  var t = this.valueSize,
                    n = this.buffer,
                    i = e * t + t,
                    r = this.cumulativeWeight,
                    a = this.cumulativeWeightAdditive,
                    o = this.binding;
                  if (
                    ((this.cumulativeWeight = 0),
                    (this.cumulativeWeightAdditive = 0),
                    r < 1)
                  ) {
                    var s = t * this._origIndex;
                    this._mixBufferRegion(n, i, s, 1 - r, t);
                  }
                  a > 0 &&
                    this._mixBufferRegionAdditive(
                      n,
                      i,
                      this._addIndex * t,
                      1,
                      t
                    );
                  for (var l = t, u = t + t; l !== u; ++l)
                    if (n[l] !== n[l + t]) {
                      o.setValue(n, i);
                      break;
                    }
                }
              },
              {
                key: "saveOriginalState",
                value: function () {
                  var e = this.binding,
                    t = this.buffer,
                    n = this.valueSize,
                    i = n * this._origIndex;
                  e.getValue(t, i);
                  for (var r = n, a = i; r !== a; ++r) t[r] = t[i + (r % n)];
                  this._setIdentity(),
                    (this.cumulativeWeight = 0),
                    (this.cumulativeWeightAdditive = 0);
                }
              },
              {
                key: "restoreOriginalState",
                value: function () {
                  var e = 3 * this.valueSize;
                  this.binding.setValue(this.buffer, e);
                }
              },
              {
                key: "_setAdditiveIdentityNumeric",
                value: function () {
                  for (
                    var e = this._addIndex * this.valueSize,
                      t = e + this.valueSize,
                      n = e;
                    n < t;
                    n++
                  )
                    this.buffer[n] = 0;
                }
              },
              {
                key: "_setAdditiveIdentityQuaternion",
                value: function () {
                  this._setAdditiveIdentityNumeric(),
                    (this.buffer[this._addIndex * this.valueSize + 3] = 1);
                }
              },
              {
                key: "_setAdditiveIdentityOther",
                value: function () {
                  for (
                    var e = this._origIndex * this.valueSize,
                      t = this._addIndex * this.valueSize,
                      n = 0;
                    n < this.valueSize;
                    n++
                  )
                    this.buffer[t + n] = this.buffer[e + n];
                }
              },
              {
                key: "_select",
                value: function (e, t, n, i, r) {
                  if (i >= 0.5)
                    for (var a = 0; a !== r; ++a) e[t + a] = e[n + a];
                }
              },
              {
                key: "_slerp",
                value: function (e, t, n, i) {
                  qd.slerpFlat(e, t, e, t, e, n, i);
                }
              },
              {
                key: "_slerpAdditive",
                value: function (e, t, n, i, r) {
                  var a = this._workIndex * r;
                  qd.multiplyQuaternionsFlat(e, a, e, t, e, n),
                    qd.slerpFlat(e, t, e, t, e, a, i);
                }
              },
              {
                key: "_lerp",
                value: function (e, t, n, i, r) {
                  for (var a = 1 - i, o = 0; o !== r; ++o) {
                    var s = t + o;
                    e[s] = e[s] * a + e[n + o] * i;
                  }
                }
              },
              {
                key: "_lerpAdditive",
                value: function (e, t, n, i, r) {
                  for (var a = 0; a !== r; ++a) {
                    var o = t + a;
                    e[o] = e[o] + e[n + a] * i;
                  }
                }
              }
            ]
          );
        })(),
        Ny = "\\[\\]\\.:\\/",
        Fy = new RegExp("[" + Ny + "]", "g"),
        Uy = "[^" + Ny + "]",
        By = "[^" + Ny.replace("\\.", "") + "]",
        zy = /((?:WC+[\/:])*)/.source.replace("WC", Uy),
        Vy = /(WCOD+)?/.source.replace("WCOD", By),
        Hy = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Uy),
        Gy = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Uy),
        Wy = new RegExp("^" + zy + Vy + Hy + Gy + "$"),
        jy = ["material", "materials", "bones", "map"],
        qy = (function () {
          return yh(
            function e(t, n, i) {
              gh(this, e);
              var r = i || Ky.parseTrackName(n);
              (this._targetGroup = t), (this._bindings = t.subscribe_(n, r));
            },
            [
              {
                key: "getValue",
                value: function (e, t) {
                  this.bind();
                  var n = this._targetGroup.nCachedObjects_,
                    i = this._bindings[n];
                  void 0 !== i && i.getValue(e, t);
                }
              },
              {
                key: "setValue",
                value: function (e, t) {
                  for (
                    var n = this._bindings,
                      i = this._targetGroup.nCachedObjects_,
                      r = n.length;
                    i !== r;
                    ++i
                  )
                    n[i].setValue(e, t);
                }
              },
              {
                key: "bind",
                value: function () {
                  for (
                    var e = this._bindings,
                      t = this._targetGroup.nCachedObjects_,
                      n = e.length;
                    t !== n;
                    ++t
                  )
                    e[t].bind();
                }
              },
              {
                key: "unbind",
                value: function () {
                  for (
                    var e = this._bindings,
                      t = this._targetGroup.nCachedObjects_,
                      n = e.length;
                    t !== n;
                    ++t
                  )
                    e[t].unbind();
                }
              }
            ]
          );
        })(),
        Ky = (function () {
          function e(t, n, i) {
            gh(this, e),
              (this.path = n),
              (this.parsedPath = i || e.parseTrackName(n)),
              (this.node = e.findNode(t, this.parsedPath.nodeName)),
              (this.rootNode = t),
              (this.getValue = this._getValue_unbound),
              (this.setValue = this._setValue_unbound);
          }
          return yh(
            e,
            [
              { key: "_getValue_unavailable", value: function () {} },
              { key: "_setValue_unavailable", value: function () {} },
              {
                key: "_getValue_direct",
                value: function (e, t) {
                  e[t] = this.targetObject[this.propertyName];
                }
              },
              {
                key: "_getValue_array",
                value: function (e, t) {
                  for (
                    var n = this.resolvedProperty, i = 0, r = n.length;
                    i !== r;
                    ++i
                  )
                    e[t++] = n[i];
                }
              },
              {
                key: "_getValue_arrayElement",
                value: function (e, t) {
                  e[t] = this.resolvedProperty[this.propertyIndex];
                }
              },
              {
                key: "_getValue_toArray",
                value: function (e, t) {
                  this.resolvedProperty.toArray(e, t);
                }
              },
              {
                key: "_setValue_direct",
                value: function (e, t) {
                  this.targetObject[this.propertyName] = e[t];
                }
              },
              {
                key: "_setValue_direct_setNeedsUpdate",
                value: function (e, t) {
                  (this.targetObject[this.propertyName] = e[t]),
                    (this.targetObject.needsUpdate = !0);
                }
              },
              {
                key: "_setValue_direct_setMatrixWorldNeedsUpdate",
                value: function (e, t) {
                  (this.targetObject[this.propertyName] = e[t]),
                    (this.targetObject.matrixWorldNeedsUpdate = !0);
                }
              },
              {
                key: "_setValue_array",
                value: function (e, t) {
                  for (
                    var n = this.resolvedProperty, i = 0, r = n.length;
                    i !== r;
                    ++i
                  )
                    n[i] = e[t++];
                }
              },
              {
                key: "_setValue_array_setNeedsUpdate",
                value: function (e, t) {
                  for (
                    var n = this.resolvedProperty, i = 0, r = n.length;
                    i !== r;
                    ++i
                  )
                    n[i] = e[t++];
                  this.targetObject.needsUpdate = !0;
                }
              },
              {
                key: "_setValue_array_setMatrixWorldNeedsUpdate",
                value: function (e, t) {
                  for (
                    var n = this.resolvedProperty, i = 0, r = n.length;
                    i !== r;
                    ++i
                  )
                    n[i] = e[t++];
                  this.targetObject.matrixWorldNeedsUpdate = !0;
                }
              },
              {
                key: "_setValue_arrayElement",
                value: function (e, t) {
                  this.resolvedProperty[this.propertyIndex] = e[t];
                }
              },
              {
                key: "_setValue_arrayElement_setNeedsUpdate",
                value: function (e, t) {
                  (this.resolvedProperty[this.propertyIndex] = e[t]),
                    (this.targetObject.needsUpdate = !0);
                }
              },
              {
                key: "_setValue_arrayElement_setMatrixWorldNeedsUpdate",
                value: function (e, t) {
                  (this.resolvedProperty[this.propertyIndex] = e[t]),
                    (this.targetObject.matrixWorldNeedsUpdate = !0);
                }
              },
              {
                key: "_setValue_fromArray",
                value: function (e, t) {
                  this.resolvedProperty.fromArray(e, t);
                }
              },
              {
                key: "_setValue_fromArray_setNeedsUpdate",
                value: function (e, t) {
                  this.resolvedProperty.fromArray(e, t),
                    (this.targetObject.needsUpdate = !0);
                }
              },
              {
                key: "_setValue_fromArray_setMatrixWorldNeedsUpdate",
                value: function (e, t) {
                  this.resolvedProperty.fromArray(e, t),
                    (this.targetObject.matrixWorldNeedsUpdate = !0);
                }
              },
              {
                key: "_getValue_unbound",
                value: function (e, t) {
                  this.bind(), this.getValue(e, t);
                }
              },
              {
                key: "_setValue_unbound",
                value: function (e, t) {
                  this.bind(), this.setValue(e, t);
                }
              },
              {
                key: "bind",
                value: function () {
                  var t = this.node,
                    n = this.parsedPath,
                    i = n.objectName,
                    r = n.propertyName,
                    a = n.propertyIndex;
                  if (
                    (t ||
                      ((t = e.findNode(this.rootNode, n.nodeName)),
                      (this.node = t)),
                    (this.getValue = this._getValue_unavailable),
                    (this.setValue = this._setValue_unavailable),
                    t)
                  ) {
                    if (i) {
                      var o = n.objectIndex;
                      switch (i) {
                        case "materials":
                          if (!t.material)
                            return void console.error(
                              "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                              this
                            );
                          if (!t.material.materials)
                            return void console.error(
                              "THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
                              this
                            );
                          t = t.material.materials;
                          break;
                        case "bones":
                          if (!t.skeleton)
                            return void console.error(
                              "THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",
                              this
                            );
                          t = t.skeleton.bones;
                          for (var s = 0; s < t.length; s++)
                            if (t[s].name === o) {
                              o = s;
                              break;
                            }
                          break;
                        case "map":
                          if ("map" in t) {
                            t = t.map;
                            break;
                          }
                          if (!t.material)
                            return void console.error(
                              "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                              this
                            );
                          if (!t.material.map)
                            return void console.error(
                              "THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",
                              this
                            );
                          t = t.material.map;
                          break;
                        default:
                          if (void 0 === t[i])
                            return void console.error(
                              "THREE.PropertyBinding: Can not bind to objectName of node undefined.",
                              this
                            );
                          t = t[i];
                      }
                      if (void 0 !== o) {
                        if (void 0 === t[o])
                          return void console.error(
                            "THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
                            this,
                            t
                          );
                        t = t[o];
                      }
                    }
                    var l = t[r];
                    if (void 0 !== l) {
                      var u = this.Versioning.None;
                      (this.targetObject = t),
                        void 0 !== t.needsUpdate
                          ? (u = this.Versioning.NeedsUpdate)
                          : void 0 !== t.matrixWorldNeedsUpdate &&
                            (u = this.Versioning.MatrixWorldNeedsUpdate);
                      var c = this.BindingType.Direct;
                      if (void 0 !== a) {
                        if ("morphTargetInfluences" === r) {
                          if (!t.geometry)
                            return void console.error(
                              "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
                              this
                            );
                          if (!t.geometry.morphAttributes)
                            return void console.error(
                              "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
                              this
                            );
                          void 0 !== t.morphTargetDictionary[a] &&
                            (a = t.morphTargetDictionary[a]);
                        }
                        (c = this.BindingType.ArrayElement),
                          (this.resolvedProperty = l),
                          (this.propertyIndex = a);
                      } else
                        void 0 !== l.fromArray && void 0 !== l.toArray
                          ? ((c = this.BindingType.HasFromToArray),
                            (this.resolvedProperty = l))
                          : Array.isArray(l)
                          ? ((c = this.BindingType.EntireArray),
                            (this.resolvedProperty = l))
                          : (this.propertyName = r);
                      (this.getValue = this.GetterByBindingType[c]),
                        (this.setValue =
                          this.SetterByBindingTypeAndVersioning[c][u]);
                    } else {
                      var h = n.nodeName;
                      console.error(
                        "THREE.PropertyBinding: Trying to update property for track: " +
                          h +
                          "." +
                          r +
                          " but it wasn't found.",
                        t
                      );
                    }
                  } else
                    console.error(
                      "THREE.PropertyBinding: Trying to update node for track: " +
                        this.path +
                        " but it wasn't found."
                    );
                }
              },
              {
                key: "unbind",
                value: function () {
                  (this.node = null),
                    (this.getValue = this._getValue_unbound),
                    (this.setValue = this._setValue_unbound);
                }
              }
            ],
            [
              {
                key: "create",
                value: function (t, n, i) {
                  return t && t.isAnimationObjectGroup
                    ? new e.Composite(t, n, i)
                    : new e(t, n, i);
                }
              },
              {
                key: "sanitizeNodeName",
                value: function (e) {
                  return e.replace(/\s/g, "_").replace(Fy, "");
                }
              },
              {
                key: "parseTrackName",
                value: function (e) {
                  var t = Wy.exec(e);
                  if (null === t)
                    throw new Error(
                      "PropertyBinding: Cannot parse trackName: " + e
                    );
                  var n = {
                      nodeName: t[2],
                      objectName: t[3],
                      objectIndex: t[4],
                      propertyName: t[5],
                      propertyIndex: t[6]
                    },
                    i = n.nodeName && n.nodeName.lastIndexOf(".");
                  if (void 0 !== i && -1 !== i) {
                    var r = n.nodeName.substring(i + 1);
                    -1 !== jy.indexOf(r) &&
                      ((n.nodeName = n.nodeName.substring(0, i)),
                      (n.objectName = r));
                  }
                  if (null === n.propertyName || 0 === n.propertyName.length)
                    throw new Error(
                      "PropertyBinding: can not parse propertyName from trackName: " +
                        e
                    );
                  return n;
                }
              },
              {
                key: "findNode",
                value: function (e, t) {
                  if (
                    void 0 === t ||
                    "" === t ||
                    "." === t ||
                    -1 === t ||
                    t === e.name ||
                    t === e.uuid
                  )
                    return e;
                  if (e.skeleton) {
                    var n = e.skeleton.getBoneByName(t);
                    if (void 0 !== n) return n;
                  }
                  if (e.children) {
                    var i = function (e) {
                        for (var n = 0; n < e.length; n++) {
                          var r = e[n];
                          if (r.name === t || r.uuid === t) return r;
                          var a = i(r.children);
                          if (a) return a;
                        }
                        return null;
                      },
                      r = i(e.children);
                    if (r) return r;
                  }
                  return null;
                }
              }
            ]
          );
        })();
      (Ky.Composite = qy),
        (Ky.prototype.BindingType = {
          Direct: 0,
          EntireArray: 1,
          ArrayElement: 2,
          HasFromToArray: 3
        }),
        (Ky.prototype.Versioning = {
          None: 0,
          NeedsUpdate: 1,
          MatrixWorldNeedsUpdate: 2
        }),
        (Ky.prototype.GetterByBindingType = [
          Ky.prototype._getValue_direct,
          Ky.prototype._getValue_array,
          Ky.prototype._getValue_arrayElement,
          Ky.prototype._getValue_toArray
        ]),
        (Ky.prototype.SetterByBindingTypeAndVersioning = [
          [
            Ky.prototype._setValue_direct,
            Ky.prototype._setValue_direct_setNeedsUpdate,
            Ky.prototype._setValue_direct_setMatrixWorldNeedsUpdate
          ],
          [
            Ky.prototype._setValue_array,
            Ky.prototype._setValue_array_setNeedsUpdate,
            Ky.prototype._setValue_array_setMatrixWorldNeedsUpdate
          ],
          [
            Ky.prototype._setValue_arrayElement,
            Ky.prototype._setValue_arrayElement_setNeedsUpdate,
            Ky.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate
          ],
          [
            Ky.prototype._setValue_fromArray,
            Ky.prototype._setValue_fromArray_setNeedsUpdate,
            Ky.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate
          ]
        ]);
      var Xy = (function () {
          return yh(
            function e(t, n) {
              var i =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : null,
                r =
                  arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : n.blendMode;
              gh(this, e),
                (this._mixer = t),
                (this._clip = n),
                (this._localRoot = i),
                (this.blendMode = r);
              for (
                var a = n.tracks,
                  o = a.length,
                  s = new Array(o),
                  l = { endingStart: Qh, endingEnd: Qh },
                  u = 0;
                u !== o;
                ++u
              ) {
                var c = a[u].createInterpolant(null);
                (s[u] = c), (c.settings = l);
              }
              (this._interpolantSettings = l),
                (this._interpolants = s),
                (this._propertyBindings = new Array(o)),
                (this._cacheIndex = null),
                (this._byClipCacheIndex = null),
                (this._timeScaleInterpolant = null),
                (this._weightInterpolant = null),
                (this.loop = 2201),
                (this._loopCount = -1),
                (this._startTime = null),
                (this.time = 0),
                (this.timeScale = 1),
                (this._effectiveTimeScale = 1),
                (this.weight = 1),
                (this._effectiveWeight = 1),
                (this.repetitions = 1 / 0),
                (this.paused = !1),
                (this.enabled = !0),
                (this.clampWhenFinished = !1),
                (this.zeroSlopeAtStart = !0),
                (this.zeroSlopeAtEnd = !0);
            },
            [
              {
                key: "play",
                value: function () {
                  return this._mixer._activateAction(this), this;
                }
              },
              {
                key: "stop",
                value: function () {
                  return this._mixer._deactivateAction(this), this.reset();
                }
              },
              {
                key: "reset",
                value: function () {
                  return (
                    (this.paused = !1),
                    (this.enabled = !0),
                    (this.time = 0),
                    (this._loopCount = -1),
                    (this._startTime = null),
                    this.stopFading().stopWarping()
                  );
                }
              },
              {
                key: "isRunning",
                value: function () {
                  return (
                    this.enabled &&
                    !this.paused &&
                    0 !== this.timeScale &&
                    null === this._startTime &&
                    this._mixer._isActiveAction(this)
                  );
                }
              },
              {
                key: "isScheduled",
                value: function () {
                  return this._mixer._isActiveAction(this);
                }
              },
              {
                key: "startAt",
                value: function (e) {
                  return (this._startTime = e), this;
                }
              },
              {
                key: "setLoop",
                value: function (e, t) {
                  return (this.loop = e), (this.repetitions = t), this;
                }
              },
              {
                key: "setEffectiveWeight",
                value: function (e) {
                  return (
                    (this.weight = e),
                    (this._effectiveWeight = this.enabled ? e : 0),
                    this.stopFading()
                  );
                }
              },
              {
                key: "getEffectiveWeight",
                value: function () {
                  return this._effectiveWeight;
                }
              },
              {
                key: "fadeIn",
                value: function (e) {
                  return this._scheduleFading(e, 0, 1);
                }
              },
              {
                key: "fadeOut",
                value: function (e) {
                  return this._scheduleFading(e, 1, 0);
                }
              },
              {
                key: "crossFadeFrom",
                value: function (e, t, n) {
                  if ((e.fadeOut(t), this.fadeIn(t), n)) {
                    var i = this._clip.duration,
                      r = e._clip.duration,
                      a = r / i,
                      o = i / r;
                    e.warp(1, a, t), this.warp(o, 1, t);
                  }
                  return this;
                }
              },
              {
                key: "crossFadeTo",
                value: function (e, t, n) {
                  return e.crossFadeFrom(this, t, n);
                }
              },
              {
                key: "stopFading",
                value: function () {
                  var e = this._weightInterpolant;
                  return (
                    null !== e &&
                      ((this._weightInterpolant = null),
                      this._mixer._takeBackControlInterpolant(e)),
                    this
                  );
                }
              },
              {
                key: "setEffectiveTimeScale",
                value: function (e) {
                  return (
                    (this.timeScale = e),
                    (this._effectiveTimeScale = this.paused ? 0 : e),
                    this.stopWarping()
                  );
                }
              },
              {
                key: "getEffectiveTimeScale",
                value: function () {
                  return this._effectiveTimeScale;
                }
              },
              {
                key: "setDuration",
                value: function (e) {
                  return (
                    (this.timeScale = this._clip.duration / e),
                    this.stopWarping()
                  );
                }
              },
              {
                key: "syncWith",
                value: function (e) {
                  return (
                    (this.time = e.time),
                    (this.timeScale = e.timeScale),
                    this.stopWarping()
                  );
                }
              },
              {
                key: "halt",
                value: function (e) {
                  return this.warp(this._effectiveTimeScale, 0, e);
                }
              },
              {
                key: "warp",
                value: function (e, t, n) {
                  var i = this._mixer,
                    r = i.time,
                    a = this.timeScale,
                    o = this._timeScaleInterpolant;
                  null === o &&
                    ((o = i._lendControlInterpolant()),
                    (this._timeScaleInterpolant = o));
                  var s = o.parameterPositions,
                    l = o.sampleValues;
                  return (
                    (s[0] = r),
                    (s[1] = r + n),
                    (l[0] = e / a),
                    (l[1] = t / a),
                    this
                  );
                }
              },
              {
                key: "stopWarping",
                value: function () {
                  var e = this._timeScaleInterpolant;
                  return (
                    null !== e &&
                      ((this._timeScaleInterpolant = null),
                      this._mixer._takeBackControlInterpolant(e)),
                    this
                  );
                }
              },
              {
                key: "getMixer",
                value: function () {
                  return this._mixer;
                }
              },
              {
                key: "getClip",
                value: function () {
                  return this._clip;
                }
              },
              {
                key: "getRoot",
                value: function () {
                  return this._localRoot || this._mixer._root;
                }
              },
              {
                key: "_update",
                value: function (e, t, n, i) {
                  if (this.enabled) {
                    var r = this._startTime;
                    if (null !== r) {
                      var a = (e - r) * n;
                      a < 0 || 0 === n
                        ? (t = 0)
                        : ((this._startTime = null), (t = n * a));
                    }
                    t *= this._updateTimeScale(e);
                    var o = this._updateTime(t),
                      s = this._updateWeight(e);
                    if (s > 0) {
                      var l = this._interpolants,
                        u = this._propertyBindings;
                      if (2501 === this.blendMode)
                        for (var c = 0, h = l.length; c !== h; ++c)
                          l[c].evaluate(o), u[c].accumulateAdditive(s);
                      else
                        for (var d = 0, p = l.length; d !== p; ++d)
                          l[d].evaluate(o), u[d].accumulate(i, s);
                    }
                  } else this._updateWeight(e);
                }
              },
              {
                key: "_updateWeight",
                value: function (e) {
                  var t = 0;
                  if (this.enabled) {
                    t = this.weight;
                    var n = this._weightInterpolant;
                    if (null !== n) {
                      var i = n.evaluate(e)[0];
                      (t *= i),
                        e > n.parameterPositions[1] &&
                          (this.stopFading(), 0 === i && (this.enabled = !1));
                    }
                  }
                  return (this._effectiveWeight = t), t;
                }
              },
              {
                key: "_updateTimeScale",
                value: function (e) {
                  var t = 0;
                  if (!this.paused) {
                    t = this.timeScale;
                    var n = this._timeScaleInterpolant;
                    null !== n &&
                      ((t *= n.evaluate(e)[0]),
                      e > n.parameterPositions[1] &&
                        (this.stopWarping(),
                        0 === t ? (this.paused = !0) : (this.timeScale = t)));
                  }
                  return (this._effectiveTimeScale = t), t;
                }
              },
              {
                key: "_updateTime",
                value: function (e) {
                  var t = this._clip.duration,
                    n = this.loop,
                    i = this.time + e,
                    r = this._loopCount,
                    a = 2202 === n;
                  if (0 === e) return -1 === r || !a || 1 & ~r ? i : t - i;
                  if (2200 === n) {
                    -1 === r &&
                      ((this._loopCount = 0), this._setEndings(!0, !0, !1));
                    e: {
                      if (i >= t) i = t;
                      else {
                        if (!(i < 0)) {
                          this.time = i;
                          break e;
                        }
                        i = 0;
                      }
                      this.clampWhenFinished
                        ? (this.paused = !0)
                        : (this.enabled = !1),
                        (this.time = i),
                        this._mixer.dispatchEvent({
                          type: "finished",
                          action: this,
                          direction: e < 0 ? -1 : 1
                        });
                    }
                  } else {
                    if (
                      (-1 === r &&
                        (e >= 0
                          ? ((r = 0),
                            this._setEndings(!0, 0 === this.repetitions, a))
                          : this._setEndings(0 === this.repetitions, !0, a)),
                      i >= t || i < 0)
                    ) {
                      var o = Math.floor(i / t);
                      (i -= t * o), (r += Math.abs(o));
                      var s = this.repetitions - r;
                      if (s <= 0)
                        this.clampWhenFinished
                          ? (this.paused = !0)
                          : (this.enabled = !1),
                          (i = e > 0 ? t : 0),
                          (this.time = i),
                          this._mixer.dispatchEvent({
                            type: "finished",
                            action: this,
                            direction: e > 0 ? 1 : -1
                          });
                      else {
                        if (1 === s) {
                          var l = e < 0;
                          this._setEndings(l, !l, a);
                        } else this._setEndings(!1, !1, a);
                        (this._loopCount = r),
                          (this.time = i),
                          this._mixer.dispatchEvent({
                            type: "loop",
                            action: this,
                            loopDelta: o
                          });
                      }
                    } else this.time = i;
                    if (a && !(1 & ~r)) return t - i;
                  }
                  return i;
                }
              },
              {
                key: "_setEndings",
                value: function (e, t, n) {
                  var i = this._interpolantSettings;
                  n
                    ? ((i.endingStart = $h), (i.endingEnd = $h))
                    : ((i.endingStart = e
                        ? this.zeroSlopeAtStart
                          ? $h
                          : Qh
                        : ed),
                      (i.endingEnd = t ? (this.zeroSlopeAtEnd ? $h : Qh) : ed));
                }
              },
              {
                key: "_scheduleFading",
                value: function (e, t, n) {
                  var i = this._mixer,
                    r = i.time,
                    a = this._weightInterpolant;
                  null === a &&
                    ((a = i._lendControlInterpolant()),
                    (this._weightInterpolant = a));
                  var o = a.parameterPositions,
                    s = a.sampleValues;
                  return (
                    (o[0] = r), (s[0] = t), (o[1] = r + e), (s[1] = n), this
                  );
                }
              }
            ]
          );
        })(),
        Yy = new Float32Array(1),
        Zy = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t))._root = e),
              n._initMemoryManager(),
              (n._accuIndex = 0),
              (n.time = 0),
              (n.timeScale = 1),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "_bindAction",
                value: function (e, t) {
                  var n = e._localRoot || this._root,
                    i = e._clip.tracks,
                    r = i.length,
                    a = e._propertyBindings,
                    o = e._interpolants,
                    s = n.uuid,
                    l = this._bindingsByRootAndName,
                    u = l[s];
                  void 0 === u && ((u = {}), (l[s] = u));
                  for (var c = 0; c !== r; ++c) {
                    var h = i[c],
                      d = h.name,
                      p = u[d];
                    if (void 0 !== p) ++p.referenceCount, (a[c] = p);
                    else {
                      if (void 0 !== (p = a[c])) {
                        null === p._cacheIndex &&
                          (++p.referenceCount,
                          this._addInactiveBinding(p, s, d));
                        continue;
                      }
                      var f = t && t._propertyBindings[c].binding.parsedPath;
                      ++(p = new Oy(
                        Ky.create(n, d, f),
                        h.ValueTypeName,
                        h.getValueSize()
                      )).referenceCount,
                        this._addInactiveBinding(p, s, d),
                        (a[c] = p);
                    }
                    o[c].resultBuffer = p.buffer;
                  }
                }
              },
              {
                key: "_activateAction",
                value: function (e) {
                  if (!this._isActiveAction(e)) {
                    if (null === e._cacheIndex) {
                      var t = (e._localRoot || this._root).uuid,
                        n = e._clip.uuid,
                        i = this._actionsByClip[n];
                      this._bindAction(e, i && i.knownActions[0]),
                        this._addInactiveAction(e, n, t);
                    }
                    for (
                      var r = e._propertyBindings, a = 0, o = r.length;
                      a !== o;
                      ++a
                    ) {
                      var s = r[a];
                      0 == s.useCount++ &&
                        (this._lendBinding(s), s.saveOriginalState());
                    }
                    this._lendAction(e);
                  }
                }
              },
              {
                key: "_deactivateAction",
                value: function (e) {
                  if (this._isActiveAction(e)) {
                    for (
                      var t = e._propertyBindings, n = 0, i = t.length;
                      n !== i;
                      ++n
                    ) {
                      var r = t[n];
                      0 == --r.useCount &&
                        (r.restoreOriginalState(), this._takeBackBinding(r));
                    }
                    this._takeBackAction(e);
                  }
                }
              },
              {
                key: "_initMemoryManager",
                value: function () {
                  (this._actions = []),
                    (this._nActiveActions = 0),
                    (this._actionsByClip = {}),
                    (this._bindings = []),
                    (this._nActiveBindings = 0),
                    (this._bindingsByRootAndName = {}),
                    (this._controlInterpolants = []),
                    (this._nActiveControlInterpolants = 0);
                  var e = this;
                  this.stats = {
                    actions: {
                      get total() {
                        return e._actions.length;
                      },
                      get inUse() {
                        return e._nActiveActions;
                      }
                    },
                    bindings: {
                      get total() {
                        return e._bindings.length;
                      },
                      get inUse() {
                        return e._nActiveBindings;
                      }
                    },
                    controlInterpolants: {
                      get total() {
                        return e._controlInterpolants.length;
                      },
                      get inUse() {
                        return e._nActiveControlInterpolants;
                      }
                    }
                  };
                }
              },
              {
                key: "_isActiveAction",
                value: function (e) {
                  var t = e._cacheIndex;
                  return null !== t && t < this._nActiveActions;
                }
              },
              {
                key: "_addInactiveAction",
                value: function (e, t, n) {
                  var i = this._actions,
                    r = this._actionsByClip,
                    a = r[t];
                  if (void 0 === a)
                    (a = { knownActions: [e], actionByRoot: {} }),
                      (e._byClipCacheIndex = 0),
                      (r[t] = a);
                  else {
                    var o = a.knownActions;
                    (e._byClipCacheIndex = o.length), o.push(e);
                  }
                  (e._cacheIndex = i.length),
                    i.push(e),
                    (a.actionByRoot[n] = e);
                }
              },
              {
                key: "_removeInactiveAction",
                value: function (e) {
                  var t = this._actions,
                    n = t[t.length - 1],
                    i = e._cacheIndex;
                  (n._cacheIndex = i),
                    (t[i] = n),
                    t.pop(),
                    (e._cacheIndex = null);
                  var r = e._clip.uuid,
                    a = this._actionsByClip,
                    o = a[r],
                    s = o.knownActions,
                    l = s[s.length - 1],
                    u = e._byClipCacheIndex;
                  (l._byClipCacheIndex = u),
                    (s[u] = l),
                    s.pop(),
                    (e._byClipCacheIndex = null),
                    delete o.actionByRoot[(e._localRoot || this._root).uuid],
                    0 === s.length && delete a[r],
                    this._removeInactiveBindingsForAction(e);
                }
              },
              {
                key: "_removeInactiveBindingsForAction",
                value: function (e) {
                  for (
                    var t = e._propertyBindings, n = 0, i = t.length;
                    n !== i;
                    ++n
                  ) {
                    var r = t[n];
                    0 == --r.referenceCount && this._removeInactiveBinding(r);
                  }
                }
              },
              {
                key: "_lendAction",
                value: function (e) {
                  var t = this._actions,
                    n = e._cacheIndex,
                    i = this._nActiveActions++,
                    r = t[i];
                  (e._cacheIndex = i),
                    (t[i] = e),
                    (r._cacheIndex = n),
                    (t[n] = r);
                }
              },
              {
                key: "_takeBackAction",
                value: function (e) {
                  var t = this._actions,
                    n = e._cacheIndex,
                    i = --this._nActiveActions,
                    r = t[i];
                  (e._cacheIndex = i),
                    (t[i] = e),
                    (r._cacheIndex = n),
                    (t[n] = r);
                }
              },
              {
                key: "_addInactiveBinding",
                value: function (e, t, n) {
                  var i = this._bindingsByRootAndName,
                    r = this._bindings,
                    a = i[t];
                  void 0 === a && ((a = {}), (i[t] = a)),
                    (a[n] = e),
                    (e._cacheIndex = r.length),
                    r.push(e);
                }
              },
              {
                key: "_removeInactiveBinding",
                value: function (e) {
                  var t = this._bindings,
                    n = e.binding,
                    i = n.rootNode.uuid,
                    r = n.path,
                    a = this._bindingsByRootAndName,
                    o = a[i],
                    s = t[t.length - 1],
                    l = e._cacheIndex;
                  (s._cacheIndex = l),
                    (t[l] = s),
                    t.pop(),
                    delete o[r],
                    0 === Object.keys(o).length && delete a[i];
                }
              },
              {
                key: "_lendBinding",
                value: function (e) {
                  var t = this._bindings,
                    n = e._cacheIndex,
                    i = this._nActiveBindings++,
                    r = t[i];
                  (e._cacheIndex = i),
                    (t[i] = e),
                    (r._cacheIndex = n),
                    (t[n] = r);
                }
              },
              {
                key: "_takeBackBinding",
                value: function (e) {
                  var t = this._bindings,
                    n = e._cacheIndex,
                    i = --this._nActiveBindings,
                    r = t[i];
                  (e._cacheIndex = i),
                    (t[i] = e),
                    (r._cacheIndex = n),
                    (t[n] = r);
                }
              },
              {
                key: "_lendControlInterpolant",
                value: function () {
                  var e = this._controlInterpolants,
                    t = this._nActiveControlInterpolants++,
                    n = e[t];
                  return (
                    void 0 === n &&
                      (((n = new Y_(
                        new Float32Array(2),
                        new Float32Array(2),
                        1,
                        Yy
                      )).__cacheIndex = t),
                      (e[t] = n)),
                    n
                  );
                }
              },
              {
                key: "_takeBackControlInterpolant",
                value: function (e) {
                  var t = this._controlInterpolants,
                    n = e.__cacheIndex,
                    i = --this._nActiveControlInterpolants,
                    r = t[i];
                  (e.__cacheIndex = i),
                    (t[i] = e),
                    (r.__cacheIndex = n),
                    (t[n] = r);
                }
              },
              {
                key: "clipAction",
                value: function (e, t, n) {
                  var i = t || this._root,
                    r = i.uuid,
                    a = "string" == typeof e ? ay.findByName(i, e) : e,
                    o = null !== a ? a.uuid : e,
                    s = this._actionsByClip[o],
                    l = null;
                  if (
                    (void 0 === n && (n = null !== a ? a.blendMode : 2500),
                    void 0 !== s)
                  ) {
                    var u = s.actionByRoot[r];
                    if (void 0 !== u && u.blendMode === n) return u;
                    (l = s.knownActions[0]), null === a && (a = l._clip);
                  }
                  if (null === a) return null;
                  var c = new Xy(this, a, t, n);
                  return (
                    this._bindAction(c, l), this._addInactiveAction(c, o, r), c
                  );
                }
              },
              {
                key: "existingAction",
                value: function (e, t) {
                  var n = t || this._root,
                    i = n.uuid,
                    r = "string" == typeof e ? ay.findByName(n, e) : e,
                    a = r ? r.uuid : e,
                    o = this._actionsByClip[a];
                  return (void 0 !== o && o.actionByRoot[i]) || null;
                }
              },
              {
                key: "stopAllAction",
                value: function () {
                  for (
                    var e = this._actions, t = this._nActiveActions - 1;
                    t >= 0;
                    --t
                  )
                    e[t].stop();
                  return this;
                }
              },
              {
                key: "update",
                value: function (e) {
                  e *= this.timeScale;
                  for (
                    var t = this._actions,
                      n = this._nActiveActions,
                      i = (this.time += e),
                      r = Math.sign(e),
                      a = (this._accuIndex ^= 1),
                      o = 0;
                    o !== n;
                    ++o
                  )
                    t[o]._update(i, e, r, a);
                  for (
                    var s = this._bindings, l = this._nActiveBindings, u = 0;
                    u !== l;
                    ++u
                  )
                    s[u].apply(a);
                  return this;
                }
              },
              {
                key: "setTime",
                value: function (e) {
                  this.time = 0;
                  for (var t = 0; t < this._actions.length; t++)
                    this._actions[t].time = 0;
                  return this.update(e);
                }
              },
              {
                key: "getRoot",
                value: function () {
                  return this._root;
                }
              },
              {
                key: "uncacheClip",
                value: function (e) {
                  var t = this._actions,
                    n = e.uuid,
                    i = this._actionsByClip,
                    r = i[n];
                  if (void 0 !== r) {
                    for (
                      var a = r.knownActions, o = 0, s = a.length;
                      o !== s;
                      ++o
                    ) {
                      var l = a[o];
                      this._deactivateAction(l);
                      var u = l._cacheIndex,
                        c = t[t.length - 1];
                      (l._cacheIndex = null),
                        (l._byClipCacheIndex = null),
                        (c._cacheIndex = u),
                        (t[u] = c),
                        t.pop(),
                        this._removeInactiveBindingsForAction(l);
                    }
                    delete i[n];
                  }
                }
              },
              {
                key: "uncacheRoot",
                value: function (e) {
                  var t = e.uuid,
                    n = this._actionsByClip;
                  for (var i in n) {
                    var r = n[i].actionByRoot[t];
                    void 0 !== r &&
                      (this._deactivateAction(r),
                      this._removeInactiveAction(r));
                  }
                  var a = this._bindingsByRootAndName[t];
                  if (void 0 !== a)
                    for (var o in a) {
                      var s = a[o];
                      s.restoreOriginalState(), this._removeInactiveBinding(s);
                    }
                }
              },
              {
                key: "uncacheAction",
                value: function (e, t) {
                  var n = this.existingAction(e, t);
                  null !== n &&
                    (this._deactivateAction(n), this._removeInactiveAction(n));
                }
              }
            ])
          );
        })(cd);
      ("undefined" == typeof __THREE_DEVTOOLS__
        ? "undefined"
        : xh(__THREE_DEVTOOLS__)) < "u" &&
        __THREE_DEVTOOLS__.dispatchEvent(
          new CustomEvent("register", { detail: { revision: Sh } })
        ),
        ("undefined" == typeof window ? "undefined" : xh(window)) < "u" &&
          (window.__THREE__
            ? console.warn(
                "WARNING: Multiple instances of Three.js being imported."
              )
            : (window.__THREE__ = Sh));
      var Jy = {
          uniforms: { tDiffuse: { value: null }, opacity: { value: 1 } },
          vertexShader:
            "\n  \n          varying vec2 vUv;\n  \n          void main() {\n  \n              vUv = uv;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n          }",
          fragmentShader:
            "\n  \n          uniform float opacity;\n  \n          uniform sampler2D tDiffuse;\n  \n          varying vec2 vUv;\n  \n          void main() {\n  \n              gl_FragColor = texture2D( tDiffuse, vUv );\n              gl_FragColor.a *= opacity;\n  \n  \n          }"
        },
        Qy = (function () {
          return yh(
            function e() {
              gh(this, e),
                (this.isPass = !0),
                (this.enabled = !0),
                (this.needsSwap = !0),
                (this.clear = !1),
                (this.renderToScreen = !1);
            },
            [
              { key: "setSize", value: function () {} },
              {
                key: "render",
                value: function () {
                  console.error(
                    "THREE.Pass: .render() must be implemented in derived pass."
                  );
                }
              },
              { key: "dispose", value: function () {} }
            ]
          );
        })(),
        $y = new Cv(-1, 1, 1, -1, 0, 1),
        eb = new Af();
      eb.setAttribute("position", new wf([-1, 3, 0, -1, -1, 0, 3, -1, 0], 3)),
        eb.setAttribute("uv", new wf([0, 2, 0, 0, 2, 0], 2));
      var tb = (function () {
          return yh(
            function e(t) {
              gh(this, e), (this._mesh = new Xf(eb, t));
            },
            [
              {
                key: "dispose",
                value: function () {
                  this._mesh.geometry.dispose();
                }
              },
              {
                key: "render",
                value: function (e) {
                  e.render(this._mesh, $y);
                }
              },
              {
                key: "material",
                get: function () {
                  return this._mesh.material;
                },
                set: function (e) {
                  this._mesh.material = e;
                }
              }
            ]
          );
        })(),
        nb = (function (e) {
          function t(e, n) {
            var i;
            return (
              gh(this, t),
              ((i = uh(this, t)).textureID = void 0 !== n ? n : "tDiffuse"),
              e instanceof tv
                ? ((i.uniforms = e.uniforms), (i.material = e))
                : e &&
                  ((i.uniforms = ev.clone(e.uniforms)),
                  (i.material = new tv({
                    defines: Object.assign({}, e.defines),
                    uniforms: i.uniforms,
                    vertexShader: e.vertexShader,
                    fragmentShader: e.fragmentShader
                  }))),
              (i.fsQuad = new tb(i.material)),
              i
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "render",
                value: function (e, t, n) {
                  this.uniforms[this.textureID] &&
                    (this.uniforms[this.textureID].value = n.texture),
                    (this.fsQuad.material = this.material),
                    this.renderToScreen
                      ? (e.setRenderTarget(null), this.fsQuad.render(e))
                      : (e.setRenderTarget(t),
                        this.clear &&
                          e.clear(
                            e.autoClearColor,
                            e.autoClearDepth,
                            e.autoClearStencil
                          ),
                        this.fsQuad.render(e));
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.material.dispose(), this.fsQuad.dispose();
                }
              }
            ])
          );
        })(Qy),
        ib = (function (e) {
          function t(e, n) {
            var i;
            return (
              gh(this, t),
              ((i = uh(this, t)).scene = e),
              (i.camera = n),
              (i.clear = !0),
              (i.needsSwap = !1),
              (i.inverse = !1),
              i
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "render",
                value: function (e, t, n) {
                  var i,
                    r,
                    a = e.getContext(),
                    o = e.state;
                  o.buffers.color.setMask(!1),
                    o.buffers.depth.setMask(!1),
                    o.buffers.color.setLocked(!0),
                    o.buffers.depth.setLocked(!0),
                    this.inverse ? ((i = 0), (r = 1)) : ((i = 1), (r = 0)),
                    o.buffers.stencil.setTest(!0),
                    o.buffers.stencil.setOp(a.REPLACE, a.REPLACE, a.REPLACE),
                    o.buffers.stencil.setFunc(a.ALWAYS, i, 4294967295),
                    o.buffers.stencil.setClear(r),
                    o.buffers.stencil.setLocked(!0),
                    e.setRenderTarget(n),
                    this.clear && e.clear(),
                    e.render(this.scene, this.camera),
                    e.setRenderTarget(t),
                    this.clear && e.clear(),
                    e.render(this.scene, this.camera),
                    o.buffers.color.setLocked(!1),
                    o.buffers.depth.setLocked(!1),
                    o.buffers.stencil.setLocked(!1),
                    o.buffers.stencil.setFunc(a.EQUAL, 1, 4294967295),
                    o.buffers.stencil.setOp(a.KEEP, a.KEEP, a.KEEP),
                    o.buffers.stencil.setLocked(!0);
                }
              }
            ])
          );
        })(Qy),
        rb = (function (e) {
          function t() {
            var e;
            return gh(this, t), ((e = uh(this, t)).needsSwap = !1), e;
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "render",
                value: function (e) {
                  e.state.buffers.stencil.setLocked(!1),
                    e.state.buffers.stencil.setTest(!1);
                }
              }
            ])
          );
        })(Qy),
        ab = (function () {
          return yh(
            function e(t, n) {
              if ((gh(this, e), (this.renderer = t), void 0 === n)) {
                var i = t.getSize(new Md());
                (this._pixelRatio = t.getPixelRatio()),
                  (this._width = i.width),
                  (this._height = i.height),
                  ((n = new Gd(
                    this._width * this._pixelRatio,
                    this._height * this._pixelRatio
                  )).texture.name = "EffectComposer.rt1");
              } else
                (this._pixelRatio = 1),
                  (this._width = n.width),
                  (this._height = n.height);
              (this.renderTarget1 = n),
                (this.renderTarget2 = n.clone()),
                (this.renderTarget2.texture.name = "EffectComposer.rt2"),
                (this.writeBuffer = this.renderTarget1),
                (this.readBuffer = this.renderTarget2),
                (this.renderToScreen = !0),
                (this.passes = []),
                (this.copyPass = new nb(Jy)),
                (this.clock = new Ry());
            },
            [
              {
                key: "swapBuffers",
                value: function () {
                  var e = this.readBuffer;
                  (this.readBuffer = this.writeBuffer), (this.writeBuffer = e);
                }
              },
              {
                key: "addPass",
                value: function (e) {
                  this.passes.push(e),
                    e.setSize(
                      this._width * this._pixelRatio,
                      this._height * this._pixelRatio
                    );
                }
              },
              {
                key: "insertPass",
                value: function (e, t) {
                  this.passes.splice(t, 0, e),
                    e.setSize(
                      this._width * this._pixelRatio,
                      this._height * this._pixelRatio
                    );
                }
              },
              {
                key: "removePass",
                value: function (e) {
                  var t = this.passes.indexOf(e);
                  -1 !== t && this.passes.splice(t, 1);
                }
              },
              {
                key: "isLastEnabledPass",
                value: function (e) {
                  for (var t = e + 1; t < this.passes.length; t++)
                    if (this.passes[t].enabled) return !1;
                  return !0;
                }
              },
              {
                key: "render",
                value: function (e) {
                  void 0 === e && (e = this.clock.getDelta());
                  for (
                    var t = this.renderer.getRenderTarget(),
                      n = !1,
                      i = 0,
                      r = this.passes.length;
                    i < r;
                    i++
                  ) {
                    var a = this.passes[i];
                    if (!1 !== a.enabled) {
                      if (
                        ((a.renderToScreen =
                          this.renderToScreen && this.isLastEnabledPass(i)),
                        a.render(
                          this.renderer,
                          this.writeBuffer,
                          this.readBuffer,
                          e,
                          n
                        ),
                        a.needsSwap)
                      ) {
                        if (n) {
                          var o = this.renderer.getContext(),
                            s = this.renderer.state.buffers.stencil;
                          s.setFunc(o.NOTEQUAL, 1, 4294967295),
                            this.copyPass.render(
                              this.renderer,
                              this.writeBuffer,
                              this.readBuffer,
                              e
                            ),
                            s.setFunc(o.EQUAL, 1, 4294967295);
                        }
                        this.swapBuffers();
                      }
                      void 0 !== ib &&
                        (a instanceof ib
                          ? (n = !0)
                          : a instanceof rb && (n = !1));
                    }
                  }
                  this.renderer.setRenderTarget(t);
                }
              },
              {
                key: "reset",
                value: function (e) {
                  if (void 0 === e) {
                    var t = this.renderer.getSize(new Md());
                    (this._pixelRatio = this.renderer.getPixelRatio()),
                      (this._width = t.width),
                      (this._height = t.height),
                      (e = this.renderTarget1.clone()).setSize(
                        this._width * this._pixelRatio,
                        this._height * this._pixelRatio
                      );
                  }
                  this.renderTarget1.dispose(),
                    this.renderTarget2.dispose(),
                    (this.renderTarget1 = e),
                    (this.renderTarget2 = e.clone()),
                    (this.writeBuffer = this.renderTarget1),
                    (this.readBuffer = this.renderTarget2);
                }
              },
              {
                key: "setSize",
                value: function (e, t) {
                  (this._width = e), (this._height = t);
                  var n = this._width * this._pixelRatio,
                    i = this._height * this._pixelRatio;
                  this.renderTarget1.setSize(n, i),
                    this.renderTarget2.setSize(n, i);
                  for (var r = 0; r < this.passes.length; r++)
                    this.passes[r].setSize(n, i);
                }
              },
              {
                key: "setPixelRatio",
                value: function (e) {
                  (this._pixelRatio = e),
                    this.setSize(this._width, this._height);
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.renderTarget1.dispose(),
                    this.renderTarget2.dispose(),
                    this.copyPass.dispose();
                }
              }
            ]
          );
        })(),
        ob = (function (e) {
          function t(e, n, i, r, a) {
            var o;
            return (
              gh(this, t),
              ((o = uh(this, t)).scene = e),
              (o.camera = n),
              (o.overrideMaterial = i),
              (o.clearColor = r),
              (o.clearAlpha = void 0 !== a ? a : 0),
              (o.clear = !0),
              (o.clearDepth = !1),
              (o.needsSwap = !1),
              (o._oldClearColor = new ff()),
              o
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "render",
                value: function (e, t, n) {
                  var i,
                    r,
                    a = e.autoClear;
                  (e.autoClear = !1),
                    void 0 !== this.overrideMaterial &&
                      ((r = this.scene.overrideMaterial),
                      (this.scene.overrideMaterial = this.overrideMaterial)),
                    this.clearColor &&
                      (e.getClearColor(this._oldClearColor),
                      (i = e.getClearAlpha()),
                      e.setClearColor(this.clearColor, this.clearAlpha)),
                    this.clearDepth && e.clearDepth(),
                    e.setRenderTarget(this.renderToScreen ? null : n),
                    this.clear &&
                      e.clear(
                        e.autoClearColor,
                        e.autoClearDepth,
                        e.autoClearStencil
                      ),
                    e.render(this.scene, this.camera),
                    this.clearColor && e.setClearColor(this._oldClearColor, i),
                    void 0 !== this.overrideMaterial &&
                      (this.scene.overrideMaterial = r),
                    (e.autoClear = a);
                }
              }
            ])
          );
        })(Qy),
        sb = (function (e) {
          function t() {
            var e;
            gh(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return wh((e = uh(this, t, [].concat(i))), "rootSceneScale", 1), e;
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "resize",
                value: function (e, t) {
                  this.scale.setScalar(t > e ? e / t : 1);
                }
              },
              {
                key: "resizeLandscape",
                value: function (e, t) {
                  (this.rootSceneScale = Ma.isPortrait ? t / e : 1),
                    this.scale.setScalar(this.rootSceneScale);
                }
              }
            ])
          );
        })(Xg),
        lb = (function (e) {
          function t() {
            var e;
            gh(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return (
              wh((e = uh(this, t, [].concat(i))), "renderer", void 0),
              wh(e, "scene", void 0),
              wh(e, "camera", void 0),
              wh(e, "_composer", void 0),
              wh(e, "_count", 0),
              wh(e, "_isInit", !1),
              wh(e, "isLooseContext", !1),
              wh(e, "_isDestroy", !1),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "onInit",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : this.option,
                    t = e.canvas,
                    n = void 0 === t ? this.el : t,
                    i = e.isFullSize,
                    r = void 0 !== i && i,
                    a = e.width,
                    o =
                      void 0 === a
                        ? r
                          ? window.innerWidth
                          : this.el.clientWidth
                        : a,
                    s = e.height,
                    l =
                      void 0 === s
                        ? r
                          ? Math.max(window.innerHeight, this.el.clientHeight)
                          : this.el.clientHeight
                        : s,
                    u = e.fps,
                    c = void 0 === u ? 60 : u,
                    h = e.pixelRatio,
                    d = e.pixelRatioMax,
                    p = void 0 === d ? 1 / 0 : d,
                    f = e.pixelRatioAbsolute,
                    v = e.alpha,
                    m = void 0 !== v && v,
                    g = e.antialias,
                    _ = void 0 !== g && g,
                    y = e.stencil,
                    b = void 0 !== y && y,
                    x = e.powerPreference,
                    w = void 0 === x ? "low-power" : x,
                    S = e.logarithmicDepthBuffer,
                    M = void 0 === S || S,
                    T = (e.autoClear, e.clearColor),
                    k = void 0 === T ? 0 : T,
                    E = e.clearAlpha,
                    C = void 0 === E ? 0 : E,
                    D = e.camera,
                    A = (void 0 === D ? {} : D).extraFar,
                    P = void 0 === A ? 1 : A,
                    L = e.isManual,
                    R = void 0 !== L && L;
                  (this.optionSelf = e),
                    (this.canvas = n),
                    (this.isFullSize = r),
                    (this.width = this._initialWidth = o),
                    (this.height = this._initialHeight = l),
                    (this._isSpecifiedWidth =
                      "width" in e && o !== this.el.clientWidth),
                    (this._isSpecifiedHeight =
                      "height" in e && l !== this.el.clientHeight),
                    (this.framerate = 60 / c),
                    (this.alpha = m),
                    (this.antialias = _),
                    (this.stencil = b),
                    (this.powerPreference = w),
                    (this.logarithmicDepthBuffer = M),
                    (this.pixelRatioFixed = h || f),
                    (this.pixelRatioMax = p),
                    (this._isFixedPixelRatio = "pixelRatio" in e),
                    (this._isFixedPixelRatioAbsolute =
                      "pixelRatioAbsolute" in e),
                    (this.clearColor = k),
                    (this.clearAlpha = C),
                    (this.extraFar = P),
                    (this.onWebglcontextlost =
                      this.onWebglcontextlost.bind(this)),
                    R || this.init();
                }
              },
              {
                key: "init",
                value: function () {
                  if (!this._isInit) {
                    (this._isInit = !0),
                      this.initRenderer(),
                      (this.scene = new sb());
                    var e = this.optionSelf.camera || {},
                      t = e.fov,
                      n = e.aspect,
                      i = e.near,
                      r = e.far;
                    this.camera = new iv(t, n, i, r);
                  }
                }
              },
              {
                key: "initPostProcessing",
                value: function (e) {
                  e.length > 0 || (e = [e]);
                  var t = this.renderer,
                    n = this.scene,
                    i = this.camera,
                    r = t.getSize(new Md()),
                    a = t.getPixelRatio();
                  (r.width *= a), (r.height *= a);
                  var o = (this._composer = new ab(
                      t,
                      new Gd(r.width, r.height, {
                        depthBuffer: !1,
                        stencilBuffer: !1
                      })
                    )),
                    s = new ob(n, i);
                  o.addPass(s);
                  for (var l = 0; l < e.length; l++) {
                    var u = e[l];
                    (u.renderToScreen = l === e.length - 1), o.addPass(u);
                  }
                  t.autoClear = !1;
                }
              },
              {
                key: "render",
                value: function () {
                  this._isDestroy ||
                    (this._composer
                      ? this._composer.render()
                      : this.renderer &&
                        this.renderer.render(this.scene, this.camera));
                }
              },
              {
                key: "onResize",
                value: function () {
                  if (this._isInit && !this._isDestroy) {
                    var e = eo(),
                      t = this.el,
                      n = this.renderer,
                      i = this.scene,
                      r = this.camera,
                      a = (this.pixelRatio = this._isFixedPixelRatioAbsolute
                        ? this.pixelRatioFixed
                        : this._isFixedPixelRatio
                        ? Math.min(
                            this.pixelRatioFixed,
                            window.devicePixelRatio
                          )
                        : Math.min(
                            window.devicePixelRatio,
                            this.pixelRatioMax
                          ));
                    t.removeAttribute("width"),
                      t.removeAttribute("height"),
                      (t.style.width = ""),
                      (t.style.height = "");
                    var o = (this.width = this.isFullSize
                        ? e
                        : this._isSpecifiedWidth
                        ? no(this._initialWidth)
                        : t.clientWidth),
                      s = (this.height = this.isFullSize
                        ? Math.max(to(), t.clientHeight)
                        : this._isSpecifiedHeight
                        ? no(this._initialHeight)
                        : t.clientHeight);
                    i.resize(o, s),
                      (r.aspect = o / s),
                      (r.position.z =
                        Math.min(o, s) /
                        2 /
                        Math.tan((r.fov / 2) * (Math.PI / 180))),
                      (r.far = r.position.z + this.extraFar),
                      r.updateProjectionMatrix(),
                      n.setSize(o, s),
                      n.setPixelRatio(a),
                      this._composer && this._composer.setSize(o, s),
                      300 !== o && this.render();
                  }
                }
              },
              {
                key: "onWebglcontextlost",
                value: function () {
                  (this.isLooseContext = !0), this.disposeRenderer();
                }
              },
              {
                key: "initRenderer",
                value: function () {
                  this.renderer ||
                    ((this.isLooseContext = !1),
                    (this.renderer = new qg({
                      canvas: this.canvas,
                      alpha: this.alpha,
                      antialias: this.antialias,
                      stencil: this.stencil,
                      powerPreference: this.powerPreference,
                      logarithmicDepthBuffer: this.logarithmicDepthBuffer
                    })),
                    "autoClear" in this.optionSelf &&
                      (this.renderer.autoClear = this.optionSelf.autoClear),
                    this.renderer.setSize(this.width, this.height),
                    this.renderer.setPixelRatio(
                      Math.min(window.devicePixelRatio, this.pixelRatioMax)
                    ),
                    this.renderer.setClearColor(
                      this.clearColor,
                      this.clearAlpha
                    ),
                    (this.renderer.useLegacyLights = !1),
                    (this.renderer.outputEncoding = nd),
                    (this.domElement = this.renderer.domElement),
                    this.canvas || this.el.appendChild(this.domElement),
                    this.domElement.addEventListener(
                      "webglcontextlost",
                      this.onWebglcontextlost
                    ));
                }
              },
              {
                key: "disposeRenderer",
                value: function () {
                  this.domElement.removeEventListener(
                    "webglcontextlost",
                    this.onWebglcontextlost
                  ),
                    this.renderer &&
                      (this.renderer
                        .getContext()
                        .getExtension("WEBGL_lose_context") &&
                        this.renderer.forceContextLoss(),
                      this.renderer.dispose(),
                      this.canvas || this.el.removeChild(this.domElement));
                }
              },
              {
                key: "disposeGeometry",
                value: function (e) {
                  e && (e.dispose(), (e = null));
                }
              },
              {
                key: "disposeMaterial",
                value: function (e) {
                  var t = this;
                  e && Array.isArray(e)
                    ? e.forEach(function (e) {
                        return t.disposeMaterialSingle(e);
                      })
                    : e && this.disposeMaterialSingle(e);
                }
              },
              {
                key: "disposeMaterialSingle",
                value: function (e) {
                  e.map && (e.map.dispose(), (e.map = null)),
                    e.dispose(),
                    (e = null);
                }
              },
              {
                key: "setGroupOpacity",
                value: function (e, t) {
                  var n = this;
                  e.material
                    ? (e.material.opacity = t)
                    : e.children.forEach(function (e) {
                        n.setGroupOpacity(e, t);
                      });
                }
              },
              {
                key: "onDestroy",
                value: function () {
                  (this._isDestroy = !0),
                    this._isInit && this.disposeRenderer();
                }
              }
            ])
          );
        })(Zs),
        ub =
          "attribute vec3 position;\n  attribute vec2 uv;\n  \n  uniform mat4 modelViewMatrix;\n  uniform mat4 projectionMatrix;\n  \n  varying vec2 vUv;\n  \n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }",
        cb = new WeakMap(),
        hb = (function (e) {
          function t(e) {
            var n;
            return (
              gh(this, t),
              ((n = uh(this, t, [e])).decoderPath = ""),
              (n.decoderConfig = {}),
              (n.decoderBinary = null),
              (n.decoderPending = null),
              (n.workerLimit = 4),
              (n.workerPool = []),
              (n.workerNextTaskID = 1),
              (n.workerSourceURL = ""),
              (n.defaultAttributeIDs = {
                position: "POSITION",
                normal: "NORMAL",
                color: "COLOR",
                uv: "TEX_COORD"
              }),
              (n.defaultAttributeTypes = {
                position: "Float32Array",
                normal: "Float32Array",
                color: "Float32Array",
                uv: "Float32Array"
              }),
              n
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "setDecoderPath",
                value: function (e) {
                  return (this.decoderPath = e), this;
                }
              },
              {
                key: "setDecoderConfig",
                value: function (e) {
                  return (this.decoderConfig = e), this;
                }
              },
              {
                key: "setWorkerLimit",
                value: function (e) {
                  return (this.workerLimit = e), this;
                }
              },
              {
                key: "load",
                value: function (e, t, n, i) {
                  var r = this,
                    a = new py(this.manager);
                  a.setPath(this.path),
                    a.setResponseType("arraybuffer"),
                    a.setRequestHeader(this.requestHeader),
                    a.setWithCredentials(this.withCredentials),
                    a.load(
                      e,
                      function (e) {
                        r.parse(e, t, i);
                      },
                      n,
                      i
                    );
                }
              },
              {
                key: "parse",
                value: function (e, t, n) {
                  this.decodeDracoFile(e, t, null, null, id).catch(n);
                }
              },
              {
                key: "decodeDracoFile",
                value: function (e, t, n, i) {
                  var r =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : rd,
                    a = {
                      attributeIDs: n || this.defaultAttributeIDs,
                      attributeTypes: i || this.defaultAttributeTypes,
                      useUniqueIDs: !!n,
                      vertexColorSpace: r
                    };
                  return this.decodeGeometry(e, a).then(t);
                }
              },
              {
                key: "decodeGeometry",
                value: function (e, t) {
                  var n,
                    i = this,
                    r = JSON.stringify(t);
                  if (cb.has(e)) {
                    var a = cb.get(e);
                    if (a.key === r) return a.promise;
                    if (0 === e.byteLength)
                      throw new Error(
                        "THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred."
                      );
                  }
                  var o = this.workerNextTaskID++,
                    s = e.byteLength,
                    l = this._getWorker(o, s)
                      .then(function (i) {
                        return (
                          (n = i),
                          new Promise(function (i, r) {
                            (n._callbacks[o] = { resolve: i, reject: r }),
                              n.postMessage(
                                {
                                  type: "decode",
                                  id: o,
                                  taskConfig: t,
                                  buffer: e
                                },
                                [e]
                              );
                          })
                        );
                      })
                      .then(function (e) {
                        return i._createGeometry(e.geometry);
                      });
                  return (
                    l
                      .catch(function () {
                        return !0;
                      })
                      .then(function () {
                        n && o && i._releaseTask(n, o);
                      }),
                    cb.set(e, { key: r, promise: l }),
                    l
                  );
                }
              },
              {
                key: "_createGeometry",
                value: function (e) {
                  var t = new Af();
                  e.index && t.setIndex(new yf(e.index.array, 1));
                  for (var n = 0; n < e.attributes.length; n++) {
                    var i = e.attributes[n],
                      r = i.name,
                      a = i.array,
                      o = i.itemSize,
                      s = new yf(a, o);
                    "color" === r &&
                      this._assignVertexColorSpace(s, i.vertexColorSpace),
                      t.setAttribute(r, s);
                  }
                  return t;
                }
              },
              {
                key: "_assignVertexColorSpace",
                value: function (e, t) {
                  if (t === id)
                    for (var n = new ff(), i = 0, r = e.count; i < r; i++)
                      n.fromBufferAttribute(e, i).convertSRGBToLinear(),
                        e.setXYZ(i, n.r, n.g, n.b);
                }
              },
              {
                key: "_loadLibrary",
                value: function (e, t) {
                  var n = new py(this.manager);
                  return (
                    n.setPath(this.decoderPath),
                    n.setResponseType(t),
                    n.setWithCredentials(this.withCredentials),
                    new Promise(function (t, i) {
                      n.load(e, t, void 0, i);
                    })
                  );
                }
              },
              {
                key: "preload",
                value: function () {
                  return this._initDecoder(), this;
                }
              },
              {
                key: "_initDecoder",
                value: function () {
                  var e = this;
                  if (this.decoderPending) return this.decoderPending;
                  var t =
                      "object" !=
                        ("undefined" == typeof WebAssembly
                          ? "undefined"
                          : xh(WebAssembly)) ||
                      "js" === this.decoderConfig.type,
                    n = [];
                  return (
                    t
                      ? n.push(this._loadLibrary("draco_decoder.js", "text"))
                      : (n.push(
                          this._loadLibrary("draco_wasm_wrapper.js", "text")
                        ),
                        n.push(
                          this._loadLibrary("draco_decoder.wasm", "arraybuffer")
                        )),
                    (this.decoderPending = Promise.all(n).then(function (n) {
                      var i = n[0];
                      t || (e.decoderConfig.wasmBinary = n[1]);
                      var r = db.toString(),
                        a = [
                          "/* draco decoder */",
                          i,
                          "",
                          "/* worker */",
                          r.substring(r.indexOf("{") + 1, r.lastIndexOf("}"))
                        ].join("\n  ");
                      e.workerSourceURL = URL.createObjectURL(new Blob([a]));
                    })),
                    this.decoderPending
                  );
                }
              },
              {
                key: "_getWorker",
                value: function (e, t) {
                  var n = this;
                  return this._initDecoder().then(function () {
                    if (n.workerPool.length < n.workerLimit) {
                      var i = new Worker(n.workerSourceURL);
                      (i._callbacks = {}),
                        (i._taskCosts = {}),
                        (i._taskLoad = 0),
                        i.postMessage({
                          type: "init",
                          decoderConfig: n.decoderConfig
                        }),
                        (i.onmessage = function (e) {
                          var t = e.data;
                          switch (t.type) {
                            case "decode":
                              i._callbacks[t.id].resolve(t);
                              break;
                            case "error":
                              i._callbacks[t.id].reject(t);
                              break;
                            default:
                              console.error(
                                'THREE.DRACOLoader: Unexpected message, "' +
                                  t.type +
                                  '"'
                              );
                          }
                        }),
                        n.workerPool.push(i);
                    } else
                      n.workerPool.sort(function (e, t) {
                        return e._taskLoad > t._taskLoad ? -1 : 1;
                      });
                    var r = n.workerPool[n.workerPool.length - 1];
                    return (r._taskCosts[e] = t), (r._taskLoad += t), r;
                  });
                }
              },
              {
                key: "_releaseTask",
                value: function (e, t) {
                  (e._taskLoad -= e._taskCosts[t]),
                    delete e._callbacks[t],
                    delete e._taskCosts[t];
                }
              },
              {
                key: "debug",
                value: function () {
                  console.log(
                    "Task load: ",
                    this.workerPool.map(function (e) {
                      return e._taskLoad;
                    })
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  for (var e = 0; e < this.workerPool.length; ++e)
                    this.workerPool[e].terminate();
                  return (
                    (this.workerPool.length = 0),
                    "" !== this.workerSourceURL &&
                      URL.revokeObjectURL(this.workerSourceURL),
                    this
                  );
                }
              }
            ])
          );
        })(cy);
      function db() {
        var e, t;
        function n(e, t, n, i, r, a) {
          var o = a.num_components(),
            s = n.num_points() * o,
            l = s * r.BYTES_PER_ELEMENT,
            u = (function (e, t) {
              switch (t) {
                case Float32Array:
                  return e.DT_FLOAT32;
                case Int8Array:
                  return e.DT_INT8;
                case Int16Array:
                  return e.DT_INT16;
                case Int32Array:
                  return e.DT_INT32;
                case Uint8Array:
                  return e.DT_UINT8;
                case Uint16Array:
                  return e.DT_UINT16;
                case Uint32Array:
                  return e.DT_UINT32;
              }
            })(e, r),
            c = e._malloc(l);
          t.GetAttributeDataArrayForAllPoints(n, a, u, l, c);
          var h = new r(e.HEAPF32.buffer, c, s).slice();
          return e._free(c), { name: i, array: h, itemSize: o };
        }
        onmessage = function (i) {
          var r = i.data;
          switch (r.type) {
            case "init":
              (e = r.decoderConfig),
                (t = new Promise(function (t) {
                  (e.onModuleLoaded = function (e) {
                    t({ draco: e });
                  }),
                    DracoDecoderModule(e);
                }));
              break;
            case "decode":
              var a = r.buffer,
                o = r.taskConfig;
              t.then(function (e) {
                var t = e.draco,
                  i = new t.Decoder();
                try {
                  var s = (function (e, t, i, r) {
                      var a,
                        o,
                        s = r.attributeIDs,
                        l = r.attributeTypes,
                        u = t.GetEncodedGeometryType(i);
                      if (u === e.TRIANGULAR_MESH)
                        (a = new e.Mesh()),
                          (o = t.DecodeArrayToMesh(i, i.byteLength, a));
                      else {
                        if (u !== e.POINT_CLOUD)
                          throw new Error(
                            "THREE.DRACOLoader: Unexpected geometry type."
                          );
                        (a = new e.PointCloud()),
                          (o = t.DecodeArrayToPointCloud(i, i.byteLength, a));
                      }
                      if (!o.ok() || 0 === a.ptr)
                        throw new Error(
                          "THREE.DRACOLoader: Decoding failed: " + o.error_msg()
                        );
                      var c = { index: null, attributes: [] };
                      for (var h in s) {
                        var d = self[l[h]],
                          p = void 0,
                          f = void 0;
                        if (r.useUniqueIDs)
                          (f = s[h]), (p = t.GetAttributeByUniqueId(a, f));
                        else {
                          if (-1 === (f = t.GetAttributeId(a, e[s[h]])))
                            continue;
                          p = t.GetAttribute(a, f);
                        }
                        var v = n(e, t, a, h, d, p);
                        "color" === h &&
                          (v.vertexColorSpace = r.vertexColorSpace),
                          c.attributes.push(v);
                      }
                      return (
                        u === e.TRIANGULAR_MESH &&
                          (c.index = (function (e, t, n) {
                            var i = 3 * n.num_faces(),
                              r = 4 * i,
                              a = e._malloc(r);
                            t.GetTrianglesUInt32Array(n, r, a);
                            var o = new Uint32Array(
                              e.HEAPF32.buffer,
                              a,
                              i
                            ).slice();
                            return e._free(a), { array: o, itemSize: 1 };
                          })(e, t, a)),
                        e.destroy(a),
                        c
                      );
                    })(t, i, new Int8Array(a), o),
                    l = s.attributes.map(function (e) {
                      return e.array.buffer;
                    });
                  s.index && l.push(s.index.array.buffer),
                    self.postMessage(
                      { type: "decode", id: r.id, geometry: s },
                      l
                    );
                } catch (s) {
                  console.error(s),
                    self.postMessage({
                      type: "error",
                      id: r.id,
                      error: s.message
                    });
                } finally {
                  t.destroy(i);
                }
              });
          }
        };
      }
      function pb(e, t) {
        if (0 === t)
          return (
            console.warn(
              "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."
            ),
            e
          );
        if (2 === t || 1 === t) {
          var n = e.getIndex();
          if (null === n) {
            var i = [],
              r = e.getAttribute("position");
            if (void 0 === r)
              return (
                console.error(
                  "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."
                ),
                e
              );
            for (var a = 0; a < r.count; a++) i.push(a);
            e.setIndex(i), (n = e.getIndex());
          }
          var o = n.count - 2,
            s = [];
          if (2 === t)
            for (var l = 1; l <= o; l++)
              s.push(n.getX(0)), s.push(n.getX(l)), s.push(n.getX(l + 1));
          else
            for (var u = 0; u < o; u++)
              u % 2 == 0
                ? (s.push(n.getX(u)),
                  s.push(n.getX(u + 1)),
                  s.push(n.getX(u + 2)))
                : (s.push(n.getX(u + 2)),
                  s.push(n.getX(u + 1)),
                  s.push(n.getX(u)));
          s.length / 3 !== o &&
            console.error(
              "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles."
            );
          var c = e.clone();
          return c.setIndex(s), c.clearGroups(), c;
        }
        return (
          console.error(
            "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",
            t
          ),
          e
        );
      }
      var fb = (function (e) {
        function t(e) {
          var n;
          return (
            gh(this, t),
            ((n = uh(this, t, [e])).dracoLoader = null),
            (n.ktx2Loader = null),
            (n.meshoptDecoder = null),
            (n.pluginCallbacks = []),
            n.register(function (e) {
              return new bb(e);
            }),
            n.register(function (e) {
              return new Eb(e);
            }),
            n.register(function (e) {
              return new Cb(e);
            }),
            n.register(function (e) {
              return new Db(e);
            }),
            n.register(function (e) {
              return new wb(e);
            }),
            n.register(function (e) {
              return new Sb(e);
            }),
            n.register(function (e) {
              return new Mb(e);
            }),
            n.register(function (e) {
              return new Tb(e);
            }),
            n.register(function (e) {
              return new yb(e);
            }),
            n.register(function (e) {
              return new kb(e);
            }),
            n.register(function (e) {
              return new xb(e);
            }),
            n.register(function (e) {
              return new gb(e);
            }),
            n.register(function (e) {
              return new Ab(e);
            }),
            n.register(function (e) {
              return new Pb(e);
            }),
            n
          );
        }
        return (
          ph(t, e),
          yh(t, [
            {
              key: "load",
              value: function (e, t, n, i) {
                var r,
                  a = this;
                (r =
                  "" !== this.resourcePath
                    ? this.resourcePath
                    : "" !== this.path
                    ? this.path
                    : Py.extractUrlBase(e)),
                  this.manager.itemStart(e);
                var o = function (t) {
                    i ? i(t) : console.error(t),
                      a.manager.itemError(e),
                      a.manager.itemEnd(e);
                  },
                  s = new py(this.manager);
                s.setPath(this.path),
                  s.setResponseType("arraybuffer"),
                  s.setRequestHeader(this.requestHeader),
                  s.setWithCredentials(this.withCredentials),
                  s.load(
                    e,
                    function (n) {
                      try {
                        a.parse(
                          n,
                          r,
                          function (n) {
                            t(n), a.manager.itemEnd(e);
                          },
                          o
                        );
                      } catch (e) {
                        o(e);
                      }
                    },
                    n,
                    o
                  );
              }
            },
            {
              key: "setDRACOLoader",
              value: function (e) {
                return (this.dracoLoader = e), this;
              }
            },
            {
              key: "setDDSLoader",
              value: function () {
                throw new Error(
                  'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
                );
              }
            },
            {
              key: "setKTX2Loader",
              value: function (e) {
                return (this.ktx2Loader = e), this;
              }
            },
            {
              key: "setMeshoptDecoder",
              value: function (e) {
                return (this.meshoptDecoder = e), this;
              }
            },
            {
              key: "register",
              value: function (e) {
                return (
                  -1 === this.pluginCallbacks.indexOf(e) &&
                    this.pluginCallbacks.push(e),
                  this
                );
              }
            },
            {
              key: "unregister",
              value: function (e) {
                return (
                  -1 !== this.pluginCallbacks.indexOf(e) &&
                    this.pluginCallbacks.splice(
                      this.pluginCallbacks.indexOf(e),
                      1
                    ),
                  this
                );
              }
            },
            {
              key: "parse",
              value: function (e, t, n, i) {
                var r,
                  a = {},
                  o = {},
                  s = new TextDecoder();
                if ("string" == typeof e) r = JSON.parse(e);
                else if (e instanceof ArrayBuffer) {
                  if (s.decode(new Uint8Array(e, 0, 4)) === Lb) {
                    try {
                      a[mb.KHR_BINARY_GLTF] = new Rb(e);
                    } catch (c) {
                      return void (i && i(c));
                    }
                    r = JSON.parse(a[mb.KHR_BINARY_GLTF].content);
                  } else r = JSON.parse(s.decode(e));
                } else r = e;
                if (void 0 === r.asset || r.asset.version[0] < 2)
                  i &&
                    i(
                      new Error(
                        "THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."
                      )
                    );
                else {
                  var l = new nx(r, {
                    path: t || this.resourcePath || "",
                    crossOrigin: this.crossOrigin,
                    requestHeader: this.requestHeader,
                    manager: this.manager,
                    ktx2Loader: this.ktx2Loader,
                    meshoptDecoder: this.meshoptDecoder
                  });
                  l.fileLoader.setRequestHeader(this.requestHeader);
                  for (var u = 0; u < this.pluginCallbacks.length; u++) {
                    var c = this.pluginCallbacks[u](l);
                    (o[c.name] = c), (a[c.name] = !0);
                  }
                  if (r.extensionsUsed)
                    for (var h = 0; h < r.extensionsUsed.length; ++h) {
                      var d = r.extensionsUsed[h],
                        p = r.extensionsRequired || [];
                      switch (d) {
                        case mb.KHR_MATERIALS_UNLIT:
                          a[d] = new _b();
                          break;
                        case mb.KHR_DRACO_MESH_COMPRESSION:
                          a[d] = new Ib(r, this.dracoLoader);
                          break;
                        case mb.KHR_TEXTURE_TRANSFORM:
                          a[d] = new Ob();
                          break;
                        case mb.KHR_MESH_QUANTIZATION:
                          a[d] = new Nb();
                          break;
                        default:
                          p.indexOf(d) >= 0 &&
                            void 0 === o[d] &&
                            console.warn(
                              'THREE.GLTFLoader: Unknown extension "' + d + '".'
                            );
                      }
                    }
                  l.setExtensions(a), l.setPlugins(o), l.parse(n, i);
                }
              }
            },
            {
              key: "parseAsync",
              value: function (e, t) {
                var n = this;
                return new Promise(function (i, r) {
                  n.parse(e, t, i, r);
                });
              }
            }
          ])
        );
      })(cy);
      function vb() {
        var e = {};
        return {
          get: function (t) {
            return e[t];
          },
          add: function (t, n) {
            e[t] = n;
          },
          remove: function (t) {
            delete e[t];
          },
          removeAll: function () {
            e = {};
          }
        };
      }
      var mb = {
          KHR_BINARY_GLTF: "KHR_binary_glTF",
          KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
          KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
          KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
          KHR_MATERIALS_IOR: "KHR_materials_ior",
          KHR_MATERIALS_SHEEN: "KHR_materials_sheen",
          KHR_MATERIALS_SPECULAR: "KHR_materials_specular",
          KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
          KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence",
          KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
          KHR_MATERIALS_VOLUME: "KHR_materials_volume",
          KHR_TEXTURE_BASISU: "KHR_texture_basisu",
          KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
          KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
          KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength",
          EXT_TEXTURE_WEBP: "EXT_texture_webp",
          EXT_TEXTURE_AVIF: "EXT_texture_avif",
          EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
          EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing"
        },
        gb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_LIGHTS_PUNCTUAL),
                (this.cache = { refs: {}, uses: {} });
            },
            [
              {
                key: "_markDefs",
                value: function () {
                  for (
                    var e = this.parser,
                      t = this.parser.json.nodes || [],
                      n = 0,
                      i = t.length;
                    n < i;
                    n++
                  ) {
                    var r = t[n];
                    r.extensions &&
                      r.extensions[this.name] &&
                      void 0 !== r.extensions[this.name].light &&
                      e._addNodeRef(this.cache, r.extensions[this.name].light);
                  }
                }
              },
              {
                key: "_loadLight",
                value: function (e) {
                  var t = this.parser,
                    n = "light:" + e,
                    i = t.cache.get(n);
                  if (i) return i;
                  var r,
                    a = t.json,
                    o = (((a.extensions && a.extensions[this.name]) || {})
                      .lights || [])[e],
                    s = new ff(16777215);
                  void 0 !== o.color && s.fromArray(o.color);
                  var l = void 0 !== o.range ? o.range : 0;
                  switch (o.type) {
                    case "directional":
                      (r = new Ay(s)).target.position.set(0, 0, -1),
                        r.add(r.target);
                      break;
                    case "point":
                      (r = new Cy(s)).distance = l;
                      break;
                    case "spot":
                      ((r = new Sy(s)).distance = l),
                        (o.spot = o.spot || {}),
                        (o.spot.innerConeAngle =
                          void 0 !== o.spot.innerConeAngle
                            ? o.spot.innerConeAngle
                            : 0),
                        (o.spot.outerConeAngle =
                          void 0 !== o.spot.outerConeAngle
                            ? o.spot.outerConeAngle
                            : Math.PI / 4),
                        (r.angle = o.spot.outerConeAngle),
                        (r.penumbra =
                          1 - o.spot.innerConeAngle / o.spot.outerConeAngle),
                        r.target.position.set(0, 0, -1),
                        r.add(r.target);
                      break;
                    default:
                      throw new Error(
                        "THREE.GLTFLoader: Unexpected light type: " + o.type
                      );
                  }
                  return (
                    r.position.set(0, 0, 0),
                    (r.decay = 2),
                    Yb(r, o),
                    void 0 !== o.intensity && (r.intensity = o.intensity),
                    (r.name = t.createUniqueName(o.name || "light_" + e)),
                    (i = Promise.resolve(r)),
                    t.cache.add(n, i),
                    i
                  );
                }
              },
              {
                key: "getDependency",
                value: function (e, t) {
                  if ("light" === e) return this._loadLight(t);
                }
              },
              {
                key: "createNodeAttachment",
                value: function (e) {
                  var t = this,
                    n = this.parser,
                    i = n.json.nodes[e],
                    r = ((i.extensions && i.extensions[this.name]) || {}).light;
                  return void 0 === r
                    ? null
                    : this._loadLight(r).then(function (e) {
                        return n._getNodeRef(t.cache, r, e);
                      });
                }
              }
            ]
          );
        })(),
        _b = (function () {
          return yh(
            function e() {
              gh(this, e), (this.name = mb.KHR_MATERIALS_UNLIT);
            },
            [
              {
                key: "getMaterialType",
                value: function () {
                  return mf;
                }
              },
              {
                key: "extendParams",
                value: function (e, t, n) {
                  var i = [];
                  (e.color = new ff(1, 1, 1)), (e.opacity = 1);
                  var r = t.pbrMetallicRoughness;
                  if (r) {
                    if (Array.isArray(r.baseColorFactor)) {
                      var a = r.baseColorFactor;
                      e.color.fromArray(a), (e.opacity = a[3]);
                    }
                    void 0 !== r.baseColorTexture &&
                      i.push(n.assignTexture(e, "map", r.baseColorTexture, nd));
                  }
                  return Promise.all(i);
                }
              }
            ]
          );
        })(),
        yb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_MATERIALS_EMISSIVE_STRENGTH);
            },
            [
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser.json.materials[e];
                  if (!n.extensions || !n.extensions[this.name])
                    return Promise.resolve();
                  var i = n.extensions[this.name].emissiveStrength;
                  return (
                    void 0 !== i && (t.emissiveIntensity = i), Promise.resolve()
                  );
                }
              }
            ]
          );
        })(),
        bb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_MATERIALS_CLEARCOAT);
            },
            [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? z_ : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    i = n.json.materials[e];
                  if (!i.extensions || !i.extensions[this.name])
                    return Promise.resolve();
                  var r = [],
                    a = i.extensions[this.name];
                  if (
                    (void 0 !== a.clearcoatFactor &&
                      (t.clearcoat = a.clearcoatFactor),
                    void 0 !== a.clearcoatTexture &&
                      r.push(
                        n.assignTexture(t, "clearcoatMap", a.clearcoatTexture)
                      ),
                    void 0 !== a.clearcoatRoughnessFactor &&
                      (t.clearcoatRoughness = a.clearcoatRoughnessFactor),
                    void 0 !== a.clearcoatRoughnessTexture &&
                      r.push(
                        n.assignTexture(
                          t,
                          "clearcoatRoughnessMap",
                          a.clearcoatRoughnessTexture
                        )
                      ),
                    void 0 !== a.clearcoatNormalTexture &&
                      (r.push(
                        n.assignTexture(
                          t,
                          "clearcoatNormalMap",
                          a.clearcoatNormalTexture
                        )
                      ),
                      void 0 !== a.clearcoatNormalTexture.scale))
                  ) {
                    var o = a.clearcoatNormalTexture.scale;
                    t.clearcoatNormalScale = new Md(o, o);
                  }
                  return Promise.all(r);
                }
              }
            ]
          );
        })(),
        xb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_MATERIALS_IRIDESCENCE);
            },
            [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? z_ : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    i = n.json.materials[e];
                  if (!i.extensions || !i.extensions[this.name])
                    return Promise.resolve();
                  var r = [],
                    a = i.extensions[this.name];
                  return (
                    void 0 !== a.iridescenceFactor &&
                      (t.iridescence = a.iridescenceFactor),
                    void 0 !== a.iridescenceTexture &&
                      r.push(
                        n.assignTexture(
                          t,
                          "iridescenceMap",
                          a.iridescenceTexture
                        )
                      ),
                    void 0 !== a.iridescenceIor &&
                      (t.iridescenceIOR = a.iridescenceIor),
                    void 0 === t.iridescenceThicknessRange &&
                      (t.iridescenceThicknessRange = [100, 400]),
                    void 0 !== a.iridescenceThicknessMinimum &&
                      (t.iridescenceThicknessRange[0] =
                        a.iridescenceThicknessMinimum),
                    void 0 !== a.iridescenceThicknessMaximum &&
                      (t.iridescenceThicknessRange[1] =
                        a.iridescenceThicknessMaximum),
                    void 0 !== a.iridescenceThicknessTexture &&
                      r.push(
                        n.assignTexture(
                          t,
                          "iridescenceThicknessMap",
                          a.iridescenceThicknessTexture
                        )
                      ),
                    Promise.all(r)
                  );
                }
              }
            ]
          );
        })(),
        wb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_MATERIALS_SHEEN);
            },
            [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? z_ : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    i = n.json.materials[e];
                  if (!i.extensions || !i.extensions[this.name])
                    return Promise.resolve();
                  var r = [];
                  (t.sheenColor = new ff(0, 0, 0)),
                    (t.sheenRoughness = 0),
                    (t.sheen = 1);
                  var a = i.extensions[this.name];
                  return (
                    void 0 !== a.sheenColorFactor &&
                      t.sheenColor.fromArray(a.sheenColorFactor),
                    void 0 !== a.sheenRoughnessFactor &&
                      (t.sheenRoughness = a.sheenRoughnessFactor),
                    void 0 !== a.sheenColorTexture &&
                      r.push(
                        n.assignTexture(
                          t,
                          "sheenColorMap",
                          a.sheenColorTexture,
                          nd
                        )
                      ),
                    void 0 !== a.sheenRoughnessTexture &&
                      r.push(
                        n.assignTexture(
                          t,
                          "sheenRoughnessMap",
                          a.sheenRoughnessTexture
                        )
                      ),
                    Promise.all(r)
                  );
                }
              }
            ]
          );
        })(),
        Sb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_MATERIALS_TRANSMISSION);
            },
            [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? z_ : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    i = n.json.materials[e];
                  if (!i.extensions || !i.extensions[this.name])
                    return Promise.resolve();
                  var r = [],
                    a = i.extensions[this.name];
                  return (
                    void 0 !== a.transmissionFactor &&
                      (t.transmission = a.transmissionFactor),
                    void 0 !== a.transmissionTexture &&
                      r.push(
                        n.assignTexture(
                          t,
                          "transmissionMap",
                          a.transmissionTexture
                        )
                      ),
                    Promise.all(r)
                  );
                }
              }
            ]
          );
        })(),
        Mb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_MATERIALS_VOLUME);
            },
            [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? z_ : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    i = n.json.materials[e];
                  if (!i.extensions || !i.extensions[this.name])
                    return Promise.resolve();
                  var r = [],
                    a = i.extensions[this.name];
                  (t.thickness =
                    void 0 !== a.thicknessFactor ? a.thicknessFactor : 0),
                    void 0 !== a.thicknessTexture &&
                      r.push(
                        n.assignTexture(t, "thicknessMap", a.thicknessTexture)
                      ),
                    (t.attenuationDistance = a.attenuationDistance || 1 / 0);
                  var o = a.attenuationColor || [1, 1, 1];
                  return (
                    (t.attenuationColor = new ff(o[0], o[1], o[2])),
                    Promise.all(r)
                  );
                }
              }
            ]
          );
        })(),
        Tb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_MATERIALS_IOR);
            },
            [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? z_ : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser.json.materials[e];
                  if (!n.extensions || !n.extensions[this.name])
                    return Promise.resolve();
                  var i = n.extensions[this.name];
                  return (
                    (t.ior = void 0 !== i.ior ? i.ior : 1.5), Promise.resolve()
                  );
                }
              }
            ]
          );
        })(),
        kb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_MATERIALS_SPECULAR);
            },
            [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? z_ : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    i = n.json.materials[e];
                  if (!i.extensions || !i.extensions[this.name])
                    return Promise.resolve();
                  var r = [],
                    a = i.extensions[this.name];
                  (t.specularIntensity =
                    void 0 !== a.specularFactor ? a.specularFactor : 1),
                    void 0 !== a.specularTexture &&
                      r.push(
                        n.assignTexture(
                          t,
                          "specularIntensityMap",
                          a.specularTexture
                        )
                      );
                  var o = a.specularColorFactor || [1, 1, 1];
                  return (
                    (t.specularColor = new ff(o[0], o[1], o[2])),
                    void 0 !== a.specularColorTexture &&
                      r.push(
                        n.assignTexture(
                          t,
                          "specularColorMap",
                          a.specularColorTexture,
                          nd
                        )
                      ),
                    Promise.all(r)
                  );
                }
              }
            ]
          );
        })(),
        Eb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.KHR_TEXTURE_BASISU);
            },
            [
              {
                key: "loadTexture",
                value: function (e) {
                  var t = this.parser,
                    n = t.json,
                    i = n.textures[e];
                  if (!i.extensions || !i.extensions[this.name]) return null;
                  var r = i.extensions[this.name],
                    a = t.options.ktx2Loader;
                  if (!a) {
                    if (
                      n.extensionsRequired &&
                      n.extensionsRequired.indexOf(this.name) >= 0
                    )
                      throw new Error(
                        "THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures"
                      );
                    return null;
                  }
                  return t.loadTextureImage(e, r.source, a);
                }
              }
            ]
          );
        })(),
        Cb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.EXT_TEXTURE_WEBP),
                (this.isSupported = null);
            },
            [
              {
                key: "loadTexture",
                value: function (e) {
                  var t = this.name,
                    n = this.parser,
                    i = n.json,
                    r = i.textures[e];
                  if (!r.extensions || !r.extensions[t]) return null;
                  var a = r.extensions[t],
                    o = i.images[a.source],
                    s = n.textureLoader;
                  if (o.uri) {
                    var l = n.options.manager.getHandler(o.uri);
                    null !== l && (s = l);
                  }
                  return this.detectSupport().then(function (r) {
                    if (r) return n.loadTextureImage(e, a.source, s);
                    if (
                      i.extensionsRequired &&
                      i.extensionsRequired.indexOf(t) >= 0
                    )
                      throw new Error(
                        "THREE.GLTFLoader: WebP required by asset but unsupported."
                      );
                    return n.loadTexture(e);
                  });
                }
              },
              {
                key: "detectSupport",
                value: function () {
                  return (
                    this.isSupported ||
                      (this.isSupported = new Promise(function (e) {
                        var t = new Image();
                        (t.src =
                          "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"),
                          (t.onload = t.onerror =
                            function () {
                              e(1 === t.height);
                            });
                      })),
                    this.isSupported
                  );
                }
              }
            ]
          );
        })(),
        Db = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.parser = t),
                (this.name = mb.EXT_TEXTURE_AVIF),
                (this.isSupported = null);
            },
            [
              {
                key: "loadTexture",
                value: function (e) {
                  var t = this.name,
                    n = this.parser,
                    i = n.json,
                    r = i.textures[e];
                  if (!r.extensions || !r.extensions[t]) return null;
                  var a = r.extensions[t],
                    o = i.images[a.source],
                    s = n.textureLoader;
                  if (o.uri) {
                    var l = n.options.manager.getHandler(o.uri);
                    null !== l && (s = l);
                  }
                  return this.detectSupport().then(function (r) {
                    if (r) return n.loadTextureImage(e, a.source, s);
                    if (
                      i.extensionsRequired &&
                      i.extensionsRequired.indexOf(t) >= 0
                    )
                      throw new Error(
                        "THREE.GLTFLoader: AVIF required by asset but unsupported."
                      );
                    return n.loadTexture(e);
                  });
                }
              },
              {
                key: "detectSupport",
                value: function () {
                  return (
                    this.isSupported ||
                      (this.isSupported = new Promise(function (e) {
                        var t = new Image();
                        (t.src =
                          "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI="),
                          (t.onload = t.onerror =
                            function () {
                              e(1 === t.height);
                            });
                      })),
                    this.isSupported
                  );
                }
              }
            ]
          );
        })(),
        Ab = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.name = mb.EXT_MESHOPT_COMPRESSION),
                (this.parser = t);
            },
            [
              {
                key: "loadBufferView",
                value: function (e) {
                  var t = this.parser.json,
                    n = t.bufferViews[e];
                  if (n.extensions && n.extensions[this.name]) {
                    var i = n.extensions[this.name],
                      r = this.parser.getDependency("buffer", i.buffer),
                      a = this.parser.options.meshoptDecoder;
                    if (!a || !a.supported) {
                      if (
                        t.extensionsRequired &&
                        t.extensionsRequired.indexOf(this.name) >= 0
                      )
                        throw new Error(
                          "THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files"
                        );
                      return null;
                    }
                    return r.then(function (e) {
                      var t = i.byteOffset || 0,
                        n = i.byteLength || 0,
                        r = i.count,
                        o = i.byteStride,
                        s = new Uint8Array(e, t, n);
                      return a.decodeGltfBufferAsync
                        ? a
                            .decodeGltfBufferAsync(r, o, s, i.mode, i.filter)
                            .then(function (e) {
                              return e.buffer;
                            })
                        : a.ready.then(function () {
                            var e = new ArrayBuffer(r * o);
                            return (
                              a.decodeGltfBuffer(
                                new Uint8Array(e),
                                r,
                                o,
                                s,
                                i.mode,
                                i.filter
                              ),
                              e
                            );
                          });
                    });
                  }
                  return null;
                }
              }
            ]
          );
        })(),
        Pb = (function () {
          return yh(
            function e(t) {
              gh(this, e),
                (this.name = mb.EXT_MESH_GPU_INSTANCING),
                (this.parser = t);
            },
            [
              {
                key: "createNodeMesh",
                value: function (e) {
                  var t = this,
                    n = this.parser.json,
                    i = n.nodes[e];
                  if (
                    !i.extensions ||
                    !i.extensions[this.name] ||
                    void 0 === i.mesh
                  )
                    return null;
                  var r,
                    a = ih(n.meshes[i.mesh].primitives);
                  try {
                    for (a.s(); !(r = a.n()).done; ) {
                      var o = r.value;
                      if (
                        o.mode !== zb.TRIANGLES &&
                        o.mode !== zb.TRIANGLE_STRIP &&
                        o.mode !== zb.TRIANGLE_FAN &&
                        void 0 !== o.mode
                      )
                        return null;
                    }
                  } catch (e) {
                    a.e(e);
                  } finally {
                    a.f();
                  }
                  var s = i.extensions[this.name].attributes,
                    l = [],
                    u = {},
                    c = function (e) {
                      l.push(
                        t.parser
                          .getDependency("accessor", s[e])
                          .then(function (t) {
                            return (u[e] = t), u[e];
                          })
                      );
                    };
                  for (var h in s) c(h);
                  return l.length < 1
                    ? null
                    : (l.push(this.parser.createNodeMesh(e)),
                      Promise.all(l).then(function (e) {
                        var n,
                          i = e.pop(),
                          r = i.isGroup ? i.children : [i],
                          a = e[0].count,
                          o = [],
                          s = ih(r);
                        try {
                          for (s.s(); !(n = s.n()).done; ) {
                            for (
                              var l = n.value,
                                c = new Sp(),
                                h = new Kd(),
                                d = new qd(),
                                p = new Kd(1, 1, 1),
                                f = new __(l.geometry, l.material, a),
                                v = 0;
                              v < a;
                              v++
                            )
                              u.TRANSLATION &&
                                h.fromBufferAttribute(u.TRANSLATION, v),
                                u.ROTATION &&
                                  d.fromBufferAttribute(u.ROTATION, v),
                                u.SCALE && p.fromBufferAttribute(u.SCALE, v),
                                f.setMatrixAt(v, c.compose(h, d, p));
                            for (var m in u)
                              "TRANSLATION" !== m &&
                                "ROTATION" !== m &&
                                "SCALE" !== m &&
                                l.geometry.setAttribute(m, u[m]);
                            Xp.prototype.copy.call(f, l),
                              t.parser.assignFinalMaterial(f),
                              o.push(f);
                          }
                        } catch (e) {
                          s.e(e);
                        } finally {
                          s.f();
                        }
                        return i.isGroup
                          ? (i.clear(), i.add.apply(i, o), i)
                          : o[0];
                      }));
                }
              }
            ]
          );
        })(),
        Lb = "glTF",
        Rb = yh(function e(t) {
          gh(this, e),
            (this.name = mb.KHR_BINARY_GLTF),
            (this.content = null),
            (this.body = null);
          var n = new DataView(t, 0, 12),
            i = new TextDecoder();
          if (
            ((this.header = {
              magic: i.decode(new Uint8Array(t.slice(0, 4))),
              version: n.getUint32(4, !0),
              length: n.getUint32(8, !0)
            }),
            this.header.magic !== Lb)
          )
            throw new Error(
              "THREE.GLTFLoader: Unsupported glTF-Binary header."
            );
          if (this.header.version < 2)
            throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
          for (
            var r = this.header.length - 12, a = new DataView(t, 12), o = 0;
            o < r;

          ) {
            var s = a.getUint32(o, !0);
            o += 4;
            var l = a.getUint32(o, !0);
            if (((o += 4), 1313821514 === l)) {
              var u = new Uint8Array(t, 12 + o, s);
              this.content = i.decode(u);
            } else if (5130562 === l) {
              var c = 12 + o;
              this.body = t.slice(c, c + s);
            }
            o += s;
          }
          if (null === this.content)
            throw new Error("THREE.GLTFLoader: JSON content not found.");
        }),
        Ib = (function () {
          return yh(
            function e(t, n) {
              if ((gh(this, e), !n))
                throw new Error(
                  "THREE.GLTFLoader: No DRACOLoader instance provided."
                );
              (this.name = mb.KHR_DRACO_MESH_COMPRESSION),
                (this.json = t),
                (this.dracoLoader = n),
                this.dracoLoader.preload();
            },
            [
              {
                key: "decodePrimitive",
                value: function (e, t) {
                  var n = this.json,
                    i = this.dracoLoader,
                    r = e.extensions[this.name].bufferView,
                    a = e.extensions[this.name].attributes,
                    o = {},
                    s = {},
                    l = {};
                  for (var u in a) {
                    var c = jb[u] || u.toLowerCase();
                    o[c] = a[u];
                  }
                  for (var h in e.attributes) {
                    var d = jb[h] || h.toLowerCase();
                    if (void 0 !== a[h]) {
                      var p = n.accessors[e.attributes[h]],
                        f = Vb[p.componentType];
                      (l[d] = f.name), (s[d] = !0 === p.normalized);
                    }
                  }
                  return t.getDependency("bufferView", r).then(function (e) {
                    return new Promise(function (t) {
                      i.decodeDracoFile(
                        e,
                        function (e) {
                          for (var n in e.attributes) {
                            var i = e.attributes[n],
                              r = s[n];
                            void 0 !== r && (i.normalized = r);
                          }
                          t(e);
                        },
                        o,
                        l
                      );
                    });
                  });
                }
              }
            ]
          );
        })(),
        Ob = (function () {
          return yh(
            function e() {
              gh(this, e), (this.name = mb.KHR_TEXTURE_TRANSFORM);
            },
            [
              {
                key: "extendTexture",
                value: function (e, t) {
                  return (
                    ((void 0 === t.texCoord || t.texCoord === e.channel) &&
                      void 0 === t.offset &&
                      void 0 === t.rotation &&
                      void 0 === t.scale) ||
                      ((e = e.clone()),
                      void 0 !== t.texCoord && (e.channel = t.texCoord),
                      void 0 !== t.offset && e.offset.fromArray(t.offset),
                      void 0 !== t.rotation && (e.rotation = t.rotation),
                      void 0 !== t.scale && e.repeat.fromArray(t.scale),
                      (e.needsUpdate = !0)),
                    e
                  );
                }
              }
            ]
          );
        })(),
        Nb = yh(function e() {
          gh(this, e), (this.name = mb.KHR_MESH_QUANTIZATION);
        }),
        Fb = (function (e) {
          function t(e, n, i, r) {
            return gh(this, t), uh(this, t, [e, n, i, r]);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "copySampleValue_",
                value: function (e) {
                  for (
                    var t = this.resultBuffer,
                      n = this.sampleValues,
                      i = this.valueSize,
                      r = e * i * 3 + i,
                      a = 0;
                    a !== i;
                    a++
                  )
                    t[a] = n[r + a];
                  return t;
                }
              },
              {
                key: "interpolate_",
                value: function (e, t, n, i) {
                  for (
                    var r = this.resultBuffer,
                      a = this.sampleValues,
                      o = this.valueSize,
                      s = 2 * o,
                      l = 3 * o,
                      u = i - t,
                      c = (n - t) / u,
                      h = c * c,
                      d = h * c,
                      p = e * l,
                      f = p - l,
                      v = -2 * d + 3 * h,
                      m = d - h,
                      g = 1 - v,
                      _ = m - h + c,
                      y = 0;
                    y !== o;
                    y++
                  ) {
                    var b = a[f + y + o],
                      x = a[f + y + s] * u,
                      w = a[p + y + o],
                      S = a[p + y] * u;
                    r[y] = g * b + _ * x + v * w + m * S;
                  }
                  return r;
                }
              }
            ])
          );
        })(K_),
        Ub = new qd(),
        Bb = (function (e) {
          function t() {
            return gh(this, t), uh(this, t, arguments);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "interpolate_",
                value: function (e, n, i, r) {
                  var a = sh(t, "interpolate_", this, 3)([e, n, i, r]);
                  return Ub.fromArray(a).normalize().toArray(a), a;
                }
              }
            ])
          );
        })(Fb),
        zb = {
          FLOAT: 5126,
          FLOAT_MAT3: 35675,
          FLOAT_MAT4: 35676,
          FLOAT_VEC2: 35664,
          FLOAT_VEC3: 35665,
          FLOAT_VEC4: 35666,
          LINEAR: 9729,
          REPEAT: 10497,
          SAMPLER_2D: 35678,
          POINTS: 0,
          LINES: 1,
          LINE_LOOP: 2,
          LINE_STRIP: 3,
          TRIANGLES: 4,
          TRIANGLE_STRIP: 5,
          TRIANGLE_FAN: 6,
          UNSIGNED_BYTE: 5121,
          UNSIGNED_SHORT: 5123
        },
        Vb = {
          5120: Int8Array,
          5121: Uint8Array,
          5122: Int16Array,
          5123: Uint16Array,
          5125: Uint32Array,
          5126: Float32Array
        },
        Hb = { 9728: Ph, 9729: Ih, 9984: Lh, 9985: 1007, 9986: Rh, 9987: Oh },
        Gb = { 33071: Dh, 33648: Ah, 10497: Ch },
        Wb = {
          SCALAR: 1,
          VEC2: 2,
          VEC3: 3,
          VEC4: 4,
          MAT2: 4,
          MAT3: 9,
          MAT4: 16
        },
        jb = {
          POSITION: "position",
          NORMAL: "normal",
          TANGENT: "tangent",
          TEXCOORD_0: "uv",
          TEXCOORD_1: "uv2",
          COLOR_0: "color",
          WEIGHTS_0: "skinWeight",
          JOINTS_0: "skinIndex"
        },
        qb = {
          scale: "scale",
          translation: "position",
          rotation: "quaternion",
          weights: "morphTargetInfluences"
        },
        Kb = { CUBICSPLINE: void 0, LINEAR: Zh, STEP: Yh };
      function Xb(e, t, n) {
        for (var i in n.extensions)
          void 0 === e[i] &&
            ((t.userData.gltfExtensions = t.userData.gltfExtensions || {}),
            (t.userData.gltfExtensions[i] = n.extensions[i]));
      }
      function Yb(e, t) {
        void 0 !== t.extras &&
          ("object" == xh(t.extras)
            ? Object.assign(e.userData, t.extras)
            : console.warn(
                "THREE.GLTFLoader: Ignoring primitive type .extras, " + t.extras
              ));
      }
      function Zb(e, t) {
        if ((e.updateMorphTargets(), void 0 !== t.weights))
          for (var n = 0, i = t.weights.length; n < i; n++)
            e.morphTargetInfluences[n] = t.weights[n];
        if (t.extras && Array.isArray(t.extras.targetNames)) {
          var r = t.extras.targetNames;
          if (e.morphTargetInfluences.length === r.length) {
            e.morphTargetDictionary = {};
            for (var a = 0, o = r.length; a < o; a++)
              e.morphTargetDictionary[r[a]] = a;
          } else
            console.warn(
              "THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names."
            );
        }
      }
      function Jb(e) {
        var t = e.extensions && e.extensions[mb.KHR_DRACO_MESH_COMPRESSION];
        return t
          ? "draco:" + t.bufferView + ":" + t.indices + ":" + Qb(t.attributes)
          : e.indices + ":" + Qb(e.attributes) + ":" + e.mode;
      }
      function Qb(e) {
        for (
          var t = "", n = Object.keys(e).sort(), i = 0, r = n.length;
          i < r;
          i++
        )
          t += n[i] + ":" + e[n[i]] + ";";
        return t;
      }
      function $b(e) {
        switch (e) {
          case Int8Array:
            return 1 / 127;
          case Uint8Array:
            return 1 / 255;
          case Int16Array:
            return 1 / 32767;
          case Uint16Array:
            return 1 / 65535;
          default:
            throw new Error(
              "THREE.GLTFLoader: Unsupported normalized accessor component type."
            );
        }
      }
      var ex,
        tx = new Sp(),
        nx = (function () {
          return yh(
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : {},
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {};
              gh(this, e),
                (this.json = t),
                (this.extensions = {}),
                (this.plugins = {}),
                (this.options = n),
                (this.cache = new vb()),
                (this.associations = new Map()),
                (this.primitiveCache = {}),
                (this.nodeCache = {}),
                (this.meshCache = { refs: {}, uses: {} }),
                (this.cameraCache = { refs: {}, uses: {} }),
                (this.lightCache = { refs: {}, uses: {} }),
                (this.sourceCache = {}),
                (this.textureCache = {}),
                (this.nodeNamesUsed = {});
              var i = !1,
                r = !1,
                a = -1;
              ("undefined" == typeof navigator ? "undefined" : xh(navigator)) <
                "u" &&
                ((i =
                  !0 ===
                  /^((?!chrome|android).)*safari/i.test(navigator.userAgent)),
                (a = (r = navigator.userAgent.indexOf("Firefox") > -1)
                  ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]
                  : -1)),
                ("undefined" == typeof createImageBitmap
                  ? "undefined"
                  : xh(createImageBitmap)) > "u" ||
                i ||
                (r && a < 98)
                  ? (this.textureLoader = new vy(this.options.manager))
                  : (this.textureLoader = new Ly(this.options.manager)),
                this.textureLoader.setCrossOrigin(this.options.crossOrigin),
                this.textureLoader.setRequestHeader(this.options.requestHeader),
                (this.fileLoader = new py(this.options.manager)),
                this.fileLoader.setResponseType("arraybuffer"),
                "use-credentials" === this.options.crossOrigin &&
                  this.fileLoader.setWithCredentials(!0);
            },
            [
              {
                key: "setExtensions",
                value: function (e) {
                  this.extensions = e;
                }
              },
              {
                key: "setPlugins",
                value: function (e) {
                  this.plugins = e;
                }
              },
              {
                key: "parse",
                value: function (e, t) {
                  var n = this,
                    i = this.json,
                    r = this.extensions;
                  this.cache.removeAll(),
                    (this.nodeCache = {}),
                    this._invokeAll(function (e) {
                      return e._markDefs && e._markDefs();
                    }),
                    Promise.all(
                      this._invokeAll(function (e) {
                        return e.beforeRoot && e.beforeRoot();
                      })
                    )
                      .then(function () {
                        return Promise.all([
                          n.getDependencies("scene"),
                          n.getDependencies("animation"),
                          n.getDependencies("camera")
                        ]);
                      })
                      .then(function (t) {
                        var a = {
                          scene: t[0][i.scene || 0],
                          scenes: t[0],
                          animations: t[1],
                          cameras: t[2],
                          asset: i.asset,
                          parser: n,
                          userData: {}
                        };
                        Xb(r, a, i),
                          Yb(a, i),
                          Promise.all(
                            n._invokeAll(function (e) {
                              return e.afterRoot && e.afterRoot(a);
                            })
                          ).then(function () {
                            e(a);
                          });
                      })
                      .catch(t);
                }
              },
              {
                key: "_markDefs",
                value: function () {
                  for (
                    var e = this.json.nodes || [],
                      t = this.json.skins || [],
                      n = this.json.meshes || [],
                      i = 0,
                      r = t.length;
                    i < r;
                    i++
                  )
                    for (var a = t[i].joints, o = 0, s = a.length; o < s; o++)
                      e[a[o]].isBone = !0;
                  for (var l = 0, u = e.length; l < u; l++) {
                    var c = e[l];
                    void 0 !== c.mesh &&
                      (this._addNodeRef(this.meshCache, c.mesh),
                      void 0 !== c.skin && (n[c.mesh].isSkinnedMesh = !0)),
                      void 0 !== c.camera &&
                        this._addNodeRef(this.cameraCache, c.camera);
                  }
                }
              },
              {
                key: "_addNodeRef",
                value: function (e, t) {
                  void 0 !== t &&
                    (void 0 === e.refs[t] && (e.refs[t] = e.uses[t] = 0),
                    e.refs[t]++);
                }
              },
              {
                key: "_getNodeRef",
                value: function (e, t, n) {
                  var i = this;
                  if (e.refs[t] <= 1) return n;
                  var r = n.clone(),
                    a = function (e, t) {
                      var n = i.associations.get(e);
                      null != n && i.associations.set(t, n);
                      var r,
                        o = ih(e.children.entries());
                      try {
                        for (o.s(); !(r = o.n()).done; ) {
                          var s = rh(r.value, 2),
                            l = s[0],
                            u = s[1];
                          a(u, t.children[l]);
                        }
                      } catch (e) {
                        o.e(e);
                      } finally {
                        o.f();
                      }
                    };
                  return a(n, r), (r.name += "_instance_" + e.uses[t]++), r;
                }
              },
              {
                key: "_invokeOne",
                value: function (e) {
                  var t = Object.values(this.plugins);
                  t.push(this);
                  for (var n = 0; n < t.length; n++) {
                    var i = e(t[n]);
                    if (i) return i;
                  }
                  return null;
                }
              },
              {
                key: "_invokeAll",
                value: function (e) {
                  var t = Object.values(this.plugins);
                  t.unshift(this);
                  for (var n = [], i = 0; i < t.length; i++) {
                    var r = e(t[i]);
                    r && n.push(r);
                  }
                  return n;
                }
              },
              {
                key: "getDependency",
                value: function (e, t) {
                  var n = e + ":" + t,
                    i = this.cache.get(n);
                  if (!i) {
                    switch (e) {
                      case "scene":
                        i = this.loadScene(t);
                        break;
                      case "node":
                        i = this._invokeOne(function (e) {
                          return e.loadNode && e.loadNode(t);
                        });
                        break;
                      case "mesh":
                        i = this._invokeOne(function (e) {
                          return e.loadMesh && e.loadMesh(t);
                        });
                        break;
                      case "accessor":
                        i = this.loadAccessor(t);
                        break;
                      case "bufferView":
                        i = this._invokeOne(function (e) {
                          return e.loadBufferView && e.loadBufferView(t);
                        });
                        break;
                      case "buffer":
                        i = this.loadBuffer(t);
                        break;
                      case "material":
                        i = this._invokeOne(function (e) {
                          return e.loadMaterial && e.loadMaterial(t);
                        });
                        break;
                      case "texture":
                        i = this._invokeOne(function (e) {
                          return e.loadTexture && e.loadTexture(t);
                        });
                        break;
                      case "skin":
                        i = this.loadSkin(t);
                        break;
                      case "animation":
                        i = this._invokeOne(function (e) {
                          return e.loadAnimation && e.loadAnimation(t);
                        });
                        break;
                      case "camera":
                        i = this.loadCamera(t);
                        break;
                      default:
                        if (
                          ((i = this._invokeOne(function (n) {
                            return (
                              n != this &&
                              n.getDependency &&
                              n.getDependency(e, t)
                            );
                          })),
                          !i)
                        )
                          throw new Error("Unknown type: " + e);
                    }
                    this.cache.add(n, i);
                  }
                  return i;
                }
              },
              {
                key: "getDependencies",
                value: function (e) {
                  var t = this.cache.get(e);
                  if (!t) {
                    var n = this,
                      i = this.json[e + ("mesh" === e ? "es" : "s")] || [];
                    (t = Promise.all(
                      i.map(function (t, i) {
                        return n.getDependency(e, i);
                      })
                    )),
                      this.cache.add(e, t);
                  }
                  return t;
                }
              },
              {
                key: "loadBuffer",
                value: function (e) {
                  var t = this.json.buffers[e],
                    n = this.fileLoader;
                  if (t.type && "arraybuffer" !== t.type)
                    throw new Error(
                      "THREE.GLTFLoader: " +
                        t.type +
                        " buffer type is not supported."
                    );
                  if (void 0 === t.uri && 0 === e)
                    return Promise.resolve(
                      this.extensions[mb.KHR_BINARY_GLTF].body
                    );
                  var i = this.options;
                  return new Promise(function (e, r) {
                    n.load(
                      Py.resolveURL(t.uri, i.path),
                      e,
                      void 0,
                      function () {
                        r(
                          new Error(
                            'THREE.GLTFLoader: Failed to load buffer "' +
                              t.uri +
                              '".'
                          )
                        );
                      }
                    );
                  });
                }
              },
              {
                key: "loadBufferView",
                value: function (e) {
                  var t = this.json.bufferViews[e];
                  return this.getDependency("buffer", t.buffer).then(function (
                    e
                  ) {
                    var n = t.byteLength || 0,
                      i = t.byteOffset || 0;
                    return e.slice(i, i + n);
                  });
                }
              },
              {
                key: "loadAccessor",
                value: function (e) {
                  var t = this,
                    n = this.json,
                    i = this.json.accessors[e];
                  if (void 0 === i.bufferView && void 0 === i.sparse) {
                    var r = Wb[i.type],
                      a = Vb[i.componentType],
                      o = !0 === i.normalized,
                      s = new a(i.count * r);
                    return Promise.resolve(new yf(s, r, o));
                  }
                  var l = [];
                  return (
                    void 0 !== i.bufferView
                      ? l.push(this.getDependency("bufferView", i.bufferView))
                      : l.push(null),
                    void 0 !== i.sparse &&
                      (l.push(
                        this.getDependency(
                          "bufferView",
                          i.sparse.indices.bufferView
                        )
                      ),
                      l.push(
                        this.getDependency(
                          "bufferView",
                          i.sparse.values.bufferView
                        )
                      )),
                    Promise.all(l).then(function (e) {
                      var r,
                        a,
                        o = e[0],
                        s = Wb[i.type],
                        l = Vb[i.componentType],
                        u = l.BYTES_PER_ELEMENT,
                        c = u * s,
                        h = i.byteOffset || 0,
                        d =
                          void 0 !== i.bufferView
                            ? n.bufferViews[i.bufferView].byteStride
                            : void 0,
                        p = !0 === i.normalized;
                      if (d && d !== c) {
                        var f = Math.floor(h / d),
                          v =
                            "InterleavedBuffer:" +
                            i.bufferView +
                            ":" +
                            i.componentType +
                            ":" +
                            f +
                            ":" +
                            i.count,
                          m = t.cache.get(v);
                        m ||
                          ((r = new l(o, f * d, (i.count * d) / u)),
                          (m = new Yg(r, d / u)),
                          t.cache.add(v, m)),
                          (a = new Jg(m, s, (h % d) / u, p));
                      } else (r = null === o ? new l(i.count * s) : new l(o, h, i.count * s)), (a = new yf(r, s, p));
                      if (void 0 !== i.sparse) {
                        var g = Wb.SCALAR,
                          _ = Vb[i.sparse.indices.componentType],
                          y = i.sparse.indices.byteOffset || 0,
                          b = i.sparse.values.byteOffset || 0,
                          x = new _(e[1], y, i.sparse.count * g),
                          w = new l(e[2], b, i.sparse.count * s);
                        null !== o &&
                          (a = new yf(
                            a.array.slice(),
                            a.itemSize,
                            a.normalized
                          ));
                        for (var S = 0, M = x.length; S < M; S++) {
                          var T = x[S];
                          if (
                            (a.setX(T, w[S * s]),
                            s >= 2 && a.setY(T, w[S * s + 1]),
                            s >= 3 && a.setZ(T, w[S * s + 2]),
                            s >= 4 && a.setW(T, w[S * s + 3]),
                            s >= 5)
                          )
                            throw new Error(
                              "THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute."
                            );
                        }
                      }
                      return a;
                    })
                  );
                }
              },
              {
                key: "loadTexture",
                value: function (e) {
                  var t = this.json,
                    n = this.options,
                    i = t.textures[e].source,
                    r = t.images[i],
                    a = this.textureLoader;
                  if (r.uri) {
                    var o = n.manager.getHandler(r.uri);
                    null !== o && (a = o);
                  }
                  return this.loadTextureImage(e, i, a);
                }
              },
              {
                key: "loadTextureImage",
                value: function (e, t, n) {
                  var i = this,
                    r = this.json,
                    a = r.textures[e],
                    o = r.images[t],
                    s = (o.uri || o.bufferView) + ":" + a.sampler;
                  if (this.textureCache[s]) return this.textureCache[s];
                  var l = this.loadImageSource(t, n)
                    .then(function (t) {
                      (t.flipY = !1),
                        (t.name = a.name || o.name || ""),
                        "" === t.name &&
                          "string" == typeof o.uri &&
                          !1 === o.uri.startsWith("data:image/") &&
                          (t.name = o.uri);
                      var n = (r.samplers || {})[a.sampler] || {};
                      return (
                        (t.magFilter = Hb[n.magFilter] || Ih),
                        (t.minFilter = Hb[n.minFilter] || Oh),
                        (t.wrapS = Gb[n.wrapS] || Ch),
                        (t.wrapT = Gb[n.wrapT] || Ch),
                        i.associations.set(t, { textures: e }),
                        t
                      );
                    })
                    .catch(function () {
                      return null;
                    });
                  return (this.textureCache[s] = l), l;
                }
              },
              {
                key: "loadImageSource",
                value: function (e, t) {
                  var n = this.json,
                    i = this.options;
                  if (void 0 !== this.sourceCache[e])
                    return this.sourceCache[e].then(function (e) {
                      return e.clone();
                    });
                  var r = n.images[e],
                    a = self.URL || self.webkitURL,
                    o = r.uri || "",
                    s = !1;
                  if (void 0 !== r.bufferView)
                    o = this.getDependency("bufferView", r.bufferView).then(
                      function (e) {
                        s = !0;
                        var t = new Blob([e], { type: r.mimeType });
                        return (o = a.createObjectURL(t));
                      }
                    );
                  else if (void 0 === r.uri)
                    throw new Error(
                      "THREE.GLTFLoader: Image " +
                        e +
                        " is missing URI and bufferView"
                    );
                  var l = Promise.resolve(o)
                    .then(function (e) {
                      return new Promise(function (n, r) {
                        var a = n;
                        !0 === t.isImageBitmapLoader &&
                          (a = function (e) {
                            var t = new Vd(e);
                            (t.needsUpdate = !0), n(t);
                          }),
                          t.load(Py.resolveURL(e, i.path), a, void 0, r);
                      });
                    })
                    .then(function (e) {
                      return (
                        !0 === s && a.revokeObjectURL(o),
                        (e.userData.mimeType =
                          r.mimeType ||
                          ((t = r.uri).search(/\.jpe?g($|\?)/i) > 0 ||
                          0 === t.search(/^data\:image\/jpeg/)
                            ? "image/jpeg"
                            : t.search(/\.webp($|\?)/i) > 0 ||
                              0 === t.search(/^data\:image\/webp/)
                            ? "image/webp"
                            : "image/png")),
                        e
                      );
                      var t;
                    })
                    .catch(function (e) {
                      throw (
                        (console.error(
                          "THREE.GLTFLoader: Couldn't load texture",
                          o
                        ),
                        e)
                      );
                    });
                  return (this.sourceCache[e] = l), l;
                }
              },
              {
                key: "assignTexture",
                value: function (e, t, n, i) {
                  var r = this;
                  return this.getDependency("texture", n.index).then(function (
                    a
                  ) {
                    if (!a) return null;
                    if (
                      (void 0 !== n.texCoord &&
                        n.texCoord > 0 &&
                        ((a = a.clone()).channel = n.texCoord),
                      r.extensions[mb.KHR_TEXTURE_TRANSFORM])
                    ) {
                      var o =
                        void 0 !== n.extensions
                          ? n.extensions[mb.KHR_TEXTURE_TRANSFORM]
                          : void 0;
                      if (o) {
                        var s = r.associations.get(a);
                        (a = r.extensions[
                          mb.KHR_TEXTURE_TRANSFORM
                        ].extendTexture(a, o)),
                          r.associations.set(a, s);
                      }
                    }
                    return void 0 !== i && (a.encoding = i), (e[t] = a), a;
                  });
                }
              },
              {
                key: "assignFinalMaterial",
                value: function (e) {
                  var t = e.geometry,
                    n = e.material,
                    i = void 0 === t.attributes.tangent,
                    r = void 0 !== t.attributes.color,
                    a = void 0 === t.attributes.normal;
                  if (e.isPoints) {
                    var o = "PointsMaterial:" + n.uuid,
                      s = this.cache.get(o);
                    s ||
                      ((s = new A_()),
                      uf.prototype.copy.call(s, n),
                      s.color.copy(n.color),
                      (s.map = n.map),
                      (s.sizeAttenuation = !1),
                      this.cache.add(o, s)),
                      (n = s);
                  } else if (e.isLine) {
                    var l = "LineBasicMaterial:" + n.uuid,
                      u = this.cache.get(l);
                    u ||
                      ((u = new y_()),
                      uf.prototype.copy.call(u, n),
                      u.color.copy(n.color),
                      (u.map = n.map),
                      this.cache.add(l, u)),
                      (n = u);
                  }
                  if (i || r || a) {
                    var c = "ClonedMaterial:" + n.uuid + ":";
                    i && (c += "derivative-tangents:"),
                      r && (c += "vertex-colors:"),
                      a && (c += "flat-shading:");
                    var h = this.cache.get(c);
                    h ||
                      ((h = n.clone()),
                      r && (h.vertexColors = !0),
                      a && (h.flatShading = !0),
                      i &&
                        (h.normalScale && (h.normalScale.y *= -1),
                        h.clearcoatNormalScale &&
                          (h.clearcoatNormalScale.y *= -1)),
                      this.cache.add(c, h),
                      this.associations.set(h, this.associations.get(n))),
                      (n = h);
                  }
                  e.material = n;
                }
              },
              {
                key: "getMaterialType",
                value: function () {
                  return B_;
                }
              },
              {
                key: "loadMaterial",
                value: function (e) {
                  var t,
                    n = this,
                    i = this.json,
                    r = this.extensions,
                    a = i.materials[e],
                    o = {},
                    s = [];
                  if ((a.extensions || {})[mb.KHR_MATERIALS_UNLIT]) {
                    var l = r[mb.KHR_MATERIALS_UNLIT];
                    (t = l.getMaterialType()), s.push(l.extendParams(o, a, n));
                  } else {
                    var u = a.pbrMetallicRoughness || {};
                    if (
                      ((o.color = new ff(1, 1, 1)),
                      (o.opacity = 1),
                      Array.isArray(u.baseColorFactor))
                    ) {
                      var c = u.baseColorFactor;
                      o.color.fromArray(c), (o.opacity = c[3]);
                    }
                    void 0 !== u.baseColorTexture &&
                      s.push(n.assignTexture(o, "map", u.baseColorTexture, nd)),
                      (o.metalness =
                        void 0 !== u.metallicFactor ? u.metallicFactor : 1),
                      (o.roughness =
                        void 0 !== u.roughnessFactor ? u.roughnessFactor : 1),
                      void 0 !== u.metallicRoughnessTexture &&
                        (s.push(
                          n.assignTexture(
                            o,
                            "metalnessMap",
                            u.metallicRoughnessTexture
                          )
                        ),
                        s.push(
                          n.assignTexture(
                            o,
                            "roughnessMap",
                            u.metallicRoughnessTexture
                          )
                        )),
                      (t = this._invokeOne(function (t) {
                        return t.getMaterialType && t.getMaterialType(e);
                      })),
                      s.push(
                        Promise.all(
                          this._invokeAll(function (t) {
                            return (
                              t.extendMaterialParams &&
                              t.extendMaterialParams(e, o)
                            );
                          })
                        )
                      );
                  }
                  !0 === a.doubleSided && (o.side = 2);
                  var h = a.alphaMode || "OPAQUE";
                  if (
                    ("BLEND" === h
                      ? ((o.transparent = !0), (o.depthWrite = !1))
                      : ((o.transparent = !1),
                        "MASK" === h &&
                          (o.alphaTest =
                            void 0 !== a.alphaCutoff ? a.alphaCutoff : 0.5)),
                    void 0 !== a.normalTexture &&
                      t !== mf &&
                      (s.push(n.assignTexture(o, "normalMap", a.normalTexture)),
                      (o.normalScale = new Md(1, 1)),
                      void 0 !== a.normalTexture.scale))
                  ) {
                    var d = a.normalTexture.scale;
                    o.normalScale.set(d, d);
                  }
                  return (
                    void 0 !== a.occlusionTexture &&
                      t !== mf &&
                      (s.push(n.assignTexture(o, "aoMap", a.occlusionTexture)),
                      void 0 !== a.occlusionTexture.strength &&
                        (o.aoMapIntensity = a.occlusionTexture.strength)),
                    void 0 !== a.emissiveFactor &&
                      t !== mf &&
                      (o.emissive = new ff().fromArray(a.emissiveFactor)),
                    void 0 !== a.emissiveTexture &&
                      t !== mf &&
                      s.push(
                        n.assignTexture(o, "emissiveMap", a.emissiveTexture, nd)
                      ),
                    Promise.all(s).then(function () {
                      var i = new t(o);
                      return (
                        a.name && (i.name = a.name),
                        Yb(i, a),
                        n.associations.set(i, { materials: e }),
                        a.extensions && Xb(r, i, a),
                        i
                      );
                    })
                  );
                }
              },
              {
                key: "createUniqueName",
                value: function (e) {
                  for (
                    var t = Ky.sanitizeNodeName(e || ""), n = t, i = 1;
                    this.nodeNamesUsed[n];
                    ++i
                  )
                    n = t + "_" + i;
                  return (this.nodeNamesUsed[n] = !0), n;
                }
              },
              {
                key: "loadGeometries",
                value: function (e) {
                  var t = this,
                    n = this.extensions,
                    i = this.primitiveCache;
                  function r(e) {
                    return n[mb.KHR_DRACO_MESH_COMPRESSION]
                      .decodePrimitive(e, t)
                      .then(function (n) {
                        return ix(n, e, t);
                      });
                  }
                  for (var a = [], o = 0, s = e.length; o < s; o++) {
                    var l = e[o],
                      u = Jb(l),
                      c = i[u];
                    if (c) a.push(c.promise);
                    else {
                      var h;
                      (h =
                        l.extensions &&
                        l.extensions[mb.KHR_DRACO_MESH_COMPRESSION]
                          ? r(l)
                          : ix(new Af(), l, t)),
                        (i[u] = { primitive: l, promise: h }),
                        a.push(h);
                    }
                  }
                  return Promise.all(a);
                }
              },
              {
                key: "loadMesh",
                value: function (e) {
                  for (
                    var t = this,
                      n = this.json,
                      i = this.extensions,
                      r = n.meshes[e],
                      a = r.primitives,
                      o = [],
                      s = 0,
                      l = a.length;
                    s < l;
                    s++
                  ) {
                    var u =
                      void 0 === a[s].material
                        ? (void 0 === (c = this.cache).DefaultMaterial &&
                            (c.DefaultMaterial = new B_({
                              color: 16777215,
                              emissive: 0,
                              metalness: 1,
                              roughness: 1,
                              transparent: !1,
                              depthTest: !0,
                              side: 0
                            })),
                          c.DefaultMaterial)
                        : this.getDependency("material", a[s].material);
                    o.push(u);
                  }
                  var c;
                  return (
                    o.push(t.loadGeometries(a)),
                    Promise.all(o).then(function (n) {
                      for (
                        var o = n.slice(0, n.length - 1),
                          s = n[n.length - 1],
                          l = [],
                          u = 0,
                          c = s.length;
                        u < c;
                        u++
                      ) {
                        var h = s[u],
                          d = a[u],
                          p = void 0,
                          f = o[u];
                        if (
                          d.mode === zb.TRIANGLES ||
                          d.mode === zb.TRIANGLE_STRIP ||
                          d.mode === zb.TRIANGLE_FAN ||
                          void 0 === d.mode
                        )
                          !0 ===
                            (p =
                              !0 === r.isSkinnedMesh
                                ? new r_(h, f)
                                : new Xf(h, f)).isSkinnedMesh &&
                            p.normalizeSkinWeights(),
                            d.mode === zb.TRIANGLE_STRIP
                              ? (p.geometry = pb(p.geometry, 1))
                              : d.mode === zb.TRIANGLE_FAN &&
                                (p.geometry = pb(p.geometry, 2));
                        else if (d.mode === zb.LINES) p = new C_(h, f);
                        else if (d.mode === zb.LINE_STRIP) p = new T_(h, f);
                        else if (d.mode === zb.LINE_LOOP) p = new D_(h, f);
                        else {
                          if (d.mode !== zb.POINTS)
                            throw new Error(
                              "THREE.GLTFLoader: Primitive mode unsupported: " +
                                d.mode
                            );
                          p = new O_(h, f);
                        }
                        Object.keys(p.geometry.morphAttributes).length > 0 &&
                          Zb(p, r),
                          (p.name = t.createUniqueName(r.name || "mesh_" + e)),
                          Yb(p, r),
                          d.extensions && Xb(i, p, d),
                          t.assignFinalMaterial(p),
                          l.push(p);
                      }
                      for (var v = 0, m = l.length; v < m; v++)
                        t.associations.set(l[v], { meshes: e, primitives: v });
                      if (1 === l.length) return l[0];
                      var g = new Bg();
                      t.associations.set(g, { meshes: e });
                      for (var _ = 0, y = l.length; _ < y; _++) g.add(l[_]);
                      return g;
                    })
                  );
                }
              },
              {
                key: "loadCamera",
                value: function (e) {
                  var t,
                    n = this.json.cameras[e],
                    i = n[n.type];
                  if (i)
                    return (
                      "perspective" === n.type
                        ? (t = new iv(
                            Sd(i.yfov),
                            i.aspectRatio || 1,
                            i.znear || 1,
                            i.zfar || 2e6
                          ))
                        : "orthographic" === n.type &&
                          (t = new Cv(
                            -i.xmag,
                            i.xmag,
                            i.ymag,
                            -i.ymag,
                            i.znear,
                            i.zfar
                          )),
                      n.name && (t.name = this.createUniqueName(n.name)),
                      Yb(t, n),
                      Promise.resolve(t)
                    );
                  console.warn("THREE.GLTFLoader: Missing camera parameters.");
                }
              },
              {
                key: "loadSkin",
                value: function (e) {
                  for (
                    var t = this.json.skins[e],
                      n = [],
                      i = 0,
                      r = t.joints.length;
                    i < r;
                    i++
                  )
                    n.push(this._loadNodeShallow(t.joints[i]));
                  return (
                    void 0 !== t.inverseBindMatrices
                      ? n.push(
                          this.getDependency("accessor", t.inverseBindMatrices)
                        )
                      : n.push(null),
                    Promise.all(n).then(function (e) {
                      for (
                        var n = e.pop(),
                          i = e,
                          r = [],
                          a = [],
                          o = 0,
                          s = i.length;
                        o < s;
                        o++
                      ) {
                        var l = i[o];
                        if (l) {
                          r.push(l);
                          var u = new Sp();
                          null !== n && u.fromArray(n.array, 16 * o), a.push(u);
                        } else
                          console.warn(
                            'THREE.GLTFLoader: Joint "%s" could not be found.',
                            t.joints[o]
                          );
                      }
                      return new u_(r, a);
                    })
                  );
                }
              },
              {
                key: "loadAnimation",
                value: function (e) {
                  for (
                    var t = this.json.animations[e],
                      n = t.name ? t.name : "animation_" + e,
                      i = [],
                      r = [],
                      a = [],
                      o = [],
                      s = [],
                      l = 0,
                      u = t.channels.length;
                    l < u;
                    l++
                  ) {
                    var c = t.channels[l],
                      h = t.samplers[c.sampler],
                      d = c.target,
                      p = d.node,
                      f =
                        void 0 !== t.parameters
                          ? t.parameters[h.input]
                          : h.input,
                      v =
                        void 0 !== t.parameters
                          ? t.parameters[h.output]
                          : h.output;
                    void 0 !== d.node &&
                      (i.push(this.getDependency("node", p)),
                      r.push(this.getDependency("accessor", f)),
                      a.push(this.getDependency("accessor", v)),
                      o.push(h),
                      s.push(d));
                  }
                  return Promise.all([
                    Promise.all(i),
                    Promise.all(r),
                    Promise.all(a),
                    Promise.all(o),
                    Promise.all(s)
                  ]).then(function (e) {
                    for (
                      var t = e[0],
                        i = e[1],
                        r = e[2],
                        a = e[3],
                        o = e[4],
                        s = [],
                        l = function () {
                          var e,
                            n = t[u],
                            l = i[u],
                            c = r[u],
                            h = a[u],
                            d = o[u];
                          if (void 0 === n) return 1;
                          switch ((n.updateMatrix(), qb[d.path])) {
                            case qb.weights:
                              e = ey;
                              break;
                            case qb.rotation:
                              e = ny;
                              break;
                            default:
                              e = ry;
                          }
                          var p = n.name ? n.name : n.uuid,
                            f =
                              void 0 !== h.interpolation
                                ? Kb[h.interpolation]
                                : Zh,
                            v = [];
                          qb[d.path] === qb.weights
                            ? n.traverse(function (e) {
                                e.morphTargetInfluences &&
                                  v.push(e.name ? e.name : e.uuid);
                              })
                            : v.push(p);
                          var m = c.array;
                          if (c.normalized) {
                            for (
                              var g = $b(m.constructor),
                                _ = new Float32Array(m.length),
                                y = 0,
                                b = m.length;
                              y < b;
                              y++
                            )
                              _[y] = m[y] * g;
                            m = _;
                          }
                          for (var x = 0, w = v.length; x < w; x++) {
                            var S = new e(
                              v[x] + "." + qb[d.path],
                              l.array,
                              m,
                              f
                            );
                            "CUBICSPLINE" === h.interpolation &&
                              ((S.createInterpolant = function (e) {
                                return new (this instanceof ny ? Bb : Fb)(
                                  this.times,
                                  this.values,
                                  this.getValueSize() / 3,
                                  e
                                );
                              }),
                              (S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline =
                                !0)),
                              s.push(S);
                          }
                        },
                        u = 0,
                        c = t.length;
                      u < c;
                      u++
                    )
                      l();
                    return new ay(n, void 0, s);
                  });
                }
              },
              {
                key: "createNodeMesh",
                value: function (e) {
                  var t = this.json,
                    n = this,
                    i = t.nodes[e];
                  return void 0 === i.mesh
                    ? null
                    : n.getDependency("mesh", i.mesh).then(function (e) {
                        var t = n._getNodeRef(n.meshCache, i.mesh, e);
                        return (
                          void 0 !== i.weights &&
                            t.traverse(function (e) {
                              if (e.isMesh)
                                for (
                                  var t = 0, n = i.weights.length;
                                  t < n;
                                  t++
                                )
                                  e.morphTargetInfluences[t] = i.weights[t];
                            }),
                          t
                        );
                      });
                }
              },
              {
                key: "loadNode",
                value: function (e) {
                  for (
                    var t = this,
                      n = this.json.nodes[e],
                      i = t._loadNodeShallow(e),
                      r = [],
                      a = n.children || [],
                      o = 0,
                      s = a.length;
                    o < s;
                    o++
                  )
                    r.push(t.getDependency("node", a[o]));
                  var l =
                    void 0 === n.skin
                      ? Promise.resolve(null)
                      : t.getDependency("skin", n.skin);
                  return Promise.all([i, Promise.all(r), l]).then(function (e) {
                    var t = e[0],
                      n = e[1],
                      i = e[2];
                    null !== i &&
                      t.traverse(function (e) {
                        e.isSkinnedMesh && e.bind(i, tx);
                      });
                    for (var r = 0, a = n.length; r < a; r++) t.add(n[r]);
                    return t;
                  });
                }
              },
              {
                key: "_loadNodeShallow",
                value: function (e) {
                  var t = this.json,
                    n = this.extensions,
                    i = this;
                  if (void 0 !== this.nodeCache[e]) return this.nodeCache[e];
                  var r = t.nodes[e],
                    a = r.name ? i.createUniqueName(r.name) : "",
                    o = [],
                    s = i._invokeOne(function (t) {
                      return t.createNodeMesh && t.createNodeMesh(e);
                    });
                  return (
                    s && o.push(s),
                    void 0 !== r.camera &&
                      o.push(
                        i.getDependency("camera", r.camera).then(function (e) {
                          return i._getNodeRef(i.cameraCache, r.camera, e);
                        })
                      ),
                    i
                      ._invokeAll(function (t) {
                        return (
                          t.createNodeAttachment && t.createNodeAttachment(e)
                        );
                      })
                      .forEach(function (e) {
                        o.push(e);
                      }),
                    (this.nodeCache[e] = Promise.all(o).then(function (t) {
                      var o;
                      if (
                        (o =
                          !0 === r.isBone
                            ? new a_()
                            : t.length > 1
                            ? new Bg()
                            : 1 === t.length
                            ? t[0]
                            : new Xp()) !== t[0]
                      )
                        for (var s = 0, l = t.length; s < l; s++) o.add(t[s]);
                      if (
                        (r.name && ((o.userData.name = r.name), (o.name = a)),
                        Yb(o, r),
                        r.extensions && Xb(n, o, r),
                        void 0 !== r.matrix)
                      ) {
                        var u = new Sp();
                        u.fromArray(r.matrix), o.applyMatrix4(u);
                      } else void 0 !== r.translation && o.position.fromArray(r.translation), void 0 !== r.rotation && o.quaternion.fromArray(r.rotation), void 0 !== r.scale && o.scale.fromArray(r.scale);
                      return (
                        i.associations.has(o) || i.associations.set(o, {}),
                        (i.associations.get(o).nodes = e),
                        o
                      );
                    })),
                    this.nodeCache[e]
                  );
                }
              },
              {
                key: "loadScene",
                value: function (e) {
                  var t = this.extensions,
                    n = this.json.scenes[e],
                    i = this,
                    r = new Bg();
                  n.name && (r.name = i.createUniqueName(n.name)),
                    Yb(r, n),
                    n.extensions && Xb(t, r, n);
                  for (
                    var a = n.nodes || [], o = [], s = 0, l = a.length;
                    s < l;
                    s++
                  )
                    o.push(i.getDependency("node", a[s]));
                  return Promise.all(o).then(function (e) {
                    for (var t = 0, n = e.length; t < n; t++) r.add(e[t]);
                    return (
                      (i.associations = (function (e) {
                        var t,
                          n = new Map(),
                          r = ih(i.associations);
                        try {
                          for (r.s(); !(t = r.n()).done; ) {
                            var a = rh(t.value, 2),
                              o = a[0],
                              s = a[1];
                            (o instanceof uf || o instanceof Vd) && n.set(o, s);
                          }
                        } catch (e) {
                          r.e(e);
                        } finally {
                          r.f();
                        }
                        return (
                          e.traverse(function (e) {
                            var t = i.associations.get(e);
                            null != t && n.set(e, t);
                          }),
                          n
                        );
                      })(r)),
                      r
                    );
                  });
                }
              }
            ]
          );
        })();
      function ix(e, t, n) {
        var i = t.attributes,
          r = [];
        function a(t, i) {
          return n.getDependency("accessor", t).then(function (t) {
            e.setAttribute(i, t);
          });
        }
        for (var o in i) {
          var s = jb[o] || o.toLowerCase();
          s in e.attributes || r.push(a(i[o], s));
        }
        if (void 0 !== t.indices && !e.index) {
          var l = n.getDependency("accessor", t.indices).then(function (t) {
            e.setIndex(t);
          });
          r.push(l);
        }
        return (
          Yb(e, t),
          (function (e, t, n) {
            var i = t.attributes,
              r = new Zd();
            if (void 0 !== i.POSITION) {
              var a = n.json.accessors[i.POSITION],
                o = a.min,
                s = a.max;
              if (void 0 !== o && void 0 !== s) {
                if (
                  (r.set(new Kd(o[0], o[1], o[2]), new Kd(s[0], s[1], s[2])),
                  a.normalized)
                ) {
                  var l = $b(Vb[a.componentType]);
                  r.min.multiplyScalar(l), r.max.multiplyScalar(l);
                }
                var u = t.targets;
                if (void 0 !== u) {
                  for (
                    var c = new Kd(), h = new Kd(), d = 0, p = u.length;
                    d < p;
                    d++
                  ) {
                    var f = u[d];
                    if (void 0 !== f.POSITION) {
                      var v = n.json.accessors[f.POSITION],
                        m = v.min,
                        g = v.max;
                      if (void 0 !== m && void 0 !== g) {
                        if (
                          (h.setX(Math.max(Math.abs(m[0]), Math.abs(g[0]))),
                          h.setY(Math.max(Math.abs(m[1]), Math.abs(g[1]))),
                          h.setZ(Math.max(Math.abs(m[2]), Math.abs(g[2]))),
                          v.normalized)
                        ) {
                          var _ = $b(Vb[v.componentType]);
                          h.multiplyScalar(_);
                        }
                        c.max(h);
                      } else
                        console.warn(
                          "THREE.GLTFLoader: Missing min/max properties for accessor POSITION."
                        );
                    }
                  }
                  r.expandByVector(c);
                }
                e.boundingBox = r;
                var y = new fp();
                r.getCenter(y.center),
                  (y.radius = r.min.distanceTo(r.max) / 2),
                  (e.boundingSphere = y);
              } else
                console.warn(
                  "THREE.GLTFLoader: Missing min/max properties for accessor POSITION."
                );
            }
          })(e, t, n),
          Promise.all(r).then(function () {
            return void 0 !== t.targets
              ? (function (e, t, n) {
                  for (
                    var i = !1, r = !1, a = !1, o = 0, s = t.length;
                    o < s;
                    o++
                  ) {
                    var l = t[o];
                    if (
                      (void 0 !== l.POSITION && (i = !0),
                      void 0 !== l.NORMAL && (r = !0),
                      void 0 !== l.COLOR_0 && (a = !0),
                      i && r && a)
                    )
                      break;
                  }
                  if (!i && !r && !a) return Promise.resolve(e);
                  for (
                    var u = [], c = [], h = [], d = 0, p = t.length;
                    d < p;
                    d++
                  ) {
                    var f = t[d];
                    if (i) {
                      var v =
                        void 0 !== f.POSITION
                          ? n.getDependency("accessor", f.POSITION)
                          : e.attributes.position;
                      u.push(v);
                    }
                    if (r) {
                      var m =
                        void 0 !== f.NORMAL
                          ? n.getDependency("accessor", f.NORMAL)
                          : e.attributes.normal;
                      c.push(m);
                    }
                    if (a) {
                      var g =
                        void 0 !== f.COLOR_0
                          ? n.getDependency("accessor", f.COLOR_0)
                          : e.attributes.color;
                      h.push(g);
                    }
                  }
                  return Promise.all([
                    Promise.all(u),
                    Promise.all(c),
                    Promise.all(h)
                  ]).then(function (t) {
                    var n = t[0],
                      o = t[1],
                      s = t[2];
                    return (
                      i && (e.morphAttributes.position = n),
                      r && (e.morphAttributes.normal = o),
                      a && (e.morphAttributes.color = s),
                      (e.morphTargetsRelative = !0),
                      e
                    );
                  });
                })(e, t.targets, n)
              : e;
          })
        );
      }
      function rx(e) {
        var t = new Map(),
          n = new Map(),
          i = e.clone();
        return (
          ax(e, i, function (e, i) {
            t.set(i, e), n.set(e, i);
          }),
          i.traverse(function (e) {
            if (e.isSkinnedMesh) {
              var i = e,
                r = t.get(e),
                a = r.skeleton.bones;
              (i.skeleton = r.skeleton.clone()),
                i.bindMatrix.copy(r.bindMatrix),
                (i.skeleton.bones = a.map(function (e) {
                  return n.get(e);
                })),
                i.bind(i.skeleton, i.bindMatrix);
            }
          }),
          i
        );
      }
      function ax(e, t, n) {
        n(e, t);
        for (var i = 0; i < e.children.length; i++)
          ax(e.children[i], t.children[i], n);
      }
      function ox(e) {
        var t =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
          n = t.onLoad,
          i = t.onProgress,
          r = t.onError,
          a = t.isAddToLoadingWait;
        ex = ex || new vy();
        var o = e
          ? ex.load(
              e,
              function (e) {
                n && n(e);
              },
              i,
              r
            )
          : null;
        return (
          a &&
            o &&
            (Yr.loadingCountList[Yr.pageId].push(
              new Promise(
                (function () {
                  var e = nh(
                    mh().mark(function e(t) {
                      return mh().wrap(function (e) {
                        for (;;)
                          switch ((e.prev = e.next)) {
                            case 0:
                              return (e.t0 = t), (e.next = 3), o;
                            case 3:
                              (e.t1 = e.sent), (0, e.t0)(e.t1);
                            case 5:
                            case "end":
                              return e.stop();
                          }
                      }, e);
                    })
                  );
                  return function (t) {
                    return e.apply(this, arguments);
                  };
                })()
              )
            ),
            Us()),
          o
        );
      }
      function sx(e) {
        var t = e.src,
          n = e.format,
          i =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
        return "png" === n
          ? (function (e) {
              var t,
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {},
                i = n.onLoad,
                r = n.onProgress,
                a = n.onError,
                o = n.isAddToLoadingWait;
              if (((ex = ex || new vy()), o)) {
                var s = new Promise(function (e) {
                  t = e;
                });
                Yr.loadingCountList[Yr.pageId].push(s);
              }
              return e
                ? ex.load(
                    e,
                    function (e) {
                      (function (e) {
                        var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : Ih;
                        (e.anisotropy = 0), (e.magFilter = e.minFilter = t);
                      })(e),
                        i && i(e),
                        o && (t(e), Us());
                    },
                    r,
                    a
                  )
                : null;
            })(t, i)
          : /^jpe?g$/.test(n)
          ? (function (e) {
              var t,
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {},
                i = n.onLoad,
                r = n.onProgress,
                a = n.onError,
                o = n.isAddToLoadingWait;
              if (((ex = ex || new vy()), o)) {
                var s = new Promise(function (e) {
                  t = e;
                });
                Yr.loadingCountList[Yr.pageId].push(s);
              }
              return e
                ? ex.load(
                    e,
                    function (e) {
                      (function (e) {
                        var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : Ih;
                        e.magFilter = e.minFilter = t;
                      })(e),
                        i && i(e),
                        o && (t(e), Us());
                    },
                    r,
                    a
                  )
                : null;
            })(t, i)
          : null;
      }
      function lx(e) {
        var t =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
          n = t.onLoad,
          i = t.onProgress,
          r = t.onError,
          a = t.isSkeleton,
          o = t.disableCache,
          s = t.isAddToLoadingWait;
        if (o || !Yr.gltf[e]) {
          var l;
          if (
            ((Yr.gltfLoader =
              Yr.gltfLoader ||
              (function () {
                var e = new fb(),
                  t = new hb();
                return t.setDecoderPath("/gl/draco/"), e.setDRACOLoader(t), e;
              })()),
            s)
          ) {
            var u = new Promise(function (e) {
              l = e;
            });
            Yr.loadingCountList[Yr.pageId].push(u);
          }
          return e
            ? Yr.gltfLoader.load(
                e,
                function (t) {
                  t.scene.traverse(function (e) {
                    e.isMesh && (e.material.side = 0);
                  }),
                    o || (Yr.gltf[e] = t),
                    n && n(t, o ? t.scene : a ? rx(t.scene) : t.scene.clone()),
                    s && (l(t), Us());
                },
                i,
                r
              )
            : null;
        }
        var c = Yr.gltf[e];
        n && n(c, a ? rx(c.scene) : c.scene.clone());
      }
      function ux(e) {
        var t = {};
        return (
          Object.keys(e).forEach(function (n) {
            t[n] = { value: e[n] };
          }),
          t
        );
      }
      function cx(e, t, n) {
        return [kl(e.x, t.x, n), kl(e.y, t.y, n), kl(e.z, t.z, n)];
      }
      sy.enabled = !0;
      var hx,
        dx,
        px = (function (e) {
          function t() {
            var e;
            gh(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return (
              wh((e = uh(this, t, [].concat(i))), "isDisposed", !1),
              wh(e, "disposeTargets", new Map()),
              wh(e, "meshes", {}),
              wh(e, "textures", {}),
              wh(e, "renderTargets", {}),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "dispose",
                value: function () {
                  (this.isDisposed = !0),
                    this.scene && this.disposeScene(this.scene),
                    this.scene2D && this.disposeScene(this.scene2D),
                    this.sceneBackground &&
                      this.disposeScene(this.sceneBackground),
                    this.sceneCar && this.disposeScene(this.sceneCar),
                    this.sceneSky && this.disposeScene(this.sceneSky),
                    this.sceneLoading && this.disposeScene(this.sceneLoading),
                    this.basicScene && this.disposeScene(this.basicScene),
                    this.sceneText && this.disposeScene(this.sceneText);
                  for (
                    var e = 0, t = Object.entries(this.meshes);
                    e < t.length;
                    e++
                  ) {
                    var n = rh(t[e], 2),
                      i = n[0];
                    n[1].dispose(), delete this.meshes[i];
                  }
                  for (
                    var r = 0, a = Object.entries(this.textures);
                    r < a.length;
                    r++
                  ) {
                    var o = rh(a[r], 2),
                      s = o[0];
                    o[1].dispose(), delete this.textures[s];
                  }
                  for (
                    var l = 0, u = Object.entries(this.renderTargets);
                    l < u.length;
                    l++
                  ) {
                    var c = rh(u[l], 2),
                      h = c[0];
                    c[1].dispose(), delete this.renderTargets[h];
                  }
                  this.postprocessing && this.postprocessing.dispose();
                }
              },
              {
                key: "resizeScene",
                value: function (e, t) {
                  this.scene && this.scene.resize(e, t),
                    this.sceneBackground && this.sceneBackground.resize(e, t),
                    this.sceneCar && this.sceneCar.resize(e, t),
                    this.sceneSky && this.sceneSky.resize(e, t),
                    this.basicScene && this.basicScene.resize(e, t);
                }
              },
              {
                key: "addDisposeTarget",
                value: function (e, t) {
                  var n = this.disposeTargets.get(e);
                  n || ((n = []), this.disposeTargets.set(e, n)), n.push(t);
                }
              },
              {
                key: "disposeScene",
                value: function (e) {
                  var t = this,
                    n = this.disposeTargets.get(e);
                  n || ((n = []), this.disposeTargets.set(e, n)),
                    null != e &&
                      e.traverse(function (e) {
                        if ("glTF" === e.name)
                          n.push(e),
                            e.children.forEach(function (e, n) {
                              t.disposeScene(e);
                            });
                        else if (
                          e.isScene ||
                          e.isGroup ||
                          (e.isObject3D && !e.isMesh && !e.isLight)
                        )
                          e.children.forEach(function (e, n) {
                            t.disposeScene(e);
                          });
                        else if (e.isMesh)
                          if (e.dispose) e.dispose(), n.push(e);
                          else {
                            var i = e.geometry,
                              r = e.material;
                            i && i.dispose(),
                              Array.isArray(r)
                                ? r.forEach(function (e) {
                                    t.disposeMaterial(e);
                                  })
                                : r && t.disposeMaterial(r),
                              n.push(e);
                          }
                      }),
                    n.forEach(function (t) {
                      e.remove(t);
                    });
                }
              },
              {
                key: "disposeMaterial",
                value: function (e) {
                  e.map && e.map.dispose(),
                    e.lightMap && e.lightMap.dispose(),
                    e.bumpMap && e.bumpMap.dispose(),
                    e.normalMap && e.normalMap.dispose(),
                    e.specularMap && e.specularMap.dispose(),
                    e.envMap && e.envMap.dispose(),
                    e.alphaMap && e.alphaMap.dispose(),
                    e.aoMap && e.aoMap.dispose(),
                    e.displacementMap && e.displacementMap.dispose(),
                    e.emissiveMap && e.emissiveMap.dispose(),
                    e.gradientMap && e.gradientMap.dispose(),
                    e.metalnessMap && e.metalnessMap.dispose(),
                    e.roughnessMap && e.roughnessMap.dispose(),
                    e.dispose();
                }
              },
              {
                key: "restore",
                value: function () {
                  (this.isDisposed = !1),
                    this.scene && this.restoreScene(this.scene),
                    this.scene2D && this.restoreScene(this.scene2D),
                    this.sceneBackground &&
                      this.restoreScene(this.sceneBackground),
                    this.sceneCar && this.restoreScene(this.sceneCar),
                    this.sceneSky && this.restoreScene(this.sceneSky),
                    this.sceneLoading && this.restoreScene(this.sceneLoading),
                    this.basicScene && this.restoreScene(this.basicScene),
                    this.sceneText && this.restoreScene(this.sceneText);
                }
              },
              {
                key: "restoreScene",
                value: function (e) {
                  var t = this.disposeTargets.get(e);
                  t &&
                    t.forEach(function (t) {
                      e.add(t);
                    });
                }
              },
              {
                key: "onDestroy",
                value: function () {
                  Yr.enablePane && this.folder && Yr.pane.remove(this.folder);
                }
              }
            ])
          );
        })(Zs),
        fx = (function (e) {
          function t() {
            return gh(this, t), uh(this, t, arguments);
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "disposeGeometry",
                value: function (e) {
                  e && e.dispose();
                }
              },
              {
                key: "disposeMaterial",
                value: function (e) {
                  var t = this;
                  e && Array.isArray(e)
                    ? e.forEach(function (e) {
                        return t.disposeMaterialSingle(e);
                      })
                    : e && this.disposeMaterialSingle(e);
                }
              },
              {
                key: "disposeMaterialSingle",
                value: function (e) {
                  e.map && e.map.dispose(), e.dispose();
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.disposeGeometry(this.geometry),
                    this.disposeMaterial(this.material);
                }
              }
            ])
          );
        })(Xf),
        vx = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : {},
              i = n.width,
              r = void 0 === i ? 2 : i,
              a = n.height,
              o = void 0 === a ? 2 : a,
              s = n.near,
              l = void 0 === s ? 0.1 : s,
              u = n.far,
              c = void 0 === u ? 2 : u;
            return (
              gh(this, t),
              ((e = uh(this, t, [
                r / -2,
                r / 2,
                o / 2,
                o / -2,
                l,
                c
              ])).position.z = 1),
              e
            );
          }
          return (
            ph(t, e),
            yh(t, [
              {
                key: "resize",
                value: function (e, t) {
                  (this.left = e / -2),
                    (this.right = e / 2),
                    (this.top = t / 2),
                    (this.bottom = t / -2),
                    this.updateProjectionMatrix();
                }
              }
            ])
          );
        })(Cv),
        mx = 1069,
        gx = mx - 300 * Math.min(1 - 0.7, 0.1),
        _x = gx - 979,
        yx = 0.33,
        bx = 0.66,
        xx = 1472,
        wx = 1692,
        Sx = wx,
        Mx = 1892,
        Tx = 1992,
        kx = 2212,
        Ex = 1832,
        Cx = 2124,
        Dx = 292,
        Ax = 2198.8,
        Px = 2598.8,
        Lx = Px,
        Rx = Px,
        Ix = 2818.8,
        Ox = Rx,
        Nx = 3218.8,
        Fx = Nx,
        Ux = 3488.8,
        Bx = Ux,
        zx = 3664.8,
        Vx = 3814.8,
        Hx = 3964.8,
        Gx = 4334.8;
      function Wx(e) {
        return (
          (Wx =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          Wx(e)
        );
      }
      function jx(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function qx(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          (i.enumerable = i.enumerable || !1),
            (i.configurable = !0),
            "value" in i && (i.writable = !0),
            Object.defineProperty(e, ew(i.key), i);
        }
      }
      function Kx(e, t, n) {
        return (
          t && qx(e.prototype, t),
          n && qx(e, n),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          e
        );
      }
      function Xx(e, t, n) {
        return (
          (t = Zx(t)),
          (function (e, t) {
            if (t && ("object" == Wx(t) || "function" == typeof t)) return t;
            if (void 0 !== t)
              throw new TypeError(
                "Derived constructors may only return object or undefined"
              );
            return (function (e) {
              if (void 0 === e)
                throw new ReferenceError(
                  "this hasn't been initialised - super() hasn't been called"
                );
              return e;
            })(e);
          })(
            e,
            Yx()
              ? Reflect.construct(t, n || [], Zx(e).constructor)
              : t.apply(e, n)
          )
        );
      }
      function Yx() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (Yx = function () {
          return !!e;
        })();
      }
      function Zx(e) {
        return (
          (Zx = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          Zx(e)
        );
      }
      function Jx(e, t) {
        if ("function" != typeof t && null !== t)
          throw new TypeError(
            "Super expression must either be null or a function"
          );
        (e.prototype = Object.create(t && t.prototype, {
          constructor: { value: e, writable: !0, configurable: !0 }
        })),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          t && Qx(e, t);
      }
      function Qx(e, t) {
        return (
          (Qx = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          Qx(e, t)
        );
      }
      function $x(e, t, n) {
        return (
          (t = ew(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      function ew(e) {
        var t = (function (e) {
          if ("object" != Wx(e) || !e) return e;
          var t = e[Symbol.toPrimitive];
          if (void 0 !== t) {
            var n = t.call(e, "string");
            if ("object" != Wx(n)) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e);
        return "symbol" == Wx(t) ? t : t + "";
      }
      function tw(e) {
        return (
          (tw =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          tw(e)
        );
      }
      function nw(e, t) {
        (null == t || t > e.length) && (t = e.length);
        for (var n = 0, i = Array(t); n < t; n++) i[n] = e[n];
        return i;
      }
      function iw(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          (i.enumerable = i.enumerable || !1),
            (i.configurable = !0),
            "value" in i && (i.writable = !0),
            Object.defineProperty(e, rw(i.key), i);
        }
      }
      function rw(e) {
        var t = (function (e) {
          if ("object" != tw(e) || !e) return e;
          var t = e[Symbol.toPrimitive];
          if (void 0 !== t) {
            var n = t.call(e, "string");
            if ("object" != tw(n)) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e);
        return "symbol" == tw(t) ? t : t + "";
      }
      function aw() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (aw = function () {
          return !!e;
        })();
      }
      function ow(e) {
        return (
          (ow = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          ow(e)
        );
      }
      function sw(e, t) {
        return (
          (sw = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          sw(e, t)
        );
      }
      Object.freeze(
        Object.defineProperty(
          {
            __proto__: null,
            ABOUT_BIRDS_EYE_RUN_DISTANCE: 620,
            ABOUT_BIRDS_EYE_RUN_POSITION_END: Nx,
            ABOUT_BIRDS_EYE_RUN_POSITION_START: Ox,
            ABOUT_BIRD_DISTANCE: 320,
            ABOUT_BIRD_POSITION_END: Lx,
            ABOUT_BIRD_POSITION_START: 2278.8,
            ABOUT_SKY_TEXT_DISTANCE: 300,
            ABOUT_SKY_TEXT_POSITION_END: Ux,
            ABOUT_SKY_TEXT_POSITION_START: 3188.8,
            ABOUT_TEXT_DISTANCE: 400,
            ABOUT_TEXT_POSITION_END: Px,
            ABOUT_TEXT_POSITION_START: Ax,
            ABOUT_TITLE_DISTANCE: 22,
            ABOUT_TITLE_POSITION_END: 2190,
            ABOUT_TITLE_POSITION_START: 2168,
            CHARGING_METER_DISTANCE: _x,
            CHARGING_METER_POSITION_END: gx,
            CHARGING_METER_POSITION_START: 979,
            CHARGING_METER_START_RATE: 0.7,
            CHARGING_TEXT_DISTANCE: 300,
            CHARGING_TEXT_POSITION_END: mx,
            CHARGING_TEXT_POSITION_START: 769,
            INTRO_GO_NEXT_DISTANCE: 110,
            INTRO_GO_NEXT_POSITION_END: 615,
            INTRO_GO_NEXT_POSITION_START: 505,
            INTRO_SLIDE_DISTANCE: 250,
            INTRO_SLIDE_POSITION_END: 480,
            INTRO_SLIDE_POSITION_START: 230,
            INTRO_TEXT_DISTANCE: 200,
            INTRO_TEXT_POSITION_END: 505,
            INTRO_TEXT_POSITION_START: 305,
            INTRO_TITLE_DISTANCE: 55,
            INTRO_TITLE_POSITION_END: 220,
            INTRO_TITLE_POSITION_START: 165,
            KV_TITLE_DISTANCE: 40,
            KV_TITLE_POSITION_END: 40,
            KV_TITLE_POSITION_START: 0,
            NEWS_BALLOON_DISTANCE: 50,
            NEWS_BALLOON_POSITION_END: 3714.8,
            NEWS_BALLOON_POSITION_START: zx,
            NEWS_CONTENT_2_DISTANCE: 50,
            NEWS_CONTENT_2_POSITION_END: 3864.8,
            NEWS_CONTENT_2_POSITION_START: Vx,
            NEWS_CONTENT_3_DISTANCE: 50,
            NEWS_CONTENT_3_POSITION_END: 4014.8,
            NEWS_CONTENT_3_POSITION_START: Hx,
            SCROLL_TEXT_INTRO_POSITION: 0.33,
            SCROLL_TEXT_SERVICE_POSITION: yx,
            SCROLL_TEXT_SERVICE_TRANSITION_POSITION: bx,
            SCROLL_TEXT_TRANSITION_POSITION: 0.66,
            SERVICE_OPPOSITE_CAR_DISTANCE: Dx,
            SERVICE_OPPOSITE_CAR_POSITION_END: Cx,
            SERVICE_OPPOSITE_CAR_POSITION_START: Ex,
            SERVICE_OPPOSITE_TEXT_DISTANCE: 200,
            SERVICE_OPPOSITE_TEXT_POSITION_END: Mx,
            SERVICE_OPPOSITE_TEXT_POSITION_START: Sx,
            SERVICE_TEXT_DISTANCE: 150,
            SERVICE_TEXT_POSITION_END: 1472,
            SERVICE_TEXT_POSITION_START: 1322,
            SERVICE_TITLE_DISTANCE: 22,
            SERVICE_TITLE_POSITION_END: 1267,
            SERVICE_TITLE_POSITION_START: 1245,
            START_HEADER_ENERGY_RATE: 0.19,
            TOP_TRANSITION_ABOUT_BIRDS_EYE_DISTANCE: 220,
            TOP_TRANSITION_ABOUT_BIRDS_EYE_POSITION_END: Ix,
            TOP_TRANSITION_ABOUT_BIRDS_EYE_POSITION_START: Rx,
            TOP_TRANSITION_ABOUT_DISTANCE: 220,
            TOP_TRANSITION_ABOUT_POSITION_END: kx,
            TOP_TRANSITION_ABOUT_POSITION_START: Tx,
            TOP_TRANSITION_ABOUT_SKY_DISTANCE: 390,
            TOP_TRANSITION_ABOUT_SKY_POSITION_END: Fx,
            TOP_TRANSITION_ABOUT_SKY_POSITION_START: 2828.8,
            TOP_TRANSITION_CHARGING_DISTANCE: 264,
            TOP_TRANSITION_CHARGING_POSITION_END: 769,
            TOP_TRANSITION_CHARGING_POSITION_START: 505,
            TOP_TRANSITION_DISTANCE: 220,
            TOP_TRANSITION_FOOTER_DISTANCE: 220,
            TOP_TRANSITION_FOOTER_POSITION_END: Gx,
            TOP_TRANSITION_FOOTER_POSITION_START: 4114.8,
            TOP_TRANSITION_INTRO_DISTANCE: 220,
            TOP_TRANSITION_INTRO_POSITION_END: 220,
            TOP_TRANSITION_INTRO_POSITION_START: 0,
            TOP_TRANSITION_KV_DISTANCE: 220,
            TOP_TRANSITION_KV_LOOP_DISTANCE: 220,
            TOP_TRANSITION_KV_LOOP_POSITION_END: 4555.8,
            TOP_TRANSITION_KV_LOOP_POSITION_START: 4335.8,
            TOP_TRANSITION_KV_POSITION_END: 0,
            TOP_TRANSITION_KV_POSITION_START: -220,
            TOP_TRANSITION_NEWS_DISTANCE: 220,
            TOP_TRANSITION_NEWS_POSITION_END: 3708.8,
            TOP_TRANSITION_NEWS_POSITION_START: Bx,
            TOP_TRANSITION_SERVICE_DISTANCE: 220,
            TOP_TRANSITION_SERVICE_OPPOSITE_DISTANCE: 220,
            TOP_TRANSITION_SERVICE_OPPOSITE_POSITION_END: wx,
            TOP_TRANSITION_SERVICE_OPPOSITE_POSITION_START: xx,
            TOP_TRANSITION_SERVICE_POSITION_END: 1289,
            TOP_TRANSITION_SERVICE_POSITION_START: 1069
          },
          Symbol.toStringTag,
          { value: "Module" }
        )
      ),
        ((hx = (function (e) {
          function t() {
            return jx(this, t), Xx(this, t, arguments);
          }
          return (
            Jx(t, e),
            Kx(t, [
              {
                key: "onInit",
                value: function () {
                  var e,
                    t = this;
                  if (
                    null !== (e = this.el) &&
                    void 0 !== e &&
                    e.classList.contains("js_io")
                  ) {
                    var n,
                      i = [];
                    (this.splitTarget = new Tl(
                      null === (n = this.el) || void 0 === n
                        ? void 0
                        : n.querySelector(".title-ja"),
                      { type: "chars", charsClass: "SectionTitle-splitTxt" }
                    )),
                      this.splitTarget.chars.forEach(function (e, t) {
                        i.push(0.3 * Dr.utils.random(0, 1)),
                          (e.style.transitionDelay = ""
                            .concat(i[t], "s,")
                            .concat(i[t], "s,")
                            .concat(i[t], "s")),
                          (e.style.opacity = 0),
                          (e.style.filter = "blur(".concat(10 * i[t], "px)")),
                          (e.style.transform = "translateZ(".concat(
                            12 * (0.5 + i[t] / 2),
                            "vw)"
                          ));
                      }),
                      this.addIntersectionObserver({
                        el: this.el,
                        callback: function (e, n) {
                          e.isIntersecting &&
                            (t.el.classList.add("isIntersect_title"),
                            t.splitTarget.chars.forEach(function (e, t) {
                              (e.style.opacity = 1),
                                (e.style.filter = "blur(0px)"),
                                (e.style.transform = "translateZ(0vw)");
                            }));
                        },
                        param: { rootMargin: "0% 0% -20% 0%" },
                        once: !0
                      });
                  }
                }
              }
            ])
          );
        })(Zs)),
        $x(hx, "componentName", "SectionTitle"),
        hx).register(),
        ((dx = (function (e) {
          function t() {
            return jx(this, t), Xx(this, t, arguments);
          }
          return (
            Jx(t, e),
            Kx(t, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  (this.anchorLinks = this.el.querySelectorAll("a")),
                    this.anchorLinks.forEach(function (t, n) {
                      Yr.view.querySelector(t.getAttribute("href"))
                        ? t.addEventListener("click", e.ankerScroll)
                        : t.parentElement.remove();
                    });
                }
              },
              {
                key: "ankerScroll",
                value: function (e) {
                  switch (
                    (e.preventDefault(), e.target.getAttribute("data-second"))
                  ) {
                    case "secondView":
                      gsap.to(window, {
                        duration: 1.2,
                        ease: "power3.out",
                        scrollTo: {
                          y: e.target.getAttribute("href"),
                          offsetY: -window.innerHeight,
                          autoKill: !1
                        }
                      });
                      break;
                    case "secondViewWHY":
                      gsap.to(window, {
                        duration: 1.2,
                        ease: "power3.out",
                        scrollTo: { y: 2 * window.innerHeight, autoKill: !1 }
                      });
                      break;
                    default:
                      gsap.to(window, {
                        duration: 1.2,
                        ease: "power3.out",
                        scrollTo: {
                          y: e.target.getAttribute("href"),
                          autoKill: !1
                        }
                      });
                  }
                }
              },
              {
                key: "onEnterCompleted",
                value: function () {
                  var e = this;
                  this.anchorLinks.forEach(function (t, n) {
                    t.removeEventListener("click", e.ankerScroll);
                  }),
                    (this.anchorLinks = void 0);
                }
              }
            ])
          );
        })(Zs)),
        $x(dx, "componentName", "AnchorLinks"),
        dx).register();
      var lw = {
          defines: { DEPTH_PACKING: 1, PERSPECTIVE_CAMERA: 1 },
          uniforms: {
            tColor: { value: null },
            tDepth: { value: null },
            focus: { value: 1 },
            aspect: { value: 1 },
            aperture: { value: 0.025 },
            maxblur: { value: 0.01 },
            nearClip: { value: 1 },
            farClip: { value: 1e3 }
          },
          vertexShader:
            "\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",
          fragmentShader:
            "\n\n\t\t#include <common>\n\n\t\tvarying vec2 vUv;\n\n\t\tuniform sampler2D tColor;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float maxblur; // max blur amount\n\t\tuniform float aperture; // aperture - bigger values for shallower depth of field\n\n\t\tuniform float nearClip;\n\t\tuniform float farClip;\n\n\t\tuniform float focus;\n\t\tuniform float aspect;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, nearClip, farClip );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, nearClip, farClip );\n\t\t\t#endif\n\t\t}\n\n\n\t\tvoid main() {\n\n\t\t\tvec2 aspectcorrect = vec2( 1.0, aspect );\n\n\t\t\tfloat viewZ = getViewZ( getDepth( vUv ) );\n\n\t\t\tfloat factor = ( focus + viewZ ); // viewZ is <= 0, so this is a difference equation\n\n\t\t\tvec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );\n\n\t\t\tvec2 dofblur9 = dofblur * 0.9;\n\t\t\tvec2 dofblur7 = dofblur * 0.7;\n\t\t\tvec2 dofblur4 = dofblur * 0.4;\n\n\t\t\tvec4 col = vec4( 0.0 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );\n\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\n\t\t\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );\n\n\t\t\tgl_FragColor = col / 41.0;\n\t\t\tgl_FragColor.a = 1.0;\n\n\t\t}"
        },
        uw = (function (e) {
          function t(e, n, i) {
            var r;
            !(function (e, t) {
              if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function");
            })(this, t),
              ((r = (function (e, t, n) {
                return (
                  (t = ow(t)),
                  (function (e, t) {
                    if (t && ("object" == tw(t) || "function" == typeof t))
                      return t;
                    if (void 0 !== t)
                      throw new TypeError(
                        "Derived constructors may only return object or undefined"
                      );
                    return (function (e) {
                      if (void 0 === e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return e;
                    })(e);
                  })(
                    e,
                    aw()
                      ? Reflect.construct(t, n || [], ow(e).constructor)
                      : t.apply(e, n)
                  )
                );
              })(this, t)).scene = e),
              (r.camera = n);
            var a = void 0 !== i.focus ? i.focus : 1,
              o = void 0 !== i.aspect ? i.aspect : n.aspect,
              s = void 0 !== i.aperture ? i.aperture : 0.025,
              l = void 0 !== i.maxblur ? i.maxblur : 1;
            (r.renderTargetDepth = new Gd(1, 1, {
              minFilter: Ph,
              magFilter: Ph
            })),
              (r.renderTargetDepth.texture.name = "BokehPass.depth"),
              (r.materialDepth = new Lg()),
              (r.materialDepth.depthPacking = 3201),
              (r.materialDepth.blending = 0);
            var u = lw,
              c = ev.clone(u.uniforms);
            return (
              (c.tDepth.value = r.renderTargetDepth.texture),
              (c.focus.value = a),
              (c.aspect.value = o),
              (c.aperture.value = s),
              (c.maxblur.value = l),
              (c.nearClip.value = n.near),
              (c.farClip.value = n.far),
              (r.materialBokeh = new tv({
                defines: Object.assign({}, u.defines),
                uniforms: c,
                vertexShader: u.vertexShader,
                fragmentShader: u.fragmentShader
              })),
              (r.uniforms = c),
              (r.needsSwap = !1),
              (r.fsQuad = new tb(r.materialBokeh)),
              (r._oldClearColor = new ff()),
              r
            );
          }
          return (
            (function (e, t) {
              if ("function" != typeof t && null !== t)
                throw new TypeError(
                  "Super expression must either be null or a function"
                );
              (e.prototype = Object.create(t && t.prototype, {
                constructor: { value: e, writable: !0, configurable: !0 }
              })),
                Object.defineProperty(e, "prototype", { writable: !1 }),
                t && sw(e, t);
            })(t, e),
            (function (e, t) {
              return (
                t && iw(e.prototype, t),
                Object.defineProperty(e, "prototype", { writable: !1 }),
                e
              );
            })(t, [
              {
                key: "render",
                value: function (e, t, n) {
                  (this.scene.overrideMaterial = this.materialDepth),
                    e.getClearColor(this._oldClearColor);
                  var i = e.getClearAlpha(),
                    r = e.autoClear;
                  (e.autoClear = !1),
                    e.setClearColor(16777215),
                    e.setClearAlpha(1),
                    e.setRenderTarget(this.renderTargetDepth),
                    e.clear(),
                    e.render(this.scene, this.camera),
                    (this.uniforms.tColor.value = n.texture),
                    (this.uniforms.nearClip.value = this.camera.near),
                    (this.uniforms.farClip.value = this.camera.far),
                    this.renderToScreen
                      ? (e.setRenderTarget(null), this.fsQuad.render(e))
                      : (e.setRenderTarget(t),
                        e.clear(),
                        this.fsQuad.render(e)),
                    (this.scene.overrideMaterial = null),
                    e.setClearColor(this._oldClearColor),
                    e.setClearAlpha(i),
                    (e.autoClear = r);
                }
              },
              {
                key: "setSize",
                value: function (e, t) {
                  this.renderTargetDepth.setSize(e, t);
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.renderTargetDepth.dispose(),
                    this.materialDepth.dispose(),
                    this.materialBokeh.dispose(),
                    this.fsQuad.dispose();
                }
              }
            ])
          );
        })(Qy);
      new Md();
      var cw = {
          uniforms: {
            mNear: { value: 1 },
            mFar: { value: 1e3 },
            bokehNear: { value: 0 },
            bokehFarBack: { value: 1 },
            bokehFarFront: { value: 1 }
          },
          vertexShader:
            "\n\n    varying float vViewZDepth;\n\n    void main() {\n\n      #include <begin_vertex>\n      #include <project_vertex>\n\n      vViewZDepth = - mvPosition.z;\n\n    }",
          vertexShaderY:
            "\n\n    varying float vViewZDepth;\n\n    void main() {\n\n      #include <begin_vertex>\n      #include <project_vertex>\n\n      vViewZDepth = - mvPosition.y;\n\n    }",
          vertexShaderNone:
            "\n\n    varying float vViewZDepth;\n\n    void main() {\n\n      #include <begin_vertex>\n      #include <project_vertex>\n\n      vViewZDepth = 10000.;\n\n    }",
          vertexShaderForce:
            "\n\n    varying float vViewZDepth;\n\n    void main() {\n\n      #include <begin_vertex>\n      #include <project_vertex>\n\n      vViewZDepth = 0.;\n\n    }",
          fragmentShader:
            "\n\n    uniform float mNear;\n    uniform float mFar;\n\n    uniform float bokehNear;\n    uniform float bokehFarBack;\n    uniform float bokehFarFront;\n\n    varying float vViewZDepth;\n\n    void main() {\n\n      float depth = 0. + (vViewZDepth - mNear) * (1. - 0.) / (mFar - mNear);\n      // depth = fract(depth*(step(mod(depth,2.),1.)*2.-1.));\n      // float color = 1.0 - depth;\n      // float color = depth;\n\n      float bokeh = depth - bokehNear;\n      bokeh = abs(bokeh / (bokeh < 0. ? bokehFarFront : bokehFarBack));\n      // bokeh = abs(bokeh);\n      // bokeh = bokeh < 0. ? smoothstep(0., 0.0095, -bokeh) : bokeh > 1. ? -bokeh + 2. : pow(bokeh, 1.5);\n      bokeh = min(max(bokeh, 0.), 1.);\n\n      gl_FragColor = vec4( vec3( depth, bokeh, 0. ), 1.0 );\n      // gl_FragColor = vec4( vec3( vViewZDepth / 700. ), 1.0 );\n\n    }"
        },
        hw = {
          hideNoise: !1,
          showDepth: !1,
          showBokeh: !1,
          mNear: 0.1,
          mFar: 550,
          maxblur: 2,
          maxblurNight: 2,
          maxblurFull: 0,
          blurFocus: 1,
          blurExponent: 1,
          blurCenter: new Md(),
          rShift: 2,
          rShiftOpacity: 0.6,
          noiseMin: 0.85,
          noiseMax: 1,
          noiseGrayScale: 0,
          bokehNear: 0,
          bokehFarBack: 1,
          bokehFarFront: 1,
          fogNear: 1,
          fogFar: 1,
          brightness: 1,
          brightnessNight: 1,
          whiteness: 0,
          noiseProgress: 0,
          noiseDarkness: 1,
          uRay: [
            {
              center: new Md(),
              rotation: 0,
              speed: 0,
              offset: 0,
              width: 0,
              edge: 0,
              rayDistance: 0,
              opacity: 0
            },
            {
              center: new Md(),
              rotation: 0,
              speed: 0,
              offset: 0,
              width: 0,
              edge: 0,
              rayDistance: 0,
              opacity: 0
            },
            {
              center: new Md(),
              rotation: 0,
              speed: 0,
              offset: 0,
              width: 0,
              edge: 0,
              rayDistance: 0,
              opacity: 0
            }
          ],
          time: 0,
          transparent: !1,
          opacity: 1,
          uIsNightMode: !1,
          uIsNightModeLogo: !1,
          nightModeThreshold1: 0.5,
          nightModeThreshold2: 0.5,
          nightModeThreshold3: 0.5,
          nightModeThreshold4: 0.5,
          nightModeBrightness1: 1,
          nightModeBrightness2: 0.5,
          nightModeBrightness3: 0.3,
          nightModeBrightness4: 1,
          monochromeMax: 0.25,
          monochromeExponent: 1
        },
        dw = new gv(),
        pw = ox("/_astro/noise.4311fcc9.jpg"),
        fw = ox("/_astro/noise_dark.d435da1e.jpg"),
        vw = Math.pow,
        mw = Math.sqrt,
        gw = Math.sin,
        _w = Math.cos,
        yw = Math.PI,
        bw = 1.70158,
        xw = 1.525 * bw,
        ww = bw + 1,
        Sw = (2 * yw) / 3,
        Mw = (2 * yw) / 4.5,
        Tw = 7.5625,
        kw = 2.75;
      function Ew(e) {
        return e;
      }
      function Cw(e) {
        return e * e;
      }
      function Dw(e) {
        return 1 - (1 - e) * (1 - e);
      }
      function Aw(e) {
        return e < 0.5 ? 2 * e * e : 1 - vw(-2 * e + 2, 2) / 2;
      }
      function Pw(e) {
        return e * e * e;
      }
      function Lw(e) {
        return 1 - vw(1 - e, 3);
      }
      function Rw(e) {
        return e < 0.5 ? 4 * e * e * e : 1 - vw(-2 * e + 2, 3) / 2;
      }
      function Iw(e) {
        return e * e * e * e;
      }
      function Ow(e) {
        return 1 - vw(1 - e, 4);
      }
      function Nw(e) {
        return e < 0.5 ? 8 * e * e * e * e : 1 - vw(-2 * e + 2, 4) / 2;
      }
      function Fw(e) {
        return e * e * e * e * e;
      }
      function Uw(e) {
        return 1 - vw(1 - e, 5);
      }
      function Bw(e) {
        return e < 0.5 ? 16 * e * e * e * e * e : 1 - vw(-2 * e + 2, 5) / 2;
      }
      function zw(e) {
        return e < 1 / kw
          ? Tw * e * e
          : e < 2 / kw
          ? Tw * (e -= 1.5 / kw) * e + 0.75
          : e < 2.5 / kw
          ? Tw * (e -= 2.25 / kw) * e + 0.9375
          : Tw * (e -= 2.625 / kw) * e + 0.984375;
      }
      var Vw,
        Hw = {
          linear: Ew,
          none: Ew,
          "sine.in": function (e) {
            return 1 - _w((e * yw) / 2);
          },
          "sine.out": function (e) {
            return gw((e * yw) / 2);
          },
          "sine.inOut": function (e) {
            return -(_w(yw * e) - 1) / 2;
          },
          "quad.in": Cw,
          "quad.out": Dw,
          "quad.inOut": Aw,
          "power1.in": Cw,
          "power1.out": Dw,
          "power1.inOut": Aw,
          "cubic.in": Pw,
          "cubic.out": Lw,
          "cubic.inOut": Rw,
          "power2.in": Pw,
          "power2.out": Lw,
          "power2.inOut": Rw,
          "quart.in": Iw,
          "quart.out": Ow,
          "quart.inOut": Nw,
          "power3.in": Iw,
          "power3.out": Ow,
          "power3.inOut": Nw,
          "quint.in": Fw,
          "quint.out": Uw,
          "quint.inOut": Bw,
          "power4.in": Fw,
          "power4.out": Uw,
          "power4.inOut": Bw,
          "expo.in": function (e) {
            return 0 === e ? 0 : vw(2, 10 * e - 10);
          },
          "expo.out": function (e) {
            return 1 === e ? 1 : 1 - vw(2, -10 * e);
          },
          "expo.inOut": function (e) {
            return 0 === e
              ? 0
              : 1 === e
              ? 1
              : e < 0.5
              ? vw(2, 20 * e - 10) / 2
              : (2 - vw(2, -20 * e + 10)) / 2;
          },
          "circ.in": function (e) {
            return 1 - mw(1 - vw(e, 2));
          },
          "circ.out": function (e) {
            return mw(1 - vw(e - 1, 2));
          },
          "circ.inOut": function (e) {
            return e < 0.5
              ? (1 - mw(1 - vw(2 * e, 2))) / 2
              : (mw(1 - vw(-2 * e + 2, 2)) + 1) / 2;
          },
          "back.in": function (e) {
            return ww * e * e * e - bw * e * e;
          },
          "back.out": function (e) {
            return 1 + ww * vw(e - 1, 3) + bw * vw(e - 1, 2);
          },
          "back.inOut": function (e) {
            return e < 0.5
              ? (vw(2 * e, 2) * (2 * (xw + 1) * e - xw)) / 2
              : (vw(2 * e - 2, 2) * ((xw + 1) * (2 * e - 2) + xw) + 2) / 2;
          },
          "elastic.in": function (e) {
            return 0 === e
              ? 0
              : 1 === e
              ? 1
              : -vw(2, 10 * e - 10) * gw((10 * e - 10.75) * Sw);
          },
          "elastic.out": function (e) {
            return 0 === e
              ? 0
              : 1 === e
              ? 1
              : vw(2, -10 * e) * gw((10 * e - 0.75) * Sw) + 1;
          },
          "elastic.inOut": function (e) {
            return 0 === e
              ? 0
              : 1 === e
              ? 1
              : e < 0.5
              ? (-vw(2, 20 * e - 10) * gw((20 * e - 11.125) * Mw)) / 2
              : (vw(2, -20 * e + 10) * gw((20 * e - 11.125) * Mw)) / 2 + 1;
          },
          "bounce.in": function (e) {
            return 1 - zw(1 - e);
          },
          "bounce.out": zw,
          "bounce.inOut": function (e) {
            return e < 0.5 ? (1 - zw(1 - 2 * e)) / 2 : (1 + zw(2 * e - 1)) / 2;
          }
        },
        Gw = {
          src: "/_astro/background_night.59ea5718.jpg",
          width: 1600,
          height: 964,
          format: "jpg"
        },
        Ww = {
          src: "/_astro/spark.1cd623da.png",
          width: 146,
          height: 46,
          format: "png"
        },
        jw = {
          src: "/_astro/headlight.0fde656a.png",
          width: 1187,
          height: 744,
          format: "png"
        },
        qw = {
          src: "/_astro/taillight.bbbec3c9.png",
          width: 1240,
          height: 488,
          format: "png"
        },
        Kw =
          ((Vw = new ff(2018931)),
          new ff(
            Math.pow(Vw.r, 2.2),
            Math.pow(Vw.g, 2.2),
            Math.pow(Vw.b, 2.2)
          )),
        Xw = ["Kv", "Intro", "Service", "About", "News", "Footer"];
      function Yw(e) {
        return (
          (function (e) {
            if (Array.isArray(e)) return Zw(e);
          })(e) ||
          (function (e) {
            if (
              ("undefined" != typeof Symbol && null != e[Symbol.iterator]) ||
              null != e["@@iterator"]
            )
              return Array.from(e);
          })(e) ||
          (function (e, t) {
            if (e) {
              if ("string" == typeof e) return Zw(e, t);
              var n = {}.toString.call(e).slice(8, -1);
              return (
                "Object" === n && e.constructor && (n = e.constructor.name),
                "Map" === n || "Set" === n
                  ? Array.from(e)
                  : "Arguments" === n ||
                    /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
                  ? Zw(e, t)
                  : void 0
              );
            }
          })(e) ||
          (function () {
            throw new TypeError(
              "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
            );
          })()
        );
      }
      function Zw(e, t) {
        (null == t || t > e.length) && (t = e.length);
        for (var n = 0, i = Array(t); n < t; n++) i[n] = e[n];
        return i;
      }
      function Jw(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          (i.enumerable = i.enumerable || !1),
            (i.configurable = !0),
            "value" in i && (i.writable = !0),
            Object.defineProperty(e, Qw(i.key), i);
        }
      }
      function Qw(e) {
        var t = (function (e) {
          if ("object" != nS(e) || !e) return e;
          var t = e[Symbol.toPrimitive];
          if (void 0 !== t) {
            var n = t.call(e, "string");
            if ("object" != nS(n)) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e);
        return "symbol" == nS(t) ? t : t + "";
      }
      function $w() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return ($w = function () {
          return !!e;
        })();
      }
      function eS(e) {
        return (
          (eS = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          eS(e)
        );
      }
      function tS(e, t) {
        return (
          (tS = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          tS(e, t)
        );
      }
      function nS(e) {
        return (
          (nS =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          nS(e)
        );
      }
      function iS(e, t, n) {
        return (
          (t = (function (e) {
            var t = (function (e) {
              if ("object" != nS(e) || !e) return e;
              var t = e[Symbol.toPrimitive];
              if (void 0 !== t) {
                var n = t.call(e, "string");
                if ("object" != nS(n)) return n;
                throw new TypeError(
                  "@@toPrimitive must return a primitive value."
                );
              }
              return String(e);
            })(e);
            return "symbol" == nS(t) ? t : t + "";
          })(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      var rS,
        aS = {
          src: "/_astro/city_fukan.ca708e83.jpg",
          width: 2400,
          height: 670,
          format: "jpg"
        },
        oS = {
          src: "/_astro/b-body_shyanai_hantai.a4f2aca3.png",
          width: 1600,
          height: 964,
          format: "png"
        },
        sS = Ma.isSp ? "sp" : "pc",
        lS = {
          backgroundColor: new ff(8618653),
          backgroundColorNight: new ff(0),
          camera: {
            positionTransitionIn: {
              pc: new Kd(10, 1.8, 0.3),
              sp: new Kd(8.4, 1.8, 6.3)
            },
            position: { pc: new Kd(6.4, 1.8, 6.3), sp: new Kd(8.4, 1.8, 6.3) },
            positionTransitionOut: {
              pc: new Kd(6.4, 1.8, 0.3),
              sp: new Kd(8.4, 1.8, 6.3)
            },
            positionLowerPage: {
              pc: new Kd(9.4, 2.6, 6.3),
              sp: new Kd(9.4, 2.6, 6.3)
            },
            fovTransitionIn: 16,
            fov: 26,
            fovTransitionOut: 16,
            far: 100,
            lookAtTransitionIn: {
              pc: new Kd(72, -9.8, -180),
              sp: new Kd(60, -9.8, -150)
            },
            lookAt: { pc: new Kd(48, -9.8, -150), sp: new Kd(60, -9.8, -150) },
            lookAtTransitionOut: {
              pc: new Kd(72, -9.8, -150),
              sp: new Kd(60, -9.8, -150)
            },
            lookAtLowerPage: {
              pc: new Kd(40, -12, -150),
              sp: new Kd(60, -12, -150)
            },
            lookAtEnd: new Kd(18, -9.8, -150)
          },
          directionalLight: {
            color: new ff(1, 1, 1),
            intensity: 2,
            position: new Kd(0.35, 100, 10)
          },
          ambientLight: { color: new ff(1, 1, 1), intensity: 2 },
          streetBackground: {
            position: new Kd(8.2, 3, -16),
            rotation: new Rp(0, 0, 0),
            size: new Kd(12, 7, 1),
            textureRotation: 2.66,
            rotationCenter: new Md(0, 0),
            offset: new Md(-0.25, 0.1),
            scale: 1,
            spread: 0.2,
            darkness: 0.66,
            darknessNight: 0.23,
            fadePosition: 0.2,
            fadeRate: 1.5,
            opacity: 1,
            opacityNight: 0,
            speed: 0,
            color: new ff(0.55, 0.38, 0.31),
            colorNight: new ff(0.28, 0.12, 0.06)
          },
          street: {
            position: new Kd(0, 0, 0),
            rotation: new Rp(0, 6.45, 0),
            model: { position: new Kd(0, 10.4, 0), rotation: new Rp(0, 0, 0) }
          },
          car: {
            individual: [
              { position: new Kd(23.7, 0, -11.5), rotation: new Rp(0, 0, 0) },
              { position: new Kd(13.4, 0, -11.5), rotation: new Rp(0, 0, 0) },
              {
                position: new Kd(18.5, 0, -11.5),
                positionEnd: new Kd(Ma.isSp ? 10 : 5.2, 0, 0.4),
                rotation: new Rp(0, 0, 0),
                rotationEnd: new Rp(0, -1.4, 0)
              }
            ],
            scale: 1.2,
            speed: 0.01,
            headlight: {
              position: new Kd(0, 0, 4.5),
              scale: new Kd(1, 1, 1),
              opacity: 0.6
            },
            taillight: {
              position: new Kd(0, 0, -2.8),
              scale: new Kd(1, 1, 1),
              opacity: 0.8
            }
          },
          icon: {
            pivot: 0.5,
            charging: {
              position: new Kd(
                Ma.isSp ? 10.72 + 0.8 : 10.72,
                Ma.isSp ? 1.61 : 1.81,
                -11
              ),
              rotation: new Rp(0, -0.3, 0),
              scale: 0.0038,
              isAnimation: !0,
              currentTime: 0
            },
            charging2: {
              position: new Kd(14.48, 1.92, -11),
              rotation: new Rp(0, -0.3, 0),
              scale: 0.0038,
              isAnimation: !0,
              currentTime: 1.5
            }
          },
          spark: {
            speed: 1,
            interval: 20,
            positionY: 0,
            scale: new Md(0.1, 1),
            rotation: 0.5,
            darkness: 1,
            bloom: 0.5,
            opacity: 1
          },
          title: { position: new Kd(0, 38, 0) },
          speed: 0.01,
          stop: !1
        },
        uS = {
          maxblur: 2.4,
          maxblurNight: 0,
          blurFocus: 2,
          blurExponent: 2,
          blurCenter: new Md(0.13, 0.02),
          mNear: 0.1,
          mFar: 54,
          bokehNear: 0.16,
          bokehFarBack: 3.5,
          bokehFarFront: 3.5,
          brightness: 0.8,
          noiseProgress: 1,
          nightModeThreshold4: 0.52,
          monochromeMax: 0.4,
          uRay: [
            {
              center: new Md(0.41, Ma.isSp ? 1.5 : 1.3),
              rotation: 0.057,
              speed: 0.1,
              offset: 5,
              width: Ma.isSp ? 0.066 : 0.059,
              edge: 0.01,
              rayDistance: Ma.isSp ? 4.8 : 3.6,
              opacity: Ma.isSp ? 0.6 : 0.8
            },
            {
              center: new Md(0.53, Ma.isSp ? 1.5 : 1.3),
              rotation: 0.057,
              speed: 0.5,
              offset: 0.023,
              width: 0.037,
              edge: 0.042,
              rayDistance: Ma.isSp ? 6.83 : 5,
              opacity: 0.4
            },
            {
              center: new Md(-0.54, Ma.isSp ? 1.5 : 1.3),
              rotation: 0.059,
              speed: 0.2,
              offset: 0,
              width: 0.02,
              edge: 0.01,
              rayDistance: 3.6,
              opacity: 0.67
            }
          ]
        },
        cS = (function (e) {
          function t() {
            var e;
            !(function (e, t) {
              if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function");
            })(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return (
              iS(
                (e = (function (e, t, n) {
                  return (
                    (t = eS(t)),
                    (function (e, t) {
                      if (t && ("object" == nS(t) || "function" == typeof t))
                        return t;
                      if (void 0 !== t)
                        throw new TypeError(
                          "Derived constructors may only return object or undefined"
                        );
                      return (function (e) {
                        if (void 0 === e)
                          throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                          );
                        return e;
                      })(e);
                    })(
                      e,
                      $w()
                        ? Reflect.construct(t, n || [], eS(e).constructor)
                        : t.apply(e, n)
                    )
                  );
                })(this, t, [].concat(i))),
                "scene",
                new sb()
              ),
              iS(e, "sceneCar", new sb()),
              iS(e, "sceneSky", new sb()),
              iS(e, "sceneText", new sb()),
              iS(e, "scene2D", new sb()),
              iS(e, "camera", void 0),
              iS(e, "camera2D", void 0),
              iS(e, "lookAt", void 0),
              iS(e, "cameraPosition", void 0),
              iS(e, "folder", void 0),
              iS(e, "street", new Bg()),
              iS(e, "cars", []),
              iS(e, "mainCar", void 0),
              iS(e, "postprocessing", { composer: ab, bokeh: uw }),
              iS(e, "carMixer", void 0),
              iS(e, "uniformsIcon", {}),
              iS(e, "meshIcon", {}),
              iS(e, "icons", []),
              iS(e, "sparks", []),
              iS(e, "uniformsSparks", []),
              iS(e, "isRunTransition", !1),
              iS(e, "isRunTransitionNext", !1),
              iS(e, "isRunText", !1),
              iS(e, "isRunCar", !1),
              iS(e, "isTurnOnLight", !1),
              iS(e, "isRunAbout", !1),
              iS(e, "isLowerPage", !1),
              iS(e, "isTransitionedNext", !1),
              e
            );
          }
          return (
            (function (e, t) {
              if ("function" != typeof t && null !== t)
                throw new TypeError(
                  "Super expression must either be null or a function"
                );
              (e.prototype = Object.create(t && t.prototype, {
                constructor: { value: e, writable: !0, configurable: !0 }
              })),
                Object.defineProperty(e, "prototype", { writable: !1 }),
                t && tS(e, t);
            })(t, e),
            (function (e, t) {
              return (
                t && Jw(e.prototype, t),
                Object.defineProperty(e, "prototype", { writable: !1 }),
                e
              );
            })(t, [
              {
                key: "onInit",
                value: function () {
                  (this.isLowerPage = this.option.isLowerPage),
                    this.option.isNight && (this.textures.Spark = sx(Ww, {})),
                    (this.textures.headlight = sx(jw, {})),
                    (this.textures.taillight = sx(qw, {})),
                    Yr.enablePane &&
                      ((this.folder = Yr.pane.addFolder({
                        title: "ServiceOpposite",
                        expanded: !1
                      })),
                      this.folder.addInput(lS, "speed", { min: 0 })),
                    this.initScene(),
                    this.initCamera(),
                    this.initLight(),
                    this.initStreetBackground(),
                    this.initStreet(),
                    this.initCar(),
                    this.isLowerPage || (this.initIcon(), this.initInsideCar()),
                    this.initPostprocessing();
                }
              },
              {
                key: "initScene",
                value: function () {
                  this.sceneSky.background =
                    lS[
                      this.option.isNight
                        ? "backgroundColorNight"
                        : "backgroundColor"
                    ];
                }
              },
              {
                key: "initCamera",
                value: function () {
                  var e = this;
                  if (
                    ((this.camera = new iv(
                      lS.camera.fov,
                      this.option.camera.aspect,
                      this.option.camera.near,
                      lS.camera.far
                    )),
                    (this.cameraPosition =
                      lS.camera[
                        this.isLowerPage ? "positionLowerPage" : "position"
                      ][sS].clone()),
                    this.camera.position.copy(this.cameraPosition),
                    (this.lookAt =
                      lS.camera[
                        this.isLowerPage ? "lookAtLowerPage" : "lookAt"
                      ][sS].clone()),
                    this.setLookAt(),
                    (this.camera2D = new vx()),
                    Yr.enablePane)
                  ) {
                    var t = this.folder.addFolder({
                      title: "camera",
                      expanded: !1
                    });
                    t
                      .addInput(this, "cameraPosition", { label: "position" })
                      .on("change", function () {
                        e.camera.position.copy(e.cameraPosition), e.setLookAt();
                      }),
                      t
                        .addInput(this.camera, "fov", { min: 5, max: 179 })
                        .on("change", function () {
                          e.camera.updateProjectionMatrix();
                        }),
                      t
                        .addInput(this.camera, "far", { min: 0 })
                        .on("change", function () {
                          e.camera.updateProjectionMatrix();
                        }),
                      t.addInput(this, "lookAt").on("change", function () {
                        e.setLookAt();
                      });
                  }
                }
              },
              {
                key: "setLookAt",
                value: function () {
                  var e = this.lookAt
                    .clone()
                    .add(new Kd(0, this.cameraPosition.y));
                  this.camera.lookAt(e);
                }
              },
              {
                key: "initLight",
                value: function () {
                  var e = new Ay(
                    lS.directionalLight.color,
                    lS.directionalLight.intensity
                  );
                  e.position.copy(lS.directionalLight.position),
                    this.scene.add(e),
                    this.sceneCar.add(e.clone());
                  var t = new gy(16777215, 16777215, 1);
                  t.position.set(0, 50, 0),
                    this.scene.add(t),
                    this.sceneCar.add(t.clone());
                }
              },
              {
                key: "initStreetBackground",
                value: function () {
                  var e = this,
                    t = this.option.isNight ? Gw : aS,
                    n = ux({
                      uTexture: (this.textures.StreetBackground = sx(t, {})),
                      uResolutionObject: new Md(
                        lS.streetBackground.size.x,
                        lS.streetBackground.size.y
                      ),
                      uResolutionImage: new Md(t.width, t.height),
                      uRotation: lS.streetBackground.textureRotation,
                      uRotationCenter: lS.streetBackground.rotationCenter,
                      uOffset: lS.streetBackground.offset,
                      uTime: 0,
                      uSpread: lS.streetBackground.spread,
                      uScale: lS.streetBackground.scale,
                      uDarkness:
                        lS.streetBackground[
                          this.option.isNight ? "darknessNight" : "darkness"
                        ],
                      uFadePosition: lS.streetBackground.fadePosition,
                      uFadeRate: lS.streetBackground.fadeRate,
                      uOpacity:
                        lS.streetBackground[
                          this.option.isNight ? "opacityNight" : "opacity"
                        ],
                      uAlpha: 1,
                      uColor:
                        lS.streetBackground[
                          this.option.isNight ? "colorNight" : "color"
                        ],
                      uBackgroundColor: this.sceneSky.background
                    });
                  this.uniformsStreetBackground = n;
                  var i = (this.streetBackgroundMesh = new fx(
                    new gv(1, 1),
                    new U_({
                      uniforms: n,
                      vertexShader: ub,
                      fragmentShader:
                        "precision highp float;\n\nvarying vec2 vUv;\n\nuniform sampler2D uTexture;\nuniform vec2 uResolutionObject;\nuniform vec2 uResolutionImage;\nuniform vec2 uRotationCenter;\nuniform vec2 uOffset;\nuniform float uTime;\nuniform float uSpread;\nuniform float uScale;\nuniform float uDarkness;\nuniform float uRotation;\nuniform float uFadePosition;\nuniform float uFadeRate;\nuniform float uOpacity;\nuniform float uAlpha;\nuniform vec3 uColor;\nuniform vec3 uBackgroundColor;\n\nconst float PI = 3.1415926;\nconst float PI2 = 6.2831853;\n\nconst vec3 THEME_COLOR = vec3(30., 206., 115.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_1 = THEME_COLOR;\nconst vec3 NIGHT_MODE_COLOR_2 = vec3(207., 181., 31.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_3 = vec3(49., 31., 207.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_4 = vec3(207., 49., 31.) / 255.;\n\nvec2 fitCover(vec2 coord, vec2 inputResolution, vec2 outputResolution) {\n  vec2 ratio = vec2(\n    min((outputResolution.x / outputResolution.y) / (inputResolution.x / inputResolution.y), 1.0),\n    min((outputResolution.y / outputResolution.x) / (inputResolution.y / inputResolution.x), 1.0)\n  );\n  return coord * ratio + (1. - ratio) * 0.5;\n}\nvec2 getZoomedUv(vec2 uv, float zoom, vec2 origin) {\n  origin.x = -origin.x;\n  uv += origin;\n  float scale = 1. / zoom;\n  return uv * scale - 0.5 * (scale - 1.);\n}\nvec2 rotate(vec2 uv, float rad, vec2 offset) {\n  uv += offset;\n  uv -= 0.5;\n  uv *= mat2(cos(rad),sin(rad),-sin(rad),cos(rad));\n  uv += 0.5;\n  uv -= offset;\n  return uv;\n}\nvec2 repeatUv(vec2 uv) {\n  return fract(uv);\n}\n\n#pragma glslify: export(repeatUv)\nvec4 texture2DInnerRange(sampler2D t, vec2 uv) {\n  return (uv.x < 0. || uv.x > 1. || uv.y < 0. || uv.y > 1.) ? vec4(0.) : texture2D(t, uv);\n}\n\n#pragma glslify: export(texture2DInnerRange)\n\nvoid main() {\n  vec2 uv = vUv;\n\n  uv = rotate(uv, uRotation, uRotationCenter);\n\n  \n  uv.x *= 1. - sin(uv.y * PI) * uSpread;\n  uv.y += uTime;\n  \n\n  uv = getZoomedUv(uv, uScale, uOffset);\n  uv = fitCover(uv, uResolutionImage, uResolutionObject);\n  uv = repeatUv(uv);\n\n  vec4 color = texture2DInnerRange(uTexture, uv);\n\n  \n\n  float opacity = mix(1., uOpacity, smoothstep(0., 1., distance(color.rgb, NIGHT_MODE_COLOR_4)));\n  color.rgb = mix(uBackgroundColor, color.rgb, opacity * min(max((1. - vUv.x * (vUv.y * 1.5)) * uFadeRate * 3., 0.), 1.));\n  color.rgb = mix(uColor, color.rgb, min(max(((1. - vUv.x / (vUv.y * 2.5)) * uFadeRate - uFadePosition), 0.), 1.));\n  color.rgb *= uDarkness;\n  color.a *= uAlpha;\n\n  gl_FragColor = color;\n  \n}"
                    })
                  ));
                  if (
                    (i.position.copy(lS.streetBackground.position),
                    i.rotation.copy(lS.streetBackground.rotation),
                    i.scale.set(
                      lS.streetBackground.size.x,
                      lS.streetBackground.size.y,
                      1
                    ),
                    this.sceneSky.add(i),
                    Yr.enablePane)
                  ) {
                    var r = this.folder.addFolder({
                      title: "",
                      expanded: !1
                    });
                    r.addInput(i, "visible"),
                      r.addInput(i, "position"),
                      r.addInput(i, "rotation"),
                      r
                        .addInput(i, "scale", {
                          label: "",
                          x: { min: 0 },
                          y: { min: 0 },
                          z: { min: 0 }
                        })
                        .on("change", function () {
                          e.uniformsStreetBackground.uResolutionObject.value.set(
                            i.scale.x,
                            i.scale.y
                          );
                        }),
                      r.addInput(
                        this.uniformsStreetBackground.uScale,
                        "value",
                        { label: "scale", min: 0 }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uSpread,
                        "value",
                        { label: "", min: 0, max: 10 }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uRotation,
                        "value",
                        { label: "", min: 0, max: Math.PI }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uRotationCenter,
                        "value",
                        { label: "" }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uOffset,
                        "value",
                        { label: "" }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uDarkness,
                        "value",
                        { label: "darkness" }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uFadePosition,
                        "value",
                        { label: " Position", min: 0 }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uFadeRate,
                        "value",
                        { label: " Rate", min: 0 }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uOpacity,
                        "value",
                        { label: "opacity", min: 0, max: 1 }
                      ),
                      r.addInput(
                        this.uniformsStreetBackground.uColor,
                        "value",
                        {
                          label: "",
                          color: { type: "float" },
                          picker: "inline",
                          expanded: !1
                        }
                      );
                  }
                }
              },
              {
                key: "initStreet",
                value: function () {
                  var e,
                    t,
                    n = this;
                  Yr.enablePane &&
                    (e = this.folder.addFolder({ title: "", expanded: !1 })),
                    this.street.position.copy(lS.street.position),
                    this.street.rotation.copy(lS.street.rotation),
                    this.scene.add(this.street),
                    this.option.isNight && (t = this.textures.Spark),
                    lx(
                      this.option.isNight
                        ? "/gl/night/optimize/colony_juden_v6_line.glb"
                        : "/gl/optimize/colony_juden_v6.glb",
                      {
                        onLoad: function (i, r) {
                          var a = r;
                          if (
                            ((a.name = "glTF"),
                            n.option.isNight &&
                              a.traverse(function (e) {
                                if (
                                  e.isMesh &&
                                  e.name.startsWith("spark_") &&
                                  "spark_01059" !== e.name &&
                                  "spark_01060" !== e.name &&
                                  "spark_01061" !== e.name &&
                                  "spark_01062" !== e.name
                                ) {
                                  var i = ux({
                                      uTexture: t,
                                      uSpeed: lS.spark.speed,
                                      uInterval: lS.spark.interval,
                                      uPositionY: lS.spark.positionY,
                                      uScale: lS.spark.scale,
                                      uRotation: lS.spark.rotation,
                                      uDarkness: lS.spark.darkness,
                                      uBloom: lS.spark.bloom,
                                      uOpacity: lS.spark.opacity,
                                      uOffset: Math.random(),
                                      uTime: 0
                                    }),
                                    r = i;
                                  n.uniformsSparks.push(r);
                                  var a = new U_({
                                    uniforms: i,
                                    vertexShader: ub,
                                    fragmentShader:
                                      "precision highp float;\n\nuniform sampler2D uTexture;\nuniform float uTime;\nuniform float uInterval;\nuniform float uPositionY;\nuniform float uSpeed;\nuniform vec2 uScale;\nuniform float uRotation;\nuniform float uDarkness;\nuniform float uBloom;\nuniform float uOpacity;\nuniform float uOffset;\n\nvarying vec2 vUv;\n\nconst float PI = 3.1415926;\nconst float PI2 = 6.2831853;\nconst float GAMMA_FACTOR = 2.2;\n\nvec2 fitCover(vec2 coord, vec2 inputResolution, vec2 outputResolution) {\n  vec2 ratio = vec2(\n    min((outputResolution.x / outputResolution.y) / (inputResolution.x / inputResolution.y), 1.0),\n    min((outputResolution.y / outputResolution.x) / (inputResolution.y / inputResolution.x), 1.0)\n  );\n  return coord * ratio + (1. - ratio) * 0.5;\n}\nvec2 rotate(vec2 uv, float rad, vec2 offset) {\n  uv += offset;\n  uv -= 0.5;\n  uv *= mat2(cos(rad),sin(rad),-sin(rad),cos(rad));\n  uv += 0.5;\n  uv -= offset;\n  return uv;\n}\nvec4 texture2DInnerRange(sampler2D t, vec2 uv) {\n  return (uv.x < 0. || uv.x > 1. || uv.y < 0. || uv.y > 1.) ? vec4(0.) : texture2D(t, uv);\n}\n\n#pragma glslify: export(texture2DInnerRange)\nvec2 repeatUv(vec2 uv) {\n  return fract(uv);\n}\n\n#pragma glslify: export(repeatUv)\nvec3 GammaToLinear(vec3 color) {\n  return pow(color.rgb, vec3(GAMMA_FACTOR));\n}\n\nconst vec2 resolutionImage = vec2(146., 46.);\n\nvoid main() {\n  vec2 uv = vUv;\n  uv.x = 1. - uv.x;\n  uv = rotate(uv, PI * uRotation, vec2(0.));\n  uv /= uScale;\n  \n  uv.x += uOffset * uInterval;\n  uv.y += uPositionY;\n  uv.x -= uTime * uSpeed * mix(0.8, 1.2, uOffset);\n  \n  uv.x = mod(uv.x, uInterval);\n  \n\n  \n\n  vec4 color = texture2DInnerRange(uTexture, uv);\n\n  \n  color.rgb = GammaToLinear(color.rgb);\n\n  color.rgb /= uDarkness;\n\n  gl_FragColor = color;\n  \n  gl_FragColor.a = pow(gl_FragColor.a, 1. / uBloom) * uOpacity;\n  \n  \n  \n}",
                                    side: 2,
                                    transparent: !0,
                                    depthTest: !1,
                                    depthWrite: !1
                                  });
                                  (e.material = a), n.sparks.push(e);
                                }
                              }),
                            a.position.copy(lS.street.model.position),
                            a.rotation.copy(lS.street.model.rotation),
                            (n.streetModel = a),
                            Yr.enablePane &&
                              (e.addInput(n.street, "visible"),
                              e.addInput(n.street, "position"),
                              e.addInput(n.street, "rotation"),
                              e.addInput(a, "position", {
                                label: "model position"
                              }),
                              e.addInput(a, "rotation", {
                                label: "model rotation"
                              }),
                              n.option.isNight))
                          ) {
                            var o = e.addFolder({ title: "" });
                            o
                              .addInput(lS.spark, "speed", { min: 0, max: 10 })
                              .on("change", function (e) {
                                var t = e.value;
                                n.uniformsSparks.forEach(function (e) {
                                  e.uSpeed.value = t;
                                });
                              }),
                              o
                                .addInput(lS.spark, "interval", {
                                  min: 0,
                                  max: 20
                                })
                                .on("change", function (e) {
                                  var t = e.value;
                                  n.uniformsSparks.forEach(function (e) {
                                    e.uInterval.value = t;
                                  });
                                }),
                              o
                                .addInput(lS.spark, "positionY", {
                                  min: -5,
                                  max: 5
                                })
                                .on("change", function (e) {
                                  var t = e.value;
                                  n.uniformsSparks.forEach(function (e) {
                                    e.uPositionY.value = t;
                                  });
                                }),
                              o
                                .addInput(lS.spark, "scale", {
                                  x: { min: 0, max: 2, step: 0.01 },
                                  y: { min: 0, max: 2, step: 0.01 }
                                })
                                .on("change", function (e) {
                                  var t = e.value;
                                  n.uniformsSparks.forEach(function (e) {
                                    e.uScale.value = t;
                                  });
                                }),
                              o
                                .addInput(lS.spark, "rotation", {
                                  min: 0,
                                  max: 2
                                })
                                .on("change", function (e) {
                                  var t = e.value;
                                  n.uniformsSparks.forEach(function (e) {
                                    e.uRotation.value = t;
                                  });
                                }),
                              o
                                .addInput(lS.spark, "darkness", {
                                  min: 0,
                                  max: 1
                                })
                                .on("change", function (e) {
                                  var t = e.value;
                                  n.uniformsSparks.forEach(function (e) {
                                    e.uDarkness.value = t;
                                  });
                                }),
                              o
                                .addInput(lS.spark, "bloom", { min: 0, max: 2 })
                                .on("change", function (e) {
                                  var t = e.value;
                                  n.uniformsSparks.forEach(function (e) {
                                    e.uBloom.value = t;
                                  });
                                }),
                              o
                                .addInput(lS.spark, "opacity", {
                                  min: 0,
                                  max: 1
                                })
                                .on("change", function (e) {
                                  var t = e.value;
                                  n.uniformsSparks.forEach(function (e) {
                                    e.uOpacity.value = t;
                                  });
                                });
                          }
                        },
                        isAddToLoadingWait: this.isLowerPage
                      }
                    );
                }
              },
              {
                key: "initCar",
                value: function () {
                  this.sceneCar.position.copy(lS.street.position),
                    this.sceneCar.rotation.copy(lS.street.rotation),
                    this.initCarA();
                }
              },
              {
                key: "initCarA",
                value: function () {
                  var e,
                    t = this;
                  Yr.enablePane &&
                    (e = this.folder.addFolder({
                      title: "car A",
                      expanded: !1
                    }));
                  var n = this.textures.headlight,
                    i = this.textures.taillight;
                  lx("/gl/car_v7_out3.glb", {
                    onLoad: function (r, a) {
                      var o = a,
                        s = r.animations;
                      (o.name = "glTF"), Yr.enablePane;
                      var l = new fx(
                        new gv(2, 5),
                        new U_({
                          vertexShader: ub,
                          fragmentShader:
                            "precision highp float;\n\nvarying vec2 vUv;\n\nvoid main() {\n  float color = min(max(1. - pow((length((vUv - 0.5) / vec2(1.2, 1.)) - 0.1) * 2., 10.), 0.), 0.75);\n\n  gl_FragColor = vec4(vec3(0.), color);\n}",
                          transparent: !0
                        })
                      );
                      (l.name = "shadow"), l.rotateX(-0.5 * Math.PI);
                      var u = new Bg();
                      u.scale.setScalar(lS.car.scale),
                        u.add(l, o),
                        lS.car.individual.forEach(function (r, a) {
                          if (t.isSp && 0 === a) t.cars.push(null);
                          else {
                            var o,
                              l = 2 === a,
                              c = u.clone();
                            if (
                              (c.position.copy(r.position),
                              c.rotation.copy(r.rotation),
                              1 === a &&
                                c.children.forEach(function (e) {
                                  "shadow" === e.name &&
                                    ((e.material = e.material.clone()),
                                    (e.material.depthTest = !1));
                                }),
                              t.cars.push(c),
                              l && (t.mainCar = c),
                              Yr.enablePane &&
                                ((o = e.addFolder({
                                  title: ""
                                    .concat(a + 1)
                                    .concat(l ? "" : "")
                                })).addInput(c, "visible"),
                                o.addInput(c, "position", {
                                  x: { step: 0.1 },
                                  y: { step: 0.1 },
                                  z: { step: 0.1 }
                                }),
                                o.addInput(c, "rotation", {
                                  x: { step: 0.1 },
                                  y: { step: 0.1 },
                                  z: { step: 0.1 }
                                })),
                              t.option.isNight &&
                                c.traverse(function (e) {
                                  if (e.isMesh)
                                    switch (
                                      ((e.material = e.material.clone()),
                                      e.material.name)
                                    ) {
                                      case "lamp":
                                      case "emission":
                                        (e.material.roughness = 1),
                                          (e.material.metalness = 0),
                                          e.material.emissive.setRGB(0, 0, 0);
                                    }
                                }),
                              l)
                            ) {
                              if (t.option.isNight) {
                                var h = ux({
                                    uTexture: n,
                                    uOpacity: lS.car.headlight.opacity
                                  }),
                                  d = new fx(
                                    new gv(4, 4),
                                    new U_({
                                      uniforms: h,
                                      vertexShader: ub,
                                      fragmentShader:
                                        "precision highp float;\n\nuniform sampler2D uTexture;\nuniform float uOpacity;\n\nvarying vec2 vUv;\n\nconst float GAMMA_FACTOR = 2.2;\nconst vec3 THEME_COLOR = vec3(30., 206., 115.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_1 = THEME_COLOR;\nconst vec3 NIGHT_MODE_COLOR_2 = vec3(207., 181., 31.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_3 = vec3(49., 31., 207.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_4 = vec3(207., 49., 31.) / 255.;\n\nvec3 LinearToGamma(vec3 color) {\n  return pow(color.rgb, vec3(1.0 / GAMMA_FACTOR));\n}\nvec3 GammaToLinear(vec3 color) {\n  return pow(color.rgb, vec3(GAMMA_FACTOR));\n}\n\nconst vec2 uResolutionObject = vec2(4., 4.);\n\nvoid main() {\n  vec2 uv = vUv;\n  uv.y = 1. - uv.y;\n  \n  \n  \n  \n\n  vec4 color = texture2D(uTexture, uv);\n  \n  \n  \n  color.rgb = GammaToLinear(color.rgb);\n  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  color.a *= uOpacity;\n\n  gl_FragColor = color;\n  \n  \n  \n}",
                                      transparent: !0,
                                      depthTest: !1
                                    })
                                  );
                                if (
                                  (d.rotateX(-0.5 * Math.PI),
                                  d.position.copy(lS.car.headlight.position),
                                  d.scale.copy(lS.car.headlight.scale),
                                  (d.visible = !1),
                                  c.add(d),
                                  (t.headlightMesh = d),
                                  Yr.enablePane)
                                ) {
                                  var p = o.addFolder({
                                    title: ""
                                  });
                                  p.addInput(d, "position", {
                                    x: { step: 0.1 },
                                    y: { step: 0.1 },
                                    z: { step: 0.1 }
                                  }),
                                    p.addInput(d, "rotation"),
                                    p.addInput(d, "scale", {
                                      x: { step: 0.1 },
                                      y: { step: 0.1 },
                                      z: { step: 0.1 }
                                    }),
                                    p.addInput(h.uOpacity, "value", {
                                      label: "opacity",
                                      min: 0,
                                      max: 1
                                    });
                                }
                                var f = ux({
                                    uTexture: i,
                                    uOpacity: lS.car.taillight.opacity
                                  }),
                                  v = new fx(
                                    new gv(2, 2),
                                    new U_({
                                      uniforms: f,
                                      vertexShader: ub,
                                      fragmentShader:
                                        "precision highp float;\n\nuniform sampler2D uTexture;\nuniform float uOpacity;\n\nvarying vec2 vUv;\n\nconst float GAMMA_FACTOR = 2.2;\nconst vec3 THEME_COLOR = vec3(30., 206., 115.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_1 = THEME_COLOR;\nconst vec3 NIGHT_MODE_COLOR_2 = vec3(207., 181., 31.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_3 = vec3(49., 31., 207.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_4 = vec3(207., 49., 31.) / 255.;\n\nvec3 GammaToLinear(vec3 color) {\n  return pow(color.rgb, vec3(GAMMA_FACTOR));\n}\n\nvoid main() {\n  vec2 uv = vUv;\n  uv.y = 1. - uv.y;\n\n  vec4 color = texture2D(uTexture, uv);\n  \n  color.rgb = GammaToLinear(color.rgb);\n\n  color.a *= uOpacity;\n\n  gl_FragColor = color;\n  \n  \n  \n}",
                                      transparent: !0
                                    })
                                  );
                                if (
                                  (v.rotateX(-0.5 * Math.PI),
                                  v.position.copy(lS.car.taillight.position),
                                  v.scale.copy(lS.car.taillight.scale),
                                  (v.visible = !1),
                                  c.add(v),
                                  (t.taillightMesh = v),
                                  Yr.enablePane)
                                ) {
                                  var m = e.addFolder({
                                    title: ""
                                  });
                                  m.addInput(v, "position", {
                                    x: { step: 0.1 },
                                    y: { step: 0.1 },
                                    z: { step: 0.1 }
                                  }),
                                    m.addInput(v, "rotation"),
                                    m.addInput(v, "scale", {
                                      x: { step: 0.1 },
                                      y: { step: 0.1 },
                                      z: { step: 0.1 }
                                    }),
                                    m.addInput(f.uOpacity, "value", {
                                      label: "opacity",
                                      min: 0,
                                      max: 1
                                    });
                                }
                              }
                              var g = new Zy(c);
                              (t.carMixer = g),
                                s.forEach(function (e) {
                                  g.clipAction(e).play();
                                });
                            }
                          }
                        });
                    },
                    isAddToLoadingWait: this.isLowerPage
                  });
                }
              },
              {
                key: "turnOnLight",
                value: function () {
                  this.isTurnOnLight ||
                    ((this.isTurnOnLight = !0),
                    this.mainCar.traverse(function (e) {
                      if (e.isMesh)
                        switch (e.material.name) {
                          case "lamp":
                          case "emission":
                            e.material.emissive.copy(
                              new ff(
                                Math.pow(Kw.r, 5.6),
                                Math.pow(Kw.g, 5.6),
                                Math.pow(Kw.b, 5.6)
                              )
                            );
                        }
                    }),
                    (this.headlightMesh.visible = !0),
                    (this.taillightMesh.visible = !0));
                }
              },
              {
                key: "turnOffLight",
                value: function () {
                  this.isTurnOnLight &&
                    ((this.isTurnOnLight = !1),
                    this.mainCar.traverse(function (e) {
                      if (e.isMesh)
                        switch (e.material.name) {
                          case "lamp":
                          case "emission":
                            e.material.emissive.setRGB(0, 0, 0);
                        }
                    }),
                    (this.headlightMesh.visible = !1),
                    (this.taillightMesh.visible = !1));
                }
              },
              {
                key: "initIcon",
                value: function () {
                  this.initIconMesh(
                    "charging2",
                    ha || ua
                      ? "/assets/video/top/battery_soden.mp4"
                      : [
                          "/assets/video/top/battery_soden.mov",
                          "/assets/video/top/battery_soden.webm"
                        ],
                    null,
                    ""
                  ),
                    this.isSp ||
                      this.initIconMesh(
                        "charging",
                        ha || ua
                          ? "/assets/video/top/battery_soden.mp4"
                          : [
                              "/assets/video/top/battery_soden.mov",
                              "/assets/video/top/battery_soden.webm"
                            ],
                        null,
                        ""
                      );
                }
              },
              {
                key: "initIconMesh",
                value: function (e, t, n, i) {
                  var r,
                    a,
                    o,
                    s,
                    l = lS.icon[e];
                  Array.isArray(t) ||
                  ("string" == typeof t &&
                    (t.endsWith(".webm") ||
                      t.endsWith(".mov") ||
                      t.endsWith(".mp4")))
                    ? ((a = new Nl(t, { preload: !0 })).load(),
                      (r = new F_(a.el)),
                      (o = 100),
                      (s = 200),
                      (a.el.currentTime = l.currentTime))
                    : ((r = this.textures.Icon = sx(t, {})),
                      (o = t.width),
                      (s = t.height));
                  var u = ux({ uTexture: r, uProgress: 0 });
                  this.uniformsIcon[e] = u;
                  var c = (this.meshIcon[e] = new fx(
                    new gv(1, 1),
                    new U_({
                      uniforms: u,
                      vertexShader: ub,
                      fragmentShader:
                        a && (ha || ua)
                          ? "precision highp float;\n\nvarying vec2 vUv;\n\nuniform sampler2D uTexture;\nuniform float uProgress;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  vec4 color = texture2D(uTexture, uv);\n\n  color.a *= mix(\n    \n  0.,\n    \n  1.,\n    \n  smoothstep(0., 1., distance(color.rgb, vec3(0.))));\n\n  color.a *= mix(\n    \n  0.2,\n    \n  1.,\n    \n  smoothstep(0., 1., distance(color.rgb, vec3(200. / 255.))));\n\n  color.a *= uProgress;\n\n  gl_FragColor = color;\n  \n  \n}"
                          : "precision highp float;\n\nvarying vec2 vUv;\n\nuniform sampler2D uTexture;\nuniform float uProgress;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  vec4 color = texture2D(uTexture, uv);\n  color.a *= uProgress;\n\n  gl_FragColor = color;\n  \n}",
                      transparent: !0,
                      side: 2
                    })
                  ));
                  c.position.set(0, lS.icon.pivot, 0);
                  var h = new Bg();
                  h.add(c),
                    (h.visible = !1),
                    h.position.copy(l.position),
                    h.rotation.copy(l.rotation),
                    h.scale.set(o * l.scale, s * l.scale, 1),
                    this.sceneText.add(h),
                    (h.name = e),
                    this.icons.push({ pivot: h, video: a, param: l });
                }
              },
              {
                key: "showIcon",
                value: function (e) {
                  var t = e.pivot,
                    n = e.video,
                    i = e.param,
                    r =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 2;
                  (n.el.currentTime = 0 === r ? n.el.duration : i.currentTime),
                    (t.visible = !0);
                  var a = t.name,
                    o = "stress" === a,
                    s = i.delay;
                  gsap.set(t.position, { y: i.position.y }),
                    Uo({ delay: s }, "ServiceOpposite-icon-".concat(a))
                      .add([
                        gsap.from(t.position, {
                          y: "-=0.5",
                          duration: r,
                          ease: "elastic.out"
                        }),
                        gsap.from(t.rotation, {
                          y: "".concat(o ? "+" : "-", "=").concat(Math.PI),
                          duration: r,
                          ease: "quad.out"
                        }),
                        gsap.fromTo(
                          this.uniformsIcon[a].uProgress,
                          { value: 0 },
                          { value: 1, duration: r, ease: "expo.out" }
                        )
                      ])
                      .call(
                        function () {
                          n && n.play();
                        },
                        void 0,
                        "-=0.8"
                      );
                }
              },
              {
                key: "hideIcon",
                value: function (e) {
                  var t = e.pivot,
                    n = e.video,
                    i = (e.param, t.name);
                  n.pause(),
                    (n.el.currentTime = n.el.duration),
                    Oo(this.uniformsIcon[i].uProgress, {
                      value: 0,
                      duration: 1,
                      ease: "power3.out"
                    });
                }
              },
              {
                key: "showServiceOppositeIcon",
                value: function () {
                  this.showIcon(this.icons[0]),
                    this.icons[1] && this.showIcon(this.icons[1]);
                }
              },
              {
                key: "hideServiceOppositeIcon",
                value: function () {
                  this.icons.forEach(function (e, t) {
                    e.pivot.visible = !1;
                  });
                }
              },
              {
                key: "initInsideCar",
                value: function () {
                  var e = ux({
                      uTexture: (this.textures.InsideCar = sx(oS, {})),
                      noiseMin: 0.5,
                      noiseMax: 0.75
                    }),
                    t = (this.meshInsideCar = new fx(
                      new gv(1, 1),
                      new U_({
                        uniforms: e,
                        vertexShader: ub,
                        fragmentShader:
                          "precision highp float;\n\nvarying vec2 vUv;\n\nuniform sampler2D uTexture;\n\nvoid main() {\n  vec2 uv = vUv;\n\n  \n  \n\n  \n\n  vec4 color = texture2D(uTexture, uv);\n  \n  \n\n  \n  \n  gl_FragColor = color;\n  \n}",
                        transparent: !0
                      })
                    ));
                  this.scene2D.add(t);
                }
              },
              {
                key: "initPostprocessing",
                value: function () {
                  var e = this.option,
                    t = (function (e) {
                      var t,
                        n,
                        i = e.pixelRatio,
                        r = e.camera,
                        a = e.folder,
                        o = e.transparent,
                        s = void 0 !== o && o,
                        l = e.isDirectionY,
                        u = void 0 !== l && l,
                        c = e.minNear,
                        h = void 0 === c ? 0 : c,
                        d = e.isNight,
                        p = void 0 !== d && d,
                        f = Ol(hw, e.effectController || {});
                      !p &&
                        (null === (t = e.effectController) || void 0 === t
                          ? void 0
                          : t.uRay) &&
                        (f.uRay = (function (e) {
                          return (
                            (function (e) {
                              if (Array.isArray(e)) return nw(e);
                            })(e) ||
                            (function (e) {
                              if (
                                ("undefined" != typeof Symbol &&
                                  null != e[Symbol.iterator]) ||
                                null != e["@@iterator"]
                              )
                                return Array.from(e);
                            })(e) ||
                            (function (e, t) {
                              if (e) {
                                if ("string" == typeof e) return nw(e, t);
                                var n = {}.toString.call(e).slice(8, -1);
                                return (
                                  "Object" === n &&
                                    e.constructor &&
                                    (n = e.constructor.name),
                                  "Map" === n || "Set" === n
                                    ? Array.from(e)
                                    : "Arguments" === n ||
                                      /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(
                                        n
                                      )
                                    ? nw(e, t)
                                    : void 0
                                );
                              }
                            })(e) ||
                            (function () {
                              throw new TypeError(
                                "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                              );
                            })()
                          );
                        })(
                          null === (n = e.effectController) || void 0 === n
                            ? void 0
                            : n.uRay.map(function (e) {
                                return Ol({}, e);
                              })
                        ));
                      var v = e.width * i,
                        m = e.height * i,
                        g = new Xg(),
                        _ = new vx(),
                        y = new Gd(v, m, { type: Bh }),
                        b = new Gd(v, m, { type: Bh }),
                        x = new Gd(v, m, { type: Bh }),
                        w = {
                          uniforms: {
                            hideNoise: f.hideNoise,
                            showDepth: f.showDepth,
                            showBokeh: f.showBokeh,
                            mNear: f.mNear,
                            mFar: f.mFar,
                            tColorBack: null,
                            tColor: null,
                            tDepth: null,
                            objectResolution: new Md(v, m),
                            tNoise: null,
                            tNoiseDark: null,
                            textureResolution: new Md(1600, 964),
                            noiseProgress: f.noiseProgress,
                            noiseDarkness: f.noiseDarkness,
                            maxblur: f[p ? "maxblurNight" : "maxblur"],
                            maxblurFull: f.maxblurFull,
                            blurFocus: f.blurFocus,
                            blurExponent: f.blurExponent,
                            blurCenter: f.blurCenter,
                            rShift: p ? 0 : f.rShift,
                            rShiftOpacity: p ? 0 : f.rShiftOpacity,
                            noiseMin: f.noiseMin,
                            noiseMax: f.noiseMax,
                            noiseGrayScale: f.noiseGrayScale,
                            bokehNear: f.bokehNear,
                            bokehFarBack: f.bokehFarBack,
                            bokehFarFront: f.bokehFarFront,
                            fogNear: f.fogNear,
                            fogFar: f.fogFar,
                            brightness: f[p ? "brightnessNight" : "brightness"],
                            whiteness: f.whiteness,
                            uRay: f.uRay,
                            time: f.time,
                            transparent: s,
                            opacity: f.opacity,
                            uIsNightMode: p,
                            uIsNightModeLogo: f.uIsNightModeLogo,
                            nightModeThreshold1: f.nightModeThreshold1,
                            nightModeThreshold2: f.nightModeThreshold2,
                            nightModeThreshold3: f.nightModeThreshold3,
                            nightModeThreshold4: f.nightModeThreshold4,
                            nightModeBrightness1: f.nightModeBrightness1,
                            nightModeBrightness2: f.nightModeBrightness2,
                            nightModeBrightness3: f.nightModeBrightness3,
                            nightModeBrightness4: f.nightModeBrightness4,
                            monochromeMax: f.monochromeMax,
                            monochromeExponent: f.monochromeExponent
                          },
                          vertexShader:
                            "varying vec2 vUv;\n  \n  void main () {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n  }",
                          fragmentShader:
                            "#define PI 3.141592653589793\n\nvarying vec2 vUv;\n\nuniform sampler2D tColorBack;\nuniform sampler2D tColor;\nuniform sampler2D tDepth;\nuniform vec2 objectResolution;\nuniform sampler2D tNoise;\nuniform sampler2D tNoiseDark;\nuniform vec2 textureResolution;\nuniform float noiseProgress;\nuniform float noiseDarkness;\n\nuniform bool hideNoise;\nuniform bool showDepth;\nuniform bool showBokeh;\n\n/*  */\nuniform float rShift;\nuniform float rShiftOpacity;\n\n/*  */\n\n/*  */\nuniform float noiseMin;\nuniform float noiseMax;\nuniform float noiseGrayScale;\n\n/* fog */\nuniform float fogNear;\nuniform float fogFar;\n\nuniform float brightness;\nuniform float whiteness;\n\n/*  */\nstruct Ray {\n  vec2 center;\n  float rotation;\n  float speed;\n  float offset;\n  float width;\n  float edge;\n  float rayDistance;\n  float opacity;\n};\nuniform Ray uRay[3];\n\n/* animation */\nuniform float time;\n\nuniform bool transparent;\nuniform float opacity;\n\nuniform float maxblur;\nuniform float maxblurFull;\nuniform float blurFocus;\nuniform float blurExponent;\nuniform vec2 blurCenter;\n\n/*  */\nuniform bool uIsNightMode;\nuniform bool uIsNightModeLogo;\n\nuniform float nightModeThreshold1;\nuniform float nightModeThreshold2;\nuniform float nightModeThreshold3;\nuniform float nightModeThreshold4;\nuniform float nightModeBrightness1;\nuniform float nightModeBrightness2;\nuniform float nightModeBrightness3;\nuniform float nightModeBrightness4;\nuniform float monochromeMax;\nuniform float monochromeExponent;\n\nconst float GAMMA_FACTOR = 2.2;\nconst vec3 THEME_COLOR = vec3(30., 206., 115.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_1 = THEME_COLOR;\nconst vec3 NIGHT_MODE_COLOR_2 = vec3(207., 181., 31.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_3 = vec3(49., 31., 207.) / 255.;\nconst vec3 NIGHT_MODE_COLOR_4 = vec3(207., 49., 31.) / 255.;\n\nhighp float random(vec2 co)\n{\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float dt= dot(co.xy ,vec2(a,b));\n  highp float sn= mod(dt,3.14);\n  return fract(sin(sn) * c);\n}\nvec2 fitContain(vec2 coord, vec2 inputResolution, vec2 outputResolution) {\n  vec2 ratio = vec2(\n    max((outputResolution.x / outputResolution.y) / (inputResolution.x / inputResolution.y), 1.0),\n    max((outputResolution.y / outputResolution.x) / (inputResolution.y / inputResolution.x), 1.0)\n  );\n  return coord * ratio + (1. - ratio) * 0.5;\n}\n\n#pragma glslify: export(fitContain)\nvec2 fitCover(vec2 coord, vec2 inputResolution, vec2 outputResolution) {\n  vec2 ratio = vec2(\n    min((outputResolution.x / outputResolution.y) / (inputResolution.x / inputResolution.y), 1.0),\n    min((outputResolution.y / outputResolution.x) / (inputResolution.y / inputResolution.x), 1.0)\n  );\n  return coord * ratio + (1. - ratio) * 0.5;\n}\nvec3 colorBurn(vec3 colorSrc, vec3 colorDist) {\n  return vec3(\n    (colorSrc.r == 0.) ? 0. : (1. - ((1. - colorDist.r) / colorSrc.r)),\n    (colorSrc.g == 0.) ? 0. : (1. - ((1. - colorDist.g) / colorSrc.g)),\n    (colorSrc.b == 0.) ? 0. : (1. - ((1. - colorDist.b) / colorSrc.b))\n  );\n}\nvec3 colorDodge(vec3 colorSrc, vec3 colorDist) {\n  return vec3(\n    (colorSrc.r == 1.) ? 1. : min(1., colorDist.r / (1. - colorSrc.r)),\n    (colorSrc.g == 1.) ? 1. : min(1., colorDist.g / (1. - colorSrc.g)),\n    (colorSrc.b == 1.) ? 1. : min(1., colorDist.b / (1. - colorSrc.b))\n  );\n}\nvec3 overlay(vec3 colorSrc, vec3 colorDist) {\n  return vec3(\n    (colorDist.r <= 0.5) ? (2. * colorSrc.r * colorDist.r) : (1. - 2. * (1. - colorDist.r) * (1. - colorSrc.r)),\n    (colorDist.g <= 0.5) ? (2. * colorSrc.g * colorDist.g) : (1. - 2. * (1. - colorDist.g) * (1. - colorSrc.g)),\n    (colorDist.b <= 0.5) ? (2. * colorSrc.b * colorDist.b) : (1. - 2. * (1. - colorDist.b) * (1. - colorSrc.b))\n  );\n}\n\nvec2 getUvPolar(vec2 uv) {\n  vec2 uvPolar = vec2(0.5) - uv;\n  float radius = length(uvPolar) * 2.;\n  float angle = atan(uvPolar.y, uvPolar.x);\n  return vec2(radius, angle / (PI * 2.));\n}\nfloat shapeRayGradation(vec2 uv, vec2 center, float rotation, float width, float edge, float rayDistance) {\n  uv -= center;\n  vec2 uvPolar = getUvPolar(uv);\n  uvPolar.y -= rotation;\n  float ray = smoothstep(0., edge, uvPolar.y) * smoothstep(edge * 2. + width, edge + width, uvPolar.y);\n  ray *= max(1. - uvPolar.x / rayDistance, 0.);\n  return ray;\n}\nfloat map(float num, float fromMin, float fromMax, float toMin, float toMax) {\n  return toMin + (num - fromMin) * (toMax - toMin) / (fromMax - fromMin);\n}\nfloat mapClamp(float num, float fromMin, float fromMax, float toMin, float toMax) {\n  return\n    num <= fromMin ? toMin\n    : num >= fromMax ? toMax\n    : toMin + (num - fromMin) * (toMax - toMin) / (fromMax - fromMin);\n}\n\n#define R_LUMINANCE 0.298912\n#define G_LUMINANCE 0.586611\n#define B_LUMINANCE 0.114478\n\nconst vec3 MONOCHROME_SCALE = vec3(R_LUMINANCE, G_LUMINANCE, B_LUMINANCE);\n\nvec3 monochrome(vec3 color) {\n  return vec3(dot(color, MONOCHROME_SCALE));\n}\n\nvec4 LinearToGamma4(vec4 color) {\n  return vec4(pow(color.rgb, vec3(1.0 / GAMMA_FACTOR)), color.w);\n}\n\nvec4 texture2Dgamma(sampler2D tex, vec2 uv) {\n  \n  return LinearToGamma4(texture2D(tex, uv));\n}\n\n/* fog */\nvec3 fog(vec3 color, vec3 colorBack, float depth) {\n  return mix(color, colorBack, mapClamp(depth, fogNear, fogFar, 0., 1.));\n}\n\n/* ray */\nvec3 tierRays(vec3 color, vec2 uv, float time, Ray ray) {\n  float t = (sin((time + ray.offset) * ray.speed) + 1.) * 0.5;\n  float r = shapeRayGradation(uv, ray.center, PI * ray.rotation, ray.width, ray.edge, ray.rayDistance * mix(0.8, 1., t));\n  return mix(color, vec3(1.), r * ray.opacity);\n}\n\n/* gaussian blur */\n\nconst int LOD = 2; \nconst int sLOD = 1 << LOD; \nconst float sigma = float(samples) * 0.25;\n\nfloat gaussian(vec2 i) {\n  return exp(-0.5 * dot(i /= sigma, i)) / (6.28 * sigma * sigma);\n}\n\nvec4 blur(sampler2D sp, vec2 U, vec2 scale) {\n  vec4 O = vec4(0.);\n  int s = samples / sLOD;\n  int s2 = s * s;\n  float a = 0.;\n\n  for (int i = 0; i < s2; i++) {\n    vec2 d = vec2(i % s, i / s) * float(sLOD) - float(samples) / 2.;\n    vec4 c = texture2D(sp, U + scale * d, float(LOD));\n    \n    float g = gaussian(d);\n    O.rgb += g * c.rgb;\n    O.a += c.a;\n    a += g * c.a;\n  }\n  O.a /= float(s2);\n\n  \n  return vec4(vec3(a > 0. ? O.rgb / a : O.rgb), O.a);\n  \n  \n}\n\nvec4 blurBack(sampler2D sp, sampler2D spBase, vec2 U, vec2 scale) {\n  vec4 O = vec4(0.);\n  int s = samples / sLOD;\n  int s2 = s * s;\n  float a = 0.;\n\n  for (int i = 0; i < s2; i++) {\n    vec2 d = vec2(i % s, i / s) * float(sLOD) - float(samples) / 2.;\n    vec2 uv = U + scale * d;\n    vec4 c = texture2D(sp, uv, float(LOD));\n    float g = gaussian(d);\n    O.rgb += g * mix(texture2D(spBase, uv, float(LOD)), c, c.a).rgb;\n    O.a += c.a;\n    a += g * c.a;\n  }\n  O.a /= float(s2);\n\n  return vec4(vec3(a > 0. ? O.rgb / a : O.rgb), O.a);\n  \n}\n\nvec4 blurDepth(sampler2D sp, vec2 U, vec2 scale) {\n  vec4 O = vec4(0.);\n  int s = samplesDepth / sLOD;\n\n  for (int i = 0; i < s * s; i++) {\n    vec2 d = vec2(i % s, i / s) * float(sLOD) - float(samplesDepth) / 2.;\n    O += gaussian(d) * texture2D(sp, U + scale * d, float(LOD));\n  }\n\n  return O.a > 0. ? O / O.a : O;\n  \n}\n\n/* main */\nvoid main() {\n  /* depth */\n  vec4 depthColor = texture2D(tDepth, vUv);\n  float depth = depthColor.r;\n\n  /* bokeh */\n  \n  vec2 blurScale = vec2(0.0002 * maxblur);\n  \n  float bokeh = (blurScale.x == 0. ? depthColor : mix(blurDepth(tDepth, vUv, blurScale), vec4(1.), maxblurFull)).g;\n  \n  \n\n  \n  \n  \n  \n  \n  \n  \n  \n  bokeh = max(bokeh, min(pow(length(vUv - (0.5 + blurCenter)) * blurFocus, blurExponent), 1.));\n\n  /* color */\n  vec4 colorBack = texture2D(tColorBack, vUv);\n  \n  \n  \n\n  /* color */\n  vec4 color = texture2Dgamma(tColor, vUv);\n\n  /* fog */\n  color.rgb = fog(color.rgb, colorBack.rgb, depth);\n\n  \n  \n  \n  \n  \n  \n\n  /* gaussian blur */\n  \n  vec4 colorBlur = blurScale.x == 0. ? texture2D(tColor, vUv) : mix(blur(tColor, vUv, blurScale), blurBack(tColor, tColorBack, vUv, blurScale), maxblurFull);\n  colorBlur = LinearToGamma4(colorBlur);\n  colorBlur.rgb = fog(colorBlur.rgb, colorBack.rgb, depth);\n\n  color.rgb = mix(color.rgb, colorBlur.rgb, bokeh);\n  \n  \n  \n\n  color.rgb = mix(colorBack.rgb, color.rgb, color.a);\n  \n  \n  \n\n  /*  */\n  float colorRed = texture2Dgamma(tColor, vec2(vUv.x - 0.001 * rShift, vUv.y)).r;\n  color.r = max(color.r, colorRed * rShiftOpacity);\n\n  /*  */\n  \n  \n  \n  \n\n  \n  \n  \n\n  \n  \n  \n  \n  \n  \n  \n\n  /* noise */\n  \n  \n\n  \n  \n  vec2 noiseUv = fitCover(vUv, textureResolution, objectResolution);\n  vec3 colorSrc = mix(mix(texture2D(tNoise, noiseUv), texture2D(tNoiseDark, noiseUv), noiseProgress * noiseDarkness).rgb, vec3(mix(noiseMin, noiseMax, random(noiseUv)), mix(noiseMin, noiseMax, random(noiseUv + 0.1)), mix(noiseMin, noiseMax, random(noiseUv - 0.1))), noiseGrayScale);\n  \n\n  /* color */\n  vec3 colorDist = color.rgb;\n\n  \n  \n  \n  \n  \n  gl_FragColor.rgb = uIsNightMode || hideNoise ? colorDist : overlay(colorSrc, colorDist);\n  \n  \n  \n  \n  \n\n  /*  */\n  gl_FragColor.rgb *= brightness;\n\n  /*  */\n  gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(1.), whiteness);\n\n  /*  */\n  vec2 uvRay = fitContain(vUv, vec2(1.), objectResolution);\n  gl_FragColor.rgb = tierRays(gl_FragColor.rgb, uvRay, time, uRay[0]);\n  gl_FragColor.rgb = tierRays(gl_FragColor.rgb, uvRay, time, uRay[1]);\n  gl_FragColor.rgb = tierRays(gl_FragColor.rgb, uvRay, time, uRay[2]);\n\n  \n  \n  \n  gl_FragColor.a = transparent ? colorBlur.a : 1.;\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n  gl_FragColor.a *= opacity;\n\n  gl_FragColor.rgb = transparent ? colorBlur.rgb : gl_FragColor.rgb;\n\n  /*  */\n  if (uIsNightMode) {\n    vec3 originalColor = gl_FragColor.rgb;\n    vec3 monochromeColor = pow(monochrome(originalColor), vec3(monochromeExponent)) * monochromeMax;\n    \n\n    \n    \n\n    gl_FragColor.rgb = mix(\n        \n    THEME_COLOR,\n        \n    monochromeColor,\n        \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    min(\n      \n    min(\n      \n    min(\n      \n    mapClamp(smoothstep(0., nightModeThreshold1, distance(originalColor, NIGHT_MODE_COLOR_1)), 0., 1., (1. - nightModeBrightness1), 1.)\n      \n    , uIsNightModeLogo ? 1. : mapClamp(smoothstep(0., nightModeThreshold2, distance(originalColor, NIGHT_MODE_COLOR_2)), 0., 1., (1. - nightModeBrightness2), 1.)\n      \n    )\n      \n    , mapClamp(smoothstep(0., nightModeThreshold3, distance(originalColor, NIGHT_MODE_COLOR_3)), 0., 1., (1. - nightModeBrightness3), 1.)\n      \n    )\n      \n    , mapClamp(smoothstep(0., nightModeThreshold4, distance(originalColor, NIGHT_MODE_COLOR_4)), 0., 1., (1. - nightModeBrightness4), 1.)\n      \n    )\n        \n        \n        \n        \n        \n        \n        \n        \n    );\n    \n\n    if (uIsNightModeLogo) {\n      gl_FragColor.rgb = mix(\n          \n      vec3(1.),\n          \n      gl_FragColor.rgb,\n          \n      smoothstep(0., nightModeThreshold2, distance(originalColor, NIGHT_MODE_COLOR_2))\n        \n      );\n    }\n\n    /*  */\n    \n    \n    \n    \n    \n    \n    \n    \n    \n  }\n\n  gl_FragColor.rgb = showBokeh ? vec3(bokeh) : showDepth ? vec3(depth) : gl_FragColor.rgb;\n  \n  \n  \n  \n  \n}"
                        },
                        S = ux(w.uniforms);
                      (S.tColorBack.value = y.texture),
                        (S.tColor.value = b.texture),
                        (S.tDepth.value = x.texture),
                        (S.objectResolution.value = new Md(v, m)),
                        (S.tNoise.value = pw),
                        (S.tNoiseDark.value = fw);
                      var M = new tv({
                          uniforms: S,
                          vertexShader: w.vertexShader,
                          fragmentShader: w.fragmentShader,
                          transparent: s,
                          defines: {
                            samples: pa ? 15 : 30,
                            samplesDepth: pa ? 5 : 20
                          }
                        }),
                        T = S,
                        k = new fx(dw, M);
                      g.add(k);
                      var E = new tv({
                        uniforms: Ol({}, cw.uniforms),
                        vertexShader: cw[u ? "vertexShaderY" : "vertexShader"],
                        fragmentShader: cw.fragmentShader
                      });
                      (E.uniforms.mNear.value = f.mNear),
                        (E.uniforms.mFar.value = f.mFar),
                        (E.uniforms.bokehNear.value = f.bokehNear),
                        (E.uniforms.bokehFarBack.value = f.bokehFarBack),
                        (E.uniforms.bokehFarFront.value = f.bokehFarFront);
                      var C = E.uniforms,
                        D = new tv({
                          uniforms: Ol({}, cw.uniforms),
                          vertexShader: cw.vertexShaderNone,
                          fragmentShader: cw.fragmentShader
                        });
                      (D.uniforms.mNear.value = f.mNear),
                        (D.uniforms.mFar.value = f.mFar);
                      var A = new tv({
                        uniforms: Ol({}, cw.uniforms),
                        vertexShader: cw.vertexShaderForce,
                        fragmentShader: cw.fragmentShader
                      });
                      if (
                        ((A.uniforms.mNear.value = f.mNear),
                        (A.uniforms.mFar.value = f.mFar),
                        Yr.enablePane && a)
                      ) {
                        var P = a.title,
                          L = a.addFolder({
                            title: "postprocessing",
                            expanded: p
                          });
                        L.addInput(T.hideNoise, "value", {
                          label: "hideNoise",
                          presetKey: "".concat(P, " hideNoise")
                        }),
                          L.addInput(T.transparent, "value", {
                            label: "",
                            presetKey: "".concat(P, " transparent")
                          });
                        var R = L.addFolder({ title: "depth", expanded: !1 });
                        R.addInput(T.showDepth, "value", {
                          label: "showDepth",
                          presetKey: "".concat(P, " showDepth")
                        }),
                          R.addInput(C.mNear, "value", {
                            label: "mNear",
                            presetKey: "".concat(P, " mNear"),
                            min: h,
                            max: 2 * r.far
                          }),
                          R.addInput(C.mFar, "value", {
                            label: "mFar",
                            presetKey: "".concat(P, " mFar"),
                            min: h,
                            max: 2 * r.far
                          });
                        var I = L.addFolder({ title: "", expanded: !1 });
                        I.addInput(T.showBokeh, "value", {
                          label: "showBokeh",
                          presetKey: "".concat(P, " showBokeh")
                        }),
                          I.addInput(T.maxblur, "value", {
                            label: "maxblur",
                            presetKey: "".concat(P, " maxblur"),
                            min: 0,
                            max: 10,
                            step: 0.1
                          }),
                          I.addInput(T.maxblurFull, "value", {
                            label: "maxblurFull",
                            presetKey: "".concat(P, " maxblurFull"),
                            min: 0,
                            max: 10,
                            step: 0.1
                          }),
                          I.addInput(T.blurFocus, "value", {
                            label: "blurFocus",
                            presetKey: "".concat(P, " blurFocus"),
                            min: 0,
                            max: 10,
                            step: 0.1
                          }),
                          I.addInput(T.blurExponent, "value", {
                            label: "blurExponent",
                            presetKey: "".concat(P, " blurExponent"),
                            min: 0,
                            max: 10,
                            step: 0.1
                          }),
                          I.addInput(T.blurCenter, "value", {
                            label: "blurCenter",
                            presetKey: "".concat(P, " blurCenter"),
                            x: { step: 0.01 },
                            y: { step: 0.01 }
                          }),
                          I.addInput(C.bokehNear, "value", {
                            label: "bokehNear",
                            presetKey: "".concat(P, " bokehNear"),
                            min: 0,
                            step: 0.01
                          }),
                          I.addInput(C.bokehFarBack, "value", {
                            label: "bokehFarBack",
                            presetKey: "".concat(P, " bokehFarBack"),
                            min: 0,
                            step: 0.01
                          }),
                          I.addInput(C.bokehFarFront, "value", {
                            label: "bokehFarFront",
                            presetKey: "".concat(P, " bokehFarFront"),
                            min: 0,
                            step: 0.01
                          });
                        var O = L.addFolder({
                          title: "",
                          expanded: !1
                        });
                        O.addInput(T.rShift, "value", {
                          label: "rShift",
                          presetKey: "".concat(P, " rShift"),
                          min: 0,
                          max: 3
                        }),
                          O.addInput(T.rShiftOpacity, "value", {
                            label: "rShiftOpacity",
                            presetKey: "".concat(P, " rShiftOpacity"),
                            min: 0,
                            max: 1
                          });
                        var N = L.addFolder({
                          title: "",
                          expanded: !1
                        });
                        N.addInput(T.noiseMin, "value", {
                          label: "noiseMin",
                          presetKey: "".concat(P, " noiseMin"),
                          min: 0,
                          max: 1
                        }),
                          N.addInput(T.noiseMax, "value", {
                            label: "noiseMax",
                            presetKey: "".concat(P, " noiseMax"),
                            min: 0,
                            max: 1
                          }),
                          N.addInput(T.noiseGrayScale, "value", {
                            label: "noiseGrayScale",
                            presetKey: "".concat(P, " noiseGrayScale"),
                            min: 0,
                            max: 1
                          }),
                          N.addInput(T.noiseDarkness, "value", {
                            label: "",
                            presetKey: "".concat(P, " noiseDarkness"),
                            min: 0,
                            max: 1
                          });
                        var F = L.addFolder({ title: "", expanded: !1 });
                        F.addInput(T.fogNear, "value", {
                          label: "near",
                          presetKey: "".concat(P, " fogNear"),
                          min: 0,
                          max: 1
                        }),
                          F.addInput(T.fogFar, "value", {
                            label: "far",
                            presetKey: "".concat(P, " fogFar"),
                            min: 0,
                            max: 1
                          });
                        var U = L.addFolder({ title: "", expanded: !1 });
                        U.addInput(T.brightness, "value", {
                          label: "",
                          presetKey: "".concat(P, " brightness"),
                          min: 0,
                          max: 1
                        }),
                          U.addInput(T.whiteness, "value", {
                            label: "",
                            presetKey: "".concat(P, " whiteness"),
                            min: 0,
                            max: 1
                          });
                        var B = L.addFolder({ title: "", expanded: !1 });
                        T.uRay.value.forEach(function (e, t) {
                          var n = "ray ".concat(t + 1),
                            i = B.addFolder({
                              title: n,
                              expanded: e.opacity > 0
                            });
                          i.addInput(e, "center", {
                            presetKey: "".concat(P, " ").concat(n, " center"),
                            x: { min: -2, max: 2 },
                            y: { min: -2, max: 2, inverted: !0 }
                          }),
                            i.addInput(e, "rotation", {
                              presetKey: ""
                                .concat(P, " ")
                                .concat(n, " rotation"),
                              min: 0,
                              max: 0.2,
                              step: 0.001
                            }),
                            i.addInput(e, "speed", {
                              presetKey: "".concat(P, " ").concat(n, " speed"),
                              min: 0
                            }),
                            i.addInput(e, "offset", {
                              presetKey: "".concat(P, " ").concat(n, " offset"),
                              min: 0,
                              max: 0.1,
                              step: 0.001
                            }),
                            i.addInput(e, "width", {
                              presetKey: "".concat(P, " ").concat(n, " width"),
                              min: 0,
                              max: 0.1,
                              step: 0.001
                            }),
                            i.addInput(e, "edge", {
                              presetKey: "".concat(P, " ").concat(n, " edge"),
                              min: 0,
                              max: 0.1,
                              step: 0.001
                            }),
                            i.addInput(e, "rayDistance", {
                              presetKey: ""
                                .concat(P, " ")
                                .concat(n, " rayDistance"),
                              min: 0
                            }),
                            i.addInput(e, "opacity", {
                              presetKey: ""
                                .concat(P, " ")
                                .concat(n, " opacity"),
                              min: 0,
                              max: 1
                            });
                        }),
                          L.addInput(T.opacity, "value", {
                            label: "opacity",
                            presetKey: "".concat(P, " opacity"),
                            min: 0,
                            max: 1
                          });
                        var z = L.addFolder({
                          title: "",
                          expanded: p
                        });
                        z.addInput(T.uIsNightMode, "value", {
                          label: "",
                          presetKey: "".concat(P, " uIsNightMode")
                        }),
                          z.addInput(T.nightModeThreshold1, "value", {
                            label: " 1",
                            presetKey: "".concat(P, " nightModeThreshold1"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.nightModeThreshold2, "value", {
                            label: " 2",
                            presetKey: "".concat(P, " nightModeThreshold2"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.nightModeThreshold3, "value", {
                            label: " 3",
                            presetKey: "".concat(P, " nightModeThreshold3"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.nightModeThreshold4, "value", {
                            label: "",
                            presetKey: "".concat(P, " nightModeThreshold4"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.nightModeBrightness1, "value", {
                            label: " 1",
                            presetKey: "".concat(P, " nightModeBrightness1"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.nightModeBrightness2, "value", {
                            label: " 2",
                            presetKey: "".concat(P, " nightModeBrightness2"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.nightModeBrightness3, "value", {
                            label: " 3",
                            presetKey: "".concat(P, " nightModeBrightness3"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.nightModeBrightness4, "value", {
                            label: "",
                            presetKey: "".concat(P, " nightModeBrightness4"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.monochromeMax, "value", {
                            label: "",
                            presetKey: "".concat(P, " monochromeMax"),
                            min: 0,
                            max: 1,
                            step: 0.01
                          }),
                          z.addInput(T.monochromeExponent, "value", {
                            label: "",
                            presetKey: "".concat(P, " monochromeExponent"),
                            min: 0,
                            max: 5,
                            step: 0.01
                          });
                      }
                      return {
                        scene: g,
                        camera: _,
                        rtTextureColorBack: y,
                        rtTextureColor: b,
                        rtTextureDepth: x,
                        bokeh_uniforms: S,
                        bokehUniformsWithoutValue: T,
                        materialBokeh: M,
                        materialDepth: E,
                        materialDepthNone: D,
                        materialDepthForce: A,
                        quad: k,
                        resize: function (e, t, n) {
                          var i = e * n,
                            r = t * n;
                          _.resize(i, r),
                            y.setSize(i, r),
                            b.setSize(i, r),
                            x.setSize(i, r),
                            (S.objectResolution.value = new Md(i, r)),
                            k.scale.set(i, r, 1);
                        },
                        dispose: function () {
                          y.dispose(),
                            b.dispose(),
                            x.dispose(),
                            E.dispose(),
                            D.dispose(),
                            A.dispose(),
                            k.dispose();
                        }
                      };
                    })({
                      width: e.width,
                      height: e.height,
                      pixelRatio: e.pixelRatio,
                      camera: this.camera,
                      folder: this.folder,
                      effectController: uS,
                      isNight: this.option.isNight
                    });
                  this.postprocessing = t;
                }
              },
              {
                key: "initOrbitControls",
                value: function () {
                  var e = this;
                  q(
                    function () {
                      return Promise.all([o.e(186), o.e(532)]).then(
                        o.t.bind(o, 532, 23)
                      );
                    },
                    [
                      "_astro/OrbitControls.js",
                      "_astro/constants.e6c90e33.js",
                      "_astro/PageTop.astro_astro_type_script_index_0_lang.b1bb8cc1.js"
                    ]
                  ).then(function (t) {
                    var n = t.OrbitControls,
                      i = (e.controls = new n(
                        e.camera,
                        e.option.renderer.domElement
                      ));
                    i.addEventListener("change", function () {
                      (e.camera.far = lS.camera.far + i.getDistance()),
                        e.camera.updateProjectionMatrix(),
                        e.setLookAt();
                    }),
                      (i.maxDistance = 5e4),
                      i.update(),
                      e.setLookAt();
                  });
                }
              },
              {
                key: "progressSpark",
                value: function (e) {
                  var t = e;
                  this.uniformsSparks.forEach(function (e) {
                    e.uTime.value = -(0.03 + 4 * t);
                  });
                }
              },
              {
                key: "makeTransitionIn",
                value: function (e) {
                  var t,
                    n,
                    i = Hw["quart.out"](e);
                  (t = this.camera.position).set.apply(
                    t,
                    Yw(
                      cx(
                        lS.camera.positionTransitionIn[sS],
                        lS.camera.position[sS],
                        i
                      )
                    )
                  ),
                    (n = this.lookAt).set.apply(
                      n,
                      Yw(
                        cx(
                          lS.camera.lookAtTransitionIn[sS],
                          lS.camera.lookAt[sS],
                          i
                        )
                      )
                    ),
                    (this.camera.fov = kl(
                      lS.camera.fovTransitionIn,
                      lS.camera.fov,
                      i
                    )),
                    this.setLookAt(),
                    this.camera.updateProjectionMatrix();
                }
              },
              {
                key: "makeTransitionOut",
                value: function (e) {
                  var t,
                    n,
                    i = Hw["quint.inOut"](0.85 * e) / 0.85;
                  (t = this.camera.position).set.apply(
                    t,
                    Yw(
                      cx(
                        lS.camera.position[sS],
                        lS.camera.positionTransitionOut[sS],
                        i
                      )
                    )
                  ),
                    (n = this.lookAt).set.apply(
                      n,
                      Yw(
                        cx(
                          lS.camera.lookAt[sS],
                          lS.camera.lookAtTransitionOut[sS],
                          i
                        )
                      )
                    ),
                    (this.camera.fov = kl(
                      lS.camera.fov,
                      lS.camera.fovTransitionOut,
                      i
                    )),
                    this.setLookAt(),
                    this.camera.updateProjectionMatrix();
                }
              },
              {
                key: "resize",
                value: function (e, t, n) {
                  (this.camera.aspect = e / t),
                    this.camera.updateProjectionMatrix(),
                    this.camera2D.resize(e, t),
                    this.postprocessing.resize(e, t, n),
                    this.meshInsideCar &&
                      (e / t < 1.6597510373443984
                        ? (this.meshInsideCar.position.set(0, 0, 0),
                          this.meshInsideCar.scale.set(
                            (oS.width * t) / oS.height,
                            t,
                            1
                          ))
                        : (this.meshInsideCar.position.set(
                            0,
                            -(t - oS.height * Yr.variableSizeRate) / 2,
                            0
                          ),
                          this.meshInsideCar.scale.set(
                            e,
                            oS.height * Yr.variableSizeRate,
                            1
                          )));
                }
              },
              {
                key: "progress",
                value: function (e, t) {
                  this.scroll(0.9 * e * Dx + Ex + 0.1 * Dx, -500 * t);
                }
              },
              {
                key: "scroll",
                value: function (e, t) {
                  if (
                    (e >= kx
                      ? (this.isRunTransitionNext &&
                          (this.isRunTransitionNext = !1),
                        !this.isTransitionedNext &&
                          "ServiceOpposite" === Yr.nextScene &&
                          1 === Yr.scrollDirection &&
                          ((this.isTransitionedNext = !0),
                          Ha.emit("top:startTransition:about")))
                      : Tx < e && e < kx
                      ? this.isRunTransitionNext ||
                        ((this.isRunTransitionNext = !0),
                        -1 === Yr.scrollDirection
                          ? ((this.isTransitionedNext = !1),
                            Ha.emit("top:startTransition:about", !0),
                            Ha.emit(
                              "changeHeaderLocationCurrentIndex",
                              Xw.indexOf("Service")
                            ))
                          : this.isTransitionedNext ||
                            ((this.isTransitionedNext = !0),
                            Ha.emit("top:startTransition:about")))
                      : e <= Tx &&
                        this.isRunTransitionNext &&
                        ((this.isRunTransitionNext = !1),
                        (this.isTransitionedNext = !1),
                        Ha.emit("top:startTransition:about", !0),
                        Ha.emit("changeScene", "ServiceOpposite", {
                          isBack: !0
                        })),
                    e >= Cx)
                  ) {
                    if (this.isRunCar) {
                      this.isRunCar = !1;
                      var n = this.mainCar;
                      if (n) {
                        var i = lS.car.individual[2];
                        n.position.set(
                          kl(i.position.x, i.positionEnd.x, 1),
                          0,
                          kl(i.position.z, i.positionEnd.z, 1)
                        ),
                          n.rotation.set(
                            0,
                            kl(i.rotation.y, i.rotationEnd.y, 1),
                            0
                          );
                      }
                    }
                  } else if (Ex < e && e < Cx) {
                    this.isRunCar ||
                      ((this.isRunCar = !0),
                      -1 === Yr.scrollDirection ||
                        this.isLowerPage ||
                        (this.hideIcon(this.icons[0]),
                        Yr.components.topService.fadeOutText()),
                      this.option.isNight && this.turnOnLight());
                    var r = (e - Ex) / Dx,
                      a = Hw["sine.inOut"](r),
                      o = this.mainCar;
                    if (o) {
                      var s = lS.car.individual[2];
                      o.position.set(
                        kl(s.position.x, s.positionEnd.x, Hw["quad.in"](a)),
                        0,
                        kl(s.position.z, s.positionEnd.z, Hw["quad.out"](a))
                      ),
                        o.rotation.set(
                          0,
                          kl(s.rotation.y, s.rotationEnd.y, Hw["sine.in"](a)),
                          0
                        );
                    }
                    this.carMixer &&
                      ((this.carMixer.time >=
                        this.carMixer._actions[0]._clip.duration / 3 &&
                        this.carMixer.time <
                          (this.carMixer._actions[0]._clip.duration / 3) * 2) ||
                        this.carMixer.setTime(
                          this.carMixer._actions[0]._clip.duration / 3
                        ),
                      this.carMixer.update(0.01 * t));
                  } else if (e <= Ex && this.isRunCar) {
                    (this.isRunCar = !1),
                      (this.uniformsIcon.charging2.uProgress.value = 1),
                      Yr.components.topService.fadeInText();
                    var l = this.mainCar;
                    if (l) {
                      var u = lS.car.individual[2];
                      l.position.set(
                        kl(u.position.x, u.positionEnd.x, 0),
                        0,
                        kl(u.position.z, u.positionEnd.z, 0)
                      ),
                        l.rotation.set(
                          0,
                          kl(u.rotation.y, u.rotationEnd.y, 0),
                          0
                        );
                    }
                  }
                  if (e >= Mx)
                    this.isRunText &&
                      ((this.isRunText = !1),
                      this.isLowerPage ||
                        Yr.components.topService.scrollText(kl(bx, 1, 1)));
                  else if (Sx < e && e < Mx) {
                    this.isRunText || (this.isRunText = !0);
                    var c = (e - Sx) / 200;
                    this.isLowerPage ||
                      (Yr.components.topService.scrollText(kl(bx, 1, c)),
                      !this.isTurnOnLight && c >= 0.5
                        ? this.option.isNight && this.turnOnLight()
                        : this.isTurnOnLight &&
                          c < 0.5 &&
                          this.option.isNight &&
                          this.turnOffLight());
                  } else
                    e <= Sx &&
                      this.isRunText &&
                      ((this.isRunText = !1),
                      this.isLowerPage ||
                        Yr.components.topService.scrollText(kl(bx, 1, 0)));
                  if (e >= wx)
                    this.isRunTransition &&
                      ((this.isRunTransition = !1),
                      this.isLowerPage ||
                        (Yr.components.topService.scrollText(kl(yx, bx, 1)),
                        -1 === Yr.scrollDirection ||
                          this.showServiceOppositeIcon()));
                  else if (xx < e && e < wx) {
                    this.isRunTransition ||
                      ((this.isRunTransition = !0),
                      (this.isTransitionedNext = !1),
                      -1 === Yr.scrollDirection &&
                        (Ha.emit("top:startTransition:serviceOpposite", !0),
                        this.hideIcon(this.icons[0]),
                        this.icons[1] && this.hideIcon(this.icons[1])));
                    var h = (e - xx) / 220;
                    this.isLowerPage ||
                      Yr.components.topService.scrollText(kl(yx, bx, h));
                  } else
                    e <= xx &&
                      this.isRunTransition &&
                      ((this.isRunTransition = !1),
                      Ha.emit("changeScene", "Service", { isBack: !0 }),
                      this.isLowerPage ||
                        Yr.components.topService.scrollText(kl(yx, bx, 0)));
                }
              },
              {
                key: "tick",
                value: function (e, t, n) {
                  this.option.isNight && this.progressSpark(e);
                }
              },
              {
                key: "render",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : null;
                  this.option.renderer.setRenderTarget(
                    this.postprocessing.rtTextureColor
                  ),
                    this.option.renderer.clear(),
                    this.option.renderer.render(this.sceneSky, this.camera),
                    this.option.renderer.clearDepth(),
                    this.option.renderer.render(this.scene, this.camera),
                    this.option.renderer.clearDepth(),
                    this.option.renderer.render(this.sceneCar, this.camera),
                    (this.scene.overrideMaterial =
                      this.sceneCar.overrideMaterial =
                        this.postprocessing.materialDepth),
                    this.option.renderer.setRenderTarget(
                      this.postprocessing.rtTextureDepth
                    ),
                    this.option.renderer.clear(),
                    this.option.renderer.render(this.scene, this.camera),
                    this.option.renderer.clearDepth(),
                    this.option.renderer.render(this.sceneCar, this.camera),
                    (this.scene.overrideMaterial =
                      this.sceneCar.overrideMaterial =
                        null),
                    this.option.renderer.setRenderTarget(e),
                    this.option.renderer.render(
                      this.postprocessing.scene,
                      this.postprocessing.camera
                    ),
                    this.option.renderer.clearDepth(),
                    this.option.renderer.render(this.sceneText, this.camera),
                    this.option.renderer.clearDepth(),
                    this.option.renderer.render(this.scene2D, this.camera2D);
                }
              },
              {
                key: "start",
                value: function () {
                  var e = this,
                    t =
                      arguments.length > 0 &&
                      void 0 !== arguments[0] &&
                      arguments[0];
                  gsap.delayedCall(
                    t || this.isLowerPage ? 0 : 0.1,
                    function () {
                      e.isDisposed
                        ? e.addDisposeTarget(e.street, e.streetModel)
                        : e.street.add(e.streetModel);
                    }
                  ),
                    gsap.delayedCall(
                      t || this.isLowerPage ? 0 : 0.1,
                      function () {
                        e.cars.forEach(function (n, i) {
                          n &&
                            gsap.delayedCall(
                              (t || e.isLowerPage ? 0 : 0.01) * i,
                              function () {
                                var t = 1 === i ? e.street : e.sceneCar;
                                e.isDisposed
                                  ? e.addDisposeTarget(t, n)
                                  : t.add(n);
                              }
                            );
                        });
                      }
                    );
                }
              }
            ])
          );
        })(px);
      function hS(e) {
        return (
          (hS =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          hS(e)
        );
      }
      function dS(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          (i.enumerable = i.enumerable || !1),
            (i.configurable = !0),
            "value" in i && (i.writable = !0),
            Object.defineProperty(e, mS(i.key), i);
        }
      }
      function pS() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (pS = function () {
          return !!e;
        })();
      }
      function fS(e) {
        return (
          (fS = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          fS(e)
        );
      }
      function vS(e, t) {
        return (
          (vS = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          vS(e, t)
        );
      }
      function mS(e) {
        var t = (function (e) {
          if ("object" != hS(e) || !e) return e;
          var t = e[Symbol.toPrimitive];
          if (void 0 !== t) {
            var n = t.call(e, "string");
            if ("object" != hS(n)) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e);
        return "symbol" == hS(t) ? t : t + "";
      }
      var gS,
        _S,
        yS = "/_astro/brush_border_top.6d828e83.png";
      function bS(e) {
        return (
          (bS =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          bS(e)
        );
      }
      function xS(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function wS(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          (i.enumerable = i.enumerable || !1),
            (i.configurable = !0),
            "value" in i && (i.writable = !0),
            Object.defineProperty(e, AS(i.key), i);
        }
      }
      function SS(e, t, n) {
        return (
          t && wS(e.prototype, t),
          n && wS(e, n),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          e
        );
      }
      function MS(e, t, n) {
        return (
          (t = kS(t)),
          (function (e, t) {
            if (t && ("object" == bS(t) || "function" == typeof t)) return t;
            if (void 0 !== t)
              throw new TypeError(
                "Derived constructors may only return object or undefined"
              );
            return (function (e) {
              if (void 0 === e)
                throw new ReferenceError(
                  "this hasn't been initialised - super() hasn't been called"
                );
              return e;
            })(e);
          })(
            e,
            TS()
              ? Reflect.construct(t, n || [], kS(e).constructor)
              : t.apply(e, n)
          )
        );
      }
      function TS() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (TS = function () {
          return !!e;
        })();
      }
      function kS(e) {
        return (
          (kS = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          kS(e)
        );
      }
      function ES(e, t) {
        if ("function" != typeof t && null !== t)
          throw new TypeError(
            "Super expression must either be null or a function"
          );
        (e.prototype = Object.create(t && t.prototype, {
          constructor: { value: e, writable: !0, configurable: !0 }
        })),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          t && CS(e, t);
      }
      function CS(e, t) {
        return (
          (CS = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          CS(e, t)
        );
      }
      function DS(e, t, n) {
        return (
          (t = AS(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      function AS(e) {
        var t = (function (e) {
          if ("object" != bS(e) || !e) return e;
          var t = e[Symbol.toPrimitive];
          if (void 0 !== t) {
            var n = t.call(e, "string");
            if ("object" != bS(n)) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e);
        return "symbol" == bS(t) ? t : t + "";
      }
      function PS() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (PS = function () {
          return !!e;
        })();
      }
      function LS(e) {
        return (
          (LS = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          LS(e)
        );
      }
      function RS(e, t) {
        return (
          (RS = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          RS(e, t)
        );
      }
      function IS(e) {
        return (
          (IS =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          IS(e)
        );
      }
      ((rS = (function (e) {
        function t() {
          return (
            (function (e, t) {
              if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function");
            })(this, t),
            (function (e, t, n) {
              return (
                (t = fS(t)),
                (function (e, t) {
                  if (t && ("object" == hS(t) || "function" == typeof t))
                    return t;
                  if (void 0 !== t)
                    throw new TypeError(
                      "Derived constructors may only return object or undefined"
                    );
                  return (function (e) {
                    if (void 0 === e)
                      throw new ReferenceError(
                        "this hasn't been initialised - super() hasn't been called"
                      );
                    return e;
                  })(e);
                })(
                  e,
                  pS()
                    ? Reflect.construct(t, n || [], fS(e).constructor)
                    : t.apply(e, n)
                )
              );
            })(this, t, arguments)
          );
        }
        return (
          (function (e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function"
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: { value: e, writable: !0, configurable: !0 }
            })),
              Object.defineProperty(e, "prototype", { writable: !1 }),
              t && vS(e, t);
          })(t, e),
          (function (e, t) {
            return (
              t && dS(e.prototype, t),
              Object.defineProperty(e, "prototype", { writable: !1 }),
              e
            );
          })(t, [
            {
              key: "onInit",
              value: function () {
                var e = this;
                if (this.el.classList.contains("-top")) {
                  this.el.classList.remove("-top");
                  var t = new Image();
                  (t.onload = function () {
                    e.el.classList.add("-top");
                  }),
                    (t.src = yS);
                }
                if (this.el.classList.contains("-bottom")) {
                  this.el.classList.remove("-bottom");
                  var n = new Image();
                  (n.onload = function () {
                    e.el.classList.add("-bottom");
                  }),
                    (n.src = "/_astro/brush_border_bottom.96228be0.png");
                }
                if (this.el.classList.contains("-both")) {
                  this.el.classList.remove("-both");
                  var i = !1,
                    r = !1,
                    a = new Image();
                  (a.onload = function () {
                    (i = !0), r && e.el.classList.add("-both");
                  }),
                    (a.src = yS);
                  var o = new Image();
                  (o.onload = function () {
                    (r = !0), i && e.el.classList.add("-both");
                  }),
                    (o.src = yS);
                }
              }
            }
          ])
        );
      })(Zs)),
      (function (e, t, n) {
        (t = mS(t)) in e
          ? Object.defineProperty(e, t, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0
            })
          : (e[t] = n);
      })(rS, "componentName", "BrushContainer"),
      rS).register(),
        ((gS = (function (e) {
          function t() {
            var e;
            xS(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return DS((e = MS(this, t, [].concat(i))), "isScrollEnter", !1), e;
          }
          return (
            ES(t, e),
            SS(t, [
              {
                key: "onInit",
                value: function () {
                  var e,
                    t = this;
                  (this.bg = this.el.querySelector(".bg-grad")),
                    (this.isAnimate = !(
                      null !== (e = this.el) &&
                      void 0 !== e &&
                      e.classList.contains("-none")
                    )),
                    this.el.classList.remove("addMaskImage"),
                    requestAnimationFrame(function () {
                      t.el.classList.add("addMaskImage");
                    }),
                    this.addIntersectionObserver({
                      el: this.el,
                      callback: function (e, n) {
                        e.isIntersecting
                          ? t.bg.classList.contains("-noAnim") ||
                            t.bg.classList.add("isAnimate")
                          : t.bg.classList.contains("-noAnim") ||
                            t.bg.classList.remove("isAnimate");
                      },
                      param: { rootMargin: "0% 0% 0% 0%" },
                      once: !1
                    }),
                    this.addIntersectionObserver({
                      el: this.el,
                      callback: function (e, n) {
                        e.isIntersecting
                          ? t.el.classList.add("isIntersect")
                          : t.el.classList.remove("isIntersect");
                      },
                      param: { rootMargin: "0% 0% -50% 0%" },
                      once: !1
                    });
                }
              }
            ])
          );
        })(Zs)),
        DS(gS, "componentName", "gradation_bg"),
        gS).register(),
        ((_S = (function (e) {
          function t() {
            return xS(this, t), MS(this, t, arguments);
          }
          return (
            ES(t, e),
            SS(t, [
              {
                key: "onInit",
                value: function () {
                  if (
                    ((this.pageTitle = this.el),
                    (this.mainTxt = document.querySelector(".mainTxt")),
                    (this.isSP = Ma.isSp),
                    !this.isSP)
                  ) {
                    var e = this.mainTxt.getBoundingClientRect().top;
                    this.pageTitle.style.top = e + "px";
                  }
                }
              },
              {
                key: "onResize",
                value: function (e) {
                  if (
                    (e.windowWidth,
                    e.windowHeight,
                    (this.isSP = Ma.isSp),
                    !this.isSP)
                  ) {
                    var t = this.mainTxt.getBoundingClientRect().top;
                    this.pageTitle.style.top = t + "px";
                  }
                }
              }
            ])
          );
        })(Zs)),
        DS(_S, "componentName", "LowerTitle"),
        _S).register();
      var OS,
        NS,
        FS,
        US,
        BS,
        zS,
        VS,
        HS,
        GS = (function (e) {
          function t() {
            return (
              (function (e, t) {
                if (!(e instanceof t))
                  throw new TypeError("Cannot call a class as a function");
              })(this, t),
              (function (e, t, n) {
                return (
                  (t = LS(t)),
                  (function (e, t) {
                    if (t && ("object" == IS(t) || "function" == typeof t))
                      return t;
                    if (void 0 !== t)
                      throw new TypeError(
                        "Derived constructors may only return object or undefined"
                      );
                    return (function (e) {
                      if (void 0 === e)
                        throw new ReferenceError(
                          "this hasn't been initialised - super() hasn't been called"
                        );
                      return e;
                    })(e);
                  })(
                    e,
                    PS()
                      ? Reflect.construct(t, n || [], LS(e).constructor)
                      : t.apply(e, n)
                  )
                );
              })(this, t, arguments)
            );
          }
          return (
            (function (e, t) {
              if ("function" != typeof t && null !== t)
                throw new TypeError(
                  "Super expression must either be null or a function"
                );
              (e.prototype = Object.create(t && t.prototype, {
                constructor: { value: e, writable: !0, configurable: !0 }
              })),
                Object.defineProperty(e, "prototype", { writable: !1 }),
                t && RS(e, t);
            })(t, e),
            (function (e) {
              return Object.defineProperty(e, "prototype", { writable: !1 }), e;
            })(t)
          );
        })(Zs);
      function WS(e, t, n, i) {
        var r = jS(QS(1 & i ? e.prototype : e), t, n);
        return 2 & i && "function" == typeof r
          ? function (e) {
              return r.apply(n, e);
            }
          : r;
      }
      function jS() {
        return (
          (jS =
            "undefined" != typeof Reflect && Reflect.get
              ? Reflect.get.bind()
              : function (e, t, n) {
                  var i = (function (e, t) {
                    for (
                      ;
                      !{}.hasOwnProperty.call(e, t) && null !== (e = QS(e));

                    );
                    return e;
                  })(e, t);
                  if (i) {
                    var r = Object.getOwnPropertyDescriptor(i, t);
                    return r.get
                      ? r.get.call(arguments.length < 3 ? e : n)
                      : r.value;
                  }
                }),
          jS.apply(null, arguments)
        );
      }
      function qS(e, t) {
        for (var n = 0; n < t.length; n++) {
          var i = t[n];
          (i.enumerable = i.enumerable || !1),
            (i.configurable = !0),
            "value" in i && (i.writable = !0),
            Object.defineProperty(e, XS(i.key), i);
        }
      }
      function KS(e, t, n) {
        return (
          t && qS(e.prototype, t),
          n && qS(e, n),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          e
        );
      }
      function XS(e) {
        var t = (function (e) {
          if ("object" != tM(e) || !e) return e;
          var t = e[Symbol.toPrimitive];
          if (void 0 !== t) {
            var n = t.call(e, "string");
            if ("object" != tM(n)) return n;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e);
        return "symbol" == tM(t) ? t : t + "";
      }
      function YS(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function ZS(e, t, n) {
        return (
          (t = QS(t)),
          (function (e, t) {
            if (t && ("object" == tM(t) || "function" == typeof t)) return t;
            if (void 0 !== t)
              throw new TypeError(
                "Derived constructors may only return object or undefined"
              );
            return (function (e) {
              if (void 0 === e)
                throw new ReferenceError(
                  "this hasn't been initialised - super() hasn't been called"
                );
              return e;
            })(e);
          })(
            e,
            JS()
              ? Reflect.construct(t, n || [], QS(e).constructor)
              : t.apply(e, n)
          )
        );
      }
      function JS() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (JS = function () {
          return !!e;
        })();
      }
      function QS(e) {
        return (
          (QS = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          QS(e)
        );
      }
      function $S(e, t) {
        if ("function" != typeof t && null !== t)
          throw new TypeError(
            "Super expression must either be null or a function"
          );
        (e.prototype = Object.create(t && t.prototype, {
          constructor: { value: e, writable: !0, configurable: !0 }
        })),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          t && eM(e, t);
      }
      function eM(e, t) {
        return (
          (eM = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          eM(e, t)
        );
      }
      function tM(e) {
        return (
          (tM =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          tM(e)
        );
      }
      function nM(e, t, n) {
        return (
          (t = (function (e) {
            var t = (function (e) {
              if ("object" != tM(e) || !e) return e;
              var t = e[Symbol.toPrimitive];
              if (void 0 !== t) {
                var n = t.call(e, "string");
                if ("object" != tM(n)) return n;
                throw new TypeError(
                  "@@toPrimitive must return a primitive value."
                );
              }
              return String(e);
            })(e);
            return "symbol" == tM(t) ? t : t + "";
          })(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      !(function (e, t, n) {
        (t = (function (e) {
          var t = (function (e) {
            if ("object" != IS(e) || !e) return e;
            var t = e[Symbol.toPrimitive];
            if (void 0 !== t) {
              var n = t.call(e, "string");
              if ("object" != IS(n)) return n;
              throw new TypeError(
                "@@toPrimitive must return a primitive value."
              );
            }
            return String(e);
          })(e);
          return "symbol" == IS(t) ? t : t + "";
        })(t)) in e
          ? Object.defineProperty(e, t, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0
            })
          : (e[t] = n);
      })(GS, "isLocal", !0),
        ((OS = (function (e) {
          function t() {
            return YS(this, t), ZS(this, t, arguments);
          }
          return (
            $S(t, e),
            KS(t, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  (this.worldTop = document.querySelector(".world-main")),
                    (this.worldBottom = document.querySelector(".world-sub")),
                    (this.planTop = document.querySelector(".plan-main")),
                    (this.planBottom = document.querySelector(".plan-sub")),
                    (this.maskLayer = document.querySelector(".wrapper_value")),
                    (this.GL = document.querySelector(".ValueGL")),
                    (this.eventSceneVal = { progress: 0 }),
                    (this.sceneEvent = new CustomEvent("scenechange", {
                      detail: {
                        progress: function () {
                          return e.eventSceneVal.progress;
                        }
                      }
                    }));
                }
              },
              {
                key: "onIntersect",
                value: function (e) {
                  e.isIntersecting
                    ? ((this.maskLayer.style.willChange = "clip-path"),
                      this.playScroll())
                    : ((this.maskLayer.style.willChange = ""),
                      this.pauseScroll());
                }
              },
              {
                key: "onScroll",
                value: function (e) {
                  var t = this,
                    n = e.scroll;
                  if (this.scrollStart <= n && n <= this.scrollEnd) {
                    this.isScrollEnter ||
                      ((this.isScrollEnter = !0),
                      this.windowHeight ||
                        (this.windowHeight = window.innerHeight));
                    var i = (n - this.scrollStart) / this.windowHeight - 1,
                      r = 1 - Math.max(Math.min(i, 1), 0),
                      a = Math.max(Math.min(i - 0.5, 1), 0);
                    (this.maskTween = Bo(this.maskLayer, {
                      clipPath: "inset("
                        .concat(r * this.maskHeight, "lvh ")
                        .concat(r * this.maskWidth, "vw round ")
                        .concat(r * this.maskRadius, "vw)"),
                      duration: 0.2
                    })),
                      (this.glTween = Bo(this.eventSceneVal, {
                        progress: a,
                        duration: 0.2,
                        onUpdate: function () {
                          t.GL.dispatchEvent(t.sceneEvent);
                        }
                      })),
                      i > 0.3
                        ? (this.worldTop.classList.add("scrollShow"),
                          this.worldBottom.classList.add("scrollShow"),
                          this.planTop.classList.add("scrollShow"),
                          this.planBottom.classList.add("scrollShow"))
                        : (this.worldTop.classList.remove("scrollShow"),
                          this.worldBottom.classList.remove("scrollShow"),
                          this.planTop.classList.remove("scrollShow"),
                          this.planBottom.classList.remove("scrollShow"));
                  } else
                    this.isScrollEnter &&
                      ((this.isScrollEnter = !1),
                      (this.overPosition =
                        n < this.scrollStart ? "top" : "bottom"),
                      this.setOverStyle());
                }
              },
              {
                key: "setOverStyle",
                value: function () {
                  var e = this;
                  "top" === this.overPosition
                    ? (this.worldTop.classList.remove("scrollShow"),
                      this.worldBottom.classList.remove("scrollShow"),
                      this.planTop.classList.remove("scrollShow"),
                      this.planBottom.classList.remove("scrollShow"),
                      (this.maskTween = Bo(this.maskLayer, {
                        clipPath: "inset("
                          .concat(this.maskHeight, "lvh ")
                          .concat(this.maskWidth, "vw round ")
                          .concat(this.maskRadius, "vw)"),
                        duration: 0.2
                      })),
                      (this.glTween = Bo(this.eventSceneVal, {
                        progress: 0,
                        duration: 0.2,
                        onUpdate: function () {
                          e.GL.dispatchEvent(e.sceneEvent);
                        }
                      })))
                    : (this.worldTop.classList.add("scrollShow"),
                      this.worldBottom.classList.add("scrollShow"),
                      this.planTop.classList.add("scrollShow"),
                      this.planBottom.classList.add("scrollShow"),
                      (this.maskTween = Bo(this.maskLayer, {
                        clipPath: "inset(0lvh 0vw round 0vw)",
                        duration: 0.2
                      })),
                      (this.glTween = Bo(this.eventSceneVal, {
                        progress: 1,
                        duration: 0.2,
                        onUpdate: function () {
                          e.GL.dispatchEvent(e.sceneEvent);
                        }
                      })));
                }
              },
              {
                key: "onResize",
                value: function (e) {
                  var t = e.windowWidth,
                    n = e.windowHeight;
                  (this.isSP = Ma.isSp),
                    this.isSP
                      ? ((this.maskWidth = 7.2),
                        (this.maskHeight = 40),
                        (this.maskRadius = 20))
                      : ((this.maskWidth = 26),
                        (this.maskHeight = 34),
                        (this.maskRadius = 32));
                  var i = this.scrollY,
                    r = this.el.getBoundingClientRect(),
                    a = r.top,
                    o = r.bottom;
                  (this.scrollStart = a + i - n),
                    (this.scrollEnd = o + i),
                    (this.scrollDistance = this.scrollEnd - this.scrollStart),
                    (this.overPosition =
                      i < this.scrollStart ? "top" : "bottom"),
                    (i < this.scrollStart || i > this.scrollEnd) &&
                      this.setOverStyle(!0),
                    (this.windowWidth = t),
                    (this.windowHeight = n);
                }
              }
            ])
          );
        })(Zs)),
        nM(OS, "componentName", "ValuePlan"),
        OS).register(),
        ((NS = (function (e) {
          function t() {
            var e;
            YS(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return nM((e = ZS(this, t, [].concat(i))), "isScrollEnter", !1), e;
          }
          return (
            $S(t, e),
            KS(t, [
              {
                key: "onInit",
                value: function () {
                  var e,
                    t,
                    n = this;
                  (this.mainTxt = this.refs.titleTxt),
                    (this.subTxt =
                      null === (e = this.el) || void 0 === e
                        ? void 0
                        : e.querySelector(".subTxt")),
                    (this.ankerLinks =
                      null === (t = this.el) || void 0 === t
                        ? void 0
                        : t.querySelector(".AnchorLinks")),
                    (this.GL = document.querySelector(".FirstViewGL")),
                    (this.eventBlurVal = { progress: 1 }),
                    (this.blurEvent = new CustomEvent("blurchange", {
                      detail: {
                        progress: function () {
                          return n.eventBlurVal.progress;
                        }
                      }
                    })),
                    (this.delayMax = 0.5),
                    (this.delayArray = []),
                    (this.splitTarget = new Tl(
                      this.el
                        .querySelector(".mainTxt")
                        .querySelectorAll("span"),
                      { type: "chars", charsClass: "SectionTitle-splitTxt" }
                    )),
                    this.splitTarget.chars.forEach(function (e, t) {
                      n.delayArray.push(n.delayMax * Dr.utils.random(0, 1));
                    });
                }
              },
              {
                key: "onIntersect",
                value: function (e) {
                  e.isIntersecting
                    ? ((this.mainTxt.style.willChange = "opacity,filter"),
                      (this.subTxt.style.willChange = "opacity,filter"),
                      (this.ankerLinks.style.willChange = "opacity,filter"),
                      this.splitTarget.chars.forEach(function (e, t) {
                        e.style.willChange = "transform,opacity,filter";
                      }),
                      this.playScroll())
                    : (this.pauseScroll(),
                      (this.mainTxt.style.willChange = ""),
                      (this.subTxt.style.willChange = ""),
                      (this.ankerLinks.style.willChange = ""),
                      this.splitTarget.chars.forEach(function (e, t) {
                        e.style.willChange = "";
                      }));
                }
              },
              {
                key: "onScroll",
                value: function (e) {
                  var t = this,
                    n = e.scroll;
                  if (this.scrollStart <= n && n <= this.scrollEnd) {
                    this.isScrollEnter || (this.isScrollEnter = !0);
                    var i = Math.min(
                        Math.max(1 - (n / this.scrollDistance) * 2, 0),
                        1
                      ),
                      r = Math.max((n / this.scrollDistance) * 2 * 5, 0);
                    (this.mainTween = Bo(this.mainTxt, {
                      opacity: "".concat(i),
                      filter: "blur(".concat(r, "px)"),
                      duration: 0.2
                    })),
                      (this.subTween = Bo(this.subTxt, {
                        opacity: "".concat(i),
                        filter: "blur(".concat(r, "px)"),
                        duration: 0.2
                      })),
                      (this.ankerTween = Bo(this.ankerLinks, {
                        opacity: "".concat(i),
                        filter: "blur(".concat(r, "px)"),
                        duration: 0.2
                      })),
                      (this.splitTween = Bo(this.splitTarget.chars, {
                        opacity: function (e, n, r) {
                          return Math.min(
                            Math.max(2 * i - t.delayArray[e], 0),
                            1
                          );
                        },
                        filter: function (e, n, r) {
                          return "blur(".concat(
                            5 * Math.max(2 * (1 - i) - t.delayArray[e], 0),
                            "px)"
                          );
                        },
                        transform: function (e, n, r) {
                          return "translateZ(".concat(
                            12 * Math.max(2 * (1 - i) - t.delayArray[e], 0),
                            "vw)"
                          );
                        },
                        duration: 0.2
                      })),
                      (this.glTween = Bo(this.eventBlurVal, {
                        progress: i,
                        duration: 0.2,
                        onUpdate: function () {
                          t.GL.dispatchEvent(t.blurEvent);
                        }
                      }));
                  } else
                    this.isScrollEnter &&
                      n > 0 &&
                      ((this.isScrollEnter = !1),
                      (this.mainTween = Bo(this.mainTxt, {
                        opacity: "0",
                        filter: "blur(5px)",
                        duration: 0.2
                      })),
                      (this.subTween = Bo(this.subTxt, {
                        opacity: "0",
                        filter: "blur(5px)",
                        duration: 0.2
                      })),
                      (this.ankerTween = Bo(this.ankerLinks, {
                        opacity: "0",
                        filter: "blur(5px)",
                        duration: 0.2
                      })),
                      (this.splitTween = Bo(this.splitTarget.chars, {
                        opacity: function (e, t, n) {
                          return 0;
                        },
                        filter: function (e, n, i) {
                          return "blur(".concat(
                            5 * (2 - t.delayArray[e]),
                            "px)"
                          );
                        },
                        transform: function (e, n, i) {
                          return "translateZ(".concat(
                            12 * Math.max(2 - t.delayArray[e], 0),
                            "vw)"
                          );
                        },
                        duration: 0.2
                      })),
                      (this.glTween = Bo(this.eventBlurVal, {
                        progress: 0,
                        duration: 0.2,
                        onUpdate: function () {
                          t.GL.dispatchEvent(t.blurEvent);
                        }
                      })));
                }
              },
              {
                key: "onResize",
                value: function (e) {
                  e.windowWidth, e.windowHeight;
                  var t = this.scrollY,
                    n = this.el.getBoundingClientRect().bottom;
                  (this.scrollStart = 0),
                    (this.scrollEnd = n + t),
                    (this.scrollDistance = this.scrollEnd - this.scrollStart);
                }
              }
            ])
          );
        })(Zs)),
        nM(NS, "componentName", "FV"),
        nM(NS, "selectorRoot", "[data-parallax-fv]"),
        NS).register();
      var iM = {
          src: "/_astro/b-kv_evc_img_02.d9d559e9.jpg",
          width: 2400,
          height: 1590,
          format: "jpg"
        },
        rM = {
          src: "/_astro/b-kv_evc_img_01.0ced0319.jpg",
          width: 828,
          height: 1541,
          format: "jpg"
        };
      ((FS = (function (e) {
        function t() {
          var e;
          YS(this, t);
          for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
            i[r] = arguments[r];
          return (
            nM((e = ZS(this, t, [].concat(i))), "blurChange", function (t) {
              var n = e.maxBlur * t.detail.progress();
              e.uniforms_buffer.radius.value !== n &&
                ((e.uniforms_buffer.radius.value = n),
                requestAnimationFrame(function () {
                  e.onRender();
                }));
            }),
            (e.uniforms_buffer = { radius: { value: 0 } }),
            e
          );
        }
        return (
          $S(t, e),
          KS(t, [
            {
              key: "onInit",
              value: function () {
                var e,
                  n,
                  i = this;
                (this.maxBlur = 2),
                  (this.blurIteration = 5),
                  (this.width =
                    null === (e = this.el) || void 0 === e
                      ? void 0
                      : e.parentNode.clientWidth),
                  (this.height =
                    null === (n = this.el) || void 0 === n
                      ? void 0
                      : n.parentNode.clientHeight),
                  WS(
                    t,
                    "onInit",
                    this,
                    3
                  )([{ isFullSize: !1, autoClear: !1, pixelRatioMax: 1.5 }]),
                  (this.pixelRatio = Math.min(
                    window.devicePixelRatio,
                    this.pixelRatioMax
                  )),
                  (this.renderTarget_01 = new Gd(this.width, this.height, {
                    depthBuffer: !1,
                    stencilBuffer: !1
                  })),
                  (this.renderTarget_02 = new Gd(this.width, this.height, {
                    depthBuffer: !1,
                    stencilBuffer: !1
                  })),
                  (this.scene_buffer = new Xg()),
                  (this.camera_ortho = new Cv(
                    this.width / -2,
                    this.width / 2,
                    this.height / 2,
                    this.height / -2,
                    0.1,
                    2
                  )),
                  (this.camera_ortho.position.z = 1);
                var r = Ma.isSp ? rM : iM;
                sx(r, {
                  onLoad: function (e) {
                    (i.texture = e),
                      (i.initialWidth = i.width),
                      (i.initialHeight = i.height);
                    var t = ux({
                      uTex: i.renderTarget_02.texture,
                      uResolutionImage: new Md(r.width, r.height),
                      uResolutionObject: new Md(i.width, i.height)
                    });
                    (i.uniforms = t),
                      (i.material = new U_({
                        uniforms: t,
                        vertexShader: ub,
                        fragmentShader:
                          "precision highp float;\n\nvarying vec2 vUv;\nuniform sampler2D uTex;\n\nuniform vec2 uResolutionObject;\nuniform vec2 uResolutionImage;\n\nvec2 fitCover(vec2 coord, vec2 inputResolution, vec2 outputResolution) {\nvec2 ratio = vec2(\n  min((outputResolution.x / outputResolution.y) / (inputResolution.x / inputResolution.y), 1.0),\n  min((outputResolution.y / outputResolution.x) / (inputResolution.y / inputResolution.x), 1.0)\n);\nreturn coord * ratio + (1. - ratio) * 0.5;\n}\nvec2 fitContain(vec2 coord, vec2 inputResolution, vec2 outputResolution) {\nvec2 ratio = vec2(\n  max((outputResolution.x / outputResolution.y) / (inputResolution.x / inputResolution.y), 1.0),\n  max((outputResolution.y / outputResolution.x) / (inputResolution.y / inputResolution.x), 1.0)\n);\nreturn coord * ratio + (1. - ratio) * 0.5;\n}\n\n#pragma glslify: export(fitContain)\nvec4 texture2DInnerRange(sampler2D t, vec2 uv) {\nreturn (uv.x < 0. || uv.x > 1. || uv.y < 0. || uv.y > 1.) ? vec4(0.) : texture2D(t, uv);\n}\n\n#pragma glslify: export(texture2DInnerRange)\n\nvoid main() {\nvec2 uv = vUv;\nuv = fitCover(uv, uResolutionImage, uResolutionObject);\nvec4 texColor = texture2DInnerRange(uTex, uv);\ngl_FragColor = texColor;\n\n}"
                      })),
                      (i.geometry = new gv(i.width, i.height)),
                      (i.mesh = new Xf(i.geometry, i.material)),
                      i.scene.add(i.mesh);
                    var n = ux({
                      uTex: null,
                      uResolutionImage: new Md(r.width, r.height),
                      uResolutionObject: new Md(i.width, i.height),
                      radius: i.maxBlur,
                      isHorizontal: !0,
                      isFirst: !0
                    });
                    (i.uniforms_buffer = n),
                      (i.material_buffer = new U_({
                        uniforms: n,
                        vertexShader: ub,
                        fragmentShader:
                          "precision highp float;\n\nvarying vec2 vUv;\nuniform sampler2D uTex;\n\nuniform vec2 uResolutionObject;\nuniform vec2 uResolutionImage;\nuniform float radius;\nuniform bool isHorizontal;\nuniform bool isFirst;\n\nvec2 fitCover(vec2 coord, vec2 inputResolution, vec2 outputResolution) {\nvec2 ratio = vec2(\n  min((outputResolution.x / outputResolution.y) / (inputResolution.x / inputResolution.y), 1.0),\n  min((outputResolution.y / outputResolution.x) / (inputResolution.y / inputResolution.x), 1.0)\n);\nreturn coord * ratio + (1. - ratio) * 0.5;\n}\nvec2 fitContain(vec2 coord, vec2 inputResolution, vec2 outputResolution) {\nvec2 ratio = vec2(\n  max((outputResolution.x / outputResolution.y) / (inputResolution.x / inputResolution.y), 1.0),\n  max((outputResolution.y / outputResolution.x) / (inputResolution.y / inputResolution.x), 1.0)\n);\nreturn coord * ratio + (1. - ratio) * 0.5;\n}\n\n#pragma glslify: export(fitContain)\nvec4 texture2DInnerRange(sampler2D t, vec2 uv) {\nreturn (uv.x < 0. || uv.x > 1. || uv.y < 0. || uv.y > 1.) ? vec4(0.) : texture2D(t, uv);\n}\n\n#pragma glslify: export(texture2DInnerRange)\n\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\nvec4 color = vec4(0.0);\nvec2 off1 = vec2(1.411764705882353) * direction;\nvec2 off2 = vec2(3.2941176470588234) * direction;\nvec2 off3 = vec2(5.176470588235294) * direction;\ncolor += texture2D(image, uv) * 0.1964825501511404;\ncolor += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\ncolor += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\ncolor += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\ncolor += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\ncolor += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\ncolor += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\nreturn color;\n}\n\nvoid main() {\nvec2 uv = isFirst ? fitCover(vUv, uResolutionImage, uResolutionObject) : vUv;\nvec2 direction = isHorizontal ? vec2(1., 0.) : vec2(0., 1.);\ndirection *= radius;\n\nvec4 texColor = blur13(uTex, uv, uResolutionObject, direction);\n\ngl_FragColor = texColor;\n\n}"
                      })),
                      (i.geometry_buffer = new gv(i.width, i.height)),
                      (i.mesh_buffer = new Xf(
                        i.geometry_buffer,
                        i.material_buffer
                      )),
                      i.scene_buffer.add(i.mesh_buffer),
                      i.onRender(),
                      (i.rendered = !0);
                  }
                }),
                  this.el.addEventListener("blurchange", this.blurChange);
              }
            },
            {
              key: "onRender",
              value: function () {
                for (var e = 0; e < this.blurIteration; e++)
                  this.renderer.setRenderTarget(this.renderTarget_01),
                    (this.material_buffer.needsUpdate = !0),
                    0 === e
                      ? ((this.uniforms_buffer.uTex.value = this.texture),
                        (this.uniforms_buffer.isFirst.value = !0))
                      : ((this.uniforms_buffer.uTex.value =
                          this.renderTarget_02.texture),
                        (this.uniforms_buffer.isFirst.value = !1)),
                    (this.uniforms_buffer.isHorizontal.value = !0),
                    this.renderer.render(this.scene_buffer, this.camera_ortho),
                    0 === e &&
                      ((this.uniforms_buffer.uTex.value =
                        this.renderTarget_02.texture),
                      (this.uniforms_buffer.isFirst.value = !1)),
                    this.renderer.setRenderTarget(this.renderTarget_02),
                    0 === e && this.renderer.clear(),
                    (this.uniforms_buffer.uTex.value =
                      this.renderTarget_01.texture),
                    (this.uniforms_buffer.isHorizontal.value = !1),
                    this.renderer.render(this.scene_buffer, this.camera_ortho);
                this.renderer.setRenderTarget(null),
                  this.renderer.render(this.scene_buffer, this.camera_ortho);
              }
            },
            {
              key: "onResize",
              value: function () {
                var e, t;
                (this.width =
                  null === (e = this.el) || void 0 === e
                    ? void 0
                    : e.parentNode.clientWidth),
                  (this.height =
                    null === (t = this.el) || void 0 === t
                      ? void 0
                      : t.parentNode.clientHeight),
                  this.rendered &&
                    (this.renderer.setSize(this.width, this.height),
                    this.renderTarget_01.setSize(this.width, this.height),
                    this.renderTarget_02.setSize(this.width, this.height),
                    (this.uniforms.uResolutionObject.value =
                      this.uniforms.uResolutionObject.value.set(
                        this.width,
                        this.height
                      )),
                    (this.uniforms_buffer.uResolutionObject.value =
                      this.uniforms_buffer.uResolutionObject.value.set(
                        this.width,
                        this.height
                      )),
                    this.mesh.scale.set(
                      this.width / this.initialWidth,
                      this.height / this.initialHeight,
                      1
                    ),
                    this.mesh_buffer.scale.set(
                      this.width / this.initialWidth,
                      this.height / this.initialHeight,
                      1
                    ),
                    (this.camera_ortho.left = this.width / -2),
                    (this.camera_ortho.right = this.width / 2),
                    (this.camera_ortho.top = this.height / 2),
                    (this.camera_ortho.bottom = this.height / -2),
                    this.camera_ortho.updateProjectionMatrix(),
                    this.onRender());
              }
            },
            {
              key: "onEnterCompleted",
              value: function () {
                this.scene.remove(this.mesh),
                  WS(t, "disposeGeometry", this, 3)([this.geometry]),
                  WS(t, "disposeMaterial", this, 3)([this.material]),
                  WS(t, "disposeGeometry", this, 3)([this.geometry_buffer]),
                  WS(t, "disposeMaterial", this, 3)([this.material_buffer]),
                  WS(t, "disposeRenderer", this, 3)([this.renderer]),
                  WS(t, "disposeRenderer", this, 3)([this.renderTarget_01]),
                  WS(t, "disposeRenderer", this, 3)([this.renderTarget_02]),
                  (this.scene = void 0),
                  (this.mesh = void 0),
                  (this.mesh_buffer = void 0),
                  (this.geometry = void 0),
                  (this.material = void 0),
                  (this.geometry_buffer = void 0),
                  (this.material_buffer = void 0),
                  (this.renderer = void 0),
                  (this.renderTarget_01 = void 0),
                  (this.renderTarget_02 = void 0);
              }
            }
          ])
        );
      })(lb)),
      nM(FS, "componentName", "FirstViewGL"),
      FS).register(),
        ((US = (function (e) {
          function t() {
            var e;
            YS(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return nM((e = ZS(this, t, [].concat(i))), "isScrollEnter", !1), e;
          }
          return (
            $S(t, e),
            KS(t, [
              {
                key: "onInit",
                value: function () {
                  var e,
                    t,
                    n,
                    i = this;
                  (this.blurSubTop =
                    null === (e = this.el) || void 0 === e
                      ? void 0
                      : e.querySelector(".blur-subTop")),
                    (this.blurSubBottom =
                      null === (t = this.el) || void 0 === t
                        ? void 0
                        : t.querySelector(".blur-subBottom")),
                    (this.delayMax = 0.5),
                    (this.delayArray = []),
                    (this.splitTarget = new Tl(
                      null === (n = this.el) || void 0 === n
                        ? void 0
                        : n.querySelector(".title-ja"),
                      { type: "chars", charsClass: "SectionTitle-splitTxt" }
                    )),
                    this.splitTarget.chars.forEach(function (e, t) {
                      i.delayArray.push(i.delayMax * Dr.utils.random(0, 1));
                    });
                }
              },
              {
                key: "onIntersect",
                value: function (e) {
                  e.isIntersecting
                    ? ((this.blurSubTop.style.willChange =
                        "transform,opacity,filter"),
                      (this.blurSubBottom.style.willChange =
                        "transform,opacity,filter"),
                      this.splitTarget.chars.forEach(function (e, t) {
                        e.style.willChange = "transform,opacity,filter";
                      }),
                      this.playScroll())
                    : (this.pauseScroll(),
                      (this.blurSubTop.style.willChange = ""),
                      (this.blurSubBottom.style.willChange = ""),
                      this.splitTarget.chars.forEach(function (e, t) {
                        e.style.willChange = "";
                      }));
                }
              },
              {
                key: "onScroll",
                value: function (e) {
                  var t = this,
                    n = e.scroll;
                  if (this.scrollStart <= n && n <= this.scrollEnd) {
                    this.isScrollEnter ||
                      ((this.isScrollEnter = !0),
                      this.windowHeight ||
                        (this.windowHeight = window.innerHeight));
                    var i = Math.min(
                        Math.max(
                          2 * ((n - this.scrollStart) / this.windowHeight - 1),
                          0
                        ),
                        1
                      ),
                      r = i,
                      a = 5 * (1 - i),
                      o = "translateZ(".concat(-12 * (1 - i), "vw)");
                    (this.subTopTween = Bo(this.blurSubTop, {
                      opacity: "".concat(r),
                      filter: "blur(".concat(a, "px)"),
                      transform: "".concat(o),
                      duration: 0.2
                    })),
                      (this.subBottomTween = Bo(this.blurSubBottom, {
                        opacity: "".concat(r),
                        filter: "blur(".concat(a, "px)"),
                        transform: "".concat(o),
                        duration: 0.2
                      })),
                      (this.splitTween = Bo(this.splitTarget.chars, {
                        opacity: function (e, n, r) {
                          return Math.min(
                            Math.max(2 * i - t.delayArray[e], 0),
                            1
                          );
                        },
                        filter: function (e, n, r) {
                          return "blur(".concat(
                            5 * Math.max(2 * (1 - i) - t.delayArray[e], 0),
                            "px)"
                          );
                        },
                        transform: function (e, n, r) {
                          return "translateZ(".concat(
                            -12 * Math.max(2 * (1 - i) - t.delayArray[e], 0),
                            "vw)"
                          );
                        },
                        duration: 0.2
                      }));
                  } else
                    this.isScrollEnter &&
                      ((this.isScrollEnter = !1),
                      this.subTopTween &&
                        (this.subTopTween.kill(),
                        this.subBottomTween.kill(),
                        this.splitTween.kill(),
                        (this.subTopTween = void 0),
                        (this.subBottomTween = void 0),
                        (this.splitTween = void 0)),
                      n - this.scrollStart <= 0
                        ? (Dr.set(this.blurSubTop, {
                            opacity: 0,
                            filter: "blur(5px)",
                            transform: "translateZ(-12vw)"
                          }),
                          Dr.set(this.blurSubBottom, {
                            opacity: 0,
                            filter: "blur(5px)",
                            transform: "translateZ(-12vw)"
                          }),
                          Dr.set(this.splitTarget.chars, {
                            opacity: 0,
                            filter: "blur(5px)",
                            transform: "translateZ(-12vw)"
                          }))
                        : (Dr.set(this.blurSubTop, {
                            opacity: 1,
                            filter: "blur(0px)",
                            transform: "translateZ(0)"
                          }),
                          Dr.set(this.blurSubBottom, {
                            opacity: 1,
                            filter: "blur(0px)",
                            transform: "translateZ(0)"
                          }),
                          Dr.set(this.splitTarget.chars, {
                            opacity: 1,
                            filter: "blur(0px)",
                            transform: "translateZ(0)"
                          })));
                }
              },
              {
                key: "onResize",
                value: function (e) {
                  e.windowWidth;
                  var t = e.windowHeight,
                    n = this.scrollY;
                  this.el.style.position = "static";
                  var i = this.el.getBoundingClientRect(),
                    r = i.top,
                    a = i.bottom;
                  (this.el.style.position = ""),
                    (this.windowHeight = t),
                    (this.scrollStart = r + n - t),
                    (this.scrollEnd = a + n),
                    (this.scrollDistance = this.scrollEnd - this.scrollStart);
                }
              }
            ])
          );
        })(Zs)),
        nM(US, "componentName", "SecondView"),
        nM(US, "selectorRoot", "[data-parallax-sv]"),
        US).register(),
        ((BS = (function (e) {
          function t() {
            var e;
            YS(this, t);
            for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)
              i[r] = arguments[r];
            return (
              nM((e = ZS(this, t, [].concat(i))), "stats", void 0),
              nM(e, "gl", void 0),
              nM(e, "isInit", !1),
              nM(e, "prevScroll", 0),
              nM(e, "sceneChange", function (t) {
                var n = t.detail.progress();
                e.nowScene !== n &&
                  (requestAnimationFrame(function () {
                    var t, i;
                    null !== (t = e.stats) && void 0 !== t && t.begin(),
                      e.gl.progress(n, n - e.nowScene),
                      e.gl.render(),
                      null === (i = e.stats) || void 0 === i || i.end();
                  }),
                  (e.nowScene = n));
              }),
              e
            );
          }
          return (
            $S(t, e),
            KS(t, [
              {
                key: "onInit",
                value: function () {
                  WS(
                    t,
                    "onInit",
                    this,
                    3
                  )([{ autoClear: !1, pixelRatioMax: 1.5, alpha: !0 }]),
                    (this.nowScene = 0),
                    this.initGl();
                }
              },
              {
                key: "initGl",
                value: function () {
                  this.isInit ||
                    ((this.isInit = !0),
                    (this.gl = cS.create(this.el, {
                      renderer: this.renderer,
                      camera: this.camera,
                      width: this.width,
                      height: this.height,
                      pixelRatio: this.pixelRatio,
                      isLowerPage: !0
                    })),
                    this.emitSelfResize(),
                    this.el.addEventListener("scenechange", this.sceneChange),
                    this.gl.render());
                }
              },
              {
                key: "onLoadDone",
                value: function () {
                  this.gl.start(), this.gl.render();
                }
              },
              {
                key: "onResize",
                value: function () {
                  var e, n;
                  WS(t, "onResize", this, 3)([]),
                    null !== (e = this.gl) &&
                      void 0 !== e &&
                      e.resize(this.width, this.height, this.pixelRatio),
                    null === (n = this.gl) || void 0 === n || n.render();
                }
              },
              {
                key: "onScroll",
                value: function (e) {
                  e.scroll;
                }
              }
            ])
          );
        })(lb)),
        nM(BS, "componentName", "ValueGL"),
        nM(BS, "isLocal", !0),
        nM(BS, "isDisableAutoPlayScroll", !0),
        BS).register(),
        ((zS = (function (e) {
          function t() {
            return YS(this, t), ZS(this, t, arguments);
          }
          return (
            $S(t, e),
            KS(t, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  (this.stickyContent = this.el.querySelector(".plan-list")),
                    (this.list_01 = this.el.querySelector(".plan-01")),
                    (this.list_02 = this.el.querySelector(".plan-02")),
                    (this.list_03 = this.el.querySelector(".plan-03")),
                    (this.list_04 = this.el.querySelector(".plan-04")),
                    this.addIntersectionObserver({
                      el: this.stickyContent,
                      callback: function (t, n) {
                        t.isIntersecting
                          ? ((e.list_01.style.willChange = "transform"),
                            (e.list_02.style.willChange = "transform"),
                            (e.list_03.style.willChange = "transform"),
                            (e.list_04.style.willChange = "transform"),
                            e.playScroll())
                          : (e.pauseScroll(),
                            (e.list_01.style.willChange = ""),
                            (e.list_02.style.willChange = ""),
                            (e.list_03.style.willChange = ""),
                            (e.list_04.style.willChange = ""));
                      },
                      param: { rootMargin: "0%" },
                      once: !1
                    });
                }
              },
              {
                key: "onScroll",
                value: function (e) {
                  var t = e.scroll;
                  if (this.scrollStart <= t && t <= this.scrollEnd) {
                    this.isScrollEnter ||
                      ((this.isScrollEnter = !0),
                      this.windowHeight ||
                        (this.windowHeight = window.innerHeight));
                    var n = (t - this.scrollStart) / this.windowHeight - 1;
                    this.isSp ||
                      (!this.list_01.classList.contains("slide") && n >= 0.2
                        ? this.list_01.classList.add("slide")
                        : this.list_01.classList.contains("slide") &&
                          n < 0.2 &&
                          this.list_01.classList.remove("slide"),
                      !this.list_02.classList.contains("slide") && n >= 0.4
                        ? this.list_02.classList.add("slide")
                        : this.list_02.classList.contains("slide") &&
                          n < 0.4 &&
                          this.list_02.classList.remove("slide"),
                      !this.list_03.classList.contains("slide") && n >= 0.6
                        ? this.list_03.classList.add("slide")
                        : this.list_03.classList.contains("slide") &&
                          n < 0.6 &&
                          this.list_03.classList.remove("slide"),
                      !this.list_04.classList.contains("slide") && n >= 0.8
                        ? this.list_04.classList.add("slide")
                        : this.list_04.classList.contains("slide") &&
                          n < 0.8 &&
                          this.list_04.classList.remove("slide"));
                  } else
                    this.isScrollEnter &&
                      ((this.isScrollEnter = !1),
                      (this.overPosition =
                        t < this.scrollStart ? "top" : "bottom"),
                      this.setOverStyle());
                }
              },
              {
                key: "setOverStyle",
                value: function () {
                  "top" === this.overPosition
                    ? this.isSp ||
                      (this.list_01.classList.remove("slide"),
                      this.list_02.classList.remove("slide"),
                      this.list_03.classList.remove("slide"),
                      this.list_04.classList.remove("slide"))
                    : this.isSp ||
                      (this.list_01.classList.add("slide"),
                      this.list_02.classList.add("slide"),
                      this.list_03.classList.add("slide"),
                      this.list_04.classList.add("slide"));
                }
              },
              {
                key: "onResize",
                value: function (e) {
                  var t = e.windowWidth,
                    n = e.windowHeight,
                    i = this.scrollY;
                  this.stickyContent.style.position = "static";
                  var r = this.stickyContent.getBoundingClientRect(),
                    a = r.top,
                    o = r.bottom;
                  (this.stickyContent.style.position = ""),
                    (this.scrollStart = a + i - n),
                    (this.scrollEnd = o + i),
                    (this.scrollDistance = this.scrollEnd - this.scrollStart),
                    (this.overPosition =
                      i < this.scrollStart ? "top" : "bottom"),
                    (i < this.scrollStart || i > this.scrollEnd) &&
                      this.setOverStyle(!0),
                    (this.windowWidth = t),
                    (this.windowHeight = n);
                }
              }
            ])
          );
        })(Zs)),
        nM(zS, "componentName", "Plan"),
        zS).register(),
        ((VS = (function (e) {
          function t() {
            return YS(this, t), ZS(this, t, arguments);
          }
          return (
            $S(t, e),
            KS(t, [
              {
                key: "onInit",
                value: function () {
                  var e = this;
                  (this.movieParent = this.el.querySelector(".image")),
                    (this.video = this.el.querySelector("video")),
                    (this.videoComponent = new Nl(this.video)),
                    (this.isComingsoon = !1),
                    this.addIntersectionObserver({
                      el: this.movieParent,
                      callback: function (t, n) {
                        var i = t.isIntersecting;
                        i && e.isSp
                          ? e.playVideo()
                          : !i && e.isSp && e.pauseVideo();
                      },
                      param: { rootMargin: "-40% 0%" },
                      once: !1
                    }),
                    this.on("activeEvPlanComingsoon", function () {
                      (e.isComingsoon = !0),
                        e.el.classList.add("-comingsoon"),
                        e.pauseVideo();
                    }),
                    this.on("deactiveEvPlanComingsoon", function () {
                      (e.isComingsoon = !1),
                        e.el.classList.remove("-comingsoon");
                    });
                }
              },
              {
                key: "onMouseenter",
                value: function () {
                  this.playVideo();
                }
              },
              {
                key: "onMouseleave",
                value: function () {
                  this.pauseVideo();
                }
              },
              {
                key: "playVideo",
                value: function () {
                  (this.isComingsoon && this.isSp) ||
                    (this.videoComponent.pause(),
                    (this.video.loop = "loop"),
                    (this.video.currentTime = 0),
                    this.videoComponent.play(),
                    this.refs.image.classList.add("-active"));
                }
              },
              {
                key: "pauseVideo",
                value: function () {
                  (this.video.loop = ""),
                    this.refs.image.classList.remove("-active");
                }
              }
            ])
          );
        })(GS)),
        nM(VS, "componentName", "PlanItem"),
        VS).register(),
        ((HS = (function (e) {
          function t() {
            return YS(this, t), ZS(this, t, arguments);
          }
          return (
            $S(t, e),
            KS(t, [
              {
                key: "onInit",
                value: function () {
                  var e,
                    t = this;
                  (e = this.isSp ? "0% 0% -45% 0%" : "0% 0% -15% 0%"),
                    this.addIntersectionObserver({
                      el: this.el,
                      callback: function (e, n) {
                        var i, r;
                        e.isIntersecting
                          ? (null !== (i = t.el) &&
                              void 0 !== i &&
                              i.classList.add("-active"),
                            Ha.emit("activeEvPlanComingsoon"))
                          : (null !== (r = t.el) &&
                              void 0 !== r &&
                              r.classList.remove("-active"),
                            Ha.emit("deactiveEvPlanComingsoon"));
                      },
                      param: { rootMargin: e }
                    });
                }
              }
            ])
          );
        })(Zs)),
        nM(HS, "componentName", "PlanComingsoon"),
        HS).register();
    })();
})();
